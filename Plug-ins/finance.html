<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutor Profile - Payments and Billing</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/finance.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 transition-colors duration-300" data-theme="light">
    <!-- Main Button Trigger -->
    <div class="container mx-auto p-8">
        <button id="manage-finance-btn" class="finance-btn-primary">
            <i class="fas fa-wallet mr-2"></i>
            Manage Finances
        </button>
    </div>

    <!-- Manage Finances Modal -->
    <div id="manageFinanceModal" class="modal">
        <div class="modal-container">
            <!-- Vertical Tabs -->
            <div class="tabs-sidebar">
                <nav class="space-y-2">
                    <button class="tab-btn active" data-tab="payment-details">
                        <i class="fas fa-credit-card mr-2"></i>Payment Details
                    </button>
                    <button class="tab-btn" data-tab="verification">
                        <i class="fas fa-user-check mr-2"></i>Verification
                    </button>
                    <button class="tab-btn" data-tab="subscription">
                        <i class="fas fa-crown mr-2"></i>Subscription
                    </button>
                    <button class="tab-btn" data-tab="set-package">
                        <i class="fas fa-box mr-2"></i>Set Package
                    </button>
                    <button class="tab-btn" data-tab="view-package">
                        <i class="fas fa-eye mr-2"></i>View Package
                    </button>
                    <button class="tab-btn" data-tab="income">
                        <i class="fas fa-coins mr-2"></i>Income
                    </button>
                    <button class="tab-btn" data-tab="bills">
                        <i class="fas fa-file-invoice mr-2"></i>Bills
                    </button>
                    <button class="tab-btn" data-tab="analytics">
                        <i class="fas fa-chart-line mr-2"></i>Analytics
                    </button>
                    <button class="tab-btn text-red-500" data-tab="leave-astegni">
                        <i class="fas fa-sign-out-alt mr-2"></i>Leave Astegni
                    </button>
                </nav>
            </div>

            <!-- Tab Content -->
            <div class="tab-content-area">
                <!-- Payment Details -->
                <div id="payment-details" class="tab-content">
                    <div class="tab-header">
                        <h3 class="tab-title">Payment Details</h3>
                        <p class="tab-subtitle">Configure your payment information</p>
                    </div>
                    <form id="paymentDetailsForm" class="enhanced-form">
                        <div class="form-group">
                            <label class="form-label">Bank Name</label>
                            <select id="bankName" class="form-select">
                                <option value="">Select a bank</option>
                                <option value="cbe">Commercial Bank of Ethiopia</option>
                                <option value="awash">Awash International Bank</option>
                                <option value="dashen">Dashen Bank</option>
                                <option value="abyssinia">Bank of Abyssinia</option>
                                <option value="wegagen">Wegagen Bank</option>
                                <option value="hibret">Hibret Bank</option>
                                <option value="nib">Nib International Bank</option>
                                <option value="coop">Cooperative Bank of Oromia</option>
                                <option value="zemen">Zemen Bank</option>
                                <option value="telebirr">Tele Birr</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Account Number</label>
                            <input id="accountNumber" type="text" class="form-input" placeholder="Enter account number">
                        </div>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save mr-2"></i>Save Details
                        </button>
                    </form>
                </div>

                <!-- Verification -->
                <div id="verification" class="tab-content hidden">
                    <div class="tab-header">
                        <h3 class="tab-title">Verification</h3>
                        <p class="tab-subtitle">Verify your tutor profile</p>
                    </div>
                    <div class="verification-card">
                        <div class="verification-header">
                            <h4 class="text-lg font-semibold">Tutor Verification Status</h4>
                            <span id="verification-badge" class="status-badge status-pending">
                                <i class="fas fa-clock mr-1"></i>Not Verified
                            </span>
                        </div>
                        <div class="verification-body">
                            <div class="verification-price">
                                <span class="price-label">Verification Fee:</span>
                                <span class="price-amount">990 ETB</span>
                            </div>
                            <div class="profile-details">
                                <div class="detail-row">
                                    <span class="detail-label"><i class="fas fa-user mr-2"></i>Name:</span>
                                    <span id="tutor-name" class="detail-value">Not set</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label"><i class="fas fa-venus-mars mr-2"></i>Gender:</span>
                                    <span id="tutor-gender" class="detail-value">Not set</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label"><i class="fas fa-phone mr-2"></i>Phone:</span>
                                    <span id="tutor-phone" class="detail-value">Not set</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label"><i class="fas fa-envelope mr-2"></i>Email:</span>
                                    <span id="tutor-email" class="detail-value">Not set</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label"><i class="fas fa-user-edit mr-2"></i>Bio:</span>
                                    <span id="tutor-bio" class="detail-value">Not set</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label"><i class="fas fa-quote-left mr-2"></i>Quote:</span>
                                    <span id="tutor-quote" class="detail-value">Not set</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label"><i class="fas fa-map-marker-alt mr-2"></i>Address:</span>
                                    <span id="tutor-address" class="detail-value">Not set</span>
                                </div>
                                <div class="detail-row" id="teaches-at-row" style="display: none;">
                                    <span class="detail-label"><i class="fas fa-graduation-cap mr-2"></i>Teaches at:</span>
                                    <span id="tutor-school" class="detail-value">Not set</span>
                                </div>
                                <div class="detail-row" id="business-license-row" style="display: none;">
                                    <span class="detail-label"><i class="fas fa-file-contract mr-2"></i>Business License:</span>
                                    <span id="business-license-status" class="detail-value">Not uploaded</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label"><i class="fas fa-shield-alt mr-2"></i>Status:</span>
                                    <span id="tutor-verification-status" class="detail-value">Not Verified</span>
                                </div>
                            </div>
                            <div class="verification-actions">
                                <button id="edit-verify-profile-btn" class="btn-secondary">
                                    <i class="fas fa-edit mr-2"></i>Edit Profile
                                </button>
                                <button id="get-verified-btn" class="btn-primary">
                                    <i class="fas fa-check-circle mr-2"></i>Get Verified
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Subscription -->
                <div id="subscription" class="tab-content hidden">
                    <div class="tab-header">
                        <h3 class="tab-title">Subscription Plans</h3>
                        <p class="tab-subtitle">Choose the best plan for your needs</p>
                    </div>
                    
                    <!-- Standard Subscription -->
                    <div class="subscription-section">
                        <h4 class="section-title">
                            <i class="fas fa-star mr-2"></i>Standard Subscription
                        </h4>
                        <div class="subscription-grid">
                            <div class="subscription-card">
                                <div class="subscription-badge">Basic</div>
                                <h5 class="subscription-title">1 Month</h5>
                                <div class="subscription-price">
                                    <span class="price">390 ETB</span>
                                </div>
                                <ul class="subscription-features">
                                    <li><i class="fas fa-check"></i>Standard Page Visibility</li>
                                    <li><i class="fas fa-check"></i>Standard Video Visibility</li>
                                </ul>
                                <div class="subscription-actions">
                                    <button class="subscribe-btn" data-price="390" data-type="page" data-duration="1-month" data-visibility="Standard">
                                        Subscribe
                                    </button>
                                    <button class="cancel-btn hidden" data-price="390" data-type="page" data-duration="1-month">
                                        Cancel
                                    </button>
                                </div>
                            </div>

                            <div class="subscription-card">
                                <h5 class="subscription-title">3 Months</h5>
                                <div class="subscription-price">
                                    <span class="old-price">1170 ETB</span>
                                    <span class="price">1000 ETB</span>
                                </div>
                                <ul class="subscription-features">
                                    <li><i class="fas fa-check"></i>Enhanced Page Visibility</li>
                                    <li><i class="fas fa-check"></i>Enhanced Video Visibility</li>
                                </ul>
                                <div class="subscription-actions">
                                    <button class="subscribe-btn" data-price="1000" data-type="page" data-duration="3-months" data-visibility="Enhanced">
                                        Subscribe
                                    </button>
                                    <button class="cancel-btn hidden" data-price="1000" data-type="page" data-duration="3-months">
                                        Cancel
                                    </button>
                                </div>
                            </div>

                            <div class="subscription-card">
                                <h5 class="subscription-title">6 Months</h5>
                                <div class="subscription-price">
                                    <span class="old-price">2360 ETB</span>
                                    <span class="price">2000 ETB</span>
                                </div>
                                <ul class="subscription-features">
                                    <li><i class="fas fa-check"></i>Premium Page Visibility</li>
                                    <li><i class="fas fa-check"></i>Premium Video Visibility</li>
                                </ul>
                                <div class="subscription-actions">
                                    <button class="subscribe-btn" data-price="2100" data-type="page" data-duration="6-months" data-visibility="Premium">
                                        Subscribe
                                    </button>
                                    <button class="cancel-btn hidden" data-price="2100" data-type="page" data-duration="6-months">
                                        Cancel
                                    </button>
                                </div>
                            </div>

                            <div class="subscription-card featured">
                                <div class="subscription-badge">Best Value</div>
                                <h5 class="subscription-title">12 Months</h5>
                                <div class="subscription-price">
                                    <span class="old-price">4680 ETB</span>
                                    <span class="price">4000 ETB</span>
                                </div>
                                <ul class="subscription-features">
                                    <li><i class="fas fa-check"></i>Top Tier Page Visibility</li>
                                    <li><i class="fas fa-check"></i>Top Tier Video Visibility</li>
                                </ul>
                                <div class="subscription-actions">
                                    <button class="subscribe-btn" data-price="4000" data-type="page" data-duration="12-months" data-visibility="Top Tier">
                                        Subscribe
                                    </button>
                                    <button class="cancel-btn hidden" data-price="4000" data-type="page" data-duration="12-months">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Premium Subscription -->
                    <div class="subscription-section">
                        <h4 class="section-title">
                            <i class="fas fa-crown mr-2"></i>Premium Subscription
                        </h4>
                        <div class="subscription-grid">
                            <div class="subscription-card">
                                <h5 class="subscription-title">24 Hours</h5>
                                <div class="subscription-price">
                                    <span class="price">300 ETB</span>
                                </div>
                                <ul class="subscription-features">
                                    <li><i class="fas fa-check"></i>Boosted Page Visibility</li>
                                    <li><i class="fas fa-check"></i>Boosted Video Visibility</li>
                                </ul>
                                <div class="subscription-actions">
                                    <button class="subscribe-btn" data-price="300" data-type="ad" data-duration="24-hours" data-visibility="Boosted">
                                        Subscribe
                                    </button>
                                    <button class="cancel-btn hidden" data-price="300" data-type="ad" data-duration="24-hours">
                                        Cancel
                                    </button>
                                </div>
                            </div>

                            <div class="subscription-card">
                                <h5 class="subscription-title">3 Days</h5>
                                <div class="subscription-price">
                                    <span class="old-price">900 ETB</span>
                                    <span class="price">825 ETB</span>
                                </div>
                                <ul class="subscription-features">
                                    <li><i class="fas fa-check"></i>Boosted Page Visibility</li>
                                    <li><i class="fas fa-check"></i>Boosted Video Visibility</li>
                                </ul>
                                <div class="subscription-actions">
                                    <button class="subscribe-btn" data-price="500" data-type="ad" data-duration="3-days" data-visibility="Boosted">
                                        Subscribe
                                    </button>
                                    <button class="cancel-btn hidden" data-price="500" data-type="ad" data-duration="3-days">
                                        Cancel
                                    </button>
                                </div>
                            </div>

                            <div class="subscription-card">
                                <h5 class="subscription-title">1 Week</h5>
                                <div class="subscription-price">
                                    <span class="old-price">2,100 ETB</span>
                                    <span class="price">1,750 ETB</span>
                                </div>
                                <ul class="subscription-features">
                                    <li><i class="fas fa-check"></i>Boosted Page Visibility</li>
                                    <li><i class="fas fa-check"></i>Boosted Video Visibility</li>
                                </ul>
                                <div class="subscription-actions">
                                    <button class="subscribe-btn" data-price="700" data-type="ad" data-duration="1-week" data-visibility="Boosted">
                                        Subscribe
                                    </button>
                                    <button class="cancel-btn hidden" data-price="700" data-type="ad" data-duration="1-week">
                                        Cancel
                                    </button>
                                </div>
                            </div>

                            <div class="subscription-card">
                                <h5 class="subscription-title">2 Weeks</h5>
                                <div class="subscription-price">
                                    <span class="old-price">4,200 ETB</span>
                                    <span class="price">3,080 ETB</span>
                                </div>
                                <ul class="subscription-features">
                                    <li><i class="fas fa-check"></i>Boosted Page Visibility</li>
                                    <li><i class="fas fa-check"></i>Boosted Video Visibility</li>
                                </ul>
                                <div class="subscription-actions">
                                    <button class="subscribe-btn" data-price="900" data-type="ad" data-duration="2-weeks" data-visibility="Boosted">
                                        Subscribe
                                    </button>
                                    <button class="cancel-btn hidden" data-price="900" data-type="ad" data-duration="2-weeks">
                                        Cancel
                                    </button>
                                </div>
                            </div>

                            <div class="subscription-card">
                                <h5 class="subscription-title">1 Month</h5>
                                <div class="subscription-price">
                                    <span class="old-price">8,400 ETB</span>
                                    <span class="price">5,600 ETB</span>
                                </div>
                                <ul class="subscription-features">
                                    <li><i class="fas fa-check"></i>Premium Page Visibility</li>
                                    <li><i class="fas fa-check"></i>Premium Video Visibility</li>
                                </ul>
                                <div class="subscription-actions">
                                    <button class="subscribe-btn" data-price="1200" data-type="ad" data-duration="1-month" data-visibility="Premium">
                                        Subscribe
                                    </button>
                                    <button class="cancel-btn hidden" data-price="1200" data-type="ad" data-duration="1-month">
                                        Cancel
                                    </button>
                                </div>
                            </div>

                            <div class="subscription-card featured">
                                <div class="subscription-badge">Recommended</div>
                                <h5 class="subscription-title">3 Months</h5>
                                <div class="subscription-price">
                                    <span class="old-price">25,200 ETB</span>
                                    <span class="price">14,700 ETB</span>
                                </div>
                                <ul class="subscription-features">
                                    <li><i class="fas fa-check"></i>Premium Page Visibility</li>
                                    <li><i class="fas fa-check"></i>Premium Video Visibility</li>
                                </ul>
                                <div class="subscription-actions">
                                    <button class="subscribe-btn" data-price="3200" data-type="ad" data-duration="3-months" data-visibility="Premium">
                                        Subscribe
                                    </button>
                                    <button class="cancel-btn hidden" data-price="3200" data-type="ad" data-duration="3-months">
                                        Cancel
                                    </button>
                                </div>
                            </div>

                            <div class="subscription-card">
                                <h5 class="subscription-title">6 Months</h5>
                                <div class="subscription-price">
                                    <span class="old-price">50,400 ETB</span>
                                    <span class="price">25,200 ETB</span>
                                </div>
                                <ul class="subscription-features">
                                    <li><i class="fas fa-check"></i>Premium Page Visibility</li>
                                    <li><i class="fas fa-check"></i>Premium Video Visibility</li>
                                </ul>
                                <div class="subscription-actions">
                                    <button class="subscribe-btn" data-price="7000" data-type="ad" data-duration="6-months" data-visibility="Premium">
                                        Subscribe
                                    </button>
                                    <button class="cancel-btn hidden" data-price="7000" data-type="ad" data-duration="6-months">
                                        Cancel
                                    </button>
                                </div>
                            </div>

                            <div class="subscription-card">
                                <h5 class="subscription-title">12 Months</h5>
                                <div class="subscription-price">
                                    <span class="old-price">100,800 ETB</span>
                                    <span class="price">40,320 ETB</span>
                                </div>
                                <ul class="subscription-features">
                                    <li><i class="fas fa-check"></i>Top Tier Page Visibility</li>
                                    <li><i class="fas fa-check"></i>Top Tier Video Visibility</li>
                                </ul>
                                <div class="subscription-actions">
                                    <button class="subscribe-btn" data-price="12000" data-type="ad" data-duration="12-months" data-visibility="Top Tier">
                                        Subscribe
                                    </button>
                                    <button class="cancel-btn hidden" data-price="12000" data-type="ad" data-duration="12-months">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Set Package -->
                <div id="set-package" class="tab-content hidden">
                    <div class="tab-header">
                        <h3 class="tab-title">Set Package</h3>
                        <p class="tab-subtitle">Configure your course packages and pricing</p>
                    </div>
                    <form id="setPackageForm" class="enhanced-form">
                        <div id="coursesContainer" class="space-y-4">
                            <!-- Package Entry Template -->
                            <div class="course-entry">
                                <div class="course-header">
                                    <h4 class="course-title"><i class="fas fa-box mr-2"></i>Package</h4>
                                    <button type="button" class="remove-course-btn">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="course-grid">
                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-plus-circle mr-1"></i>Course Names (Add multiple courses)
                                        </label>
                                        <div class="courses-list-container">
                                            <div class="course-name-group">
                                                <input type="text" class="course-name form-input" placeholder="Enter course name" required>
                                                <button type="button" class="add-course-to-package btn-icon">
                                                    <i class="fas fa-plus"></i>
                                                </button>
                                            </div>
                                            <div class="added-courses-list"></div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Payment Frequency</label>
                                        <select class="payment-frequency form-select" required>
                                            <option value="2-weeks">2 Weeks</option>
                                            <option value="monthly">Monthly</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Hourly Rate (ETB)</label>
                                        <input type="number" class="hourly-rate form-input" placeholder="Enter hourly rate" min="0" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Discounts (%)</label>
                                        <div class="discount-grid">
                                            <input type="number" class="discount-3months form-input" placeholder="3 Months" min="0" max="100" value="0">
                                            <input type="number" class="discount-6months form-input" placeholder="6 Months" min="0" max="100" value="0">
                                            <input type="number" class="discount-yearly form-input" placeholder="Yearly" min="0" max="100" value="0">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button type="button" id="addCourseBtn" class="btn-add-course">
                            <i class="fas fa-plus mr-2"></i>Add Package
                        </button>
                        <div class="form-group">
                            <label class="form-label">Bank Name</label>
                            <select id="updateBankName" class="form-select">
                                <option value="">Select a bank</option>
                                <option value="cbe">Commercial Bank of Ethiopia</option>
                                <option value="awash">Awash International Bank</option>
                                <option value="dashen">Dashen Bank</option>
                                <option value="abyssinia">Bank of Abyssinia</option>
                                <option value="wegagen">Wegagen Bank</option>
                                <option value="hibret">Hibret Bank</option>
                                <option value="nib">Nib International Bank</option>
                                <option value="coop">Cooperative Bank of Oromia</option>
                                <option value="zemen">Zemen Bank</option>
                                <option value="telebirr">Tele Birr</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Account Number</label>
                            <input id="updateAccountNumber" type="text" class="form-input" placeholder="Enter account number">
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input id="samePaymentDetails" type="checkbox" class="form-checkbox">
                                <span>Use same payment details for receiving payments</span>
                            </label>
                        </div>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-sync-alt mr-2"></i>Update Package
                        </button>
                    </form>
                </div>

                <!-- View Package -->
                <div id="view-package" class="tab-content hidden">
                    <div class="tab-header">
                        <h3 class="tab-title">View Package</h3>
                        <p class="tab-subtitle">Review your course packages and calculate fees</p>
                    </div>
                    <div class="calculation-section">
                        <div class="calc-grid">
                            <div class="form-group">
                                <label class="form-label">Days per Week</label>
                                <input type="number" id="days-per-week" class="form-input" placeholder="Enter days per week" min="1" max="7" value="3">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Hours per Day</label>
                                <input type="number" id="hours-per-day" class="form-input" placeholder="Enter hours per day" min="1" max="24" value="1">
                            </div>
                        </div>
                        <button id="calculate-fees" class="btn-primary">
                            <i class="fas fa-calculator mr-2"></i>Calculate Fees
                        </button>
                    </div>
                    <div id="coursesDisplay" class="courses-display">
                        <p class="no-courses-message">No courses have been set.</p>
                    </div>
                    <div class="payment-details-display">
                        <h4 class="section-subtitle"><i class="fas fa-university mr-2"></i>Payment Details</h4>
                        <div class="payment-info">
                            <div class="info-row">
                                <span class="info-label">Bank Name:</span>
                                <span id="displayBankName" class="info-value">Not set</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Account Number:</span>
                                <span id="displayAccountNumber" class="info-value">Not set</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Income -->
                <div id="income" class="tab-content hidden">
                    <div class="tab-header">
                        <h3 class="tab-title">Generated Income</h3>
                        <p class="tab-subtitle">Track your earnings and customer payments</p>
                    </div>
                    <div class="income-header">
                        <div class="income-total">
                            <span id="totalIncome" class="total-amount">Total Income: ★★★</span>
                            <button id="toggleIncome" class="toggle-btn">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    <div id="incomeDetails" class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Customer</th>
                                    <th>Type</th>
                                    <th>Service</th>
                                    <th>Amount</th>
                                    <th>Subscription</th>
                                    <th>Pending</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>John Doe</td>
                                    <td><span class="badge badge-parent">Parent</span></td>
                                    <td>Tutoring</td>
                                    <td class="amount">4000 ETB</td>
                                    <td>Page (6 Months)</td>
                                    <td class="amount">0 ETB</td>
                                    <td>
                                        <div class="table-actions">
                                            <button class="btn-action"><i class="fas fa-user"></i></button>
                                            <button class="btn-action"><i class="fas fa-file-invoice"></i></button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Jane Smith</td>
                                    <td><span class="badge badge-student">Student</span></td>
                                    <td>Tutoring</td>
                                    <td class="amount">3500 ETB</td>
                                    <td>Premium (3 Months)</td>
                                    <td class="amount">0 ETB</td>
                                    <td>
                                        <div class="table-actions">
                                            <button class="btn-action"><i class="fas fa-user"></i></button>
                                            <button class="btn-action"><i class="fas fa-file-invoice"></i></button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="btn-primary mt-4">
                            <i class="fas fa-file-invoice-dollar mr-2"></i>Generate Invoice for All
                        </button>
                    </div>
                </div>

                <!-- Bills -->
                <div id="bills" class="tab-content hidden">
                    <div class="tab-header">
                        <h3 class="tab-title">Bills</h3>
                        <p class="tab-subtitle">Manage your payments and invoices</p>
                    </div>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Favorite</th>
                                    <th>Payer</th>
                                    <th>Type</th>
                                    <th>Bill Type</th>
                                    <th>Amount</th>
                                    <th>To</th>
                                    <th>Pending</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <button class="btn-favorite">
                                            <i class="far fa-star"></i>
                                        </button>
                                    </td>
                                    <td>Tutor Inc.</td>
                                    <td><span class="badge badge-company">Company</span></td>
                                    <td>Subscription</td>
                                    <td class="amount">500 ETB</td>
                                    <td>Platform</td>
                                    <td class="amount">0 ETB</td>
                                    <td>2025-07-01</td>
                                    <td>
                                        <div class="table-actions">
                                            <button class="btn-action"><i class="fas fa-user"></i></button>
                                            <button class="btn-action"><i class="fas fa-download"></i></button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <button class="btn-favorite active">
                                            <i class="fas fa-star"></i>
                                        </button>
                                    </td>
                                    <td>Ad Corp</td>
                                    <td><span class="badge badge-company">Company</span></td>
                                    <td>Advertisement</td>
                                    <td class="amount">750 ETB</td>
                                    <td>Ad Platform</td>
                                    <td class="amount pending">250 ETB</td>
                                    <td>2025-07-10</td>
                                    <td>
                                        <div class="table-actions">
                                            <button class="btn-action"><i class="fas fa-user"></i></button>
                                            <button class="btn-action"><i class="fas fa-download"></i></button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Analytics -->
                <div id="analytics" class="tab-content hidden">
                    <div class="tab-header">
                        <h3 class="tab-title">Analytics</h3>
                        <p class="tab-subtitle">Income and payment trends</p>
                    </div>
                    <div class="analytics-controls">
                        <select id="analyticsPeriod" class="form-select">
                            <option value="1-day">1 Day</option>
                            <option value="3-days">3 Days</option>
                            <option value="1-week">1 Week</option>
                            <option value="2-weeks">2 Weeks</option>
                            <option value="1-month" selected>1 Month</option>
                            <option value="3-months">3 Months</option>
                            <option value="6-months">6 Months</option>
                            <option value="1-year">1 Year</option>
                        </select>
                    </div>
                    <div class="analytics-summary">
                        <div class="stat-card">
                            <div class="stat-icon income">
                                <i class="fas fa-arrow-up"></i>
                            </div>
                            <div class="stat-content">
                                <span class="stat-label">Total Income</span>
                                <span class="stat-value">7500 ETB</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon expense">
                                <i class="fas fa-arrow-down"></i>
                            </div>
                            <div class="stat-content">
                                <span class="stat-label">Total Payments</span>
                                <span class="stat-value">3000 ETB</span>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="analyticsChart"></canvas>
                    </div>
                </div>

                <!-- Leave Astegni -->
                <div id="leave-astegni" class="tab-content hidden">
                    <div class="tab-header">
                        <h3 class="tab-title text-red-600">Leave Astegni</h3>
                        <p class="tab-subtitle">Permanently deactivate your account</p>
                    </div>
                    <div class="warning-card">
                        <i class="fas fa-exclamation-triangle warning-icon"></i>
                        <p class="warning-text">Are you sure you want to leave Astegni? This action will unverify and deactivate your account permanently.</p>
                        <button id="leaveAstegniBtn" class="btn-danger">
                            <i class="fas fa-sign-out-alt mr-2"></i>Confirm Leave
                        </button>
                    </div>
                </div>

                <!-- Close Modal Button -->
                <button id="closeModal" class="btn-close-modal">
                    <i class="fas fa-times mr-2"></i>Close
                </button>
            </div>
        </div>
    </div>

    <!-- All Other Modals (Same structure, enhanced styling) -->
    <!-- Switch to Plan Modal -->
    <div id="manageSubscriptionModal" class="modal">
        <div class="modal-content">
            <h3 class="modal-title">Switch to Plan</h3>
            <div id="subscriptionOptions" class="space-y-4"></div>
            <button id="closeManageModal" class="btn-secondary mt-4">Close</button>
        </div>
    </div>

    <!-- Unsubscribe Modal: Step 1 (Reasons) -->
    <div id="unsubscribeModal1" class="modal">
        <div class="modal-content">
            <h2 class="modal-title">Why did you come to this decision? 😢</h2>
            <div class="checkbox-group">
                <label class="checkbox-label">
                    <input type="checkbox" name="unsubscribeReason" value="notUseful" class="form-checkbox">
                    <span>Service not useful</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" name="unsubscribeReason" value="tooExpensive" class="form-checkbox">
                    <span>Too expensive</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" name="unsubscribeReason" value="foundAlternative" class="form-checkbox">
                    <span>Found an alternative</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" name="unsubscribeReason" value="privacyConcerns" class="form-checkbox">
                    <span>Privacy concerns</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" name="unsubscribeReason" value="notSatisfied" class="form-checkbox">
                    <span>Not satisfied with features</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" name="unsubscribeReason" value="other" id="unsubscribeOther" class="form-checkbox">
                    <span>Other</span>
                </label>
            </div>
            <textarea id="otherText" class="form-textarea" placeholder="Please specify" style="display: none;"></textarea>
            <div class="modal-actions">
                <button id="unsubscribeSubmitBtn" class="btn-primary">Submit</button>
                <button id="unsubscribeCancelBtn1" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Unsubscribe Modal: Step 2 (First Confirmation) -->
    <div id="unsubscribeConfirm1" class="modal">
        <div class="modal-content">
            <h2 class="modal-title">Confirm Unsubscription</h2>
            <p id="unsubscribeFirstConfirmText" class="modal-text">This decision will deactivate your subscription.</p>
            <div class="modal-actions">
                <button id="unsubscribeYesBtn1" class="btn-primary">Yes</button>
                <button id="unsubscribeCancelBtn2" class="btn-secondary">No</button>
            </div>
        </div>
    </div>

    <!-- Unsubscribe Modal: Step 3 (Second Confirmation) -->
    <div id="unsubscribeConfirm2" class="modal">
        <div class="modal-content">
            <h2 class="modal-title">Confirm Cancellation Fee</h2>
            <p id="unsubscribeSecondConfirmText" class="modal-text">Subscription cancellation has a fee of 5%. Are you still sure to cancel subscription?</p>
            <div class="modal-actions">
                <button id="unsubscribeYesBtn2" class="btn-primary">Yes</button>
                <button id="unsubscribeCancelBtn3" class="btn-secondary">No</button>
            </div>
        </div>
    </div>

    <!-- Unsubscribe Modal: Step 4 (Password) -->
    <div id="unsubscribePasswordModal" class="modal">
        <div class="modal-content">
            <h2 class="modal-title">It's okay, please enter your password to confirm cancellation.</h2>
            <div class="form-group">
                <label class="form-label">Enter Password:</label>
                <input type="password" id="unsubscribePassword" class="form-input">
            </div>
            <div class="modal-actions">
                <button id="unsubscribeSubmitPasswordBtn" class="btn-primary">Submit</button>
                <button id="unsubscribeCancelBtn4" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Unsubscribe Modal: Step 5 (Final Message) -->
    <div id="unsubscribeModal3" class="modal">
        <div class="modal-content">
            <h2 class="modal-title">See you soon! Enjoy your break, and we'll be here when you're ready to return. 👋</h2>
            <button id="unsubscribeCloseBtn" class="btn-secondary">Close</button>
        </div>
    </div>

    <!-- Delete Modal: Step 1 (Reasons) -->
    <div id="deleteModal1" class="modal">
        <div class="modal-content">
            <h2 class="modal-title">Why did you come to this decision? 😔</h2>
            <div class="checkbox-group">
                <label class="checkbox-label">
                    <input type="checkbox" name="deleteReason" value="notUseful" class="form-checkbox">
                    <span>Service not useful</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" name="deleteReason" value="tooExpensive" class="form-checkbox">
                    <span>Too expensive</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" name="deleteReason" value="foundAlternative" class="form-checkbox">
                    <span>Found an alternative</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" name="deleteReason" value="privacyConcerns" class="form-checkbox">
                    <span>Privacy concerns</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" name="deleteReason" value="notSatisfied" class="form-checkbox">
                    <span>Not satisfied with features</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" name="deleteReason" value="other" id="deleteOther" class="form-checkbox">
                    <span>Other</span>
                </label>
            </div>
            <textarea id="otherTextDelete" class="form-textarea" placeholder="Please specify" style="display: none;"></textarea>
            <div class="modal-actions">
                <button id="deleteSubmitBtn" class="btn-primary">Submit</button>
                <button id="deleteCancelBtn1" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Delete Modal: Step 2 (Verification Check) -->
    <div id="deleteVerifyModal" class="modal">
        <div class="modal-content">
            <h2 class="modal-title">Are you sure you want to leave Astegni?</h2>
            <p id="deleteVerifyText" class="modal-text">This decision will unverify and deactivate your account. A 15% verification fee (0 ETB) will be charged if applicable.</p>
            <div class="modal-actions">
                <button id="deleteYesBtn" class="btn-primary">Yes</button>
                <button id="deleteCancelBtn2" class="btn-secondary">No</button>
            </div>
        </div>
    </div>

    <!-- Delete Modal: Step 3 (Subscription Check) -->
    <div id="deleteSubscriptionCheckModal" class="modal">
        <div class="modal-content">
            <h2 class="modal-title">Active Subscriptions Detected</h2>
            <p class="modal-text">Please cancel all active subscriptions before proceeding with account deletion.</p>
            <button id="deleteCancelBtn3" class="btn-secondary">Close</button>
        </div>
    </div>

    <!-- Delete Modal: Step 4 (Password) -->
    <div id="deleteConfirm2" class="modal">
        <div class="modal-content">
            <h2 class="modal-title">Final Confirmation</h2>
            <p class="modal-text">Please enter your password to confirm account deletion. This action cannot be undone.</p>
            <div class="form-group">
                <label class="form-label">Enter Password:</label>
                <input type="password" id="deletePassword" class="form-input">
            </div>
            <div class="modal-actions">
                <button id="deleteSubmitPasswordBtn" class="btn-danger">Submit</button>
                <button id="deleteCancelBtn4" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Delete Modal: Step 5 (Final Message) -->
    <div id="deleteModal3" class="modal">
        <div class="modal-content">
            <h2 class="modal-title">Farewell, We very much hope all the success in your next life. 🌟</h2>
            <button id="deleteCloseBtn" class="btn-secondary">Close</button>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div id="edit-verify-profile-modal" class="modal">
        <div class="modal-content modal-large">
            <h3 class="modal-title">Edit Profile</h3>
            <form class="enhanced-form">
                <div class="form-group">
                    <label class="form-label">Name</label>
                    <input type="text" id="profile-name" class="form-input" placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label class="form-label">Gender</label>
                    <select id="profile-gender" class="form-select">
                        <option value="" disabled selected>Select gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Phone Number</label>
                    <input type="tel" id="profile-phone" class="form-input" placeholder="+251912345678">
                </div>
                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" id="profile-email" class="form-input" placeholder="example@astegni.com">
                </div>
                <div class="form-group">
                    <label class="form-label">Bio</label>
                    <textarea id="profile-bio" class="form-textarea" rows="3" placeholder="Tell us about yourself"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">What's Your Quote</label>
                    <textarea id="profile-quote" class="form-textarea" rows="3" placeholder="Enter your quote"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Address</label>
                    <div class="input-with-button">
                        <input type="text" id="profile-address" class="form-input" placeholder="Enter your address" readonly>
                        <button type="button" id="use-my-location" class="btn-secondary">
                            <i class="fas fa-map-marker-alt mr-2"></i>Use My Location
                        </button>
                    </div>
                    <p id="location-error" class="error-message hidden">Unable to get location.</p>
                </div>
                <div class="form-group">
                    <label class="form-label">User Type</label>
                    <div class="user-type-buttons">
                        <button type="button" class="user-type-btn active" data-type="tutor">
                            <i class="fas fa-chalkboard-teacher"></i>
                            <span>Tutor</span>
                        </button>
                        <button type="button" class="user-type-btn" data-type="business">
                            <i class="fas fa-briefcase"></i>
                            <span>Business</span>
                            <small>(Advertiser, Store, Employer, Training Center)</small>
                        </button>
                        <button type="button" class="user-type-btn" data-type="other">
                            <i class="fas fa-users"></i>
                            <span>Other</span>
                            <small>(Delivery, Parent, Student)</small>
                        </button>
                    </div>
                </div>
                <div class="form-group" id="teaches-at-field">
                    <label class="form-label">Teaches at</label>
                    <div class="relative">
                        <input type="text" id="profile-school" class="form-input" placeholder="Search for school">
                        <div id="school-suggestions" class="school-suggestions hidden"></div>
                        <button id="request-school-btn" class="btn-secondary mt-2 hidden">
                            <i class="fas fa-plus mr-2"></i>Request School Listing
                        </button>
                    </div>
                </div>
                <div class="form-group hidden" id="business-license-field">
                    <label class="form-label">Business License</label>
                    <input type="file" id="business-license-input" accept="image/*,application/pdf" class="form-file">
                    <p id="business-license-error" class="error-message hidden">Invalid file (max 5MB, JPEG/PNG/GIF/PDF).</p>
                    <div id="business-license-preview" class="file-preview"></div>
                </div>
                <div class="form-group">
                    <label class="form-label">ID Document (Passport, Driver's License, FIDA, etc.)</label>
                    <input type="file" id="id-input" accept="image/*,application/pdf" class="form-file">
                    <p id="id-error" class="error-message hidden">Invalid file (max 5MB, JPEG/PNG/GIF/PDF).</p>
                    <div id="id-preview" class="file-preview"></div>
                </div>
                <div class="form-group">
                    <label class="form-label">Liveness Check (Selfie via Webcam)</label>
                    <button type="button" id="face-scan-btn" class="btn-secondary">
                        <i class="fas fa-camera mr-2"></i>Capture Selfie
                    </button>
                    <p id="face-scan-status" class="status-message">No selfie captured.</p>
                </div>
                <div class="modal-actions">
                    <button type="button" id="saveProfileBtn" class="btn-primary">Save</button>
                    <button type="button" id="cancelProfileBtn" class="btn-secondary">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Request School Listing Modal -->
    <div id="request-school-modal" class="modal">
        <div class="modal-content">
            <h3 class="modal-title">Request School Listing</h3>
            <form class="enhanced-form">
                <div class="form-group">
                    <label class="form-label">School Name</label>
                    <input type="text" id="request-school-name" class="form-input" placeholder="Enter school name">
                </div>
                <div class="form-group">
                    <label class="form-label">Phone Number</label>
                    <input type="tel" id="request-school-phone" class="form-input" placeholder="Enter phone number">
                </div>
                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" id="request-school-email" class="form-input" placeholder="Enter email address">
                </div>
                <div class="form-group">
                    <label class="form-label">Location</label>
                    <input type="text" id="request-school-location" class="form-input" placeholder="Enter location">
                </div>
                <div class="modal-actions">
                    <button type="button" id="submitSchoolRequestBtn" class="btn-primary w-full">Submit Request</button>
                    <button type="button" id="cancelSchoolRequestBtn" class="btn-link">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script src="../js/finance.js"></script>
</body>
</html>

    <!-- Additional Features and Enhancements -->
    <!-- Note: The following features are not implemented yet but are planned for future updates. -->
Fewer updates. 
1. In verification, once verified get verified should be hidden. 
2. In Subscription, switch plan modal should also have list of both Standard and premium subscription rather than switch plan in standard subscription only having list of standard subscriptions and premium subscription having only list of premium subscription. 
3. In set package 1. put payment frequency and hourly rate under course names, then discounts under them. 2. don't set discounts to 0 on default. just leave it blank. 3. there is a logical error when updating package. fix it. 
4. in view package remove the .00 or the cent. just show the money without the cent side. also put a comma in three digits.

In set package restructure the layout, I think payment frequency and hourly rate should come under course names, and discount should be beside them. also although its set to 0 remove the value set in discount. 
remove payer from bills table because only one user is using this application not multiple companies so user know by default he is the payer. 
Add referral in how they generated income because users can get 1 10-15% fee upon referral. Now its only parent and student Set package and view package should only be visible if user is a tutor. 
Add experience, certifications and achievements when getting verified as a tutor or a business and although user is already verified if user change these sensitive information, i.e. teaches at, experience, certification and achievements or the business license, It get verified button should appear again to reverify. 
if user is verified as a business, a user might have multiple businesses so add a plus icon to upload multiple business licenses.
