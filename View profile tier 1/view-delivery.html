<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Astegni view-delivery</title>
    <link rel="stylesheet" href="../css/institute.css">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Viewer-specific styles */
        .booking-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            animation: fadeIn 0.3s ease;
        }

        .booking-modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .booking-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 2px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.4s ease;
        }

        .booking-inner {
            background: #fff;
            border-radius: 18px;
            padding: 30px;
        }

        .viewer-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn-follow {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-follow:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .btn-follow.following {
            background: #f0f0f0;
            color: #666;
        }

        .btn-contact {
            background: #fff;
            color: #667eea;
            padding: 10px 20px;
            border: 2px solid #667eea;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-contact:hover {
            background: #667eea;
            color: white;
        }

        .btn-book {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-book:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(40, 167, 69, 0.3);
        }

        .delivery-availability-widget {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .availability-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-indicator.online {
            background: #28a745;
        }

        .status-indicator.busy {
            background: #ffc107;
        }

        .status-indicator.offline {
            background: #dc3545;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(40, 167, 69, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(40, 167, 69, 0);
            }
        }

        .quick-booking-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-top: 10px;
        }

        .delivery-type-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .delivery-type-btn {
            padding: 8px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 14px;
        }

        .delivery-type-btn:hover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }

        /* Smooth scroll behavior */
        html {
            scroll-behavior: smooth;
        }

        /* Enhanced Sidebar Animation Styles */
        .left-sidebar {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .left-sidebar.sliding-up {
            animation: slideUpSidebar 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        .left-sidebar.footer-visible {
            height: calc(100vh - 60px - var(--footer-offset)) !important;
            transition: height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideUpSidebar {
            0% {
                transform: translateY(0);
                opacity: 1;
            }

            50% {
                transform: translateY(-10px);
                opacity: 0.9;
            }

            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Content Panel Display */
        .sidebar-content-panel {
            display: none;
        }

        .sidebar-content-panel.active {
            display: block !important;
        }

        /* Active sidebar button styling */
        .sidebar-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .sidebar-btn.active .sidebar-btn-icon,
        .sidebar-btn.active span {
            color: white;
        }
    </style>
</head>

<body>
    <!-- Navigation (Same as original) -->
    <nav class="navbar glass">
        <div class="container nav-container">
            <button class="sidebar-toggle" onclick="toggleSidebar()">‚ò∞</button>
            <div class="nav-brand">
                <span class="logo-icon">üéØ</span>
                <span class="logo-text gradient-text">Astegni</span>
            </div>
            <div class="nav-menu">
                <a href="../branch/news.html" class="nav-link">
                    <span class="nav-icon">üì∞</span>
                    <span>News</span>
                </a>
                <a href="../branch/find-tutors.html" class="nav-link">
                    <span class="nav-icon">üë®‚Äçüè´</span>
                    <span>Find Tutors</span>
                </a>
                <a href="../branch/reels.html" class="nav-link">
                    <span class="nav-icon">üé¨</span>
                    <span>Reels</span>
                </a>
                <a href="../branch/store.html" class="nav-link">
                    <span class="nav-icon">üõí</span>
                    <span>Store</span>
                </a>
                <a href="../branch/find-jobs.html" class="nav-link">
                    <span class="nav-icon">üíº</span>
                    <span>Find Jobs</span>
                </a>
                <button class="notification-btn">
                    <span class="notification-icon">üîî</span>
                    <span class="notification-badge pulse">5</span>
                </button>
                <button class="theme-toggle" onclick="toggleTheme()">üåô</button>
            </div>
        </div>
    </nav>

    <!-- Left Sidebar - Modified for Viewer -->
    <aside class="left-sidebar" id="leftSidebar">
        <div class="sidebar-content">
            <div class="sidebar-section">
                <button class="sidebar-btn active" data-content="overview">
                    <span class="sidebar-btn-icon">üë§</span>
                    <span>Overview</span>
                </button>
            </div>

            <!-- VIEW DELIVERY SECTION -->
            <div class="sidebar-section" data-content="view-delivery">

                <button class="sidebar-btn" data-content="book-delivery">
                    <span class="sidebar-btn-icon">üì¶</span>
                    <span>Book Delivery</span>
                    <span class="sidebar-badge live">Quick</span>
                </button>
                <button class="sidebar-btn" data-content="live-tracking">
                    <span class="sidebar-btn-icon">üìç</span>
                    <span>Track my delivery</span>
                    <span class="sidebar-badge live">Live</span>
                </button>

                <button class="sidebar-btn" data-content="delivery-stats">
                    <span class="sidebar-btn-icon">üìä</span>
                    <span>Statistics</span>
                </button>
                
                <button class="sidebar-btn" data-content="delivery-rates">
                    <span class="sidebar-btn-icon">üíµ</span>
                    <span>Rates & Pricing</span>
                </button>

                <button class="sidebar-btn" data-content="customer-ratings-reviews">
                    <span class="sidebar-btn-icon">‚≠ê</span>
                    <span>Ratings and Reviews</span>
                    <span class="sidebar-badge">4.7</span>
                </button>
                <button class="sidebar-btn" data-content="share">
                    <span class="sidebar-btn-icon">üîó</span>
                    <span>Share</span>
                </button>
                <button class="sidebar-btn" data-content="report">
                    <span class="sidebar-btn-icon">üö©</span>
                    <span>Report</span>
                </button>
                <button class="sidebar-btn" data-content="similar-professionals">
                    <span class="sidebar-btn-icon">üöö</span>
                    <span>Similar Professionals</span>
                </button>
</div>

            <div class="sidebar-section" data-content="viewer-uploads">

                <button class="sidebar-btn" data-content="clubs">
                    <span class="sidebar-btn-icon">üé≠</span>
                    <span>Clubs</span>
                </button>
                <button class="sidebar-btn" data-content="podcasts">
                    <span class="sidebar-btn-icon">üéôÔ∏è</span>
                    <span>Podcasts</span>
                </button>
                <button class="sidebar-btn" data-content="events">
                    <span class="sidebar-btn-icon">üìÖ</span>
                    <span>Events</span>
                </button>
                <button class="sidebar-btn" data-content="videos">
                    <span class="sidebar-btn-icon">üé¨</span>
                    <span>Videos</span>
                </button>
                <button class="sidebar-btn" data-content="delivery-gallery">
                    <span class="sidebar-btn-icon">üñºÔ∏è</span>
                    <span>Images</span>
                </button>
            </div>

            <div class="sidebar-section" data-content="my-actions">
                <button class="sidebar-btn" data-content="my-purchases">
                    <span class="sidebar-btn-icon">üì¶</span>
                    <span>My Purchases</span>
                </button>
                <button class="sidebar-btn" data-content="my-community">
                    <span class="sidebar-btn-icon">üë•</span>
                    <span>My community</span>
                </button>
                <a href='../Plug-ins/notes.html'>
                    <button class="sidebar-btn" data-content="notes">
                        <span class="sidebar-btn-icon">üìù</span>
                        <span>Notes</span>
                    </button>
                </a>
                <button class="sidebar-btn" data-content="settings">
                    <span class="sidebar-btn-icon">‚öôÔ∏è</span>
                    <span>Settings</span>
                </button>
            </div>

            <!-- Quick Stats -->
            <div class="sidebar-quick-stats">
                <h4>Quick Stats</h4>
                <div class="quick-stat-item">
                    <span class="stat-label">Total Deliveries</span>
                    <span class="stat-value">2,345</span>
                </div>
                <div class="quick-stat-item">
                    <span class="stat-label">On-Time Rate</span>
                    <span class="stat-value">98%</span>
                </div>
                <div class="quick-stat-item">
                    <span class="stat-label">Rating</span>
                    <span class="stat-value">4.7/5</span>
                </div>
                <div class="quick-stat-item">
                    <span class="stat-label">Response Time</span>
                    <span class="stat-value">
                        < 5 min</span>
                </div>
            </div>

            <!-- Delivery Person's Recent Activity -->
            <div class="sidebar-activity">
                <h4>Their Recent Activity</h4>
                <div class="activity-item">
                    <span class="activity-icon">üì¶</span>
                    <div class="activity-text">
                        <p>Completed delivery</p>
                        <span class="activity-time">2 hours ago</span>
                    </div>
                </div>
                <div class="activity-item">
                    <span class="activity-icon">‚≠ê</span>
                    <div class="activity-text">
                        <p>Received 5-star rating</p>
                        <span class="activity-time">5 hours ago</span>
                    </div>
                </div>
                <div class="activity-item">
                    <span class="activity-icon">üìç</span>
                    <div class="activity-text">
                        <p>Updated service area</p>
                        <span class="activity-time">1 day ago</span>
                    </div>
                </div>
            </div>

            <!-- Help Button -->
            <button class="sidebar-help-btn">
                <span class="help-icon">üí°</span>
                <span>Need Help?</span>
            </button>
        </div>
    </aside>

    <!-- Main Container -->
    <div class="main-container with-sidebar">
        <!-- Profile Header Section - Modified for Viewer -->
        <section class="profile-header-section">
            <div class="cover-image-container">
                <img src="../pictures/delivery cover.png" alt="Cover" class="cover-img">
            </div>

            <div class="profile-main-info">
                <div class="profile-info-wrapper">
                    <div class="profile-avatar-container">
                        <img src="../pictures/delivery profile.jpg" alt="Delivery profile" class="profile-avatar">
                        <span class="verified-badge" style="position: absolute; bottom: 5px; right: 5px;">‚úì</span>
                    </div>

                    <div class="profile-details-section">
                        <div class="profile-name-row">
                            <h1 class="center-name" id="centerName">View delivery</h1>
                            <div class="badges-row">
                                <span class="verified-badge">‚úì Verified Delivery Professional</span>
                                <span class="center-score">Rating: 4.7/5</span>
                                <span class="online-status">üü¢ Available Now</span>
                            </div>
                        </div>

                        <div class="rating-section">
                            <div class="stars">
                                <svg class="star filled" viewBox="0 0 24 24">
                                    <path
                                        d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                                </svg>
                                <svg class="star filled" viewBox="0 0 24 24">
                                    <path
                                        d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                                </svg>
                                <svg class="star filled" viewBox="0 0 24 24">
                                    <path
                                        d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                                </svg>
                                <svg class="star filled" viewBox="0 0 24 24">
                                    <path
                                        d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                                </svg>
                                <svg class="star half" viewBox="0 0 24 24">
                                    <path
                                        d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                                </svg>
                            </div>
                            <span class="rating-value">4.7/5.0</span>
                            <span class="review-count">(156 reviews)</span>
                        </div>

                        <div class="location-info">
                            <span class="location-icon">üìç</span>
                            <span id="locationText">Addis Ababa, Ethiopia | Delivery Professional</span>
                        </div>

                        <div class="profile-quote" id="profileQuote">
                            "Delivering smiles, one package at a time!"
                        </div>

                        <div class="follow-stats-cards">
                            <div class="follow-card">
                                <div class="follow-icon">üë•</div>
                                <div class="follow-info">
                                    <span class="stat-value">12.5K</span>
                                    <span class="stat-label">Followers</span>
                                </div>
                            </div>
                            <div class="follow-card">
                                <div class="follow-icon">üì¶</div>
                                <div class="follow-info">
                                    <span class="stat-value">2.3K</span>
                                    <span class="stat-label">Deliveries</span>
                                </div>
                            </div>
                        </div>

                        <div class="profile-next-session" id="profileNextSession">
                            <div class="session-alert">
                                <span class="alert-icon gradient-text">üöö</span>
                                <span id="nextSessionText"><strong class="gradient-text">Next Available:</strong> Today
                                    at 3:00 PM - Book your delivery now!</span>
                                <button class="btn-join-inline" onclick="openBookingModal()">Book Now</button>
                            </div>
                        </div>

                        <!-- VIEWER ACTIONS INSTEAD OF EDIT PROFILE -->
                        <div class="profile-actions-grid viewer-actions">
                            <button class="btn-follow" id="followBtn" onclick="toggleFollow()">
                                <span class="action-icon">‚ûï</span>
                                <span id="followText">Follow</span>
                            </button>
                            <button class="btn-contact" onclick="openContactModal()">
                                <span class="action-icon">üí¨</span>
                                <span>Contact</span>
                            </button>
                            <button class="btn-book" onclick="openBookingModal()">
                                <span class="action-icon">üì¶</span>
                                <span>Book Delivery</span>
                            </button>
                            <button class="btn-contact" onclick="shareProfile()">
                                <span class="action-icon">üîó</span>
                                <span>Share</span>
                            </button>
                            <button class="btn-contact" id="saveBtn" onclick="toggleSave()">
                                <span class="action-icon" id="saveIcon">üíæ</span>
                                <span id="saveText">Save</span>
                            </button>
                            <button class="btn-contact" id="favoriteBtn" onclick="toggleFavorite()">
                                <span class="action-icon" id="favIcon">‚òÜ</span>
                                <span id="favText">Favorite</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Advertisement Placeholder (Same as original) -->
        <section class="ad-placeholder-section">
            <div class="ad-container premium-ad" onclick="openAdAnalyticsModal()">
                <div class="ad-animation">
                    <div class="pulse-ring"></div>
                    <div class="pulse-ring"></div>
                </div>
                <div class="ad-content">
                    <span class="ad-label">Advertisement</span>
                    <h3 class="ad-title">Boost Your Reach Today</h3>
                    <p class="ad-text">Premium placement available</p>
                    <button class="ad-cta" onclick="openAdAnalyticsModal()">Learn More</button>
                </div>
                <div class="ad-visual">
                    <div class="ad-circles">
                        <div class="circle circle-1"></div>
                        <div class="circle circle-2"></div>
                        <div class="circle circle-3"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Content Area -->
        <div class="content-with-sidebar">
            <!-- Main Content Area -->
            <div class="main-content-area">
                <!-- Overview Content (Default) -->
                <div class="sidebar-content-panel active" id="overview-content">
                    <!-- About Section -->
                    <section class="profile-about-section">
                        <h3>About This Delivery Professional</h3>
                        <p id="aboutText">Experienced delivery professional with a passion for timely service and
                            customer satisfaction. Specializing in book and educational material deliveries across Addis Ababa, 
                            Ethiopia. Known for handling packages with care and ensuring accurate deliveries. With over
                            5 years in the delivery industry, I've built strong relationships with local bookstores and
                            customers alike. My commitment to punctuality and professionalism has earned me consistent
                            5-star ratings. I take pride in being a reliable link between bookstores and book lovers,
                            ensuring that knowledge reaches its destination safely and on time.</p>

                        <div class="about-details">
                            <h3>Professional Background</h3>
                            <p>With over 5 years of experience in the delivery industry, Abebe has established himself as
                                one of the most reliable delivery professionals in Addis Ababa, Ethiopia. His expertise spans
                                across various delivery types, with a special focus on educational materials and
                                bookstore deliveries.</p>

                            <h3>Specializations</h3>
                            <ul>
                                <li>Book and Educational Material Delivery</li>
                                <li>Fragile Item Handling</li>
                                <li>Time-Sensitive Deliveries</li>
                                <li>Business-to-Business Services</li>
                                <li>Last-Mile Delivery Solutions</li>
                            </ul>

                            <h3>Why Choose This Professional?</h3>
                            <ul>
                                <li>‚úì 98% on-time delivery rate</li>
                                <li>‚úì Professional handling of all packages</li>
                                <li>‚úì Real-time tracking available</li>
                                <li>‚úì Excellent customer communication</li>
                                <li>‚úì Insured and verified</li>
                            </ul>
                        </div>
                    </section>

                    <!-- Quick Stats Widget -->
                    <section class="quick-stats-widget">
                        <h2 class="section-title">Performance & Statistics</h2>
                        <div class="stats-grid">
                            <div class="stat-card hover-lift">
                                <div class="stat-icon">üì¶</div>
                                <div class="stat-info">
                                    <div class="stat-number">2,345</div>
                                    <div class="stat-desc">Total Deliveries</div>
                                    <div class="stat-detail">All Time</div>
                                </div>
                            </div>
                            <div class="stat-card hover-lift">
                                <div class="stat-icon">‚≠ê</div>
                                <div class="stat-info">
                                    <div class="stat-number">4.7</div>
                                    <div class="stat-desc">Average Rating</div>
                                    <div class="stat-detail">156 Reviews</div>
                                </div>
                            </div>
                            <div class="stat-card hover-lift">
                                <div class="stat-icon">‚è±Ô∏è</div>
                                <div class="stat-info">
                                    <div class="stat-number">98%</div>
                                    <div class="stat-desc">On-Time Delivery</div>
                                    <div class="stat-detail">Performance</div>
                                </div>
                            </div>
                            <div class="stat-card hover-lift">
                                <div class="stat-icon">üöö</div>
                                <div class="stat-info">
                                    <div class="stat-number">15 min</div>
                                    <div class="stat-desc">Avg. Delivery Time</div>
                                    <div class="stat-detail">Local Area</div>
                                </div>
                            </div>
                            <div class="stat-card hover-lift">
                                <div class="stat-icon">üèÜ</div>
                                <div class="stat-info">
                                    <div class="stat-number">12</div>
                                    <div class="stat-desc">Awards</div>
                                    <div class="stat-detail">Excellence</div>
                                </div>
                            </div>
                            <div class="stat-card hover-lift">
                                <div class="stat-icon">üìö</div>
                                <div class="stat-info">
                                    <div class="stat-number">12</div>
                                    <div class="stat-desc">Partner Stores</div>
                                    <div class="stat-detail">Active</div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Service Types -->
                    <section class="service-types-section">
                        <h3>Service Types Offered</h3>
                        <div class="service-grid">
                            <div class="service-card">
                                <span class="service-icon">üìö</span>
                                <h4>Book Delivery</h4>
                                <p>Specialized in educational materials and bookstore deliveries</p>
                                <span class="service-price">From $7</span>
                            </div>
                            <div class="service-card">
                                <span class="service-icon">üì¶</span>
                                <h4>Package Delivery</h4>
                                <p>General package delivery within NYC area</p>
                                <span class="service-price">From $10</span>
                            </div>
                            <div class="service-card">
                                <span class="service-icon">‚ö°</span>
                                <h4>Express Delivery</h4>
                                <p>Same-day urgent deliveries</p>
                                <span class="service-price">From $15</span>
                            </div>
                            <div class="service-card">
                                <span class="service-icon">üè¢</span>
                                <h4>Business Delivery</h4>
                                <p>Regular business and office deliveries</p>
                                <span class="service-price">Custom Pricing</span>
                            </div>
                        </div>
                    </section>

                    <!-- Certifications Section -->
                    <section class="certifications-section">
                        <h3>Certifications & Achievements</h3>
                        <div class="certifications-grid">
                            <div class="certification-card">
                                <span class="cert-icon">üèÜ</span>
                                <h4>Verified Professional</h4>
                                <p>Background checked and verified by Astegni</p>
                                <span class="cert-date">Issued: January 2023</span>
                            </div>
                            <div class="certification-card">
                                <span class="cert-icon">üõ°Ô∏è</span>
                                <h4>Insured Carrier</h4>
                                <p>Full liability insurance coverage up to $10,000</p>
                                <span class="cert-date">Valid until: December 2025</span>
                            </div>
                            <div class="certification-card">
                                <span class="cert-icon">üìã</span>
                                <h4>Safety Certified</h4>
                                <p>Completed advanced package handling training</p>
                                <span class="cert-date">Issued: March 2024</span>
                            </div>
                            <div class="certification-card">
                                <span class="cert-icon">‚≠ê</span>
                                <h4>Top Rated Professional</h4>
                                <p>Maintained 4.5+ rating for 12 consecutive months</p>
                                <span class="cert-date">Achieved: June 2024</span>
                            </div>
                        </div>
                    </section>
                </div>
                
                <!-- Live Tracking Content -->
                <div class="sidebar-content-panel" id="live-tracking-content">
                    <div class="section-header">
                        <h2 class="section-title">üìç Live Tracking</h2>
                    </div>

                    <div class="tracking-main-content">
                        <!-- Check if user has active delivery -->
                        <div class="no-active-delivery" style="text-align: center; padding: 40px; display: none;">
                            <div style="font-size: 64px; margin-bottom: 20px;">üì¶</div>
                            <h3>No Active Delivery</h3>
                            <p style="color: #666; margin-bottom: 30px;">Book a delivery to track it in real-time</p>
                            <button class="btn-primary" onclick="openBookingModal()">Book Delivery Now</button>
                        </div>

                        <!-- Mock Active Delivery (visible by default for testing) -->
                        <div class="active-delivery-content">
                            <!-- Interactive Map View -->
                            <div class="interactive-map">
                                <div class="map-placeholder">
                                    <div class="map-overlay-controls">
                                        <button class="map-control" onclick="zoomIn()">+</button>
                                        <button class="map-control" onclick="zoomOut()">‚àí</button>
                                        <button class="map-control" onclick="recenterMap()">‚äô</button>
                                        <button class="map-control fullscreen" onclick="openFullMapView()">‚õ∂</button>
                                    </div>
                                    <div class="map-content"
                                        style="height: 450px; background: #e9ecef; display: flex; align-items: center; justify-content: center;">
                                        <p>Tracking Your Delivery in Addis Ababa</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Your Order Details -->
                            <div class="order-details-card" style="margin-top: 20px;">
                                <h3>Your Order Details</h3>
                                <div class="order-info-grid">
                                    <div class="order-info-item">
                                        <span class="info-label">Order ID</span>
                                        <span class="info-value">#DLV-2024-ET-1234</span>
                                    </div>
                                    <div class="order-info-item">
                                        <span class="info-label">Status</span>
                                        <span class="info-value">In Transit</span>
                                    </div>
                                    <div class="order-info-item">
                                        <span class="info-label">Package</span>
                                        <span class="info-value">Educational Books (3 items)</span>
                                    </div>
                                    <div class="order-info-item">
                                        <span class="info-label">ETA</span>
                                        <span class="info-value">25 minutes</span>
                                    </div>
                                    <div class="order-info-item full-width">
                                        <span class="info-label">Delivery Address</span>
                                        <span class="info-value">Bole Sub-City, Near Edna Mall</span>
                                    </div>
                                    <div class="order-info-item full-width">
                                        <span class="info-label">Special Instructions</span>
                                        <span class="info-value">Call when you arrive. Ask for security at gate.</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Your Delivery Status -->
                            <div class="current-delivery-card">
                                <h3>Your Delivery Progress</h3>
                                <div class="delivery-route-info">
                                    <div class="route-point completed">
                                        <span class="point-icon">üìö</span>
                                        <div class="point-details">
                                            <span class="point-label">Pickup Complete</span>
                                            <span class="point-location">Mega Book Store, Piassa</span>
                                            <span class="point-time">2:30 PM</span>
                                        </div>
                                    </div>
                                    <div class="route-line active"></div>
                                    <div class="route-point current">
                                        <span class="point-icon">üöö</span>
                                        <div class="point-details">
                                            <span class="point-label">In Transit</span>
                                            <span class="point-location">Meskel Square Area</span>
                                            <span class="point-time">Now</span>
                                        </div>
                                    </div>
                                    <div class="route-line"></div>
                                    <div class="route-point">
                                        <span class="point-icon">üè†</span>
                                        <div class="point-details">
                                            <span class="point-label">Your Location</span>
                                            <span class="point-location">Bole, Near Edna Mall</span>
                                            <span class="point-time">ETA: 3:25 PM</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Delivery Professional Info -->
                            <div class="delivery-professional-card"
                                style="margin-top: 20px; background: white; padding: 15px; border-radius: 10px;">
                                <h4>Your Delivery Professional</h4>
                                <div style="display: flex; align-items: center; gap: 15px; margin-top: 10px;">
                                    <img src="../pictures/delivery profile.jpg" alt="John"
                                        style="width: 50px; height: 50px; border-radius: 50%;">
                                    <div>
                                        <p style="margin: 0; font-weight: bold;">John Doe</p>
                                        <p style="margin: 0; font-size: 12px; color: #666;">‚≠ê 4.7 rating ‚Ä¢ 2,345
                                            deliveries</p>
                                    </div>
                                    <button class="btn-contact" onclick="openContactModal()"
                                        style="margin-left: auto; padding: 8px 16px;">
                                        <span>üí¨ Contact</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
               
                <!-- Delivery Rates Content -->
                <div class="sidebar-content-panel" id="delivery-rates-content">
                    <div class="section-header">
                        <h2 class="section-title">üíµ Rates & Pricing</h2>
                    </div>

                    <div class="pricing-table">
                        <div class="pricing-card">
                            <h3>Standard Delivery</h3>
                            <div class="price">0.30/100m 0.20/100m+ - 1km, .15/</div>
                            <ul>
                                <li>2-3 hour delivery window</li>
                                <li>Basic tracking</li>
                                <li>Text notifications</li>
                            </ul>
                            <button class="btn-primary" onclick="bookDelivery('standard')">Book Standard</button>
                        </div>

                        <div class="pricing-card featured">
                            <span class="badge">Most Popular</span>
                            <h3>Express Delivery</h3>
                            <div class="price"></div>
                            <ul>
                                <li>1 hour delivery window</li>
                                <li>Real-time tracking</li>
                                <li>Priority handling</li>
                                <li>Photo confirmation</li>
                            </ul>
                            <button class="btn-primary" onclick="bookDelivery('express')">Book Express</button>
                        </div>

                        <div class="pricing-card">
                            <h3>Business Plan</h3>
                            <div class="price">Custom</div>
                            <ul>
                                <li>Volume discounts</li>
                                <li>Dedicated support</li>
                                <li>Monthly billing</li>
                                <li>API integration</li>
                            </ul>
                            <button class="btn-primary" onclick="contactForBusiness()">Contact</button>
                        </div>
                    </div>
                </div>

                <!-- Customer Reviews Content -->
                <div class="sidebar-content-panel" id="customer-reviews-content">
                    <div class="section-header">
                        <h2 class="section-title">‚≠ê Customer Reviews</h2>
                    </div>

                    <div class="reviews-summary">
                        <div class="overall-rating">
                            <span class="big-rating">4.7</span>
                            <div class="rating-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                            <p>Based on 156 reviews</p>
                        </div>

                        <div class="rating-breakdown">
                            <div class="rating-bar">
                                <span>5 ‚≠ê</span>
                                <div class="bar">
                                    <div class="fill" style="width: 70%"></div>
                                </div>
                                <span>109</span>
                            </div>
                            <div class="rating-bar">
                                <span>4 ‚≠ê</span>
                                <div class="bar">
                                    <div class="fill" style="width: 20%"></div>
                                </div>
                                <span>31</span>
                            </div>
                            <div class="rating-bar">
                                <span>3 ‚≠ê</span>
                                <div class="bar">
                                    <div class="fill" style="width: 7%"></div>
                                </div>
                                <span>11</span>
                            </div>
                            <div class="rating-bar">
                                <span>2 ‚≠ê</span>
                                <div class="bar">
                                    <div class="fill" style="width: 2%"></div>
                                </div>
                                <span>3</span>
                            </div>
                            <div class="rating-bar">
                                <span>1 ‚≠ê</span>
                                <div class="bar">
                                    <div class="fill" style="width: 1%"></div>
                                </div>
                                <span>2</span>
                            </div>
                        </div>
                    </div>

                    <div class="reviews-list">
                        <div class="review-item">
                            <div class="review-header">
                                <span class="reviewer-name">Sarah Johnson</span>
                                <span class="review-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                <span class="review-date">2 days ago</span>
                            </div>
                            <p class="review-text">Excellent service! My books arrived in perfect condition and on time.
                                John was very professional and kept me updated throughout the delivery.</p>
                        </div>

                        <div class="review-item">
                            <div class="review-header">
                                <span class="reviewer-name">Michael Chen</span>
                                <span class="review-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                <span class="review-date">1 week ago</span>
                            </div>
                            <p class="review-text">Super reliable! I use John's delivery service for my bookstore
                                regularly. Always handles packages with care.</p>
                        </div>

                        <div class="review-item">
                            <div class="review-header">
                                <span class="reviewer-name">Emily Rodriguez</span>
                                <span class="review-rating">‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                <span class="review-date">2 weeks ago</span>
                            </div>
                            <p class="review-text">Great communication and fast delivery. Would definitely recommend!
                            </p>
                        </div>
                    </div>

                    <button class="btn-secondary" onclick="loadMoreReviews()">Load More Reviews</button>
                </div>

                <!-- Similar Professionals Content -->
                <div class="sidebar-content-panel" id="similar-professionals-content">
                    <div class="section-header">
                        <h2 class="section-title">üöö Similar Delivery Professionals</h2>
                        <button class="btn-secondary" onclick="viewAllProfessionals()">View All</button>
                    </div>

                    <div class="professionals-grid">
                        <div class="professional-card">
                            <img src="../pictures/profile1.jpg" alt="Professional" class="professional-avatar">
                            <div class="professional-info">
                                <h3>Jane Smith</h3>
                                <div class="professional-rating">‚≠ê 4.8 (234 reviews)</div>
                                <p class="professional-location">üìç Megenagna/p>
                                <p class="professional-specialty">Specializes in fragile items</p>
                                <div class="professional-stats">
                                    <span>üì¶ 3.2K deliveries</span>
                                    <span>‚è±Ô∏è 99% on-time</span>
                                </div>
                                <button class="btn-primary" onclick="viewProfile('jane-smith')">View Profile</button>
                            </div>
                        </div>

                        <div class="professional-card">
                            <img src="../pictures/profile2.jpg" alt="Professional" class="professional-avatar">
                            <div class="professional-info">
                                <h3>Mike Johnson</h3>
                                <div class="professional-rating">‚≠ê 4.6 (189 reviews)</div>
                                <p class="professional-location">üìç Piyassa</p>
                                <p class="professional-specialty">Express delivery expert</p>
                                <div class="professional-stats">
                                    <span>üì¶ 2.8K deliveries</span>
                                    <span>‚è±Ô∏è 97% on-time</span>
                                </div>
                                <button class="btn-primary" onclick="viewProfile('mike-johnson')">View Profile</button>
                            </div>
                        </div>

                        <div class="professional-card">
                            <img src="../pictures/profile3.jpg" alt="Professional" class="professional-avatar">
                            <div class="professional-info">
                                <h3>Sarah Lee</h3>
                                <div class="professional-rating">‚≠ê 4.9 (412 reviews)</div>
                                <p class="professional-location">üìç 22</p>
                                <p class="professional-specialty">Business deliveries</p>
                                <div class="professional-stats">
                                    <span>üì¶ 5.1K deliveries</span>
                                    <span>‚è±Ô∏è 99.5% on-time</span>
                                </div>
                                <button class="btn-primary" onclick="viewProfile('sarah-lee')">View Profile</button>
                            </div>
                        </div>

                        <div class="professional-card">
                            <img src="../pictures/profile4.jpg" alt="Professional" class="professional-avatar">
                            <div class="professional-info">
                                <h3>David Chen</h3>
                                <div class="professional-rating">‚≠ê 4.7 (156 reviews)</div>
                                <p class="professional-location">üìç Hayat</p>
                                <p class="professional-specialty">Medical supplies</p>
                                <div class="professional-stats">
                                    <span>üì¶ 1.9K deliveries</span>
                                    <span>‚è±Ô∏è 98% on-time</span>
                                </div>
                                <button class="btn-primary" onclick="viewProfile('david-chen')">View Profile</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Other Content Panels -->
                <!-- Additional panels for gallery, certifications, etc. -->

            </div>

            <!-- Right Sidebar -->
            <div class="right-sidebar">
                <!-- Delivery-Specific Widget (Above News) -->
                <div class="sidebar-widget delivery-availability-widget">
                    <div class="widget-header">
                        <h3>üöö Quick Booking</h3>
                    </div>
                    <div class="availability-status">
                        <span class="status-indicator online"></span>
                        <span>Available Now</span>
                    </div>
                    <div class="quick-booking-card">
                        <p>Next available slot: <strong>Today, 3:00 PM</strong></p>
                        <div class="delivery-type-grid">
                            <button class="delivery-type-btn" onclick="quickBook('standard')">
                                üì¶ Standard
                            </button>
                            <button class="delivery-type-btn" onclick="quickBook('standard')">
                                üö¥ Standard Plus
                            </button>
                            <button class="delivery-type-btn" onclick="quickBook('express')">
                                ‚ö° Express
                            </button>
                            <button class="delivery-type-btn" onclick="quickBook('scheduled')">
                                üìÖ Premium
                            </button>

                        </div>
                        <button class="btn-primary" style="width: 100%; margin-top: 15px;" onclick="openBookingModal()">
                            Book Now
                        </button>
                    </div>
                </div>

                <!-- Real-Time Tracking Widget -->
                <div class="sidebar-widget tracking-widget">
                    <div class="widget-header">
                        <h3>üìç Live Tracking</h3>
                        <span class="live-badge">
                            <span class="live-dot"></span>
                            LIVE
                        </span>
                    </div>
                    <div class="tracking-content">
                        <div class="delivery-status-bar">
                            <div class="status-info">
                                <p class="current-task">Currently delivering to:</p>
                                <p class="location-name">Bole, Edna mall area.</p>
                            </div>
                            <div class="eta-badge">
                                <span class="eta-time">15</span>
                                <span class="eta-unit">mins</span>
                            </div>
                        </div>

                        <!-- Mini Map View -->
                        <div class="tracking-map-mini">
                            <div class="map-container">
                                <!-- Map Grid Background -->
                                <div class="map-grid"></div>

                                <!-- Route Path -->
                                <svg class="route-path" viewBox="0 0 300 200">
                                    <path d="M 50 150 Q 100 100, 150 120 T 250 50" stroke="#F59E0B" stroke-width="3"
                                        fill="none" stroke-dasharray="5,5" opacity="0.6">
                                        <animate attributeName="stroke-dashoffset" from="0" to="-10" dur="1s"
                                            repeatCount="indefinite" />
                                    </path>
                                </svg>

                                <!-- Location Markers -->
                                <div class="map-marker pickup" style="left: 50px; top: 150px;">
                                    <div class="marker-pulse"></div>
                                    <div class="marker-icon">üìö</div>
                                    <span class="marker-label">Pickup</span>
                                </div>

                                <div class="map-marker current" style="left: 150px; top: 120px;">
                                    <div class="marker-pulse"></div>
                                    <div class="marker-icon">üöö</div>
                                    <span class="marker-label">Current</span>
                                </div>

                                <div class="map-marker destination" style="left: 250px; top: 50px;">
                                    <div class="marker-pulse"></div>
                                    <div class="marker-icon">üìç</div>
                                    <span class="marker-label">Delivery</span>
                                </div>
                            </div>

                            <div class="map-controls">
                                <button class="map-btn" onclick="openFullMap()">
                                    <span>üó∫Ô∏è</span> Full Map
                                </button>
                                <button class="map-btn" onclick="refreshTracking()">
                                    <span>üîÑ</span> Refresh
                                </button>
                            </div>
                        </div>

                        <div class="tracking-stats">
                            <div class="stat-item">
                                <span class="stat-icon">‚úÖ</span>
                                <div class="stat-info">
                                    <span class="stat-value">3</span>
                                    <span class="stat-label">Completed Today</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <span class="stat-icon">‚è≥</span>
                                <div class="stat-info">
                                    <span class="stat-value">2</span>
                                    <span class="stat-label">Pending</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <span class="stat-icon">üìè</span>
                                <div class="stat-info">
                                    <span class="stat-value">2.3</span>
                                    <span class="stat-label">Miles Away</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- News Widget (Same as original) -->
                <div class="sidebar-widget news-widget" onclick="navigateToNews('all')" style="cursor: pointer;">
                    <div class="widget-header">
                        <h3>üì∞ Latest News</h3>
                        <a href="../branch/news.html" class="widget-action">View All</a>
                    </div>
                    <div class="news-carousel">
                        <div class="news-card-container">
                            <div class="news-card active" data-category="tech">
                                <div class="news-card-header">
                                    <span class="news-category-badge tech">Tech</span>
                                    <span class="news-time">2h ago</span>
                                </div>
                                <div class="news-card-image">
                                    <img src="https://images.unsplash.com/photo-1519389950473-47ba0277781c?w=400"
                                        alt="Tech News">
                                </div>
                                <div class="news-card-content">
                                    <h4>AI Revolution in Education: New Tools Transform Learning</h4>
                                    <p>Latest AI-powered tools are revolutionizing how students learn and interact with
                                        educational content...</p>
                                    <div class="news-stats">
                                        <span class="news-stat">üî• Trending</span>
                                        <span class="news-stat">üëÅÔ∏è 1.2k views</span>
                                        <span class="news-stat">üí¨ 45 comments</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Market Trends Widget (Same as original) -->
                <div class="sidebar-widget market-widget" onclick="navigateToMarket()">
                    <div class="widget-header">
                        <h3>üíπ Market Trends</h3>
                        <a href="../branch/yeneta-exchange.html" class="widget-action">Details</a>
                    </div>
                    <div class="market-sections">
                        <div class="market-section">
                            <h4>Astegni Store</h4>
                            <div class="store-trend">
                                <div class="trend-stat">
                                    <span>Daily Sales</span>
                                    <span class="trend-value">$24.5K</span>
                                    <span class="change up">‚Üë 12%</span>
                                </div>
                                <div class="trend-stat">
                                    <span>Active Listings</span>
                                    <span class="trend-value">1,234</span>
                                    <span class="change up">‚Üë 8%</span>
                                </div>
                                <div class="trend-stat">
                                    <span>Top Category</span>
                                    <span class="trend-value">Courses</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Advertisement (Same as original) -->
        <section class="ad-placeholder-section">
            <div class="ad-container premium-ad">
                <div class="ad-animation">
                    <div class="pulse-ring"></div>
                    <div class="pulse-ring"></div>
                </div>
                <div class="ad-content">
                    <span class="ad-label">Advertisement</span>
                    <h3 class="ad-title">Boost Your Reach Today</h3>
                    <p class="ad-text">Premium placement available</p>
                    <button class="ad-cta" onclick="openAdAnalyticsModal()">Learn More</button>
                </div>
                <div class="ad-visual">
                    <div class="ad-circles">
                        <div class="circle circle-1"></div>
                        <div class="circle circle-2"></div>
                        <div class="circle circle-3"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Bottom Widgets Section (Same as original) -->
        <section class="bottom-widgets">
            <div class="bottom-widgets-grid">
                <!-- Weather Widget -->
                <div class="bottom-widget weather-widget" data-weather-theme="royal-blue">
                    <div class="widget-header">
                        <h3>üå§Ô∏è Weather</h3>
                        <button class="widget-action" onclick="window.weatherManager.showForecast()">Forecast</button>
                    </div>
                    <div class="weather-content">
                        <div class="weather-main">
                            <div class="weather-icon">‚òÄÔ∏è</div>
                            <div class="weather-temp">72¬∞F</div>
                            <div class="weather-condition">Sunny</div>
                        </div>
                        <div class="weather-location">New York, NY</div>
                        <div class="weather-details">
                            <div class="weather-detail">
                                <span>High</span>
                                <span>78¬∞F</span>
                            </div>
                            <div class="weather-detail">
                                <span>Low</span>
                                <span>65¬∞F</span>
                            </div>
                            <div class="weather-detail">
                                <span>Humidity</span>
                                <span>45%</span>
                            </div>
                            <div class="weather-detail">
                                <span>Wind</span>
                                <span>8 mph</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Real-Time Analytics Widget -->
                <div class="bottom-widget analytics-widget compact">
                    <div class="widget-header">
                        <h3>üìä Real-Time Analytics</h3>
                        <button class="widget-action" onclick="openAnalyticsModal()">View Details</button>
                    </div>
                    <div class="real-time-stats compact">
                        <div class="rt-stat active" data-metric="deliveries" onclick="switchMetric('deliveries')">
                            <span class="rt-icon">üì¶</span>
                            <div class="rt-info">
                                <span class="rt-value" data-value="12">12</span>
                                <span class="rt-label">Deliveries Today</span>
                            </div>
                        </div>
                        <div class="rt-stat" data-metric="earnings" onclick="switchMetric('earnings')">
                            <span class="rt-icon">üí∞</span>
                            <div class="rt-info">
                                <span class="rt-value" data-value="156">$156</span>
                                <span class="rt-label">Today's Earnings</span>
                            </div>
                        </div>
                        <div class="rt-stat" data-metric="rating" onclick="switchMetric('rating')">
                            <span class="rt-icon">‚≠ê</span>
                            <div class="rt-info">
                                <span class="rt-value" data-value="4.7">4.7</span>
                                <span class="rt-label">Average Rating</span>
                            </div>
                        </div>
                        <div class="rt-stat" data-metric="distance" onclick="switchMetric('distance')">
                            <span class="rt-icon">üöó</span>
                            <div class="rt-info">
                                <span class="rt-value" data-value="45">45 mi</span>
                                <span class="rt-label">Distance Covered</span>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="analyticsChart"></canvas>
                        <div class="chart-label">Delivery Performance - Last 24 Hours</div>
                    </div>
                </div>

                <!-- Sessions Widget -->
                <div class="bottom-widget sessions-widget">
                    <div class="widget-header">
                        <h3>üìÖ Upcoming Sessions</h3>
                        <button class="widget-action" onclick="viewAllSessions()">View All</button>
                    </div>
                    <div class="sessions-list">
                        <div class="session-item">
                            <div class="session-time">
                                <span class="time">10:00 AM</span>
                                <span class="date">Today</span>
                            </div>
                            <div class="session-info">
                                <h4>Book Delivery</h4>
                                <p>City Bookstore ‚Üí 123 Main St</p>
                                <span class="session-status available">Available</span>
                            </div>
                        </div>
                        <div class="session-item">
                            <div class="session-time">
                                <span class="time">2:00 PM</span>
                                <span class="date">Today</span>
                            </div>
                            <div class="session-info">
                                <h4>Express Delivery</h4>
                                <p>Downtown ‚Üí Brooklyn</p>
                                <span class="session-status booked">Booked</span>
                            </div>
                        </div>
                        <div class="session-item">
                            <div class="session-time">
                                <span class="time">9:00 AM</span>
                                <span class="date">Tomorrow</span>
                            </div>
                            <div class="session-info">
                                <h4>Business Package</h4>
                                <p>Multiple locations</p>
                                <span class="session-status available">Available</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Booking Modal -->
    <div class="booking-modal" id="bookingModal">
        <div class="booking-content">
            <div class="booking-inner">
                <div class="modal-header">
                    <h2 class="modal-title">Book a Delivery</h2>
                    <button class="modal-close" onclick="closeBookingModal()">&times;</button>
                </div>

                <form id="bookingForm">
                    <div class="form-group">
                        <label>Delivery Type</label>
                        <select class="form-control">
                            <option>Standard Delivery ($7-15)</option>
                            <option>Express Delivery ($15-25)</option>
                            <option>Business Delivery (Custom)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Pickup Location</label>
                        <input type="text" class="form-control" placeholder="Enter pickup address">
                    </div>

                    <div class="form-group">
                        <label>Delivery Location</label>
                        <input type="text" class="form-control" placeholder="Enter delivery address">
                    </div>

                    <div class="form-group">
                        <label>Preferred Date & Time</label>
                        <input type="datetime-local" class="form-control">
                    </div>

                    <div class="form-group">
                        <label>Package Details</label>
                        <textarea class="form-control" rows="3" placeholder="Describe your package..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Special Instructions (Optional)</label>
                        <textarea class="form-control" rows="2"
                            placeholder="Any special handling instructions..."></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeBookingModal()">Cancel</button>
                        <button type="submit" class="btn-primary">Confirm Booking</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- FAB Menu -->
    <div class="fab-container">
        <button class="fab" id="main-fab">
            <span class="fab-icon">+</span>
            <span class="fab-label">Quick Action</span>
        </button>
        <div class="fab-menu">
            <button class="fab-option" onclick="openBookingModal()">
                <span>üì¶</span> Book Delivery
            </button>
            <button class="fab-option" onclick="openContactModal()">
                <span>üí¨</span> Send Message
            </button>
            <button class="fab-option" onclick="toggleFollow()">
                <span>‚ûï</span> Follow
            </button>
            <button class="fab-option" onclick="shareProfile()">
                <span>üîó</span> Share Profile
            </button>
            <button class="fab-option" onclick="writeReview()">
                <span>‚≠ê</span> Write Review
            </button>
        </div>
    </div>

    <!-- Footer (Same as original) -->
    <footer class="footer-section">
        <!-- Same footer content as delivery profile -->
    </footer>

    <!-- Scripts -->
    <script>
        function openFullMap() {
            // Open full map in a modal or new tab
            const mapModal = document.createElement('div');
            mapModal.className = 'modal active';
            mapModal.innerHTML = `
                <div class="modal-overlay" onclick="this.parentElement.remove()"></div>
                <div class="modal-content" style="max-width: 900px;">
                    <div class="modal-header">
                        <h2>üìç Live Delivery Tracking</h2>
                        <button class="modal-close" onclick="this.closest('.modal').remove()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div style="height: 500px; background: #f0f4f8; display: flex; align-items: center; justify-content: center; border-radius: 12px;">
                            <p>Full interactive map would load here</p>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(mapModal);
        }

        function refreshTracking() {
            // Animate refresh
            const refreshBtn = event.currentTarget;
            refreshBtn.style.transform = 'rotate(360deg)';

            // Simulate data refresh
            setTimeout(() => {
                refreshBtn.style.transform = 'rotate(0deg)';

                // Update ETA
                const etaTime = document.querySelector('.eta-time');
                if (etaTime) {
                    const newTime = Math.floor(Math.random() * 20) + 5;
                    etaTime.textContent = newTime;
                }

                // Show notification
                showNotification('Tracking updated!');
            }, 1000);
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'tracking-notification';
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                color: white;
                padding: 12px 24px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                z-index: 10000;
                animation: slideInRight 0.3s ease;
            `;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Auto-update tracking every 30 seconds
        setInterval(() => {
            // Update marker position animation
            const currentMarker = document.querySelector('.map-marker.current');
            if (currentMarker) {
                const currentLeft = parseInt(currentMarker.style.left);
                const newLeft = Math.min(currentLeft + 10, 250);
                currentMarker.style.left = newLeft + 'px';

                // Update ETA
                const etaTime = document.querySelector('.eta-time');
                if (etaTime) {
                    const currentEta = parseInt(etaTime.textContent);
                    if (currentEta > 0) {
                        etaTime.textContent = Math.max(currentEta - 1, 0);
                    }
                }
            }
        }, 30000);

        // Add animations on load
        document.addEventListener('DOMContentLoaded', () => {
            // Animate tracking stats on scroll into view
            const observerOptions = {
                threshold: 0.5,
                rootMargin: '0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animation = 'fadeInUp 0.6s ease';
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.tracking-stats .stat-item').forEach(item => {
                observer.observe(item);
            });
        });

        // Viewer-specific functions
        function toggleFollow() {
            const followBtn = document.getElementById('followBtn');
            const followText = document.getElementById('followText');

            if (followBtn.classList.contains('following')) {
                followBtn.classList.remove('following');
                followText.textContent = 'Follow';
            } else {
                followBtn.classList.add('following');
                followText.textContent = 'Following';
            }
        }

        function toggleSave() {
            const saveBtn = document.getElementById('saveBtn');
            const saveText = document.getElementById('saveText');
            const saveIcon = document.getElementById('saveIcon');

            if (saveBtn.classList.contains('saved')) {
                saveBtn.classList.remove('saved');
                saveText.textContent = 'Save';
                saveIcon.textContent = 'üíæ';
            } else {
                saveBtn.classList.add('saved');
                saveText.textContent = 'Saved';
                saveIcon.textContent = '‚úÖ';
            }
        }

        function toggleFavorite() {
            const favBtn = document.getElementById('favoriteBtn');
            const favText = document.getElementById('favText');
            const favIcon = document.getElementById('favIcon');

            if (favBtn.classList.contains('favorited')) {
                favBtn.classList.remove('favorited');
                favText.textContent = 'Favorite';
                favIcon.textContent = '‚òÜ';
            } else {
                favBtn.classList.add('favorited');
                favText.textContent = 'Favorited';
                favIcon.textContent = '‚òÖ';
            }
        }

        function openBookingModal() {
            document.getElementById('bookingModal').classList.add('active');
        }

        function closeBookingModal() {
            document.getElementById('bookingModal').classList.remove('active');
        }

        function openContactModal() {
            alert('Opening contact modal...');
        }

        function shareProfile() {
            if (navigator.share) {
                navigator.share({
                    title: 'John Doe - Delivery Professional',
                    text: 'Check out this verified delivery professional on Astegni',
                    url: window.location.href
                });
            } else {
                alert('Share functionality would open here');
            }
        }

        function quickBook(type) {
            console.log('Quick booking for:', type);
            openBookingModal();
        }

        function bookDelivery(type) {
            console.log('Booking delivery type:', type);
            openBookingModal();
        }

        function writeReview() {
            alert('Review modal would open here');
        }

        function loadMoreReviews() {
            alert('Loading more reviews...');
        }

        function viewProfile(profileId) {
            console.log('Viewing profile:', profileId);
            // Navigate to profile
        }

        function viewAllProfessionals() {
            window.location.href = '../branch/find-delivery.html';
        }

        // Form submission
        document.getElementById('bookingForm')?.addEventListener('submit', (e) => {
            e.preventDefault();
            alert('Booking submitted! You will receive a confirmation shortly.');
            closeBookingModal();
        });

        // Initialize sidebar manager
        document.addEventListener('DOMContentLoaded', () => {
            // Sidebar scroll behavior
            class SidebarManager {
                constructor() {
                    this.sidebar = document.querySelector('.left-sidebar');
                    this.footer = document.querySelector('.footer-section');
                    this.lastScrollY = window.scrollY;

                    if (this.sidebar) {
                        this.init();
                    }
                }

                init() {
                    this.setupScrollListener();
                    this.updateSidebarHeight();
                }

                setupScrollListener() {
                    let ticking = false;

                    window.addEventListener('scroll', () => {
                        if (!ticking) {
                            window.requestAnimationFrame(() => {
                                this.handleScroll();
                                ticking = false;
                            });
                            ticking = true;
                        }
                    });
                }

                handleScroll() {
                    const currentScrollY = window.scrollY;

                    if (this.footer) {
                        const footerRect = this.footer.getBoundingClientRect();
                        const windowHeight = window.innerHeight;

                        if (footerRect.top < windowHeight) {
                            const footerOffset = windowHeight - footerRect.top;
                            this.adjustSidebarForFooter(footerOffset);
                        } else {
                            this.resetSidebar();
                        }
                    }

                    this.lastScrollY = currentScrollY;
                }

                adjustSidebarForFooter(footerOffset) {
                    const sidebarHeight = window.innerHeight - 60 - footerOffset;
                    this.sidebar.style.height = `${Math.max(sidebarHeight, 200)}px`;

                    if (!this.sidebar.style.transition) {
                        this.sidebar.style.transition = 'height 0.5s cubic-bezier(0.4, 0, 0.2, 1)';
                    }
                }

                resetSidebar() {
                    this.sidebar.classList.remove('footer-visible');
                    this.sidebar.style.height = 'calc(100vh - 60px)';
                }

                updateSidebarHeight() {
                    window.addEventListener('resize', () => {
                        this.handleScroll();
                    });
                }
            }

            const sidebarManager = new SidebarManager();
        });

        // Close modal on escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeBookingModal();
            }
        });

        // Close modal on background click
        document.querySelectorAll('.booking-modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeBookingModal();
                }
            });
        });
    </script>

    <!-- Script implementations to be added to your existing HTML -->
    <script>
        // Map Management Class
        class MapManager {
            constructor() {
                this.currentZoom = 14;
                this.minZoom = 10;
                this.maxZoom = 20;
                this.mapCenter = { lat: 40.7128, lng: -74.0060 }; // NYC coordinates
                this.mapElement = null;
                this.markers = [];
                this.routes = {};
                this.trafficData = {};
                this.init();
            }

            init() {
                // Initialize map settings
                this.setupMapControls();
                this.loadTrafficData();
            }

            setupMapControls() {
                // Set up event listeners for map controls
                document.addEventListener('DOMContentLoaded', () => {
                    this.mapElement = document.querySelector('.map-content');
                    this.updateMapDisplay();
                });
            }

            loadTrafficData() {
                // Simulate traffic data
                this.trafficData = {
                    'manhattan-express': {
                        congestion: 'moderate',
                        delay: 5,
                        incidents: 2
                    },
                    'brooklyn-circuit': {
                        congestion: 'light',
                        delay: 2,
                        incidents: 0
                    },
                    'queens-loop': {
                        congestion: 'heavy',
                        delay: 15,
                        incidents: 3
                    }
                };
            }

            updateMapDisplay() {
                if (this.mapElement) {
                    this.mapElement.innerHTML = `
                        <div class="map-display" style="position: relative; width: 100%; height: 100%;">
                            <div class="zoom-level-indicator" style="position: absolute; top: 10px; left: 10px; background: white; padding: 5px 10px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                                Zoom: ${this.currentZoom}x
                            </div>
                            <div class="coordinates-display" style="position: absolute; bottom: 10px; left: 10px; background: white; padding: 5px 10px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                                ${this.mapCenter.lat.toFixed(4)}, ${this.mapCenter.lng.toFixed(4)}
                            </div>
                            <div style="display: flex; align-items: center; justify-content: center; height: 100%;">
                                <p>Interactive Map (Zoom: ${this.currentZoom})</p>
                            </div>
                        </div>
                    `;
                }
            }

            zoomIn() {
                if (this.currentZoom < this.maxZoom) {
                    this.currentZoom++;
                    this.animateZoom('in');
                    this.updateMapDisplay();
                    this.showZoomNotification(`Zoomed in to ${this.currentZoom}x`);
                } else {
                    this.showZoomNotification('Maximum zoom reached');
                }
            }

            zoomOut() {
                if (this.currentZoom > this.minZoom) {
                    this.currentZoom--;
                    this.animateZoom('out');
                    this.updateMapDisplay();
                    this.showZoomNotification(`Zoomed out to ${this.currentZoom}x`);
                } else {
                    this.showZoomNotification('Minimum zoom reached');
                }
            }

            recenter() {
                // Reset to default center (NYC)
                this.mapCenter = { lat: 40.7128, lng: -74.0060 };
                this.currentZoom = 14;
                this.animateRecenter();
                this.updateMapDisplay();
                this.showZoomNotification('Map recentered to default location');
            }

            animateZoom(direction) {
                if (this.mapElement) {
                    const scale = direction === 'in' ? 1.1 : 0.9;
                    this.mapElement.style.transition = 'transform 0.3s ease';
                    this.mapElement.style.transform = `scale(${scale})`;
                    setTimeout(() => {
                        this.mapElement.style.transform = 'scale(1)';
                    }, 300);
                }
            }

            animateRecenter() {
                if (this.mapElement) {
                    this.mapElement.style.transition = 'all 0.5s ease';
                    this.mapElement.style.opacity = '0.5';
                    setTimeout(() => {
                        this.mapElement.style.opacity = '1';
                    }, 250);
                }
            }

            showZoomNotification(message) {
                const notification = document.createElement('div');
                notification.className = 'zoom-notification';
                notification.textContent = message;
                notification.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(0, 0, 0, 0.8);
                    color: white;
                    padding: 10px 20px;
                    border-radius: 5px;
                    z-index: 10001;
                    animation: fadeInOut 1.5s ease;
                `;
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 1500);
            }

            openFullScreen() {
                const fullScreenModal = document.createElement('div');
                fullScreenModal.className = 'fullscreen-map-modal';
                fullScreenModal.innerHTML = `
                    <div class="fullscreen-map-container" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 10000;">
                        <div class="fullscreen-header" style="position: absolute; top: 0; left: 0; right: 0; height: 60px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: space-between; padding: 0 20px; z-index: 10001;">
                            <h2 style="color: white; margin: 0;">üìç Full Screen Map View</h2>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <div class="traffic-indicator" style="display: flex; align-items: center; gap: 10px; background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px;">
                                    <span style="color: white;">Traffic:</span>
                                    <div style="display: flex; gap: 5px;">
                                        <span class="traffic-light" style="width: 12px; height: 12px; border-radius: 50%; background: #10b981;"></span>
                                        <span class="traffic-light" style="width: 12px; height: 12px; border-radius: 50%; background: #f59e0b;"></span>
                                        <span class="traffic-light" style="width: 12px; height: 12px; border-radius: 50%; background: #ef4444; opacity: 0.3;"></span>
                                    </div>
                                    <span style="color: white; font-size: 12px;">Moderate</span>
                                </div>
                                <button onclick="window.mapManager.closeFullScreen()" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 16px;">‚úï Close</button>
                            </div>
                        </div>
                        
                        <div class="map-sidebar" style="position: absolute; left: 0; top: 60px; bottom: 0; width: 300px; background: #f8f9fa; border-right: 1px solid #dee2e6; overflow-y: auto; padding: 20px;">
                            <h3 style="margin: 0 0 15px 0;">Active Routes</h3>
                            ${this.generateRoutesList()}
                            
                            <h3 style="margin: 30px 0 15px 0;">Order Details</h3>
                            ${this.generateOrderDetails()}
                            
                            <h3 style="margin: 30px 0 15px 0;">Live Stats</h3>
                            ${this.generateLiveStats()}
                        </div>
                        
                        <div class="map-main" style="position: absolute; left: 300px; top: 60px; right: 0; bottom: 0; background: #e9ecef;">
                            <div class="map-controls-overlay" style="position: absolute; top: 20px; right: 20px; z-index: 1000;">
                                <div style="background: white; border-radius: 10px; padding: 5px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                    <button onclick="window.mapManager.zoomIn()" style="display: block; width: 40px; height: 40px; border: none; background: white; cursor: pointer; font-size: 20px; border-radius: 5px;">+</button>
                                    <button onclick="window.mapManager.zoomOut()" style="display: block; width: 40px; height: 40px; border: none; background: white; cursor: pointer; font-size: 20px; border-radius: 5px; margin-top: 5px;">‚àí</button>
                                    <button onclick="window.mapManager.recenter()" style="display: block; width: 40px; height: 40px; border: none; background: white; cursor: pointer; font-size: 20px; border-radius: 5px; margin-top: 5px;">‚äô</button>
                                </div>
                            </div>
                            
                            <div class="fullscreen-map-content" style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">
                                <div style="text-align: center;">
                                    <p style="font-size: 18px; color: #666;">Interactive Map Display</p>
                                    <p style="color: #999;">Real-time delivery tracking would appear here</p>
                                    <div style="margin-top: 20px;">
                                        <span style="background: #10b981; color: white; padding: 5px 10px; border-radius: 5px; margin: 0 5px;">üìç Current Location</span>
                                        <span style="background: #f59e0b; color: white; padding: 5px 10px; border-radius: 5px; margin: 0 5px;">üöö In Transit</span>
                                        <span style="background: #667eea; color: white; padding: 5px 10px; border-radius: 5px; margin: 0 5px;">üì¶ Next Delivery</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                document.body.appendChild(fullScreenModal);
                document.body.style.overflow = 'hidden';
            }

            closeFullScreen() {
                const modal = document.querySelector('.fullscreen-map-modal');
                if (modal) {
                    modal.remove();
                    document.body.style.overflow = '';
                }
            }

            generateRoutesList() {
                return `
                    <div class="routes-list">
                        <div class="route-item" style="background: white; padding: 10px; border-radius: 8px; margin-bottom: 10px; cursor: pointer;" onclick="window.mapManager.viewRoute('current')">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <h4 style="margin: 0; color: #333;">Current Route</h4>
                                    <p style="margin: 5px 0 0 0; font-size: 12px; color: #666;">Brooklyn Heights ‚Üí Manhattan</p>
                                </div>
                                <div class="traffic-status" style="display: flex; align-items: center; gap: 5px;">
                                    <span style="width: 10px; height: 10px; border-radius: 50%; background: #f59e0b;"></span>
                                    <span style="font-size: 11px; color: #666;">5 min delay</span>
                                </div>
                            </div>
                        </div>
                        <div class="route-item" style="background: white; padding: 10px; border-radius: 8px; margin-bottom: 10px; cursor: pointer; opacity: 0.7;">
                            <div>
                                <h4 style="margin: 0; color: #333;">Next: Upper East Side</h4>
                                <p style="margin: 5px 0 0 0; font-size: 12px; color: #666;">3 stops ‚Ä¢ Est. 4:00 PM</p>
                            </div>
                        </div>
                    </div>
                `;
            }

            generateOrderDetails() {
                return `
                    <div class="order-details" style="background: white; padding: 15px; border-radius: 8px;">
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 12px; color: #666;">Order ID</label>
                            <p style="margin: 2px 0; font-weight: bold;">#DLV-2024-0892</p>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 12px; color: #666;">Customer</label>
                            <p style="margin: 2px 0;">Sarah Johnson</p>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 12px; color: #666;">Package</label>
                            <p style="margin: 2px 0;">Educational Books (5 items)</p>
                        </div>
                        <div>
                            <label style="font-size: 12px; color: #666;">Special Instructions</label>
                            <p style="margin: 2px 0; font-style: italic;">Ring doorbell twice</p>
                        </div>
                    </div>
                `;
            }

            generateLiveStats() {
                return `
                    <div class="live-stats" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div style="background: white; padding: 10px; border-radius: 8px; text-align: center;">
                            <p style="margin: 0; font-size: 24px; font-weight: bold; color: #667eea;">8/12</p>
                            <p style="margin: 5px 0 0 0; font-size: 11px; color: #666;">Deliveries</p>
                        </div>
                        <div style="background: white; padding: 10px; border-radius: 8px; text-align: center;">
                            <p style="margin: 0; font-size: 24px; font-weight: bold; color: #10b981;">98%</p>
                            <p style="margin: 5px 0 0 0; font-size: 11px; color: #666;">On Time</p>
                        </div>
                        <div style="background: white; padding: 10px; border-radius: 8px; text-align: center;">
                            <p style="margin: 0; font-size: 24px; font-weight: bold; color: #f59e0b;">2.3</p>
                            <p style="margin: 5px 0 0 0; font-size: 11px; color: #666;">Miles Away</p>
                        </div>
                        <div style="background: white; padding: 10px; border-radius: 8px; text-align: center;">
                            <p style="margin: 0; font-size: 24px; font-weight: bold; color: #ef4444;">15</p>
                            <p style="margin: 5px 0 0 0; font-size: 11px; color: #666;">Min ETA</p>
                        </div>
                    </div>
                `;
            }

            viewRoute(routeId) {
                // Create route details modal
                const routeModal = document.createElement('div');
                routeModal.className = 'route-details-modal';
                routeModal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.5);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 10002;
                `;

                const trafficInfo = this.trafficData[routeId] || { congestion: 'unknown', delay: 0, incidents: 0 };
                const trafficColor = this.getTrafficColor(trafficInfo.congestion);

                routeModal.innerHTML = `
                    <div style="background: white; border-radius: 12px; padding: 30px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2 style="margin: 0;">Route Details: ${this.getRouteTitle(routeId)}</h2>
                            <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: none; border: none; font-size: 24px; cursor: pointer;">√ó</button>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, ${trafficColor}20, ${trafficColor}10); border-left: 4px solid ${trafficColor}; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                            <h3 style="margin: 0 0 10px 0; display: flex; align-items: center; gap: 10px;">
                                Traffic Status
                                ${this.getTrafficLights(trafficInfo.congestion)}
                            </h3>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                                <div>
                                    <p style="margin: 0; font-size: 12px; color: #666;">Congestion</p>
                                    <p style="margin: 5px 0 0 0; font-weight: bold; text-transform: capitalize;">${trafficInfo.congestion}</p>
                                </div>
                                <div>
                                    <p style="margin: 0; font-size: 12px; color: #666;">Est. Delay</p>
                                    <p style="margin: 5px 0 0 0; font-weight: bold;">${trafficInfo.delay} min</p>
                                </div>
                                <div>
                                    <p style="margin: 0; font-size: 12px; color: #666;">Incidents</p>
                                    <p style="margin: 5px 0 0 0; font-weight: bold;">${trafficInfo.incidents}</p>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <h3 style="margin: 0 0 10px 0;">Route Information</h3>
                            ${this.getRouteDetails(routeId)}
                        </div>
                        
                        <div style="display: flex; gap: 10px;">
                            <button onclick="window.mapManager.startNavigation('${routeId}')" style="flex: 1; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: bold;">
                                Start Navigation
                            </button>
                            <button onclick="window.mapManager.optimizeRoute('${routeId}')" style="flex: 1; background: white; color: #667eea; border: 2px solid #667eea; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: bold;">
                                Optimize Route
                            </button>
                        </div>
                    </div>
                `;

                document.body.appendChild(routeModal);
            }

            getTrafficLights(congestion) {
                const lights = {
                    light: '<span style="display: inline-flex; gap: 3px;"><span style="width: 12px; height: 12px; border-radius: 50%; background: #10b981;"></span><span style="width: 12px; height: 12px; border-radius: 50%; background: #d1d5db;"></span><span style="width: 12px; height: 12px; border-radius: 50%; background: #d1d5db;"></span></span>',
                    moderate: '<span style="display: inline-flex; gap: 3px;"><span style="width: 12px; height: 12px; border-radius: 50%; background: #d1d5db;"></span><span style="width: 12px; height: 12px; border-radius: 50%; background: #f59e0b;"></span><span style="width: 12px; height: 12px; border-radius: 50%; background: #d1d5db;"></span></span>',
                    heavy: '<span style="display: inline-flex; gap: 3px;"><span style="width: 12px; height: 12px; border-radius: 50%; background: #d1d5db;"></span><span style="width: 12px; height: 12px; border-radius: 50%; background: #d1d5db;"></span><span style="width: 12px; height: 12px; border-radius: 50%; background: #ef4444;"></span></span>',
                    unknown: '<span style="display: inline-flex; gap: 3px;"><span style="width: 12px; height: 12px; border-radius: 50%; background: #d1d5db;"></span><span style="width: 12px; height: 12px; border-radius: 50%; background: #d1d5db;"></span><span style="width: 12px; height: 12px; border-radius: 50%; background: #d1d5db;"></span></span>'
                };
                return lights[congestion] || lights.unknown;
            }

            getTrafficColor(congestion) {
                const colors = {
                    light: '#10b981',
                    moderate: '#f59e0b',
                    heavy: '#ef4444',
                    unknown: '#6b7280'
                };
                return colors[congestion] || colors.unknown;
            }

            getRouteTitle(routeId) {
                const titles = {
                    'manhattan-express': 'Manhattan Express Route',
                    'brooklyn-circuit': 'Brooklyn Circuit',
                    'queens-loop': 'Queens Delivery Loop',
                    'current': 'Current Active Route'
                };
                return titles[routeId] || 'Route Details';
            }

            getRouteDetails(routeId) {
                const details = {
                    'manhattan-express': `
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <p><strong>Start:</strong> Midtown Manhattan</p>
                            <p><strong>End:</strong> Upper West Side</p>
                            <p><strong>Stops:</strong> 12 delivery points</p>
                            <p><strong>Distance:</strong> 18 miles</p>
                            <p><strong>Est. Duration:</strong> 2.5 hours</p>
                            <p><strong>Next Stop:</strong> 42nd Street & 5th Avenue</p>
                        </div>
                    `,
                    'brooklyn-circuit': `
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <p><strong>Start:</strong> Downtown Brooklyn</p>
                            <p><strong>End:</strong> Brooklyn Heights</p>
                            <p><strong>Stops:</strong> 8 delivery points</p>
                            <p><strong>Distance:</strong> 12 miles</p>
                            <p><strong>Est. Duration:</strong> 1.5 hours</p>
                            <p><strong>Next Stop:</strong> Park Slope</p>
                        </div>
                    `,
                    'queens-loop': `
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <p><strong>Start:</strong> Astoria</p>
                            <p><strong>End:</strong> Flushing</p>
                            <p><strong>Stops:</strong> 10 delivery points</p>
                            <p><strong>Distance:</strong> 15 miles</p>
                            <p><strong>Est. Duration:</strong> 2 hours</p>
                            <p><strong>Next Stop:</strong> Long Island City</p>
                        </div>
                    `,
                    'current': `
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <p><strong>Start:</strong> City Bookstore, Manhattan</p>
                            <p><strong>End:</strong> Brooklyn Heights</p>
                            <p><strong>Current Location:</strong> Brooklyn Bridge</p>
                            <p><strong>Distance Remaining:</strong> 2.3 miles</p>
                            <p><strong>ETA:</strong> 15 minutes</p>
                            <p><strong>Package:</strong> 5 Educational Books</p>
                        </div>
                    `
                };
                return details[routeId] || '<p>Route information not available</p>';
            }

            startNavigation(routeId) {
                this.closeFullScreen();
                alert(`Starting navigation for route: ${this.getRouteTitle(routeId)}`);
            }

            optimizeRoute(routeId) {
                alert(`Optimizing route: ${this.getRouteTitle(routeId)}\n\nCalculating best path based on current traffic conditions...`);
                setTimeout(() => {
                    alert('Route optimized! Estimated time saved: 8 minutes');
                }, 1000);
            }
        }
        // Sidebar Navigation Handler
        document.addEventListener('DOMContentLoaded', function () {
            // Get all sidebar buttons
            const sidebarButtons = document.querySelectorAll('.sidebar-btn[data-content]');
            const contentPanels = document.querySelectorAll('.sidebar-content-panel');

            // Handle sidebar button clicks
            sidebarButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const targetContent = this.getAttribute('data-content');

                    // Remove active class from all buttons
                    sidebarButtons.forEach(btn => btn.classList.remove('active'));

                    // Add active class to clicked button
                    this.classList.add('active');

                    // Hide all content panels
                    contentPanels.forEach(panel => {
                        panel.classList.remove('active');
                        panel.style.display = 'none';
                    });

                    // Show the target content panel
                    const targetPanel = document.getElementById(targetContent + '-content');
                    if (targetPanel) {
                        targetPanel.classList.add('active');
                        targetPanel.style.display = 'block';
                    }
                });
            });

            // Set initial state - show overview by default
            const overviewPanel = document.getElementById('overview-content');
            if (overviewPanel) {
                overviewPanel.style.display = 'block';
                overviewPanel.classList.add('active');
            }

            // Hide all other panels initially
            contentPanels.forEach(panel => {
                if (panel.id !== 'overview-content') {
                    panel.style.display = 'none';
                }
            });
        });
        // Initialize map manager
        window.mapManager = new MapManager();

        // Global function implementations
        function openFullMapView() {
            window.mapManager.openFullScreen();
        }

        function zoomIn() {
            window.mapManager.zoomIn();
        }

        function zoomOut() {
            window.mapManager.zoomOut();
        }

        function recenterMap() {
            window.mapManager.recenter();
        }

        function viewRoute(routeId) {
            window.mapManager.viewRoute(routeId);
        }

        // Add CSS animations and styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeInOut {
                0% { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
                50% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                100% { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
            }
            
            .traffic-light {
                animation: pulse 2s infinite;
            }
            
            @keyframes pulse {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.6; }
            }
            
            .route-item:hover {
                transform: translateX(5px);
                transition: transform 0.3s ease;
            }
            
            .fullscreen-map-container button:hover {
                transform: scale(1.05);
                transition: transform 0.2s ease;
            }
            
            /* Map Controls Styling */
            .map-overlay-controls {
                position: absolute;
                top: 10px;
                right: 10px;
                z-index: 1000;
                display: flex;
                flex-direction: column;
                gap: 5px;
                background: white;
                padding: 5px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            }
            
            .map-control {
                width: 36px;
                height: 36px;
                border: none;
                background: white;
                cursor: pointer;
                font-size: 18px;
                border-radius: 4px;
                transition: all 0.2s ease;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .map-control:hover {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                transform: scale(1.1);
            }
            
            .map-control.fullscreen {
                border-top: 1px solid #e0e0e0;
                padding-top: 5px;
                margin-top: 5px;
            }
            
            /* Order Details Card Styling */
            .order-details-card {
                background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
                border-radius: 12px;
                padding: 20px;
                margin-bottom: 20px;
            }
            
            .order-info-grid {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
                margin-top: 15px;
            }
            
            .order-info-item {
                background: white;
                padding: 10px;
                border-radius: 8px;
            }
            
            .order-info-item.full-width {
                grid-column: span 2;
            }
            
            .info-label {
                display: block;
                font-size: 11px;
                color: #666;
                margin-bottom: 5px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .info-value {
                display: block;
                font-size: 14px;
                font-weight: 600;
                color: #333;
            }
            
            /* Route Card with Traffic Styling */
            .route-card {
                background: white;
                border-radius: 10px;
                padding: 15px;
                margin-bottom: 10px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                transition: all 0.3s ease;
                border: 2px solid transparent;
            }
            
            .route-card:hover {
                border-color: #667eea;
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
            }
            
            .route-card.active {
                background: linear-gradient(135deg, #667eea10 0%, #764ba210 100%);
                border-color: #667eea;
            }
            
            .route-card.pending {
                opacity: 0.7;
            }
            
            .route-card.completed {
                background: #10b98110;
                border-color: #10b981;
            }
            
            .route-status {
                width: 32px;
                height: 32px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: bold;
            }
            
            .route-status.completed {
                background: #10b981;
                color: white;
            }
            
            .btn-view-route {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                border: none;
                padding: 8px 16px;
                border-radius: 6px;
                cursor: pointer;
                font-size: 12px;
                font-weight: 600;
                transition: all 0.3s ease;
            }
            
            .btn-view-route:hover {
                transform: scale(1.05);
                box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            }
            
            /* Traffic Indicator Styling */
            .traffic-indicator {
                background: rgba(255, 255, 255, 0.9);
                padding: 6px 12px;
                border-radius: 20px;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            }
            
            /* Live Tracking Map Content */
            .map-content {
                position: relative;
                border-radius: 10px;
                overflow: hidden;
                background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
            }
            
            /* Route Stats with Traffic Light */
            .route-stats {
                display: flex;
                gap: 12px;
                margin-top: 8px;
                font-size: 12px;
                color: #666;
                align-items: center;
            }
            
            .route-stats span {
                display: flex;
                align-items: center;
                gap: 4px;
            }
        `;
        document.head.appendChild(style);
    </script>

    <script src="../js/institute-profile-1.js"></script>
    <script src="../js/institute-profile-2.js"></script>
    <script src="../js/institute-profile-3.js"></script>
    <script src="../js/institute-profile-4.js"></script>
</body>

</html>