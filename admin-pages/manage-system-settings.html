<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASTEGNI - System Settings</title>
    <!-- TailwindCSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom Styles -->
    <link rel="stylesheet" href="../css/root.css">
    <link rel="stylesheet" href="../css/admin-profile/admin.css">
    <link rel="stylesheet" href="../css/admin-pages/shared/admin-layout-fix.css">
    <link rel="stylesheet" href="../css/admin-pages/manage-system-settings.css">
    <link rel="stylesheet" href="../css/admin-pages/manage-reviews.css">
    <link rel="stylesheet" href="../css/page-structure/fab.css">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!-- Inline styles to ensure right-side widget positioning -->
    <style>
        .admin-main-layout {
            display: flex !important;
            gap: 1.5rem !important;
        }

        .admin-content-area {
            flex: 1 !important;
        }

        .admin-right-widgets {
            width: 320px !important;
            flex-shrink: 0 !important;
        }
    </style>
</head>

<body class="font-sans">

    <!-- Navigation -->
    <nav class="p-4 sticky top-0 z-10" role="navigation" aria-label="Main navigation">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center gap-4">
                <span class="hamburger" id="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </span>
                <a href="../admin-pages/manage-system-settings.html" class="logo-container">
                    <div class="logo-text">
                        <span class="logo-main">Astegni</span>
                        <span class="logo-sub">System Settings</span>
                    </div>
                    <span class="logo-badge">Beta</span>
                </a>
            </div>

            <div class="flex items-center space-x-6">

                <!-- Notification Icon -->
                <button class="relative focus:outline-none" aria-label="Notifications">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9">
                        </path>
                    </svg>
                    <span
                        class="absolute top-0 right-0 -mt-1 -mr-1 px-2 py-1 text-xs font-bold text-white bg-red-500 rounded-full">5</span>
                </button>

                <!-- Theme Toggle -->
                <button id="theme-toggle-btn" class="focus:outline-none" aria-label="Toggle theme">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z">
                        </path>
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar-container">
        <div class="sidebar-content">
            <div class="sidebar-nav">
                <h3>System Settings</h3>
                <span class="sidebar-close" id="sidebar-close">&times;</span>

                <a href="#" onclick="switchPanel('dashboard'); return false;" class="sidebar-link active">
                    <span class="sidebar-icon">üè†</span>
                    <span>Dashboard</span>
                </a>
                <a href="#" onclick="switchPanel('general'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">‚öôÔ∏è</span>
                    <span>General Settings</span>
                </a>
                <a href="#" onclick="switchPanel('media'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üñºÔ∏è</span>
                    <span>Media Management</span>
                </a>
                <a href="#" onclick="switchPanel('api'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üîå</span>
                    <span>API & Integrations</span>
                </a>
                <a href="#" onclick="switchPanel('pricing'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üí∞</span>
                    <span>Pricing Management</span>
                </a>
                <a href="#" onclick="switchPanel('manage-reviews'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">‚≠ê</span>
                    <span>Manage Reviews</span>
                </a>
                <a href="#" onclick="switchPanel('email'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üìß</span>
                    <span>Email Configuration</span>
                </a>
                <a href="#" onclick="switchPanel('sms'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üì±</span>
                    <span>SMS Configuration</span>
                </a>
                <a href="#" onclick="switchPanel('manage-admins'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üë•</span>
                    <span>Manage Admins</span>
                </a>
                <a href="#" onclick="switchPanel('maintenance'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üöß</span>
                    <span>Maintenance Mode</span>
                </a>
                <hr class="my-4 border-gray-300">
                <a href="#" onclick="switchPanel('impressions'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üìä</span>
                    <span>Impressions</span>
                </a>
                <a href="#" onclick="switchPanel('reports'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üìà</span>
                    <span>View Reports</span>
                </a>
                <a href="#" onclick="switchPanel('security'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üîí</span>
                    <span>Security & Privacy</span>
                </a>
                <a href="#" onclick="switchPanel('backup'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üíæ</span>
                    <span>Backup & Restore</span>
                </a>
                <a href="#" onclick="switchPanel('logs'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üìã</span>
                    <span>System Logs</span>
                </a>
                <a href="#" onclick="switchPanel('performance'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">‚ö°</span>
                    <span>Performance Monitor</span>
                </a>

                <!-- Logout Button at Bottom -->
                <div class="mt-auto pt-4 border-t border-gray-300">
                    <a href="#" onclick="logout(); return false;" class="sidebar-link text-red-500 hover:bg-red-50">
                        <span class="sidebar-icon">üö™</span>
                        <span>Logout</span>
                    </a>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <section class="py-8">
        <div class="container mx-auto px-4">
            <!-- Main Content with Widgets -->
            <div class="flex gap-6">
                <!-- Left Content Area -->
                <div class="flex-1">
                    <!-- Panels Section -->
                    <div class="panels-container">
                        <!-- Dashboard Panel (Default) -->
                        <div id="dashboard-panel" class="panel-content active">

                            <!-- Profile Header Section (Only visible in Dashboard) -->
                            <section class="profile-header-section mb-8">
                                <div class="cover-image-container relative">
                                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='300'%3E%3Crect width='1200' height='300' fill='%23e5e7eb'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%239ca3af' font-family='sans-serif' font-size='20'%3E1200x300%3C/text%3E%3C/svg%3E"
                                        alt="Cover" class="cover-img">
                                    <div class="cover-overlay"></div>
                                    <!-- Cover Upload Button -->
                                    <button onclick="openUploadCoverModal()" class="cover-upload-btn">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z">
                                            </path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                    </button>
                                </div>

                                <div class="profile-main-info">
                                    <div class="profile-info-wrapper">
                                        <div class="profile-avatar-container">
                                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150'%3E%3Crect width='150' height='150' fill='%23e5e7eb'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%239ca3af' font-family='sans-serif' font-size='16'%3E150x150%3C/text%3E%3C/svg%3E"
                                                alt="Admin Profile" class="profile-avatar">
                                            <span class="online-indicator"></span>
                                            <!-- Profile Picture Upload Button -->
                                            <button onclick="openUploadProfileModal()" class="avatar-upload-btn">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor"
                                                    viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        stroke-width="2"
                                                        d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z">
                                                    </path>
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                                </svg>
                                            </button>
                                        </div>

                                        <div class="profile-details-section">
                                            <div class="profile-name-row">
                                                <h1 class="profile-name" id="adminUsername">Loading...</h1>
                                                <div class="badges-row">
                                                    <!-- Badges will be dynamically loaded from database -->
                                                </div>
                                            </div>

                                            <div class="rating-section">
                                                <div class="rating-wrapper">
                                                    <span class="rating-value">--</span>
                                                    <div class="rating-stars">‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</div>
                                                    <span class="rating-count">(Loading...)</span>
                                                    <div class="rating-label">Maximum Authority</div>
                                                </div>
                                            </div>

                                            <div class="profile-location">
                                                <span class="location-icon">üìç</span>
                                                <span>Loading...</span>
                                            </div>

                                            <div class="profile-quote">
                                                <span>"Loading profile data..."</span>
                                            </div>

                                            <div class="profile-actions">
                                                <button onclick="openEditProfileModal()" class="btn-primary">
                                                    <span class="mr-2">‚úèÔ∏è</span>
                                                    Edit Profile
                                                </button>
                                            </div>

                                            <!-- About Me Info -->
                                            <div class="profile-info-grid">
                                                <div class="info-item">
                                                    <span class="info-label">üìß Email:</span>
                                                    <span class="info-value" id="profileEmail">Loading...</span>
                                                </div>
                                                <div class="info-item">
                                                    <span class="info-label">üì± Phone:</span>
                                                    <span class="info-value" id="profilePhone">Loading...</span>
                                                </div>
                                                <div class="info-item">
                                                    <span class="info-label">Access Level:</span>
                                                    <span class="info-value" id="profileAccessLevel">Loading...</span>
                                                </div>
                                                <div class="info-item">
                                                    <span class="info-label">System ID:</span>
                                                    <span class="info-value" id="profileSystemId">Loading...</span>
                                                </div>
                                                <div class="info-item">
                                                    <span class="info-label">Last Login:</span>
                                                    <span class="info-value" id="profileLastLogin">Loading...</span>
                                                </div>
                                                <div class="info-description">
                                                    <p id="profileBio">Loading profile bio...
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- Page Header -->
                            <div class="mb-8 animate-fadeIn">
                                <h1 class="text-3xl font-bold mb-2">System Settings Dashboard</h1>
                                <p class="text-gray-600">Monitor and configure core system settings and platform
                                    parameters</p>
                            </div>

                            <!-- Achievements Section -->
                            <div class="card p-6 mb-8">
                                <h3 class="text-xl font-semibold mb-4">System Status</h3>
                                <div class="grid grid-cols-3 md:grid-cols-6 gap-4">
                                    <div class="text-center">
                                        <div class="text-3xl mb-2">‚úÖ</div>
                                        <div class="text-sm">System Online</div>
                                        <div class="text-xs text-gray-500">100% Uptime</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-3xl mb-2">üõ°Ô∏è</div>
                                        <div class="text-sm">Security</div>
                                        <div class="text-xs text-gray-500">SSL Active</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-3xl mb-2">‚ö°</div>
                                        <div class="text-sm">Performance</div>
                                        <div class="text-xs text-gray-500">Optimal</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-3xl mb-2">üíæ</div>
                                        <div class="text-sm">Backup</div>
                                        <div class="text-xs text-gray-500">Daily Active</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-3xl mb-2">üîÑ</div>
                                        <div class="text-sm">Updates</div>
                                        <div class="text-xs text-gray-500">Current</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-3xl mb-2">üìä</div>
                                        <div class="text-sm">Monitoring</div>
                                        <div class="text-xs text-gray-500">24/7 Active</div>
                                    </div>
                                </div>
                            </div>


                            <!-- All Statistics Cards -->
                            <div class="dashboard-grid mb-8">
                                <!-- System Stats -->
                                <div class="card p-4">
                                    <h3 class="text-lg font-semibold">Active Users</h3>
                                    <p class="text-2xl font-bold">12,458</p>
                                    <span class="text-sm text-gray-500">+235 today</span>
                                </div>
                                <div class="card p-4">
                                    <h3 class="text-lg font-semibold">Server Load</h3>
                                    <p class="text-2xl font-bold text-green-600">32%</p>
                                    <span class="text-sm text-gray-500">Optimal range</span>
                                </div>
                                <div class="card p-4">
                                    <h3 class="text-lg font-semibold">API Calls</h3>
                                    <p class="text-2xl font-bold">458K</p>
                                    <span class="text-sm text-gray-500">Last 24 hours</span>
                                </div>
                                <div class="card p-4">
                                    <h3 class="text-lg font-semibold">Database Size</h3>
                                    <p class="text-2xl font-bold">24.5 GB</p>
                                    <span class="text-sm text-gray-500">45% capacity</span>
                                </div>
                                <div class="card p-4">
                                    <h3 class="text-lg font-semibold">Error Rate</h3>
                                    <p class="text-2xl font-bold text-green-600">0.02%</p>
                                    <span class="text-sm text-gray-500">Low</span>
                                </div>
                                <div class="card p-4">
                                    <h3 class="text-lg font-semibold">Response Time</h3>
                                    <p class="text-2xl font-bold">145ms</p>
                                    <span class="text-sm text-gray-500">Average</span>
                                </div>
                                <div class="card p-4">
                                    <h3 class="text-lg font-semibold">CPU Usage</h3>
                                    <p class="text-2xl font-bold">28%</p>
                                    <span class="text-sm text-gray-500">Normal</span>
                                </div>
                                <div class="card p-4">
                                    <h3 class="text-lg font-semibold">Memory Usage</h3>
                                    <p class="text-2xl font-bold">4.2 GB</p>
                                    <span class="text-sm text-gray-500">Of 16 GB</span>
                                </div>
                            </div>


                            <!-- System Activity Log -->
                            <div class="card p-6 mb-8">
                                <h3 class="text-xl font-semibold mb-4">Recent System Activity</h3>
                                <div class="space-y-4">
                                    <div class="border-l-4 border-blue-500 pl-4">
                                        <div class="flex justify-between items-start mb-2">
                                            <div>
                                                <h4 class="font-semibold">Database Backup Completed</h4>
                                                <p class="text-sm text-gray-600">Automated daily backup successful</p>
                                            </div>
                                            <span class="text-xs text-gray-500">2 hours ago</span>
                                        </div>
                                        <p class="text-gray-700">All data backed up to secure cloud storage. Size:
                                            24.5GB</p>
                                    </div>

                                    <div class="border-l-4 border-green-500 pl-4">
                                        <div class="flex justify-between items-start mb-2">
                                            <div>
                                                <h4 class="font-semibold">Security Scan Complete</h4>
                                                <p class="text-sm text-gray-600">No vulnerabilities detected</p>
                                            </div>
                                            <span class="text-xs text-gray-500">5 hours ago</span>
                                        </div>
                                        <p class="text-gray-700">System security scan completed successfully with no
                                            issues found.</p>
                                    </div>

                                    <div class="border-l-4 border-purple-500 pl-4">
                                        <div class="flex justify-between items-start mb-2">
                                            <div>
                                                <h4 class="font-semibold">API Rate Limit Updated</h4>
                                                <p class="text-sm text-gray-600">Configuration change</p>
                                            </div>
                                            <span class="text-xs text-gray-500">12 hours ago</span>
                                        </div>
                                        <p class="text-gray-700">API rate limits increased from 100 to 150 requests per
                                            minute.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- General Settings Panel -->
                    <div id="general-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">General Settings</h1>
                            <p class="text-gray-600">Configure platform information and registration settings</p>
                        </div>
                        <div class="card p-6 mb-6">
                            <h3 class="text-xl font-bold mb-4">Platform Information</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block mb-2 font-semibold">Site Name</label>
                                    <input type="text" id="platform-name" class="w-full p-2 border rounded-lg"
                                        placeholder="Astegni Educational Platform">
                                </div>
                                <div>
                                    <label class="block mb-2 font-semibold">Site URL</label>
                                    <input type="text" id="site-url" class="w-full p-2 border rounded-lg"
                                        placeholder="https://www.astegni.com">
                                </div>
                                <div>
                                    <label class="block mb-2 font-semibold">Site Tagline</label>
                                    <input type="text" id="platform-tagline" class="w-full p-2 border rounded-lg"
                                        placeholder="Quality Education for Everyone">
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block mb-2 font-semibold">Platform Description</label>
                                    <textarea id="platform-description" class="w-full p-2 border rounded-lg" rows="3"
                                        placeholder="Enter platform description..."></textarea>
                                </div>
                                <div>
                                    <label class="block mb-2 font-semibold">Contact Phone</label>
                                    <div class="flex gap-2">
                                        <input type="phone" id="contact-phone" class="flex-1 p-2 border rounded-lg"
                                            placeholder="+251 911 234 567">
                                        <button onclick="addContactPhone()"
                                            class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 whitespace-nowrap">
                                            <i class="fas fa-plus mr-1"></i> Add Phone
                                        </button>
                                    </div>
                                    <div id="additional-phones" class="mt-2 space-y-2"></div>
                                </div>
                                <div>
                                    <label class="block mb-2 font-semibold">Email</label>
                                    <div class="flex gap-2">
                                        <input type="email" id="contact-email" class="flex-1 p-2 border rounded-lg"
                                            placeholder="contact@astegni.com">
                                        <button onclick="addContactEmail()"
                                            class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 whitespace-nowrap">
                                            <i class="fas fa-plus mr-1"></i> Add Email
                                        </button>
                                    </div>
                                    <div id="additional-emails" class="mt-2 space-y-2"></div>
                                </div>
                                <div>
                                    <label class="block mb-2 font-semibold">Default Language</label>
                                    <select class="w-full p-2 border rounded-lg">
                                        <option>English</option>
                                        <option>Amharic</option>
                                        <option>Oromo</option>
                                        <option>Tigrinya</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block mb-2 font-semibold">Timezone</label>
                                    <select class="w-full p-2 border rounded-lg">
                                        <option>Africa/Addis_Ababa (GMT+3)</option>
                                        <option>UTC</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="card p-6 mb-6">
                            <h3 class="text-xl font-bold mb-4">Registration Settings</h3>
                            <div class="space-y-4">
                                <label class="flex items-center gap-3">
                                    <input type="checkbox" checked class="w-4 h-4">
                                    <span>Allow user registration</span>
                                </label>
                                <label class="flex items-center gap-3">
                                    <input type="checkbox" checked class="w-4 h-4">
                                    <span>Email verification required</span>
                                </label>
                                <label class="flex items-center gap-3">
                                    <input type="checkbox" checked class="w-4 h-4">
                                    <span>Phone verification required</span>
                                </label>
                                <label class="flex items-center gap-3">
                                    <input type="checkbox" checked class="w-4 h-4">
                                    <span>Allow social media login</span>
                                </label>
                            </div>
                        </div>

                        <div class="flex justify-end gap-3">
                            <button class="px-6 py-2 border rounded-lg hover:bg-gray-50">Reset to Default</button>
                            <button onclick="saveGeneralSettings()"
                                class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Save
                                Changes</button>
                        </div>
                    </div>

                    <!-- Media Management Panel -->
                    <div id="media-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Media Management</h1>
                            <p class="text-gray-600">Manage system images, videos, and media settings</p>
                        </div>
                        <div class="card p-6 mb-6">
                            <h3 class="text-xl font-bold mb-4">Upload System Media</h3>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <!-- Image Upload Section -->
                                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6">
                                    <h4 class="font-semibold mb-3">üì∑ Upload Images</h4>
                                    <p class="text-sm text-gray-600 mb-4">Upload profile pictures, cover images, logos,
                                        favicons, or system images</p>
                                    <button onclick="openImageUploadModal()"
                                        class="block w-full text-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                        Upload Image
                                    </button>
                                    <p class="text-sm text-gray-500 mt-2">Supports: PNG, JPG, GIF, SVG, ICO</p>
                                </div>

                                <!-- Video Upload Section -->
                                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6">
                                    <h4 class="font-semibold mb-3">üé• Upload Videos</h4>
                                    <p class="text-sm text-gray-600 mb-4">Upload ads, tutorials, courses, success
                                        stories, and more</p>
                                    <button onclick="openVideoUploadModal()"
                                        class="block w-full text-center px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">
                                        Upload Video
                                    </button>
                                    <p class="text-sm text-gray-500 mt-2">Supports: MP4, AVI, MOV, WMV</p>
                                </div>
                            </div>
                        </div>

                        <div class="card p-6">
                            <h3 class="text-xl font-bold mb-4">Media Settings - Tier-Based Upload Limits</h3>
                            <p class="text-gray-600 mb-6">Set total storage limits for each user tier. Users can upload
                                as many files as they want until they reach their storage limit.</p>

                            <!-- Free Tier -->
                            <div class="mb-6 p-4 border-2 border-gray-200 rounded-lg bg-gray-50">
                                <div class="flex items-center gap-2 mb-4">
                                    <i class="fas fa-gift text-gray-600"></i>
                                    <h4 class="text-lg font-bold text-gray-700">Free Tier</h4>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block mb-2 font-semibold text-sm">Total Image Storage Limit
                                            (MB)</label>
                                        <input type="number" id="free-image-limit" class="w-full p-2 border rounded-lg"
                                            placeholder="100" min="10" step="10">
                                        <p class="text-xs text-gray-500 mt-1">Total storage for all images</p>
                                    </div>
                                    <div>
                                        <label class="block mb-2 font-semibold text-sm">Total Video Storage Limit
                                            (MB)</label>
                                        <input type="number" id="free-video-limit" class="w-full p-2 border rounded-lg"
                                            placeholder="500" min="100" step="50">
                                        <p class="text-xs text-gray-500 mt-1">Total storage for all videos</p>
                                    </div>
                                    <div>
                                        <label class="block mb-2 font-semibold text-sm">Single Image Max Size
                                            (MB)</label>
                                        <input type="number" id="free-image-single" class="w-full p-2 border rounded-lg"
                                            placeholder="2" min="1">
                                        <p class="text-xs text-gray-500 mt-1">Max size per image file</p>
                                    </div>
                                    <div>
                                        <label class="block mb-2 font-semibold text-sm">Single Video Max Size
                                            (MB)</label>
                                        <input type="number" id="free-video-single" class="w-full p-2 border rounded-lg"
                                            placeholder="50" min="10">
                                        <p class="text-xs text-gray-500 mt-1">Max size per video file</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Basic Tier -->
                            <div class="mb-6 p-4 border-2 border-blue-200 rounded-lg bg-blue-50">
                                <div class="flex items-center gap-2 mb-4">
                                    <i class="fas fa-star text-blue-600"></i>
                                    <h4 class="text-lg font-bold text-blue-700">Basic Tier</h4>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block mb-2 font-semibold text-sm">Total Image Storage Limit
                                            (MB)</label>
                                        <input type="number" id="basic-image-limit" class="w-full p-2 border rounded-lg"
                                            placeholder="500" min="100" step="50">
                                        <p class="text-xs text-gray-500 mt-1">Total storage for all images</p>
                                    </div>
                                    <div>
                                        <label class="block mb-2 font-semibold text-sm">Total Video Storage Limit
                                            (MB)</label>
                                        <input type="number" id="basic-video-limit" class="w-full p-2 border rounded-lg"
                                            placeholder="2000" min="500" step="100">
                                        <p class="text-xs text-gray-500 mt-1">Total storage for all videos</p>
                                    </div>
                                    <div>
                                        <label class="block mb-2 font-semibold text-sm">Single Image Max Size
                                            (MB)</label>
                                        <input type="number" id="basic-image-single"
                                            class="w-full p-2 border rounded-lg" placeholder="5" min="1">
                                        <p class="text-xs text-gray-500 mt-1">Max size per image file</p>
                                    </div>
                                    <div>
                                        <label class="block mb-2 font-semibold text-sm">Single Video Max Size
                                            (MB)</label>
                                        <input type="number" id="basic-video-single"
                                            class="w-full p-2 border rounded-lg" placeholder="100" min="10">
                                        <p class="text-xs text-gray-500 mt-1">Max size per video file</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Premium Tier -->
                            <div class="mb-6 p-4 border-2 border-purple-200 rounded-lg bg-purple-50">
                                <div class="flex items-center gap-2 mb-4">
                                    <i class="fas fa-crown text-purple-600"></i>
                                    <h4 class="text-lg font-bold text-purple-700">Premium Tier</h4>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block mb-2 font-semibold text-sm">Total Image Storage Limit
                                            (MB)</label>
                                        <input type="number" id="premium-image-limit"
                                            class="w-full p-2 border rounded-lg" placeholder="2000" min="500"
                                            step="100">
                                        <p class="text-xs text-gray-500 mt-1">Total storage for all images</p>
                                    </div>
                                    <div>
                                        <label class="block mb-2 font-semibold text-sm">Total Video Storage Limit
                                            (MB)</label>
                                        <input type="number" id="premium-video-limit"
                                            class="w-full p-2 border rounded-lg" placeholder="10000" min="1000"
                                            step="500">
                                        <p class="text-xs text-gray-500 mt-1">Total storage for all videos</p>
                                    </div>
                                    <div>
                                        <label class="block mb-2 font-semibold text-sm">Single Image Max Size
                                            (MB)</label>
                                        <input type="number" id="premium-image-single"
                                            class="w-full p-2 border rounded-lg" placeholder="10" min="1">
                                        <p class="text-xs text-gray-500 mt-1">Max size per image file</p>
                                    </div>
                                    <div>
                                        <label class="block mb-2 font-semibold text-sm">Single Video Max Size
                                            (MB)</label>
                                        <input type="number" id="premium-video-single"
                                            class="w-full p-2 border rounded-lg" placeholder="500" min="10">
                                        <p class="text-xs text-gray-500 mt-1">Max size per video file</p>
                                    </div>
                                </div>
                            </div>

                            <!-- General Media Settings -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6 pt-6 border-t">
                                <div>
                                    <label class="block mb-2 font-semibold">Allowed Image Formats</label>
                                    <input type="text" class="w-full p-2 border rounded-lg"
                                        placeholder="jpg, jpeg, png, gif, webp">
                                </div>
                                <div>
                                    <label class="block mb-2 font-semibold">Allowed Video Formats</label>
                                    <input type="text" class="w-full p-2 border rounded-lg"
                                        placeholder="mp4, avi, mov, wmv">
                                </div>
                            </div>

                            <div class="flex justify-end gap-3 mt-6">
                                <button onclick="saveMediaSettings()"
                                    class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Save Media
                                    Settings</button>
                            </div>
                        </div>

                        <!-- Uploaded System Media Display -->
                        <div class="card p-6 mt-6">
                            <h3 class="text-xl font-bold mb-4">üì∑ Uploaded System Images</h3>
                            <div id="uploaded-images-list">
                                <p class="text-gray-500">Loading...</p>
                            </div>
                        </div>

                        <div class="card p-6 mt-6">
                            <h3 class="text-xl font-bold mb-4">üé• Uploaded System Videos</h3>
                            <div id="uploaded-videos-list">
                                <p class="text-gray-500">Loading...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Impressions Management Panel -->
                    <div id="impressions-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Manage Impressions</h1>
                            <p class="text-gray-600">Track and manage system impressions and analytics</p>
                        </div>

                        <div class="card p-6 mb-6">
                            <h3 class="text-xl font-bold mb-4">Impression Statistics</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div class="text-center p-4 bg-blue-50 rounded-lg">
                                    <div class="text-3xl font-bold text-blue-600">124,567</div>
                                    <div class="text-gray-600">Total Page Views</div>
                                </div>
                                <div class="text-center p-4 bg-green-50 rounded-lg">
                                    <div class="text-3xl font-bold text-green-600">45,890</div>
                                    <div class="text-gray-600">Unique Visitors</div>
                                </div>
                                <div class="text-center p-4 bg-purple-50 rounded-lg">
                                    <div class="text-3xl font-bold text-purple-600">2.71</div>
                                    <div class="text-gray-600">Avg. Pages per Session</div>
                                </div>
                            </div>
                        </div>

                        <div class="card p-6 mb-6">
                            <h3 class="text-xl font-bold mb-4">Content Impressions</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                    <span class="font-medium">Video Impressions</span>
                                    <span class="text-gray-600">89,234 views</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                    <span class="font-medium">Course Impressions</span>
                                    <span class="text-gray-600">67,890 views</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                    <span class="font-medium">Blog Post Impressions</span>
                                    <span class="text-gray-600">45,678 views</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                    <span class="font-medium">Ad Impressions</span>
                                    <span class="text-gray-600">23,456 views</span>
                                </div>
                            </div>
                        </div>

                        <div class="card p-6">
                            <h3 class="text-xl font-bold mb-4">Impression Settings</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="flex items-center gap-3">
                                        <input type="checkbox" checked class="w-4 h-4">
                                        <span>Track page impressions</span>
                                    </label>
                                </div>
                                <div>
                                    <label class="flex items-center gap-3">
                                        <input type="checkbox" checked class="w-4 h-4">
                                        <span>Track video impressions</span>
                                    </label>
                                </div>
                                <div>
                                    <label class="flex items-center gap-3">
                                        <input type="checkbox" checked class="w-4 h-4">
                                        <span>Track ad impressions</span>
                                    </label>
                                </div>
                                <div>
                                    <label class="flex items-center gap-3">
                                        <input type="checkbox" class="w-4 h-4">
                                        <span>Enable detailed analytics</span>
                                    </label>
                                </div>
                            </div>
                            <div class="flex justify-end gap-3 mt-6">
                                <button onclick="saveImpressionSettings()"
                                    class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                    Save Settings
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Email Configuration Panel -->
                    <div id="email-panel" class="panel-content hidden">
                        <div class="mb-8 flex items-center justify-between">
                            <div>
                                <h1 class="text-3xl font-bold mb-2">Email Accounts</h1>
                                <p class="text-gray-600">Manage SMTP email accounts and configurations</p>
                            </div>
                            <button onclick="showAddEmailForm()" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-lg">
                                <i class="fas fa-plus mr-2"></i>Add Email Account
                            </button>
                        </div>

                        <!-- Email Accounts List -->
                        <div id="email-accounts-list" class="mb-6">
                            <!-- Email cards will be inserted here by JavaScript -->
                        </div>


                        <!-- Email Statistics -->
                        <div class="card p-6 mb-6">
                            <h3 class="text-xl font-bold mb-4">Email Statistics</h3>
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                                <div class="text-center p-4 bg-blue-50 rounded-lg">
                                    <div class="text-3xl font-bold text-blue-600" id="stat-emails-sent">0</div>
                                    <div class="text-sm text-gray-600 mt-1">Emails Sent Today</div>
                                </div>
                                <div class="text-center p-4 bg-green-50 rounded-lg">
                                    <div class="text-3xl font-bold text-green-600" id="stat-emails-delivered">0</div>
                                    <div class="text-sm text-gray-600 mt-1">Successfully Delivered</div>
                                </div>
                                <div class="text-center p-4 bg-yellow-50 rounded-lg">
                                    <div class="text-3xl font-bold text-yellow-600" id="stat-emails-pending">0</div>
                                    <div class="text-sm text-gray-600 mt-1">Pending in Queue</div>
                                </div>
                                <div class="text-center p-4 bg-red-50 rounded-lg">
                                    <div class="text-3xl font-bold text-red-600" id="stat-emails-failed">0</div>
                                    <div class="text-sm text-gray-600 mt-1">Failed to Send</div>
                                </div>
                            </div>
                            <div class="mt-4 pt-4 border-t">
                                <div class="flex items-center justify-between">
                                    <div class="text-sm text-gray-600">
                                        <i class="fas fa-info-circle mr-1"></i>
                                        Daily limit: <span id="daily-limit-display">1000</span> emails
                                        | Used: <span id="daily-used-display">0</span>
                                        | Remaining: <span id="daily-remaining-display">1000</span>
                                    </div>
                                    <button onclick="viewEmailLogs()" class="px-4 py-2 border rounded-lg hover:bg-gray-50 text-sm">
                                        <i class="fas fa-list mr-2"></i>View Logs
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Email Templates -->
                        <div class="card p-6 mb-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-bold">Email Templates</h3>
                                <button onclick="addNewEmailTemplate()" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">
                                    <i class="fas fa-plus mr-2"></i>Add Template
                                </button>
                            </div>
                            <div id="email-templates-list" class="space-y-4">
                                <!-- Templates will be loaded dynamically -->
                                <div class="text-center text-gray-500 py-8">
                                    <i class="fas fa-spinner fa-spin text-2xl mb-2"></i>
                                    <p>Loading email templates...</p>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Email Logs -->
                        <div class="card p-6">
                            <h3 class="text-xl font-bold mb-4">Recent Email Activity</h3>
                            <div id="recent-email-logs" class="space-y-3">
                                <!-- Logs will be loaded dynamically -->
                                <div class="text-center text-gray-500 py-8">
                                    <i class="fas fa-inbox text-2xl mb-2"></i>
                                    <p>No recent email activity</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pricing Management Panel -->
                    <div id="pricing-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Pricing Management</h1>
                            <p class="text-gray-600">Configure platform pricing, payment gateways, and commission
                                settings</p>
                        </div>
                        <div class="card p-6 mb-6">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <h3 class="text-xl font-bold">Payment Gateway Configuration</h3>
                                    <p class="text-sm text-gray-600">Configure payment gateway settings for the platform
                                    </p>
                                </div>
                                <button onclick="savePaymentGatewaySettings()"
                                    class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                                    <i class="fas fa-save mr-2"></i>Save Settings
                                </button>
                            </div>
                            <div class="space-y-6">
                                <!-- Additional Payment Gateways Container -->
                                <div id="additional-gateways-container"></div>

                                <!-- Add Gateway Button -->
                                <button onclick="openAddPaymentGatewayModal()"
                                    class="w-full py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all text-gray-600 hover:text-blue-600 font-medium">
                                    <i class="fas fa-plus-circle mr-2"></i>Add Payment Gateway
                                </button>
                            </div>
                        </div>

                        <!-- Verification Payment Settings -->
                        <div class="card p-6 mb-6">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <h3 class="text-xl font-bold">
                                        <i class="fas fa-certificate mr-2 text-indigo-600"></i>
                                        Verification Payment Settings
                                    </h3>
                                    <p class="text-sm text-gray-600">Set prices for account verification badges</p>
                                </div>
                                <button onclick="saveVerificationPricing()"
                                    class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                                    <i class="fas fa-save mr-2"></i>Set Price
                                </button>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="p-4 border-2 border-indigo-200 rounded-lg bg-indigo-50">
                                    <div class="flex items-center gap-2 mb-3">
                                        <i class="fas fa-check-circle text-indigo-600 text-xl"></i>
                                        <h4 class="font-bold text-indigo-700">Individual Verification</h4>
                                    </div>
                                    <div>
                                        <label class="block mb-2 font-semibold text-sm">Verification Fee (ETB)</label>
                                        <input type="number" id="individual-verification-price"
                                            class="w-full p-2 border rounded-lg" placeholder="e.g. 50" min="0" step="5">
                                    </div>
                                    <div class="mt-2 text-xs text-gray-600">
                                        <i class="fas fa-info-circle mr-1"></i>
                                        One-time fee for students, tutors, parents
                                    </div>
                                </div>

                                <div class="p-4 border-2 border-cyan-200 rounded-lg bg-cyan-50">
                                    <div class="flex items-center gap-2 mb-3">
                                        <i class="fas fa-building text-cyan-600 text-xl"></i>
                                        <h4 class="font-bold text-cyan-700">Organization Verification</h4>
                                    </div>
                                    <div>
                                        <label class="block mb-2 font-semibold text-sm">Verification Fee (ETB)</label>
                                        <input type="number" id="org-verification-price"
                                            class="w-full p-2 border rounded-lg" placeholder="e.g. 200" min="0"
                                            step="10">
                                    </div>
                                    <div class="mt-2 text-xs text-gray-600">
                                        <i class="fas fa-info-circle mr-1"></i>
                                        One-time fee for institutions, advertisers
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Campaign Advertising Pricing -->
                        <div class="card p-6 mb-6" id="campaign-pricing-section">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <h3 class="text-xl font-bold">
                                        <i class="fas fa-bullhorn mr-2 text-orange-600"></i>
                                        Campaign Advertising Pricing
                                    </h3>
                                    <p class="text-sm text-gray-600">Manage advertising campaign packages with custom
                                        pricing tiers</p>
                                </div>
                                <button onclick="openAddCampaignPackageModal()"
                                    class="px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors">
                                    <i class="fas fa-plus mr-2"></i>Add Package
                                </button>
                            </div>

                            <!-- Dynamic Packages Grid -->
                            <div id="campaign-packages-grid"
                                class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                                <!-- Packages will be loaded dynamically by campaign-pricing-manager.js -->
                            </div>

                            <!-- Campaign Features Information -->
                            <div class="p-4 bg-blue-50 rounded-lg border border-blue-200">
                                <h5 class="font-semibold mb-2 flex items-center gap-2">
                                    <i class="fas fa-info-circle text-blue-600"></i>
                                    Default Campaign Features (Applied to All Packages)
                                </h5>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-gray-700">
                                    <div class="flex items-start gap-2">
                                        <i class="fas fa-eye text-blue-600 mt-1"></i>
                                        <div><strong>Unlimited Impressions:</strong> No cap on ad views during campaign
                                            period</div>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <i class="fas fa-bullseye text-blue-600 mt-1"></i>
                                        <div><strong>Custom Targeting:</strong> Target by grade level, subject,
                                            location, and interests</div>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <i class="fas fa-star text-blue-600 mt-1"></i>
                                        <div><strong>Priority Placement:</strong> Ads appear in premium positions across
                                            the platform</div>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <i class="fas fa-chart-bar text-blue-600 mt-1"></i>
                                        <div><strong>Full Analytics Suite:</strong> Real-time metrics, engagement data,
                                            and performance reports</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Subscription Price Settings with Discount Tiers -->
                        <div class="card p-6 mb-6">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <h3 class="text-xl font-bold">Subscription Price Settings & Discount Tiers</h3>
                                    <p class="text-sm text-gray-600">Set base monthly prices and discounts for longer
                                        payment periods</p>
                                </div>
                                <button onclick="saveSubscriptionPricing()"
                                    class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors">
                                    <i class="fas fa-save mr-2"></i>Set Price
                                </button>
                            </div>
                            <!-- Base Prices -->
                            <div class="mb-6">
                                <h4 class="font-semibold mb-3">Base Monthly Prices</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <!-- Basic Tier -->
                                    <div class="p-4 border-2 border-blue-200 rounded-lg bg-blue-50">
                                        <div class="flex items-center gap-2 mb-3">
                                            <i class="fas fa-star text-blue-600"></i>
                                            <h5 class="font-bold text-blue-700">Basic Tier</h5>
                                        </div>
                                        <div>
                                            <label class="block mb-2 font-semibold text-sm">Monthly Price (ETB)</label>
                                            <input type="number" id="basic-base-price"
                                                class="w-full p-2 border rounded-lg" placeholder="99" min="0" step="1" oninput="calculateLivePricing()">
                                        </div>
                                        <div class="mt-3 text-xs text-gray-600">
                                            <i class="fas fa-info-circle mr-1"></i>
                                            For students, tutors, and general users
                                        </div>

                                        <!-- Features Section -->
                                        <div class="mt-4 pt-4 border-t border-blue-300">
                                            <div class="flex items-center justify-between mb-2">
                                                <label class="block font-semibold text-sm">Features Included</label>
                                                <button type="button" onclick="addBasicTierFeature()"
                                                    class="flex items-center gap-1 px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition">
                                                    <i class="fas fa-plus"></i>
                                                    <span>Add Feature</span>
                                                </button>
                                            </div>
                                            <div id="basic-tier-features-container" class="space-y-2 mt-2">
                                                <!-- Dynamic features will be added here -->
                                            </div>
                                            <div id="basic-features-empty-state" class="text-center py-2 text-gray-500 text-xs border border-dashed border-blue-300 rounded mt-2">
                                                <i class="fas fa-list-ul mb-1"></i>
                                                <p>No features added yet</p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Premium Tier -->
                                    <div class="p-4 border-2 border-purple-200 rounded-lg bg-purple-50">
                                        <div class="flex items-center gap-2 mb-3">
                                            <i class="fas fa-crown text-purple-600"></i>
                                            <h5 class="font-bold text-purple-700">Premium Tier</h5>
                                        </div>
                                        <div>
                                            <label class="block mb-2 font-semibold text-sm">Monthly Price (ETB)</label>
                                            <input type="number" id="premium-base-price"
                                                class="w-full p-2 border rounded-lg" placeholder="299" min="0" step="1" oninput="calculateLivePricing()">
                                        </div>
                                        <div class="mt-3 text-xs text-gray-600">
                                            <i class="fas fa-info-circle mr-1"></i>
                                            Advanced features and priority support
                                        </div>

                                        <!-- Features Section -->
                                        <div class="mt-4 pt-4 border-t border-purple-300">
                                            <div class="flex items-center justify-between mb-2">
                                                <label class="block font-semibold text-sm">Features Included</label>
                                                <button type="button" onclick="addPremiumTierFeature()"
                                                    class="flex items-center gap-1 px-2 py-1 bg-purple-600 text-white text-xs rounded hover:bg-purple-700 transition">
                                                    <i class="fas fa-plus"></i>
                                                    <span>Add Feature</span>
                                                </button>
                                            </div>
                                            <div id="premium-tier-features-container" class="space-y-2 mt-2">
                                                <!-- Dynamic features will be added here -->
                                            </div>
                                            <div id="premium-features-empty-state" class="text-center py-2 text-gray-500 text-xs border border-dashed border-purple-300 rounded mt-2">
                                                <i class="fas fa-list-ul mb-1"></i>
                                                <p>No features added yet</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Discount Tiers -->
                            <div class="border-t pt-6">
                                <h4 class="font-semibold mb-3">Payment Period Discounts</h4>
                                <p class="text-sm text-gray-600 mb-4">
                                    <i class="fas fa-info-circle mr-1"></i>
                                    Set discount percentages for different payment periods. Basic & Premium tiers start
                                    from 1 month.
                                </p>

                                <div class="overflow-x-auto">
                                    <table class="w-full border-collapse">
                                        <thead>
                                            <tr class="bg-gray-100">
                                                <th class="border p-3 text-left font-semibold">Payment Period</th>
                                                <th class="border p-3 text-center font-semibold">Basic Discount (%)</th>
                                                <th class="border p-3 text-center font-semibold">Basic Final Price</th>
                                                <th class="border p-3 text-center font-semibold">Premium Discount (%)</th>
                                                <th class="border p-3 text-center font-semibold">Premium Final Price</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="bg-blue-50">
                                                <td class="border p-3 font-medium">1 Month</td>
                                                <td class="border p-3"><input type="number" id="basic-discount-1m"
                                                        class="w-full p-2 border rounded text-center" placeholder="0"
                                                        min="0" max="100" step="1" oninput="calculateLivePricing()"></td>
                                                <td class="border p-3"><span id="basic-price-1m" class="font-bold text-blue-600">--</span></td>
                                                <td class="border p-3"><input type="number" id="premium-discount-1m"
                                                        class="w-full p-2 border rounded text-center" placeholder="0"
                                                        min="0" max="100" step="1" oninput="calculateLivePricing()"></td>
                                                <td class="border p-3"><span id="premium-price-1m" class="font-bold text-purple-600">--</span></td>
                                            </tr>
                                            <tr>
                                                <td class="border p-3 font-medium">3 Months</td>
                                                <td class="border p-3"><input type="number" id="basic-discount-3m"
                                                        class="w-full p-2 border rounded text-center" placeholder="5"
                                                        min="0" max="100" step="1" oninput="calculateLivePricing()"></td>
                                                <td class="border p-3"><span id="basic-price-3m" class="font-bold text-blue-600">--</span></td>
                                                <td class="border p-3"><input type="number" id="premium-discount-3m"
                                                        class="w-full p-2 border rounded text-center" placeholder="5"
                                                        min="0" max="100" step="1" oninput="calculateLivePricing()"></td>
                                                <td class="border p-3"><span id="premium-price-3m" class="font-bold text-purple-600">--</span></td>
                                            </tr>
                                            <tr class="bg-blue-50">
                                                <td class="border p-3 font-medium">6 Months</td>
                                                <td class="border p-3"><input type="number" id="basic-discount-6m"
                                                        class="w-full p-2 border rounded text-center" placeholder="10"
                                                        min="0" max="100" step="1" oninput="calculateLivePricing()"></td>
                                                <td class="border p-3"><span id="basic-price-6m" class="font-bold text-blue-600">--</span></td>
                                                <td class="border p-3"><input type="number" id="premium-discount-6m"
                                                        class="w-full p-2 border rounded text-center" placeholder="10"
                                                        min="0" max="100" step="1" oninput="calculateLivePricing()"></td>
                                                <td class="border p-3"><span id="premium-price-6m" class="font-bold text-purple-600">--</span></td>
                                            </tr>
                                            <tr>
                                                <td class="border p-3 font-medium">9 Months</td>
                                                <td class="border p-3"><input type="number" id="basic-discount-9m"
                                                        class="w-full p-2 border rounded text-center" placeholder="15"
                                                        min="0" max="100" step="1" oninput="calculateLivePricing()"></td>
                                                <td class="border p-3"><span id="basic-price-9m" class="font-bold text-blue-600">--</span></td>
                                                <td class="border p-3"><input type="number" id="premium-discount-9m"
                                                        class="w-full p-2 border rounded text-center" placeholder="15"
                                                        min="0" max="100" step="1" oninput="calculateLivePricing()"></td>
                                                <td class="border p-3"><span id="premium-price-9m" class="font-bold text-purple-600">--</span></td>
                                            </tr>
                                            <tr class="bg-blue-50">
                                                <td class="border p-3 font-medium">1 Year</td>
                                                <td class="border p-3"><input type="number" id="basic-discount-12m"
                                                        class="w-full p-2 border rounded text-center" placeholder="20"
                                                        min="0" max="100" step="1" oninput="calculateLivePricing()"></td>
                                                <td class="border p-3"><span id="basic-price-12m" class="font-bold text-blue-600">--</span></td>
                                                <td class="border p-3"><input type="number" id="premium-discount-12m"
                                                        class="w-full p-2 border rounded text-center" placeholder="20"
                                                        min="0" max="100" step="1" oninput="calculateLivePricing()"></td>
                                                <td class="border p-3"><span id="premium-price-12m" class="font-bold text-purple-600">--</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- Affiliate Management -->
                        <div class="card p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <h3 class="text-xl font-bold">
                                        <i class="fas fa-users mr-2 text-purple-600"></i>
                                        Affiliate Management
                                    </h3>
                                    <p class="text-sm text-gray-600">Configure affiliate commission rates</p>
                                </div>
                                <button onclick="saveAffiliateSettings()"
                                    class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors">
                                    <i class="fas fa-save mr-2"></i>Set Rates
                                </button>
                            </div>
                            <!-- Affiliate Commission Structure -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                <!-- Direct Affiliate -->
                                <div class="p-4 border-2 border-blue-200 rounded-lg bg-blue-50">
                                    <div class="flex items-center gap-2 mb-4">
                                        <i class="fas fa-user-plus text-blue-600 text-xl"></i>
                                        <div>
                                            <h4 class="font-bold text-blue-700">Direct Affiliate</h4>
                                            <p class="text-xs text-gray-600">User shares ‚Üí Person subscribes</p>
                                        </div>
                                    </div>
                                    <div class="space-y-3">
                                        <div>
                                            <label class="block mb-2 font-semibold text-sm">Basic Subscription
                                                Commission (%)</label>
                                            <input type="number" id="direct-basic-commission"
                                                class="w-full p-2 border rounded-lg" placeholder="20" min="0" max="100"
                                                step="1">
                                        </div>
                                        <div>
                                            <label class="block mb-2 font-semibold text-sm">Premium Subscription
                                                Commission (%)</label>
                                            <input type="number" id="direct-premium-commission"
                                                class="w-full p-2 border rounded-lg" placeholder="25" min="0" max="100"
                                                step="1">
                                        </div>
                                        <div>
                                            <label class="block mb-2 font-semibold text-sm">Duration (Months)</label>
                                            <input type="number" id="direct-duration"
                                                class="w-full p-2 border rounded-lg" placeholder="12" min="1" max="24"
                                                step="1">
                                            <p class="text-xs text-gray-500 mt-1">How long the affiliate earns
                                                commission</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Indirect Affiliate -->
                                <div class="p-4 border-2 border-purple-200 rounded-lg bg-purple-50">
                                    <div class="flex items-center gap-2 mb-4">
                                        <i class="fas fa-users text-purple-600 text-xl"></i>
                                        <div>
                                            <h4 class="font-bold text-purple-700">Indirect Affiliate</h4>
                                            <p class="text-xs text-gray-600">Referred person shares ‚Üí Third person
                                                subscribes</p>
                                        </div>
                                    </div>
                                    <div class="space-y-3">
                                        <div>
                                            <label class="block mb-2 font-semibold text-sm">Basic Subscription
                                                Commission (%)</label>
                                            <input type="number" id="indirect-basic-commission"
                                                class="w-full p-2 border rounded-lg" placeholder="10" min="0" max="100"
                                                step="1">
                                        </div>
                                        <div>
                                            <label class="block mb-2 font-semibold text-sm">Premium Subscription
                                                Commission (%)</label>
                                            <input type="number" id="indirect-premium-commission"
                                                class="w-full p-2 border rounded-lg" placeholder="15" min="0" max="100"
                                                step="1">
                                        </div>
                                        <div>
                                            <label class="block mb-2 font-semibold text-sm">Duration (Months)</label>
                                            <input type="number" id="indirect-duration"
                                                class="w-full p-2 border rounded-lg" placeholder="6" min="1" max="12"
                                                step="1">
                                            <p class="text-xs text-gray-500 mt-1">How long the affiliate earns
                                                commission</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Live Commission Calculator -->
                            <div class="border-t pt-6 mb-6">
                                <div class="bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg border border-green-200">
                                    <div class="flex items-center justify-between mb-3">
                                        <h4 class="font-bold flex items-center gap-2">
                                            <i class="fas fa-calculator text-green-600"></i>
                                            Live Commission Calculator
                                        </h4>
                                        <div class="flex items-center gap-2">
                                            <label class="text-xs font-semibold text-gray-700">Subscription Period:</label>
                                            <select id="affiliate-calc-period" onchange="calculateAffiliateExamples()" class="px-3 py-1.5 border rounded-lg text-sm font-medium bg-white">
                                                <option value="1m">1 Month</option>
                                                <option value="3m">3 Months</option>
                                                <option value="6m" selected>6 Months</option>
                                                <option value="9m">9 Months</option>
                                                <option value="12m">1 Year</option>
                                            </select>
                                        </div>
                                    </div>
                                    <p class="text-xs text-gray-600 mb-4">
                                        <i class="fas fa-info-circle mr-1"></i>
                                        Commission calculated on <strong>final discounted price</strong> (what customer actually pays)
                                    </p>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <!-- Direct Affiliate Commissions -->
                                        <div class="bg-white p-3 rounded-lg border border-blue-200">
                                            <h5 class="font-semibold text-blue-700 mb-2 text-sm">Direct Affiliate Earnings</h5>
                                            <div class="space-y-2 text-sm">
                                                <div class="flex justify-between items-start">
                                                    <span class="text-gray-600">Basic Subscription:</span>
                                                    <div class="text-right">
                                                        <div id="direct-basic-calc" class="font-bold text-blue-600">-- ETB</div>
                                                        <div id="direct-basic-calc-detail" class="text-xs text-gray-500">--</div>
                                                    </div>
                                                </div>
                                                <div class="flex justify-between items-start">
                                                    <span class="text-gray-600">Premium Subscription:</span>
                                                    <div class="text-right">
                                                        <div id="direct-premium-calc" class="font-bold text-blue-600">-- ETB</div>
                                                        <div id="direct-premium-calc-detail" class="text-xs text-gray-500">--</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Indirect Affiliate Commissions -->
                                        <div class="bg-white p-3 rounded-lg border border-purple-200">
                                            <h5 class="font-semibold text-purple-700 mb-2 text-sm">Indirect Affiliate Earnings</h5>
                                            <div class="space-y-2 text-sm">
                                                <div class="flex justify-between items-start">
                                                    <span class="text-gray-600">Basic Subscription:</span>
                                                    <div class="text-right">
                                                        <div id="indirect-basic-calc" class="font-bold text-purple-600">-- ETB</div>
                                                        <div id="indirect-basic-calc-detail" class="text-xs text-gray-500">--</div>
                                                    </div>
                                                </div>
                                                <div class="flex justify-between items-start">
                                                    <span class="text-gray-600">Premium Subscription:</span>
                                                    <div class="text-right">
                                                        <div id="indirect-premium-calc" class="font-bold text-purple-600">-- ETB</div>
                                                        <div id="indirect-premium-calc-detail" class="text-xs text-gray-500">--</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mt-3 text-xs text-gray-500 italic">
                                        <i class="fas fa-lightbulb mr-1"></i>
                                        Commission based on discounted price after applying period discount. Updates in real-time!
                                    </div>
                                </div>
                            </div>

                            <!-- Affiliate Settings -->
                            <div class="border-t pt-6">
                                <h4 class="font-bold mb-4">Affiliate Program Settings</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block mb-2 font-semibold">Minimum Payout for Affiliates
                                            (ETB)</label>
                                        <input type="number" id="minimum-payout" class="w-full p-2 border rounded-lg" placeholder="100"
                                            min="0" step="10" placelholder="100">
                                    </div>
                                    <div>
                                        <label class="block mb-2 font-semibold">Affiliate Payout Schedule</label>
                                        <select id="payout-schedule" class="w-full p-2 border rounded-lg">
                                            <option value="monthly">Monthly</option>
                                            <option value="bi-weekly">Bi-weekly</option>
                                            <option value="weekly">Weekly</option>
                                        </select>
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="flex items-center gap-3">
                                            <input type="checkbox" id="enable-affiliate-program" checked class="w-4 h-4">
                                            <span class="font-semibold">Enable Affiliate Program</span>
                                        </label>
                                        <p class="text-sm text-gray-500 ml-7">Allow users to earn commissions by
                                            referring others</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Affiliate Analytics Preview -->
                            <div class="bg-gradient-to-r from-purple-50 to-blue-50 p-4 rounded-lg mt-6">
                                <div class="flex items-center gap-2 mb-3">
                                    <i class="fas fa-chart-line text-purple-600"></i>
                                    <h4 class="font-bold">Affiliate Performance Overview</h4>
                                    <button onclick="loadAffiliatePerformanceData()" class="ml-auto text-sm px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 transition">
                                        <i class="fas fa-sync-alt mr-1"></i>Refresh
                                    </button>
                                </div>
                                <div class="grid grid-cols-3 gap-4 text-center">
                                    <div>
                                        <div id="affiliate-active-count" class="text-2xl font-bold text-purple-600">--</div>
                                        <div class="text-xs text-gray-600">Active Affiliates</div>
                                    </div>
                                    <div>
                                        <div id="affiliate-referrals-count" class="text-2xl font-bold text-blue-600">--</div>
                                        <div class="text-xs text-gray-600">Total Referrals</div>
                                    </div>
                                    <div>
                                        <div id="affiliate-commissions-total" class="text-2xl font-bold text-green-600">-- ETB</div>
                                        <div class="text-xs text-gray-600">Total Commissions Paid</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Security Panel -->
                    <div id="security-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Security & Privacy</h1>
                            <p class="text-gray-600">Manage security settings and privacy controls</p>
                        </div>
                        <div class="card p-6 mb-6">
                            <h3 class="text-xl font-bold mb-4">Security Settings</h3>
                            <div class="space-y-4">
                                <label class="flex items-center justify-between p-3 border rounded-lg">
                                    <div>
                                        <div class="font-semibold">Two-Factor Authentication</div>
                                        <div class="text-sm text-gray-500">Require 2FA for admin accounts</div>
                                    </div>
                                    <input type="checkbox" checked class="w-4 h-4">
                                </label>
                                <label class="flex items-center justify-between p-3 border rounded-lg">
                                    <div>
                                        <div class="font-semibold">Session Timeout</div>
                                        <div class="text-sm text-gray-500">Auto logout after inactivity</div>
                                    </div>
                                    <select class="p-2 border rounded-lg">
                                        <option>15 minutes</option>
                                        <option>30 minutes</option>
                                        <option>1 hour</option>
                                        <option>Never</option>
                                    </select>
                                </label>
                                <label class="flex items-center justify-between p-3 border rounded-lg">
                                    <div>
                                        <div class="font-semibold">Password Policy</div>
                                        <div class="text-sm text-gray-500">Minimum password requirements</div>
                                    </div>
                                    <select class="p-2 border rounded-lg">
                                        <option>Strong (8+ chars, mixed case, numbers)</option>
                                        <option>Medium (6+ chars)</option>
                                        <option>Basic (4+ chars)</option>
                                    </select>
                                </label>
                                <label class="flex items-center justify-between p-3 border rounded-lg">
                                    <div>
                                        <div class="font-semibold">Rate Limiting</div>
                                        <div class="text-sm text-gray-500">Max login attempts per hour</div>
                                    </div>
                                    <input type="number" class="w-20 p-2 border rounded-lg" placeholder="5">
                                </label>
                            </div>
                        </div>

                        <div class="card p-6">
                            <h3 class="text-xl font-bold mb-4">Privacy Settings</h3>
                            <div class="space-y-4">
                                <label class="flex items-center gap-3">
                                    <input type="checkbox" checked class="w-4 h-4">
                                    <span>Enable GDPR compliance features</span>
                                </label>
                                <label class="flex items-center gap-3">
                                    <input type="checkbox" checked class="w-4 h-4">
                                    <span>Allow users to download their data</span>
                                </label>
                                <label class="flex items-center gap-3">
                                    <input type="checkbox" checked class="w-4 h-4">
                                    <span>Allow users to delete their account</span>
                                </label>
                                <label class="flex items-center gap-3">
                                    <input type="checkbox" class="w-4 h-4">
                                    <span>Anonymous browsing mode available</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Backup Panel -->
                    <div id="backup-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Backup & Restore</h1>
                            <p class="text-gray-600">Configure automatic backups and view backup history</p>
                        </div>
                        <div class="card p-6 mb-6">
                            <h3 class="text-xl font-bold mb-4">Backup Configuration</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block mb-2 font-semibold">Automatic Backup</label>
                                    <select class="w-full p-2 border rounded-lg">
                                        <option>Daily at 2:00 AM</option>
                                        <option>Weekly on Sunday</option>
                                        <option>Monthly on 1st</option>
                                        <option>Disabled</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block mb-2 font-semibold">Backup Storage</label>
                                    <select class="w-full p-2 border rounded-lg">
                                        <option>Local Storage</option>
                                        <option>AWS S3</option>
                                        <option>Google Drive</option>
                                        <option>Backblaze B2</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block mb-2 font-semibold">Retention Period</label>
                                    <select class="w-full p-2 border rounded-lg">
                                        <option>7 days</option>
                                        <option>14 days</option>
                                        <option>30 days</option>
                                        <option>90 days</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block mb-2 font-semibold">Include Media Files</label>
                                    <select class="w-full p-2 border rounded-lg">
                                        <option>Yes</option>
                                        <option>No</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mt-6 flex gap-3">
                                <button onclick="createManualBackup()"
                                    class="px-4 py-2 bg-blue-500 text-white rounded-lg">Create Manual Backup</button>
                                <button class="px-4 py-2 bg-green-500 text-white rounded-lg">Test Backup
                                    Configuration</button>
                            </div>
                        </div>

                        <div class="card p-6">
                            <h3 class="text-xl font-bold mb-4">Recent Backups</h3>
                            <div class="overflow-x-auto">
                                <table class="w-full">
                                    <thead>
                                        <tr class="border-b">
                                            <th class="p-3 text-left">Date</th>
                                            <th class="p-3 text-left">Type</th>
                                            <th class="p-3 text-left">Size</th>
                                            <th class="p-3 text-left">Status</th>
                                            <th class="p-3 text-left">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="border-b">
                                            <td class="p-3">Jan 28, 2025 02:00 AM</td>
                                            <td class="p-3">Automatic</td>
                                            <td class="p-3">2.3 GB</td>
                                            <td class="p-3">
                                                <span
                                                    class="px-2 py-1 bg-green-100 text-green-800 rounded text-sm">Success</span>
                                            </td>
                                            <td class="p-3">
                                                <button class="text-blue-600 hover:underline mr-3">Download</button>
                                                <button class="text-green-600 hover:underline mr-3">Restore</button>
                                                <button class="text-red-600 hover:underline">Delete</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- SMS Configuration Panel -->
                    <div id="sms-panel" class="panel-content hidden">
                        <div class="mb-8 flex items-center justify-between">
                            <div>
                                <h1 class="text-3xl font-bold mb-2">SMS Providers</h1>
                                <p class="text-gray-600">Manage SMS provider accounts and configurations</p>
                            </div>
                            <button onclick="showAddSMSProviderModal()" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-lg">
                                <i class="fas fa-plus mr-2"></i>Add SMS Provider
                            </button>
                        </div>

                        <!-- SMS Providers List -->
                        <div id="sms-providers-list" class="mb-6">
                            <!-- SMS provider cards will be inserted here by JavaScript -->
                        </div>

                        <!-- SMS Configuration Form (Hidden by default, shown when provider is configured) -->
                        <div id="sms-config-container" class="card p-6 mb-6 hidden">
                            <h3 class="text-xl font-bold mb-6"><span id="current-provider-name">Provider</span> Configuration</h3>
                            <form id="sms-config-form" class="space-y-6">
                                <!-- Twilio Account SID -->
                                <div>
                                    <label class="block text-sm font-semibold mb-2">
                                        Twilio Account SID <span class="text-red-500">*</span>
                                    </label>
                                    <input type="text" id="twilio-account-sid"
                                        class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                        placeholder="ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
                                    <p class="text-xs text-gray-500 mt-1">
                                        <i class="fas fa-info-circle"></i> Find this in your Twilio console under Account Info
                                    </p>
                                </div>

                                <!-- Twilio Auth Token -->
                                <div>
                                    <label class="block text-sm font-semibold mb-2">
                                        Twilio Auth Token <span class="text-red-500">*</span>
                                    </label>
                                    <div class="relative">
                                        <input type="password" id="twilio-auth-token"
                                            class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-12"
                                            placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                                        <button type="button" onclick="togglePasswordVisibility('twilio-auth-token')"
                                            class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">
                                        <i class="fas fa-info-circle"></i> Your Twilio authentication token (keep this secure)
                                    </p>
                                </div>

                                <!-- Twilio From Number -->
                                <div>
                                    <label class="block text-sm font-semibold mb-2">
                                        Twilio Phone Number <span class="text-red-500">*</span>
                                    </label>
                                    <input type="tel" id="twilio-from-number"
                                        class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                        placeholder="+1234567890">
                                    <p class="text-xs text-gray-500 mt-1">
                                        <i class="fas fa-info-circle"></i> Your Twilio phone number with country code (e.g., +1234567890)
                                    </p>
                                </div>

                                <!-- Default Country Code -->
                                <div>
                                    <label class="block text-sm font-semibold mb-2">
                                        Default Country Code
                                    </label>
                                    <select id="default-country-code"
                                        class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                        <option value="+251">+251 (Ethiopia)</option>
                                        <option value="+1">+1 (USA/Canada)</option>
                                        <option value="+44">+44 (UK)</option>
                                        <option value="+91">+91 (India)</option>
                                        <option value="+234">+234 (Nigeria)</option>
                                        <option value="+254">+254 (Kenya)</option>
                                    </select>
                                    <p class="text-xs text-gray-500 mt-1">
                                        <i class="fas fa-info-circle"></i> Used when phone numbers don't include a country code
                                    </p>
                                </div>

                                <!-- SMS Enabled Toggle -->
                                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                    <div>
                                        <label class="block text-sm font-semibold">Enable SMS Service</label>
                                        <p class="text-xs text-gray-500 mt-1">Turn SMS notifications on or off</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="sms-enabled" class="sr-only peer" checked>
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                    </label>
                                </div>

                                <!-- Daily SMS Limit -->
                                <div>
                                    <label class="block text-sm font-semibold mb-2">
                                        Daily SMS Limit
                                    </label>
                                    <input type="number" id="daily-sms-limit"
                                        class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                        placeholder="1000" value="1000" min="0">
                                    <p class="text-xs text-gray-500 mt-1">
                                        <i class="fas fa-info-circle"></i> Maximum number of SMS messages to send per day (0 = unlimited)
                                    </p>
                                </div>

                                <!-- OTP Settings -->
                                <div class="border-t pt-6">
                                    <h4 class="font-semibold mb-4">OTP Settings</h4>

                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-semibold mb-2">
                                                OTP Expiry Time (minutes)
                                            </label>
                                            <input type="number" id="otp-expiry-minutes"
                                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                                placeholder="5" value="5" min="1" max="60">
                                        </div>

                                        <div>
                                            <label class="block text-sm font-semibold mb-2">
                                                OTP Length (digits)
                                            </label>
                                            <input type="number" id="otp-length"
                                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                                placeholder="6" value="6" min="4" max="8">
                                        </div>

                                        <div class="flex items-center gap-3">
                                            <input type="checkbox" id="otp-numeric-only" class="w-4 h-4" checked>
                                            <label for="otp-numeric-only" class="text-sm">Use numeric-only OTP codes</label>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <!-- SMS Statistics -->
                        <div class="card p-6 mb-6">
                            <h3 class="text-xl font-bold mb-4">SMS Statistics</h3>
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                                <div class="text-center p-4 bg-blue-50 rounded-lg">
                                    <div class="text-3xl font-bold text-blue-600" id="stat-sms-sent">0</div>
                                    <div class="text-sm text-gray-600 mt-1">SMS Sent Today</div>
                                </div>
                                <div class="text-center p-4 bg-green-50 rounded-lg">
                                    <div class="text-3xl font-bold text-green-600" id="stat-sms-delivered">0</div>
                                    <div class="text-sm text-gray-600 mt-1">Successfully Delivered</div>
                                </div>
                                <div class="text-center p-4 bg-yellow-50 rounded-lg">
                                    <div class="text-3xl font-bold text-yellow-600" id="stat-sms-pending">0</div>
                                    <div class="text-sm text-gray-600 mt-1">Pending</div>
                                </div>
                                <div class="text-center p-4 bg-red-50 rounded-lg">
                                    <div class="text-3xl font-bold text-red-600" id="stat-sms-failed">0</div>
                                    <div class="text-sm text-gray-600 mt-1">Failed to Send</div>
                                </div>
                            </div>
                            <div class="mt-4 pt-4 border-t">
                                <div class="flex items-center justify-between">
                                    <div class="text-sm text-gray-600">
                                        <i class="fas fa-info-circle mr-1"></i>
                                        Daily limit: <span id="sms-daily-limit-display">1000</span> messages
                                        | Used: <span id="sms-daily-used-display">0</span>
                                        | Remaining: <span id="sms-daily-remaining-display">1000</span>
                                    </div>
                                    <button onclick="viewSMSLogs()" class="px-4 py-2 border rounded-lg hover:bg-gray-50 text-sm">
                                        <i class="fas fa-list mr-2"></i>View SMS Logs
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- SMS Templates -->
                        <div class="card p-6 mb-6">
                            <h3 class="text-xl font-bold mb-4">SMS Templates</h3>
                            <div class="space-y-4">
                                <!-- OTP Template -->
                                <div class="border rounded-lg p-4">
                                    <div class="flex items-center justify-between mb-3">
                                        <div>
                                            <h4 class="font-semibold">OTP Verification</h4>
                                            <p class="text-xs text-gray-500">Used for user authentication</p>
                                        </div>
                                        <button onclick="editSMSTemplate('otp')" class="px-4 py-2 border rounded-lg hover:bg-gray-50 text-sm">
                                            <i class="fas fa-edit mr-1"></i>Edit
                                        </button>
                                    </div>
                                    <div class="bg-gray-50 p-3 rounded text-sm">
                                        <span class="text-gray-600">Your Astegni OTP code is: <strong class="text-blue-600">[OTP_CODE]</strong></span>
                                        <br>
                                        <span class="text-gray-600">Valid for <strong>[EXPIRY_TIME]</strong> minutes.</span>
                                    </div>
                                    <div class="mt-2 text-xs text-gray-500">
                                        Character count: <span class="font-semibold">67</span> / 160
                                    </div>
                                </div>

                                <!-- Welcome Template -->
                                <div class="border rounded-lg p-4">
                                    <div class="flex items-center justify-between mb-3">
                                        <div>
                                            <h4 class="font-semibold">Welcome Message</h4>
                                            <p class="text-xs text-gray-500">Sent to new users</p>
                                        </div>
                                        <button onclick="editSMSTemplate('welcome')" class="px-4 py-2 border rounded-lg hover:bg-gray-50 text-sm">
                                            <i class="fas fa-edit mr-1"></i>Edit
                                        </button>
                                    </div>
                                    <div class="bg-gray-50 p-3 rounded text-sm">
                                        <span class="text-gray-600">Welcome to Astegni, <strong class="text-blue-600">[USER_NAME]</strong>! Start exploring educational content now.</span>
                                    </div>
                                    <div class="mt-2 text-xs text-gray-500">
                                        Character count: <span class="font-semibold">82</span> / 160
                                    </div>
                                </div>

                                <!-- Notification Template -->
                                <div class="border rounded-lg p-4">
                                    <div class="flex items-center justify-between mb-3">
                                        <div>
                                            <h4 class="font-semibold">Notification Alert</h4>
                                            <p class="text-xs text-gray-500">General notifications</p>
                                        </div>
                                        <button onclick="editSMSTemplate('notification')" class="px-4 py-2 border rounded-lg hover:bg-gray-50 text-sm">
                                            <i class="fas fa-edit mr-1"></i>Edit
                                        </button>
                                    </div>
                                    <div class="bg-gray-50 p-3 rounded text-sm">
                                        <span class="text-gray-600">Astegni Alert: <strong class="text-blue-600">[MESSAGE]</strong></span>
                                    </div>
                                    <div class="mt-2 text-xs text-gray-500">
                                        Character count: Variable / 160
                                    </div>
                                </div>
                            </div>

                            <div class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                                <div class="flex items-start gap-3">
                                    <i class="fas fa-info-circle text-blue-600 mt-1"></i>
                                    <div class="text-sm text-blue-800">
                                        <strong>Template Variables:</strong>
                                        <ul class="mt-2 list-disc list-inside space-y-1">
                                            <li><code>[OTP_CODE]</code> - OTP verification code</li>
                                            <li><code>[EXPIRY_TIME]</code> - OTP expiry time in minutes</li>
                                            <li><code>[USER_NAME]</code> - User's display name</li>
                                            <li><code>[MESSAGE]</code> - Custom message content</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Test SMS Section -->
                        <div class="card p-6">
                            <h3 class="text-xl font-bold mb-4">Send Test SMS</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-semibold mb-2">
                                        Test Phone Number
                                    </label>
                                    <input type="tel" id="test-phone-number"
                                        class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                        placeholder="+251912345678">
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold mb-2">
                                        Test Message
                                    </label>
                                    <textarea id="test-message" rows="3"
                                        class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                        placeholder="Enter your test message...">This is a test SMS from Astegni platform.</textarea>
                                    <p class="text-xs text-gray-500 mt-1">
                                        Character count: <span id="test-message-count">42</span> / 160
                                    </p>
                                </div>
                                <div class="flex justify-end">
                                    <button onclick="sendTestSMS()" class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                                        <i class="fas fa-paper-plane mr-2"></i>Send Test SMS
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- API Panel -->
                    <div id="api-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">API & Integrations</h1>
                            <p class="text-gray-600">Manage API keys and third-party integrations</p>
                        </div>
                        <div class="card p-6 mb-6">
                            <h3 class="text-xl font-bold mb-4">API Keys</h3>
                            <div class="mb-4">
                                <button class="px-4 py-2 bg-blue-500 text-white rounded-lg">Generate New API
                                    Key</button>
                            </div>
                            <div class="space-y-4">
                                <div class="border rounded-lg p-4">
                                    <div class="flex justify-between items-start mb-2">
                                        <div>
                                            <div class="font-semibold">Production API Key</div>
                                            <div class="text-sm text-gray-500">Created: Jan 15, 2025</div>
                                        </div>
                                        <button class="text-red-600 hover:underline">Revoke</button>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <code
                                            class="bg-gray-100 px-3 py-1 rounded text-sm">sk_live_************************</code>
                                        <button class="text-blue-600 hover:underline">Show</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-bold">Third-Party Integrations</h3>
                                <button onclick="openAddIntegrationModal()"
                                    class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">
                                    <i class="fas fa-plus mr-2"></i>Add Integration
                                </button>
                            </div>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-3 border rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <svg class="w-10 h-10 rounded" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                                            <rect width="40" height="40" fill="#4285F4"/>
                                            <text x="20" y="25" font-family="Arial" font-size="24" fill="white" text-anchor="middle">G</text>
                                        </svg>
                                        <div>
                                            <div class="font-semibold">Google OAuth</div>
                                            <div class="text-sm text-gray-500">Social login integration</div>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <span
                                            class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold">Active</span>
                                        <button onclick="configureIntegration('google')"
                                            class="px-4 py-2 bg-blue-500 text-white rounded-lg text-sm">Configure</button>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 border rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <svg class="w-10 h-10 rounded" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                                            <rect width="40" height="40" fill="#1877F2"/>
                                            <text x="20" y="25" font-family="Arial" font-size="24" fill="white" text-anchor="middle">f</text>
                                        </svg>
                                        <div>
                                            <div class="font-semibold">Facebook Login</div>
                                            <div class="text-sm text-gray-500">Social login integration</div>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <span
                                            class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold">Active</span>
                                        <button onclick="configureIntegration('facebook')"
                                            class="px-4 py-2 bg-blue-500 text-white rounded-lg text-sm">Configure</button>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 border rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <svg class="w-10 h-10 rounded" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                                            <rect width="40" height="40" fill="#25D366"/>
                                            <text x="20" y="26" font-family="Arial" font-size="20" fill="white" text-anchor="middle">üì±</text>
                                        </svg>
                                        <div>
                                            <div class="font-semibold">SMS Gateway</div>
                                            <div class="text-sm text-gray-500">SMS notifications</div>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <span
                                            class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-semibold">Inactive</span>
                                        <button onclick="configureIntegration('sms')"
                                            class="px-4 py-2 bg-blue-500 text-white rounded-lg text-sm">Configure</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Available Integrations Info -->
                            <div class="mt-6 p-4 bg-blue-50 dark:bg-blue-900 dark:bg-opacity-20 rounded-lg">
                                <h4 class="font-semibold mb-2 flex items-center gap-2">
                                    <i class="fas fa-info-circle text-blue-600"></i>
                                    Available Integration Types
                                </h4>
                                <ul class="text-sm text-gray-600 dark:text-gray-400 space-y-1 ml-6">
                                    <li>‚Ä¢ Social Login (Google, Facebook, Twitter, GitHub, LinkedIn)</li>
                                    <li>‚Ä¢ Communication (Email, SMS, Push Notifications)</li>
                                    <li>‚Ä¢ Analytics (Google Analytics, Mixpanel, Amplitude)</li>
                                    <li>‚Ä¢ Payment Gateways (Stripe, PayPal, Telebirr)</li>
                                    <li>‚Ä¢ Cloud Storage (AWS S3, Google Cloud, Azure)</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Maintenance Panel -->
                    <div id="maintenance-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Maintenance Mode</h1>
                            <p class="text-gray-600">Control maintenance mode and perform system tasks</p>
                        </div>
                        <div class="card p-6 mb-6">
                            <h3 class="text-xl font-bold mb-4">Maintenance Mode</h3>
                            <div class="mb-6">
                                <label class="flex items-center gap-3">
                                    <input type="checkbox" class="w-6 h-6" id="maintenance-toggle">
                                    <span class="text-lg font-semibold">Enable Maintenance Mode</span>
                                </label>
                                <p class="text-sm text-gray-500 mt-2">When enabled, only administrators can access the
                                    platform</p>
                            </div>

                            <div class="space-y-4">
                                <div>
                                    <label class="block mb-2 font-semibold">Maintenance Message</label>
                                    <textarea class="w-full p-2 border rounded-lg"
                                        rows="3">We're currently performing scheduled maintenance. We'll be back soon!</textarea>
                                </div>
                                <div>
                                    <label class="block mb-2 font-semibold">Expected End Time</label>
                                    <input type="datetime-local" class="w-full p-2 border rounded-lg">
                                </div>
                                <div>
                                    <label class="block mb-2 font-semibold">Allow IP Addresses (one per line)</label>
                                    <textarea class="w-full p-2 border rounded-lg" rows="3" placeholder="127.0.0.1
192.168.1.1"></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="card p-6">
                            <h3 class="text-xl font-bold mb-4">System Maintenance Tasks</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-3 border rounded-lg">
                                    <div>
                                        <div class="font-semibold">Clear Cache</div>
                                        <div class="text-sm text-gray-500">Remove all cached data</div>
                                    </div>
                                    <button onclick="clearCache()"
                                        class="px-4 py-2 bg-red-500 text-white rounded-lg text-sm">Clear Now</button>
                                </div>
                                <div class="flex items-center justify-between p-3 border rounded-lg">
                                    <div>
                                        <div class="font-semibold">Optimize Database</div>
                                        <div class="text-sm text-gray-500">Improve database performance</div>
                                    </div>
                                    <button
                                        class="px-4 py-2 bg-blue-500 text-white rounded-lg text-sm">Optimize</button>
                                </div>
                                <div class="flex items-center justify-between p-3 border rounded-lg">
                                    <div>
                                        <div class="font-semibold">Clean Temporary Files</div>
                                        <div class="text-sm text-gray-500">Remove temporary uploads and logs</div>
                                    </div>
                                    <button class="px-4 py-2 bg-yellow-500 text-white rounded-lg text-sm">Clean</button>
                                </div>
                                <div class="flex items-center justify-between p-3 border rounded-lg">
                                    <div>
                                        <div class="font-semibold">Rebuild Search Index</div>
                                        <div class="text-sm text-gray-500">Update search database</div>
                                    </div>
                                    <button
                                        class="px-4 py-2 bg-green-500 text-white rounded-lg text-sm">Rebuild</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- System Logs Panel -->
                    <div id="logs-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">System Logs</h1>
                            <p class="text-gray-600">View and analyze system activity logs</p>
                        </div>
                        <div class="card p-6">
                            <div class="mb-4">
                                <div class="flex gap-4 mb-4">
                                    <select class="p-2 border rounded-lg">
                                        <option>All Logs</option>
                                        <option>Error Logs</option>
                                        <option>Warning Logs</option>
                                        <option>Info Logs</option>
                                        <option>Debug Logs</option>
                                    </select>
                                    <input type="date" class="p-2 border rounded-lg" />
                                    <button class="px-4 py-2 bg-blue-500 text-white rounded-lg">Filter</button>
                                </div>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="w-full">
                                    <thead>
                                        <tr class="border-b">
                                            <th class="p-3 text-left">Time</th>
                                            <th class="p-3 text-left">Level</th>
                                            <th class="p-3 text-left">Component</th>
                                            <th class="p-3 text-left">Message</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="border-b">
                                            <td class="p-3">2025-01-28 14:32:15</td>
                                            <td class="p-3"><span
                                                    class="px-2 py-1 bg-green-100 text-green-800 rounded text-sm">INFO</span>
                                            </td>
                                            <td class="p-3">Auth</td>
                                            <td class="p-3">User login successful: admin@astegni.com</td>
                                        </tr>
                                        <tr class="border-b">
                                            <td class="p-3">2025-01-28 14:30:45</td>
                                            <td class="p-3"><span
                                                    class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-sm">WARN</span>
                                            </td>
                                            <td class="p-3">Database</td>
                                            <td class="p-3">Query execution time exceeded threshold: 1.2s</td>
                                        </tr>
                                        <tr class="border-b">
                                            <td class="p-3">2025-01-28 14:28:10</td>
                                            <td class="p-3"><span
                                                    class="px-2 py-1 bg-red-100 text-red-800 rounded text-sm">ERROR</span>
                                            </td>
                                            <td class="p-3">Upload</td>
                                            <td class="p-3">File upload failed: Size exceeds limit</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Performance Monitor Panel -->
                    <div id="performance-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Performance Monitor</h1>
                            <p class="text-gray-600">Real-time system performance metrics</p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="card p-6">
                                <h3 class="text-xl font-bold mb-4">Server Resources</h3>
                                <div class="space-y-4">
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span>CPU Usage</span>
                                            <span class="text-sm font-bold">35%</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                            <div class="bg-green-600 h-2 rounded-full" style="width: 35%"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span>Memory Usage</span>
                                            <span class="text-sm font-bold">62%</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                            <div class="bg-yellow-600 h-2 rounded-full" style="width: 62%"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span>Disk Usage</span>
                                            <span class="text-sm font-bold">25%</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                            <div class="bg-blue-600 h-2 rounded-full" style="width: 25%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card p-6">
                                <h3 class="text-xl font-bold mb-4">Network Stats</h3>
                                <div class="space-y-3">
                                    <div class="flex justify-between">
                                        <span>Bandwidth In</span>
                                        <span class="font-bold">125 Mbps</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Bandwidth Out</span>
                                        <span class="font-bold">89 Mbps</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Active Sessions</span>
                                        <span class="font-bold">3,842</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Request Rate</span>
                                        <span class="font-bold">1,250 req/s</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Manage Admins Panel -->
                    <div id="manage-admins-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h1 class="text-3xl font-bold mb-2">Manage Admins</h1>
                                    <p class="text-gray-600">Manage platform administrators and their permissions</p>
                                </div>
                                <button onclick="openInviteAdminModal()"
                                    class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2">
                                    <i class="fas fa-user-plus"></i>
                                    Invite Admin
                                </button>
                            </div>
                        </div>

                        <!-- Admin Stats Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                            <div class="card p-6">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <p class="text-gray-600 text-sm">Total Admins</p>
                                        <h3 class="text-3xl font-bold mt-1">12</h3>
                                    </div>
                                    <div class="bg-blue-100 p-3 rounded-lg">
                                        <i class="fas fa-users text-blue-600 text-xl"></i>
                                    </div>
                                </div>
                                <p class="text-sm text-green-600 flex items-center gap-1">
                                    <i class="fas fa-arrow-up"></i> 2 this month
                                </p>
                            </div>
                            <div class="card p-6">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <p class="text-gray-600 text-sm">Active Now</p>
                                        <h3 class="text-3xl font-bold mt-1">8</h3>
                                    </div>
                                    <div class="bg-green-100 p-3 rounded-lg">
                                        <i class="fas fa-circle text-green-600 text-xl"></i>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-600">Online admins</p>
                            </div>
                            <div class="card p-6">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <p class="text-gray-600 text-sm">Pending Invites</p>
                                        <h3 class="text-3xl font-bold mt-1">3</h3>
                                    </div>
                                    <div class="bg-yellow-100 p-3 rounded-lg">
                                        <i class="fas fa-envelope text-yellow-600 text-xl"></i>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-600">Awaiting acceptance</p>
                            </div>
                            <div class="card p-6">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <p class="text-gray-600 text-sm">Suspended</p>
                                        <h3 class="text-3xl font-bold mt-1">1</h3>
                                    </div>
                                    <div class="bg-red-100 p-3 rounded-lg">
                                        <i class="fas fa-ban text-red-600 text-xl"></i>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-600">Temporarily disabled</p>
                            </div>
                        </div>

                        <!-- Filter and Search -->
                        <div class="card p-6 mb-6">
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium mb-2">Search Admins</label>
                                    <div class="relative">
                                        <input type="text" id="admin-search"
                                            placeholder="Search by name, email, or role..."
                                            class="w-full px-4 py-2 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Filter by Status</label>
                                    <select id="admin-status-filter"
                                        class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                                        <option value="">All Status</option>
                                        <option value="active">Active</option>
                                        <option value="pending">Pending</option>
                                        <option value="suspended">Suspended</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Filter by Role</label>
                                    <select id="admin-role-filter"
                                        class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                                        <option value="">All Roles</option>
                                        <option value="super-admin">Super Admin</option>
                                        <option value="admin">Admin</option>
                                        <option value="moderator">Moderator</option>
                                        <option value="support">Support</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Active Admins Table -->
                        <div class="card p-6 mb-6">
                            <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                                <i class="fas fa-user-shield text-blue-600"></i>
                                Active Administrators
                            </h3>
                            <div class="overflow-x-auto">
                                <table class="w-full">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-4 py-3 text-left text-sm font-semibold">Admin</th>
                                            <th class="px-4 py-3 text-left text-sm font-semibold">Role</th>
                                            <th class="px-4 py-3 text-left text-sm font-semibold">Status</th>
                                            <th class="px-4 py-3 text-left text-sm font-semibold">Last Active</th>
                                            <th class="px-4 py-3 text-left text-sm font-semibold">Joined</th>
                                            <th class="px-4 py-3 text-left text-sm font-semibold">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="active-admins-table" class="divide-y">
                                        <!-- Sample Admin Row 1 -->
                                        <tr class="hover:bg-gray-50">
                                            <td class="px-4 py-4">
                                                <div class="flex items-center gap-3">
                                                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40'%3E%3Ccircle cx='20' cy='20' r='20' fill='%234A90E2'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='white' font-family='sans-serif' font-size='18' font-weight='600'%3EA%3C/text%3E%3C/svg%3E"
                                                        alt="Admin" class="w-10 h-10 rounded-full object-cover">
                                                    <div>
                                                        <div class="font-semibold">Abebe Bekele</div>
                                                        <div class="text-sm text-gray-600">abebe.bekele@astegni.com
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-4 py-4">
                                                <span
                                                    class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-semibold">Super
                                                    Admin</span>
                                            </td>
                                            <td class="px-4 py-4">
                                                <span
                                                    class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold flex items-center gap-1 w-fit">
                                                    <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                                                    Online
                                                </span>
                                            </td>
                                            <td class="px-4 py-4 text-sm">2 minutes ago</td>
                                            <td class="px-4 py-4 text-sm">Jan 15, 2024</td>
                                            <td class="px-4 py-4">
                                                <div class="flex gap-2">
                                                    <button onclick="viewAdminDetails(1)"
                                                        class="text-blue-600 hover:text-blue-800" title="View Details">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                    <button onclick="editAdminRole(1)"
                                                        class="text-green-600 hover:text-green-800" title="Edit Role">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                    <button onclick="viewAdminActivity(1)"
                                                        class="text-purple-600 hover:text-purple-800"
                                                        title="View Activity">
                                                        <i class="fas fa-chart-line"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        <!-- Sample Admin Row 2 -->
                                        <tr class="hover:bg-gray-50">
                                            <td class="px-4 py-4">
                                                <div class="flex items-center gap-3">
                                                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40'%3E%3Ccircle cx='20' cy='20' r='20' fill='%23E94E77'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='white' font-family='sans-serif' font-size='18' font-weight='600'%3EA%3C/text%3E%3C/svg%3E"
                                                        alt="Admin" class="w-10 h-10 rounded-full object-cover">
                                                    <div>
                                                        <div class="font-semibold">Tigist Hailu</div>
                                                        <div class="text-sm text-gray-600">tigist.hailu@astegni.com
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-4 py-4">
                                                <span
                                                    class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold">Admin</span>
                                            </td>
                                            <td class="px-4 py-4">
                                                <span
                                                    class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold flex items-center gap-1 w-fit">
                                                    <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                                                    Online
                                                </span>
                                            </td>
                                            <td class="px-4 py-4 text-sm">5 minutes ago</td>
                                            <td class="px-4 py-4 text-sm">Feb 03, 2024</td>
                                            <td class="px-4 py-4">
                                                <div class="flex gap-2">
                                                    <button onclick="viewAdminDetails(2)"
                                                        class="text-blue-600 hover:text-blue-800" title="View Details">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                    <button onclick="editAdminRole(2)"
                                                        class="text-green-600 hover:text-green-800" title="Edit Role">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                    <button onclick="suspendAdmin(2)"
                                                        class="text-red-600 hover:text-red-800" title="Suspend Admin">
                                                        <i class="fas fa-ban"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        <!-- Sample Admin Row 3 -->
                                        <tr class="hover:bg-gray-50">
                                            <td class="px-4 py-4">
                                                <div class="flex items-center gap-3">
                                                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40'%3E%3Ccircle cx='20' cy='20' r='20' fill='%234A90E2'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='white' font-family='sans-serif' font-size='18' font-weight='600'%3EA%3C/text%3E%3C/svg%3E"
                                                        alt="Admin" class="w-10 h-10 rounded-full object-cover">
                                                    <div>
                                                        <div class="font-semibold">Dawit Tesfaye</div>
                                                        <div class="text-sm text-gray-600">dawit.tesfaye@astegni.com
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-4 py-4">
                                                <span
                                                    class="px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-xs font-semibold">Moderator</span>
                                            </td>
                                            <td class="px-4 py-4">
                                                <span
                                                    class="px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-semibold">Offline</span>
                                            </td>
                                            <td class="px-4 py-4 text-sm">2 hours ago</td>
                                            <td class="px-4 py-4 text-sm">Mar 10, 2024</td>
                                            <td class="px-4 py-4">
                                                <div class="flex gap-2">
                                                    <button onclick="viewAdminDetails(3)"
                                                        class="text-blue-600 hover:text-blue-800" title="View Details">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                    <button onclick="editAdminRole(3)"
                                                        class="text-green-600 hover:text-green-800" title="Edit Role">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                    <button onclick="suspendAdmin(3)"
                                                        class="text-red-600 hover:text-red-800" title="Suspend Admin">
                                                        <i class="fas fa-ban"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Pending Invitations -->
                        <div class="card p-6 mb-6">
                            <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                                <i class="fas fa-envelope text-yellow-600"></i>
                                Pending Invitations
                            </h3>
                            <div class="space-y-4">
                                <!-- Pending Invite 1 -->
                                <div class="flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50">
                                    <div class="flex items-center gap-4">
                                        <div class="bg-yellow-100 p-3 rounded-lg">
                                            <i class="fas fa-user-clock text-yellow-600 text-xl"></i>
                                        </div>
                                        <div>
                                            <div class="font-semibold">Meron Alemu</div>
                                            <div class="text-sm text-gray-600">meron.alemu@gmail.com</div>
                                            <div class="text-xs text-gray-500 mt-1">Invited 3 days ago ‚Ä¢ Role: Admin
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button onclick="resendInvitation('meron.alemu@gmail.com')"
                                            class="px-4 py-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 text-sm">
                                            <i class="fas fa-paper-plane mr-1"></i> Resend
                                        </button>
                                        <button onclick="cancelInvitation('meron.alemu@gmail.com')"
                                            class="px-4 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 text-sm">
                                            <i class="fas fa-times mr-1"></i> Cancel
                                        </button>
                                    </div>
                                </div>
                                <!-- Pending Invite 2 -->
                                <div class="flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50">
                                    <div class="flex items-center gap-4">
                                        <div class="bg-yellow-100 p-3 rounded-lg">
                                            <i class="fas fa-user-clock text-yellow-600 text-xl"></i>
                                        </div>
                                        <div>
                                            <div class="font-semibold">Solomon Girma</div>
                                            <div class="text-sm text-gray-600">solomon.girma@yahoo.com</div>
                                            <div class="text-xs text-gray-500 mt-1">Invited 1 week ago ‚Ä¢ Role: Moderator
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button onclick="resendInvitation('solomon.girma@yahoo.com')"
                                            class="px-4 py-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 text-sm">
                                            <i class="fas fa-paper-plane mr-1"></i> Resend
                                        </button>
                                        <button onclick="cancelInvitation('solomon.girma@yahoo.com')"
                                            class="px-4 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 text-sm">
                                            <i class="fas fa-times mr-1"></i> Cancel
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Suspended Admins -->
                        <div class="card p-6">
                            <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                                <i class="fas fa-ban text-red-600"></i>
                                Suspended Administrators
                            </h3>
                            <div class="space-y-4">
                                <!-- Suspended Admin -->
                                <div
                                    class="flex items-center justify-between p-4 border border-red-200 rounded-lg bg-red-50">
                                    <div class="flex items-center gap-4">
                                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48'%3E%3Ccircle cx='24' cy='24' r='24' fill='%234A90E2'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='white' font-family='sans-serif' font-size='20' font-weight='600'%3EY%3C/text%3E%3C/svg%3E"
                                            alt="Admin" class="w-12 h-12 rounded-full object-cover opacity-50">
                                        <div>
                                            <div class="font-semibold">Yohannes Mulugeta</div>
                                            <div class="text-sm text-gray-600">yohannes.m@astegni.com</div>
                                            <div class="text-xs text-red-600 mt-1">Suspended on Apr 15, 2024 ‚Ä¢ Reason:
                                                Policy Violation</div>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button onclick="reactivateAdmin(4)"
                                            class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm">
                                            <i class="fas fa-check mr-1"></i> Reactivate
                                        </button>
                                        <button onclick="revokeAdminAccess(4)"
                                            class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm">
                                            <i class="fas fa-user-times mr-1"></i> Revoke Access
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Admin Activity Log -->
                        <div class="card p-6 mt-6">
                            <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                                <i class="fas fa-history text-gray-600"></i>
                                Recent Admin Activity
                            </h3>
                            <div class="space-y-3">
                                <div class="flex items-start gap-3 p-3 rounded-lg hover:bg-gray-50">
                                    <div class="bg-blue-100 p-2 rounded-lg">
                                        <i class="fas fa-user-plus text-blue-600"></i>
                                    </div>
                                    <div class="flex-1">
                                        <div class="font-semibold">Abebe Bekele invited new admin</div>
                                        <div class="text-sm text-gray-600">Invited meron.alemu@gmail.com as Admin</div>
                                        <div class="text-xs text-gray-500 mt-1">2 hours ago</div>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3 p-3 rounded-lg hover:bg-gray-50">
                                    <div class="bg-yellow-100 p-2 rounded-lg">
                                        <i class="fas fa-edit text-yellow-600"></i>
                                    </div>
                                    <div class="flex-1">
                                        <div class="font-semibold">Tigist Hailu updated role</div>
                                        <div class="text-sm text-gray-600">Changed Dawit Tesfaye's role from Support to
                                            Moderator</div>
                                        <div class="text-xs text-gray-500 mt-1">5 hours ago</div>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3 p-3 rounded-lg hover:bg-gray-50">
                                    <div class="bg-red-100 p-2 rounded-lg">
                                        <i class="fas fa-ban text-red-600"></i>
                                    </div>
                                    <div class="flex-1">
                                        <div class="font-semibold">Abebe Bekele suspended admin</div>
                                        <div class="text-sm text-gray-600">Suspended Yohannes Mulugeta for policy
                                            violation</div>
                                        <div class="text-xs text-gray-500 mt-1">1 day ago</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Manage Reviews Panel -->
                    <div id="manage-reviews-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h1 class="text-3xl font-bold mb-2 flex items-center gap-3">
                                        <i class="fas fa-star text-yellow-500"></i>
                                        Manage Platform Reviews
                                    </h1>
                                    <p class="text-gray-600">View and manage reviews given to Astegni by users</p>
                                </div>
                            </div>
                        </div>

                        <!-- Role Filter Stats Cards -->
                        <div id="review-stats-container"></div>

                        <!-- Rating Filter Buttons -->
                        <div id="rating-filters-container"></div>

                        <!-- Reviews List -->
                        <div id="reviews-list-container"></div>
                    </div>

                    <!-- Reports Panel -->
                    <div id="reports-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h1 class="text-3xl font-bold mb-2 flex items-center gap-3">
                                        <i class="fas fa-chart-line text-blue-600"></i>
                                        Platform Analytics & Reports
                                    </h1>
                                    <p class="text-gray-600">Comprehensive insights into platform performance and user
                                        engagement</p>
                                </div>

                                <!-- Time Period Selector -->
                                <div class="flex gap-2">
                                    <button onclick="switchReportPeriod('month')" id="period-month"
                                        class="report-period-btn active px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-all text-sm">
                                        <i class="fas fa-calendar-day mr-2"></i>This Month
                                    </button>
                                    <button onclick="switchReportPeriod('year')" id="period-year"
                                        class="report-period-btn px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 transition-all text-sm">
                                        <i class="fas fa-calendar-alt mr-2"></i>This Year
                                    </button>
                                    <button onclick="switchReportPeriod('lastMonth')" id="period-lastMonth"
                                        class="report-period-btn px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 transition-all text-sm">
                                        <i class="fas fa-history mr-2"></i>Last Month
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Stats Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <!-- Total Users -->
                            <div
                                class="bg-gradient-to-br from-blue-500 to-blue-600 text-white p-6 rounded-xl shadow-lg">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="text-blue-100 text-sm font-medium">Total Registered Users</p>
                                        <h3 class="text-4xl font-bold mt-2" id="total-users">0</h3>
                                        <p class="text-blue-100 text-xs mt-2">
                                            <i class="fas fa-arrow-up mr-1"></i>
                                            <span id="stat-total-users-change">+0%</span> from last period
                                        </p>
                                    </div>
                                    <div class="bg-white bg-opacity-20 p-3 rounded-lg">
                                        <i class="fas fa-users text-2xl"></i>
                                    </div>
                                </div>
                            </div>

                            <!-- Premium Subscribers -->
                            <div
                                class="bg-gradient-to-br from-purple-500 to-purple-600 text-white p-6 rounded-xl shadow-lg">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="text-purple-100 text-sm font-medium">Premium Subscribers</p>
                                        <h3 class="text-4xl font-bold mt-2" id="stat-premium-users">0</h3>
                                        <p class="text-purple-100 text-xs mt-2">
                                            <i class="fas fa-arrow-up mr-1"></i>
                                            <span id="stat-premium-users-change">+0%</span> from last period
                                        </p>
                                    </div>
                                    <div class="bg-white bg-opacity-20 p-3 rounded-lg">
                                        <i class="fas fa-crown text-2xl"></i>
                                    </div>
                                </div>
                            </div>

                            <!-- Total Revenue -->
                            <div
                                class="bg-gradient-to-br from-green-500 to-green-600 text-white p-6 rounded-xl shadow-lg">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="text-green-100 text-sm font-medium">Total Revenue</p>
                                        <h3 class="text-4xl font-bold mt-2" id="stat-revenue">0 ETB</h3>
                                        <p class="text-green-100 text-xs mt-2">
                                            <i class="fas fa-arrow-up mr-1"></i>
                                            <span id="stat-revenue-change">+0%</span> from last period
                                        </p>
                                    </div>
                                    <div class="bg-white bg-opacity-20 p-3 rounded-lg">
                                        <i class="fas fa-money-bill-wave text-2xl"></i>
                                    </div>
                                </div>
                            </div>

                            <!-- User Satisfaction -->
                            <div
                                class="bg-gradient-to-br from-orange-500 to-orange-600 text-white p-6 rounded-xl shadow-lg">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="text-orange-100 text-sm font-medium">Satisfaction Score</p>
                                        <h3 class="text-4xl font-bold mt-2" id="stat-satisfaction">0%</h3>
                                        <p class="text-orange-100 text-xs mt-2">
                                            <i class="fas fa-star mr-1"></i>
                                            <span id="stat-satisfaction-rating">0.0/5.0</span> average rating
                                        </p>
                                    </div>
                                    <div class="bg-white bg-opacity-20 p-3 rounded-lg">
                                        <i class="fas fa-smile text-2xl"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Main Analytics Section -->
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                            <!-- User Breakdown by Role -->
                            <div class="lg:col-span-2 card p-6">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-xl font-bold">
                                        <i class="fas fa-user-tag mr-2 text-blue-600"></i>
                                        User Registration by Role
                                    </h3>
                                    <div class="flex gap-2">
                                        <button onclick="switchChartType('userChart', 'bar')"
                                            class="px-3 py-1 text-sm bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800">
                                            <i class="fas fa-chart-bar"></i>
                                        </button>
                                        <button onclick="switchChartType('userChart', 'line')"
                                            class="px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600">
                                            <i class="fas fa-chart-line"></i>
                                        </button>
                                    </div>
                                </div>
                                <canvas id="userChart" height="300"></canvas>
                            </div>

                            <!-- Role Distribution -->
                            <div class="card p-6">
                                <h3 class="text-xl font-bold mb-4">
                                    <i class="fas fa-pie-chart mr-2 text-purple-600"></i>
                                    User Distribution
                                </h3>
                                <div class="space-y-3">
                                    <div
                                        class="flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900 dark:bg-opacity-20 rounded-lg">
                                        <div class="flex items-center gap-2">
                                            <i class="fas fa-graduation-cap text-blue-600"></i>
                                            <span class="font-medium">Students</span>
                                        </div>
                                        <span class="font-bold text-blue-600" id="count-students">0</span>
                                    </div>
                                    <div
                                        class="flex items-center justify-between p-3 bg-purple-50 dark:bg-purple-900 dark:bg-opacity-20 rounded-lg">
                                        <div class="flex items-center gap-2">
                                            <i class="fas fa-chalkboard-teacher text-purple-600"></i>
                                            <span class="font-medium">Tutors</span>
                                        </div>
                                        <span class="font-bold text-purple-600" id="count-tutors">0</span>
                                    </div>
                                    <div
                                        class="flex items-center justify-between p-3 bg-green-50 dark:bg-green-900 dark:bg-opacity-20 rounded-lg">
                                        <div class="flex items-center gap-2">
                                            <i class="fas fa-user-friends text-green-600"></i>
                                            <span class="font-medium">Parents</span>
                                        </div>
                                        <span class="font-bold text-green-600" id="count-parents">0</span>
                                    </div>
                                    <div
                                        class="flex items-center justify-between p-3 bg-orange-50 dark:bg-orange-900 dark:bg-opacity-20 rounded-lg">
                                        <div class="flex items-center gap-2">
                                            <i class="fas fa-bullhorn text-orange-600"></i>
                                            <span class="font-medium">Advertisers</span>
                                        </div>
                                        <span class="font-bold text-orange-600" id="count-advertisers">0</span>
                                    </div>
                                    <div
                                        class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                        <div class="flex items-center gap-2">
                                            <i class="fas fa-user text-gray-600"></i>
                                            <span class="font-medium">Basic Users</span>
                                        </div>
                                        <span class="font-bold text-gray-600 dark:text-gray-300"
                                            id="count-basic">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Revenue Analytics -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                            <!-- Revenue Breakdown -->
                            <div class="card p-6">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-xl font-bold">
                                        <i class="fas fa-dollar-sign mr-2 text-green-600"></i>
                                        Revenue Breakdown
                                    </h3>
                                    <div class="flex gap-2">
                                        <button onclick="switchChartType('revenueChart', 'bar')"
                                            class="px-3 py-1 text-sm bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-800">
                                            <i class="fas fa-chart-bar"></i>
                                        </button>
                                        <button onclick="switchChartType('revenueChart', 'line')"
                                            class="px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600">
                                            <i class="fas fa-chart-line"></i>
                                        </button>
                                    </div>
                                </div>
                                <canvas id="revenueChart" height="300"></canvas>
                            </div>

                            <!-- Subscription Tiers -->
                            <div class="card p-6">
                                <h3 class="text-xl font-bold mb-4">
                                    <i class="fas fa-layer-group mr-2 text-indigo-600"></i>
                                    Subscription Tiers
                                </h3>
                                <div class="space-y-4">
                                    <div class="p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                        <div class="flex justify-between items-center mb-2">
                                            <span class="font-semibold">Free Tier</span>
                                            <span class="font-bold" id="count-free">0</span>
                                        </div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2">
                                            <div id="bar-free" class="bg-gray-400 dark:bg-gray-500 h-2 rounded-full"
                                                style="width: 0%"></div>
                                        </div>
                                    </div>
                                    <div class="p-4 bg-blue-50 dark:bg-blue-900 dark:bg-opacity-20 rounded-lg">
                                        <div class="flex justify-between items-center mb-2">
                                            <span class="font-semibold">Basic (Paid)</span>
                                            <span class="font-bold text-blue-600" id="count-basic-paid">0</span>
                                        </div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2">
                                            <div id="bar-basic" class="bg-blue-500 h-2 rounded-full" style="width: 0%">
                                            </div>
                                        </div>
                                        <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">
                                            Revenue: <span class="font-semibold" id="revenue-basic">0 ETB</span>
                                        </p>
                                    </div>
                                    <div class="p-4 bg-purple-50 dark:bg-purple-900 dark:bg-opacity-20 rounded-lg">
                                        <div class="flex justify-between items-center mb-2">
                                            <span class="font-semibold">Premium (Paid)</span>
                                            <span class="font-bold text-purple-600" id="count-premium-paid">0</span>
                                        </div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2">
                                            <div id="bar-premium" class="bg-purple-500 h-2 rounded-full"
                                                style="width: 0%"></div>
                                        </div>
                                        <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">
                                            Revenue: <span class="font-semibold" id="revenue-premium">0 ETB</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Satisfaction & Churn Analysis -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                            <!-- Satisfaction Metrics -->
                            <div class="card p-6">
                                <h3 class="text-xl font-bold mb-4">
                                    <i class="fas fa-heart mr-2 text-pink-600"></i>
                                    User Satisfaction
                                </h3>
                                <div class="space-y-4">
                                    <div class="p-4 bg-green-50 dark:bg-green-900 dark:bg-opacity-20 rounded-lg">
                                        <div class="flex justify-between items-center mb-2">
                                            <span class="font-medium">Platform Experience</span>
                                            <div class="flex items-center gap-2">
                                                <span class="text-yellow-500">
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star-half-alt"></i>
                                                </span>
                                                <span class="font-bold text-green-600" id="rating-platform">4.5</span>
                                            </div>
                                        </div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2">
                                            <div class="bg-green-500 h-2 rounded-full" style="width: 90%"></div>
                                        </div>
                                        <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">
                                            <span class="font-semibold" id="count-happy-platform">0</span> users
                                            satisfied
                                        </p>
                                    </div>
                                    <div class="p-4 bg-blue-50 dark:bg-blue-900 dark:bg-opacity-20 rounded-lg">
                                        <div class="flex justify-between items-center mb-2">
                                            <span class="font-medium">Admin Services</span>
                                            <div class="flex items-center gap-2">
                                                <span class="text-yellow-500">
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="far fa-star"></i>
                                                </span>
                                                <span class="font-bold text-blue-600" id="rating-admin">4.2</span>
                                            </div>
                                        </div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2">
                                            <div class="bg-blue-500 h-2 rounded-full" style="width: 84%"></div>
                                        </div>
                                        <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">
                                            <span class="font-semibold" id="count-happy-admin">0</span> users satisfied
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!-- Churn Analysis -->
                            <div class="card p-6">
                                <h3 class="text-xl font-bold mb-4">
                                    <i class="fas fa-user-minus mr-2 text-red-600"></i>
                                    User Churn Analysis
                                </h3>
                                <div class="space-y-4">
                                    <div class="p-4 bg-red-50 dark:bg-red-900 dark:bg-opacity-20 rounded-lg">
                                        <div class="flex justify-between items-center mb-2">
                                            <span class="font-medium">Advertiser Churn</span>
                                            <span class="font-bold text-red-600" id="churn-advertisers">0%</span>
                                        </div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2 mb-2">
                                            <div id="bar-churn-advertisers" class="bg-red-500 h-2 rounded-full"
                                                style="width: 0%"></div>
                                        </div>
                                        <p class="text-sm text-gray-600 dark:text-gray-400">
                                            <span class="font-semibold" id="count-churn-advertisers">0</span>
                                            advertisers left this period
                                        </p>
                                    </div>
                                    <div class="p-4 bg-orange-50 dark:bg-orange-900 dark:bg-opacity-20 rounded-lg">
                                        <div class="flex justify-between items-center mb-2">
                                            <span class="font-medium">User Churn</span>
                                            <span class="font-bold text-orange-600" id="churn-users">0%</span>
                                        </div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2 mb-2">
                                            <div id="bar-churn-users" class="bg-orange-500 h-2 rounded-full"
                                                style="width: 0%"></div>
                                        </div>
                                        <p class="text-sm text-gray-600 dark:text-gray-400">
                                            <span class="font-semibold" id="count-churn-users">0</span> users left this
                                            period
                                        </p>
                                    </div>
                                    <div class="p-4 bg-yellow-50 dark:bg-yellow-900 dark:bg-opacity-20 rounded-lg">
                                        <p class="text-sm font-semibold mb-2">
                                            <i class="fas fa-lightbulb text-yellow-600 mr-2"></i>
                                            Top Reasons for Leaving:
                                        </p>
                                        <ul class="text-sm text-gray-600 dark:text-gray-400 space-y-1 ml-6">
                                            <li>‚Ä¢ Pricing concerns (35%)</li>
                                            <li>‚Ä¢ Limited features (28%)</li>
                                            <li>‚Ä¢ Technical issues (22%)</li>
                                            <li class="flex items-center justify-between">
                                                <span>‚Ä¢ Other (15%)</span>
                                                <button onclick="openChurnOthersModal()"
                                                    class="text-blue-600 dark:text-blue-400 hover:underline text-xs font-semibold ml-2">
                                                    View Details ‚Üí
                                                </button>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Campaign Analytics -->
                        <div class="card p-6 mb-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-bold">
                                    <i class="fas fa-ad mr-2 text-indigo-600"></i>
                                    Campaign Revenue & Performance
                                </h3>
                                <div class="flex gap-2">
                                    <button onclick="switchChartType('campaignChart', 'bar')"
                                        class="px-3 py-1 text-sm bg-indigo-100 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-300 rounded hover:bg-indigo-200 dark:hover:bg-indigo-800">
                                        <i class="fas fa-chart-bar"></i>
                                    </button>
                                    <button onclick="switchChartType('campaignChart', 'line')"
                                        class="px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600">
                                        <i class="fas fa-chart-line"></i>
                                    </button>
                                </div>
                            </div>
                            <canvas id="campaignChart" height="250"></canvas>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                                <div
                                    class="text-center p-4 bg-indigo-50 dark:bg-indigo-900 dark:bg-opacity-20 rounded-lg">
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Total Campaigns</p>
                                    <p class="text-2xl font-bold text-indigo-600" id="count-campaigns">0</p>
                                </div>
                                <div
                                    class="text-center p-4 bg-green-50 dark:bg-green-900 dark:bg-opacity-20 rounded-lg">
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Active Campaigns</p>
                                    <p class="text-2xl font-bold text-green-600" id="count-campaigns-active">0</p>
                                </div>
                                <div
                                    class="text-center p-4 bg-purple-50 dark:bg-purple-900 dark:bg-opacity-20 rounded-lg">
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Campaign Revenue</p>
                                    <p class="text-2xl font-bold text-purple-600" id="revenue-campaigns">0 ETB</p>
                                </div>
                            </div>
                        </div>

                        <!-- AI Analysis & Insights -->
                        <div
                            class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-xl shadow-lg p-6 mb-6">
                            <h3 class="text-2xl font-bold mb-4 flex items-center gap-2">
                                <i class="fas fa-brain"></i>
                                AI-Powered Insights & Analysis
                            </h3>

                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <!-- This Month Analysis -->
                                <div class="bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-4">
                                    <h4 class="font-bold mb-2 flex items-center gap-2">
                                        <i class="fas fa-calendar-check"></i>
                                        This Month's Performance
                                    </h4>
                                    <ul class="space-y-2 text-sm">
                                        <li class="flex items-start gap-2">
                                            <i class="fas fa-arrow-up text-green-300 mt-1"></i>
                                            <span id="ai-month-growth">15% increase in user registrations compared to
                                                last month</span>
                                        </li>
                                        <li class="flex items-start gap-2">
                                            <i class="fas fa-trophy text-yellow-300 mt-1"></i>
                                            <span id="ai-month-achievement">Highest premium conversion rate (12.5%)
                                                achieved this quarter</span>
                                        </li>
                                        <li class="flex items-start gap-2">
                                            <i class="fas fa-star text-yellow-300 mt-1"></i>
                                            <span id="ai-month-highlight">Tutor engagement increased by 23%</span>
                                        </li>
                                    </ul>
                                </div>

                                <!-- Last Year Overview -->
                                <div class="bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-4">
                                    <h4 class="font-bold mb-2 flex items-center gap-2">
                                        <i class="fas fa-chart-line"></i>
                                        Last Year's Trends
                                    </h4>
                                    <ul class="space-y-2 text-sm">
                                        <li class="flex items-start gap-2">
                                            <i class="fas fa-users text-blue-300 mt-1"></i>
                                            <span id="ai-year-users">Total user base grew by 145% year-over-year</span>
                                        </li>
                                        <li class="flex items-start gap-2">
                                            <i class="fas fa-money-bill-wave text-green-300 mt-1"></i>
                                            <span id="ai-year-revenue">Revenue increased by 180% with strong Q4
                                                performance</span>
                                        </li>
                                        <li class="flex items-start gap-2">
                                            <i class="fas fa-smile text-yellow-300 mt-1"></i>
                                            <span id="ai-year-satisfaction">User satisfaction maintained above 4.3/5.0
                                                throughout the year</span>
                                        </li>
                                    </ul>
                                </div>

                                <!-- Future Recommendations -->
                                <div class="bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-4">
                                    <h4 class="font-bold mb-2 flex items-center gap-2">
                                        <i class="fas fa-lightbulb"></i>
                                        Recommendations
                                    </h4>
                                    <ul class="space-y-2 text-sm">
                                        <li class="flex items-start gap-2">
                                            <i class="fas fa-target text-orange-300 mt-1"></i>
                                            <span id="ai-future-focus">Focus on reducing advertiser churn by improving
                                                analytics dashboard</span>
                                        </li>
                                        <li class="flex items-start gap-2">
                                            <i class="fas fa-rocket text-blue-300 mt-1"></i>
                                            <span id="ai-future-growth">Launch referral program to capitalize on high
                                                satisfaction rates</span>
                                        </li>
                                        <li class="flex items-start gap-2">
                                            <i class="fas fa-gift text-pink-300 mt-1"></i>
                                            <span id="ai-future-retention">Introduce loyalty rewards for users
                                                completing 6+ months</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Export Buttons -->
                        <div class="flex justify-end gap-3">
                            <button onclick="exportReportPDF()"
                                class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all font-medium flex items-center gap-2">
                                <i class="fas fa-file-pdf"></i>
                                Export PDF
                            </button>
                            <button onclick="exportReportExcel()"
                                class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-medium flex items-center gap-2">
                                <i class="fas fa-file-excel"></i>
                                Export Excel
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Right Sidebar Widgets (Persistent across all panels) -->
                <div class="admin-right-widgets"
                    style="width: 320px !important; flex-shrink: 0 !important; position: sticky !important; top: 5rem !important; height: fit-content !important;">
                    <!-- System Monitoring Widget -->
                    <div class="admin-widget-card system-monitoring-widget">
                        <h3 class="text-lg font-semibold mb-4">
                            üíª System Monitoring
                            <span class="live-indicator ml-2 text-xs text-green-500">
                                <span class="inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                                Live
                            </span>
                        </h3>
                        <div class="space-y-3">
                            <div class="metric-item">
                                <div class="flex justify-between items-center mb-1">
                                    <span class="text-sm">CPU Usage</span>
                                    <span class="text-sm font-semibold">28%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 28%"></div>
                                </div>
                            </div>

                            <div class="metric-item">
                                <div class="flex justify-between items-center mb-1">
                                    <span class="text-sm">Memory</span>
                                    <span class="text-sm font-semibold">4.2/16 GB</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-blue-500 h-2 rounded-full" style="width: 26%"></div>
                                </div>
                            </div>

                            <div class="metric-item">
                                <div class="flex justify-between items-center mb-1">
                                    <span class="text-sm">Disk Space</span>
                                    <span class="text-sm font-semibold">245/500 GB</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-yellow-500 h-2 rounded-full" style="width: 49%"></div>
                                </div>
                            </div>

                            <div class="metric-item">
                                <div class="flex justify-between items-center mb-1">
                                    <span class="text-sm">Network I/O</span>
                                    <span class="text-sm font-semibold">125 Mbps</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-purple-500 h-2 rounded-full" style="width: 62%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Alerts Widget -->
                    <div class="admin-widget-card">
                        <h3 class="text-lg font-semibold mb-4">üîî Recent Alerts</h3>
                        <div class="space-y-3">
                            <div class="alert-item p-3 bg-yellow-50 rounded-lg border-l-4 border-yellow-500">
                                <div class="flex items-start">
                                    <span class="text-yellow-600 mr-2">‚ö†Ô∏è</span>
                                    <div>
                                        <div class="font-medium text-sm">High API Usage</div>
                                        <div class="text-xs text-gray-600">80% of daily limit reached</div>
                                        <div class="text-xs text-gray-500 mt-1">10 minutes ago</div>
                                    </div>
                                </div>
                            </div>

                            <div class="alert-item p-3 bg-green-50 rounded-lg border-l-4 border-green-500">
                                <div class="flex items-start">
                                    <span class="text-green-600 mr-2">‚úÖ</span>
                                    <div>
                                        <div class="font-medium text-sm">Backup Complete</div>
                                        <div class="text-xs text-gray-600">Daily backup successful</div>
                                        <div class="text-xs text-gray-500 mt-1">2 hours ago</div>
                                    </div>
                                </div>
                            </div>

                            <div class="alert-item p-3 bg-blue-50 rounded-lg border-l-4 border-blue-500">
                                <div class="flex items-start">
                                    <span class="text-blue-600 mr-2">‚ÑπÔ∏è</span>
                                    <div>
                                        <div class="font-medium text-sm">System Update</div>
                                        <div class="text-xs text-gray-600">New version available</div>
                                        <div class="text-xs text-gray-500 mt-1">5 hours ago</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- System Info Widget -->
                    <div class="admin-widget-card">
                        <h3 class="text-lg font-semibold mb-4">‚ÑπÔ∏è System Info</h3>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Version:</span>
                                <span class="font-medium">v2.4.1</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Environment:</span>
                                <span class="font-medium">Production</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Server:</span>
                                <span class="font-medium">AWS EC2</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Database:</span>
                                <span class="font-medium">PostgreSQL 14</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Uptime:</span>
                                <span class="font-medium">45 days</span>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End of admin-right-widgets -->

            </div>
            <!-- End of flex gap-6 container -->

        </div>
        <!-- End of container mx-auto px-4 -->
    </section>

    <!-- Footer -->
    <footer class="footer-section mt-16">
        <div class="container mx-auto px-4 py-8">
            <div class="text-center">
                <p>&copy; 2025 Astegni. All rights reserved. | System Settings</p>
            </div>
        </div>
    </footer>

    <!-- Chart.js Library -->
    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Scripts -->
    <script src="../js/root/app.js"></script>
    <script src="../js/root/auth.js"></script>

    <!-- Standalone Script - All Navigation & Panel Management (includes PanelManager) -->
    <script src="../js/admin-pages/manage-system-settings-standalone.js"></script>

    <!-- System Settings Database Integration - MUST load before manage-system-settings.js -->
    <script src="../js/admin-pages/system-settings-data.js?v=3"></script>

    <!-- Page-specific data loading - Uses SystemSettingsDataManager from system-settings-data.js -->
    <script src="../js/admin-pages/manage-system-settings.js"></script>

    <!-- Ethiopian SMS Providers Extension (SAFE VERSION) -->
    <script src="../js/admin-pages/sms-ethiopian-providers-safe.js"></script>

    <!-- Pricing & Features Manager (Campaign Packages, Subscription Pricing, Affiliate Settings) -->
    <script src="../js/admin-pages/pricing-features-manager.js?v=6"></script>

    <!-- Fix theme background -->
    <script>
        // Ensure dark theme background is applied correctly
        document.addEventListener('DOMContentLoaded', function () {
            // Force background color application
            function applyThemeBackground() {
                const theme = document.documentElement.getAttribute('data-theme');
                if (theme === 'dark') {
                    document.body.style.backgroundColor = '#1E1E1E';
                    document.documentElement.style.backgroundColor = '#1E1E1E';
                } else {
                    document.body.style.backgroundColor = '#ffffff';
                    document.documentElement.style.backgroundColor = '#ffffff';
                }
            }

            // Apply immediately
            applyThemeBackground();

            // Watch for theme changes
            const observer = new MutationObserver(function (mutations) {
                mutations.forEach(function (mutation) {
                    if (mutation.attributeName === 'data-theme') {
                        applyThemeBackground();
                    }
                });
            });

            observer.observe(document.documentElement, {
                attributes: true,
                attributeFilter: ['data-theme']
            });
        });
    </script>

    <!-- ==================== SMS PROVIDER MODALS ==================== -->

    <!-- Add SMS Provider Selection Modal -->
    <div id="add-sms-provider-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeAddSMSProviderModal()"></div>
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h2 class="text-2xl font-bold">Choose SMS Provider</h2>
                <button class="modal-close" onclick="closeAddSMSProviderModal()">√ó</button>
            </div>
            <div class="modal-body">
                <p class="text-gray-600 mb-6">Select an SMS provider to configure for your platform</p>

                <!-- Provider Cards Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

                    <!-- Africa's Talking Card -->
                    <div onclick="selectSMSProvider('africas_talking')" class="provider-card cursor-pointer border-2 rounded-lg p-6 hover:border-green-500 hover:shadow-lg transition-all group">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center group-hover:bg-green-500 transition-colors">
                                <i class="fas fa-globe-africa text-2xl text-green-600 group-hover:text-white"></i>
                            </div>
                            <div class="flex-1">
                                <h3 class="text-lg font-bold mb-1">Africa's Talking</h3>
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="px-2 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded">Recommended for Ethiopia</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-3">Best coverage and pricing for Ethiopian SMS. 50-75% cheaper than alternatives.</p>
                                <div class="text-sm space-y-1">
                                    <div class="flex items-center gap-2 text-gray-700">
                                        <i class="fas fa-check-circle text-green-500"></i>
                                        <span><strong>$0.02-0.04</strong> per SMS</span>
                                    </div>
                                    <div class="flex items-center gap-2 text-gray-700">
                                        <i class="fas fa-check-circle text-green-500"></i>
                                        <span>Excellent Ethiopia coverage</span>
                                    </div>
                                    <div class="flex items-center gap-2 text-gray-700">
                                        <i class="fas fa-check-circle text-green-500"></i>
                                        <span>Free sandbox testing</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Twilio Card -->
                    <div onclick="selectSMSProvider('twilio')" class="provider-card cursor-pointer border-2 rounded-lg p-6 hover:border-blue-500 hover:shadow-lg transition-all group">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center group-hover:bg-blue-500 transition-colors">
                                <i class="fas fa-comments text-2xl text-blue-600 group-hover:text-white"></i>
                            </div>
                            <div class="flex-1">
                                <h3 class="text-lg font-bold mb-1">Twilio</h3>
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="px-2 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded">Most Popular</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-3">Industry-leading SMS provider with global coverage and excellent reliability.</p>
                                <div class="text-sm space-y-1">
                                    <div class="flex items-center gap-2 text-gray-700">
                                        <i class="fas fa-check-circle text-blue-500"></i>
                                        <span><strong>$0.08</strong> per SMS</span>
                                    </div>
                                    <div class="flex items-center gap-2 text-gray-700">
                                        <i class="fas fa-check-circle text-blue-500"></i>
                                        <span>Global coverage</span>
                                    </div>
                                    <div class="flex items-center gap-2 text-gray-700">
                                        <i class="fas fa-check-circle text-blue-500"></i>
                                        <span>Trial credits available</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Vonage Card -->
                    <div onclick="selectSMSProvider('vonage')" class="provider-card cursor-pointer border-2 rounded-lg p-6 hover:border-purple-500 hover:shadow-lg transition-all group">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center group-hover:bg-purple-500 transition-colors">
                                <i class="fas fa-sms text-2xl text-purple-600 group-hover:text-white"></i>
                            </div>
                            <div class="flex-1">
                                <h3 class="text-lg font-bold mb-1">Vonage (Nexmo)</h3>
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="px-2 py-1 bg-purple-100 text-purple-700 text-xs font-semibold rounded">Alternative</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-3">Reliable alternative to Twilio with competitive pricing and good coverage.</p>
                                <div class="text-sm space-y-1">
                                    <div class="flex items-center gap-2 text-gray-700">
                                        <i class="fas fa-check-circle text-purple-500"></i>
                                        <span><strong>$0.06</strong> per SMS</span>
                                    </div>
                                    <div class="flex items-center gap-2 text-gray-700">
                                        <i class="fas fa-check-circle text-purple-500"></i>
                                        <span>Good Ethiopia coverage</span>
                                    </div>
                                    <div class="flex items-center gap-2 text-gray-700">
                                        <i class="fas fa-check-circle text-purple-500"></i>
                                        <span>‚Ç¨2 free credit</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AWS SNS Card -->
                    <div onclick="selectSMSProvider('aws_sns')" class="provider-card cursor-pointer border-2 rounded-lg p-6 hover:border-orange-500 hover:shadow-lg transition-all group">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center group-hover:bg-orange-500 transition-colors">
                                <i class="fab fa-aws text-2xl text-orange-600 group-hover:text-white"></i>
                            </div>
                            <div class="flex-1">
                                <h3 class="text-lg font-bold mb-1">AWS SNS</h3>
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="px-2 py-1 bg-orange-100 text-orange-700 text-xs font-semibold rounded">For AWS Users</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-3">Amazon's SMS service, ideal if you're already using AWS infrastructure.</p>
                                <div class="text-sm space-y-1">
                                    <div class="flex items-center gap-2 text-gray-700">
                                        <i class="fas fa-check-circle text-orange-500"></i>
                                        <span><strong>$0.06</strong> per SMS</span>
                                    </div>
                                    <div class="flex items-center gap-2 text-gray-700">
                                        <i class="fas fa-check-circle text-orange-500"></i>
                                        <span>AWS integration</span>
                                    </div>
                                    <div class="flex items-center gap-2 text-gray-700">
                                        <i class="fas fa-check-circle text-orange-500"></i>
                                        <span>Scalable infrastructure</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ethiopian SMS Gateway Card -->
                    <div onclick="selectSMSProvider('ethiopian_gateway')" class="provider-card cursor-pointer border-2 rounded-lg p-6 hover:border-yellow-500 hover:shadow-lg transition-all group">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center group-hover:bg-yellow-500 transition-colors">
                                <i class="fas fa-flag text-2xl text-yellow-600 group-hover:text-white"></i>
                            </div>
                            <div class="flex-1">
                                <h3 class="text-lg font-bold mb-1">Ethiopian SMS Gateway</h3>
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="px-2 py-1 bg-yellow-100 text-yellow-700 text-xs font-semibold rounded">Cheapest Option</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-3">Local Ethiopian SMS providers. Best delivery rates and lowest costs for Ethiopia-only SMS.</p>
                                <div class="text-sm space-y-1">
                                    <div class="flex items-center gap-2 text-gray-700">
                                        <i class="fas fa-check-circle text-yellow-500"></i>
                                        <span><strong>$0.01-0.02</strong> per SMS</span>
                                    </div>
                                    <div class="flex items-center gap-2 text-gray-700">
                                        <i class="fas fa-check-circle text-yellow-500"></i>
                                        <span>Best local delivery</span>
                                    </div>
                                    <div class="flex items-center gap-2 text-gray-700">
                                        <i class="fas fa-check-circle text-yellow-500"></i>
                                        <span>Lowest cost</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ethio Telecom Card -->
                    <div onclick="selectSMSProvider('ethio_telecom')" class="provider-card cursor-pointer border-2 rounded-lg p-6 hover:border-teal-500 hover:shadow-lg transition-all group">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center group-hover:bg-teal-500 transition-colors">
                                <i class="fas fa-mobile-alt text-2xl text-teal-600 group-hover:text-white"></i>
                            </div>
                            <div class="flex-1">
                                <h3 class="text-lg font-bold mb-1">Ethio Telecom</h3>
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="px-2 py-1 bg-teal-100 text-teal-700 text-xs font-semibold rounded">Official Telecom</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-3">Ethiopia's national telecommunications provider. Direct integration with local network.</p>
                                <div class="text-sm space-y-1">
                                    <div class="flex items-center gap-2 text-gray-700">
                                        <i class="fas fa-check-circle text-teal-500"></i>
                                        <span><strong>Contact for pricing</strong></span>
                                    </div>
                                    <div class="flex items-center gap-2 text-gray-700">
                                        <i class="fas fa-check-circle text-teal-500"></i>
                                        <span>100% local coverage</span>
                                    </div>
                                    <div class="flex items-center gap-2 text-gray-700">
                                        <i class="fas fa-check-circle text-teal-500"></i>
                                        <span>Government backed</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- Cost Comparison -->
                <div class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                    <div class="flex items-start gap-3">
                        <i class="fas fa-info-circle text-blue-600 mt-1"></i>
                        <div class="text-sm text-blue-800">
                            <strong>Cost for 1,000 SMS to Ethiopia:</strong>
                            <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mt-2">
                                <div><strong>Ethiopian Gateway:</strong> $10-20 ‚≠ê</div>
                                <div><strong>Africa's Talking:</strong> $20-40</div>
                                <div><strong>Vonage:</strong> $60</div>
                                <div><strong>AWS SNS:</strong> $60</div>
                                <div><strong>Twilio:</strong> $80</div>
                                <div><strong>Ethio Telecom:</strong> Contact</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Configure Africa's Talking Modal -->
    <div id="configure-africas-talking-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeSMSConfigModal()"></div>
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-globe-africa text-xl text-green-600"></i>
                    </div>
                    <h2 class="text-xl font-bold">Configure Africa's Talking</h2>
                </div>
                <button class="modal-close" onclick="closeSMSConfigModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="africas-talking-form" onsubmit="saveSMSProviderConfig(event, 'africas_talking')">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                Username <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="at_username" required
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500"
                                placeholder="sandbox or your production username">
                            <p class="text-xs text-gray-500 mt-1">Use 'sandbox' for testing</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                API Key <span class="text-red-500">*</span>
                            </label>
                            <input type="password" name="at_api_key" required
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500"
                                placeholder="Your Africa's Talking API key">
                            <p class="text-xs text-gray-500 mt-1">Get from Africa's Talking dashboard</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                Sender ID / Short Code (Optional)
                            </label>
                            <input type="text" name="at_from_number"
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500"
                                placeholder="ASTEGNI">
                            <p class="text-xs text-gray-500 mt-1">Your approved sender ID (e.g., ASTEGNI)</p>
                        </div>

                        <div class="p-4 bg-green-50 border border-green-200 rounded-lg">
                            <p class="text-sm text-green-800">
                                <i class="fas fa-lightbulb mr-2"></i>
                                <strong>Getting Started:</strong> Sign up at <a href="https://africastalking.com" target="_blank" class="underline">africastalking.com</a> to get your credentials.
                            </p>
                        </div>
                    </div>

                    <div class="flex gap-3 mt-6">
                        <button type="button" onclick="closeSMSConfigModal()" class="flex-1 px-4 py-2 border rounded-lg hover:bg-gray-50">
                            Cancel
                        </button>
                        <button type="submit" class="flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                            Save & Configure
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Configure Twilio Modal -->
    <div id="configure-twilio-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeSMSConfigModal()"></div>
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-comments text-xl text-blue-600"></i>
                    </div>
                    <h2 class="text-xl font-bold">Configure Twilio</h2>
                </div>
                <button class="modal-close" onclick="closeSMSConfigModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="twilio-form" onsubmit="saveSMSProviderConfig(event, 'twilio')">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                Account SID <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="twilio_account_sid" required
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"
                                placeholder="ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
                            <p class="text-xs text-gray-500 mt-1">Starts with "AC" - find in Twilio console</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                Auth Token <span class="text-red-500">*</span>
                            </label>
                            <input type="password" name="twilio_auth_token" required
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"
                                placeholder="Your 32-character auth token">
                            <p class="text-xs text-gray-500 mt-1">Keep this secure - never share publicly</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                Phone Number <span class="text-red-500">*</span>
                            </label>
                            <input type="tel" name="twilio_from_number" required
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"
                                placeholder="+15551234567">
                            <p class="text-xs text-gray-500 mt-1">Your Twilio phone number with country code</p>
                        </div>

                        <div class="p-4 bg-blue-50 border border-blue-200 rounded-lg">
                            <p class="text-sm text-blue-800">
                                <i class="fas fa-lightbulb mr-2"></i>
                                <strong>Getting Started:</strong> Sign up at <a href="https://www.twilio.com/try-twilio" target="_blank" class="underline">twilio.com/try-twilio</a> for free trial credits.
                            </p>
                        </div>
                    </div>

                    <div class="flex gap-3 mt-6">
                        <button type="button" onclick="closeSMSConfigModal()" class="flex-1 px-4 py-2 border rounded-lg hover:bg-gray-50">
                            Cancel
                        </button>
                        <button type="submit" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                            Save & Configure
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Configure Vonage Modal -->
    <div id="configure-vonage-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeSMSConfigModal()"></div>
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-sms text-xl text-purple-600"></i>
                    </div>
                    <h2 class="text-xl font-bold">Configure Vonage</h2>
                </div>
                <button class="modal-close" onclick="closeSMSConfigModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="vonage-form" onsubmit="saveSMSProviderConfig(event, 'vonage')">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                API Key <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="vonage_api_key" required
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-500"
                                placeholder="Your Vonage API key">
                            <p class="text-xs text-gray-500 mt-1">Find in Vonage dashboard</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                API Secret <span class="text-red-500">*</span>
                            </label>
                            <input type="password" name="vonage_api_secret" required
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-500"
                                placeholder="Your Vonage API secret">
                            <p class="text-xs text-gray-500 mt-1">Keep this secure</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                From Number / Brand Name
                            </label>
                            <input type="text" name="vonage_from_number"
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-500"
                                placeholder="Astegni or +15551234567">
                            <p class="text-xs text-gray-500 mt-1">Brand name or phone number</p>
                        </div>

                        <div class="p-4 bg-purple-50 border border-purple-200 rounded-lg">
                            <p class="text-sm text-purple-800">
                                <i class="fas fa-lightbulb mr-2"></i>
                                <strong>Getting Started:</strong> Sign up at <a href="https://dashboard.nexmo.com/sign-up" target="_blank" class="underline">vonage.com</a> for ‚Ç¨2 free credit.
                            </p>
                        </div>
                    </div>

                    <div class="flex gap-3 mt-6">
                        <button type="button" onclick="closeSMSConfigModal()" class="flex-1 px-4 py-2 border rounded-lg hover:bg-gray-50">
                            Cancel
                        </button>
                        <button type="submit" class="flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">
                            Save & Configure
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Configure AWS SNS Modal -->
    <div id="configure-aws-sns-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeSMSConfigModal()"></div>
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center">
                        <i class="fab fa-aws text-xl text-orange-600"></i>
                    </div>
                    <h2 class="text-xl font-bold">Configure AWS SNS</h2>
                </div>
                <button class="modal-close" onclick="closeSMSConfigModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="aws-sns-form" onsubmit="saveSMSProviderConfig(event, 'aws_sns')">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                AWS Access Key ID <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="aws_access_key_id" required
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-orange-500"
                                placeholder="AKIAxxxxxxxxxxxxxxxx">
                            <p class="text-xs text-gray-500 mt-1">From AWS IAM console</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                AWS Secret Access Key <span class="text-red-500">*</span>
                            </label>
                            <input type="password" name="aws_secret_access_key" required
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-orange-500"
                                placeholder="Your AWS secret access key">
                            <p class="text-xs text-gray-500 mt-1">Keep this highly secure</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                AWS Region
                            </label>
                            <select name="aws_region"
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-orange-500">
                                <option value="us-east-1">US East (N. Virginia)</option>
                                <option value="us-west-2">US West (Oregon)</option>
                                <option value="eu-west-1">EU (Ireland)</option>
                                <option value="eu-central-1">EU (Frankfurt)</option>
                                <option value="ap-southeast-1">Asia Pacific (Singapore)</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                Sender ID
                            </label>
                            <input type="text" name="aws_sns_sender_id"
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-orange-500"
                                placeholder="Astegni">
                            <p class="text-xs text-gray-500 mt-1">Brand name to display as sender</p>
                        </div>

                        <div class="p-4 bg-orange-50 border border-orange-200 rounded-lg">
                            <p class="text-sm text-orange-800">
                                <i class="fas fa-lightbulb mr-2"></i>
                                <strong>Note:</strong> Requires AWS account with SNS enabled. Request production access for higher limits.
                            </p>
                        </div>
                    </div>

                    <div class="flex gap-3 mt-6">
                        <button type="button" onclick="closeSMSConfigModal()" class="flex-1 px-4 py-2 border rounded-lg hover:bg-gray-50">
                            Cancel
                        </button>
                        <button type="submit" class="flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700">
                            Save & Configure
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Configure Ethiopian SMS Gateway Modal -->
    <div id="configure-ethiopian-gateway-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeSMSConfigModal()"></div>
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-flag text-xl text-yellow-600"></i>
                    </div>
                    <h2 class="text-xl font-bold">Configure Ethiopian SMS Gateway</h2>
                </div>
                <button class="modal-close" onclick="closeSMSConfigModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="ethiopian-gateway-form" onsubmit="saveSMSProviderConfig(event, 'ethiopian_gateway')">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                Gateway Provider Name <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="eth_provider_name" required
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-yellow-500"
                                placeholder="e.g., SMS Gateway Ethiopia, Yanet SMS">
                            <p class="text-xs text-gray-500 mt-1">Name of your local SMS gateway provider</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                API Endpoint URL <span class="text-red-500">*</span>
                            </label>
                            <input type="url" name="eth_api_url" required
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-yellow-500"
                                placeholder="https://api.provider.com/send">
                            <p class="text-xs text-gray-500 mt-1">API endpoint provided by your gateway</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                API Key / Access Token <span class="text-red-500">*</span>
                            </label>
                            <input type="password" name="eth_api_key" required
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-yellow-500"
                                placeholder="Your API key or access token">
                            <p class="text-xs text-gray-500 mt-1">Authentication credential from your provider</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                Username (Optional)
                            </label>
                            <input type="text" name="eth_username"
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-yellow-500"
                                placeholder="API username if required">
                            <p class="text-xs text-gray-500 mt-1">Some gateways require a username</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                Sender ID / Short Code
                            </label>
                            <input type="text" name="eth_sender_id"
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-yellow-500"
                                placeholder="ASTEGNI or 9999">
                            <p class="text-xs text-gray-500 mt-1">Your registered sender ID or short code</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                HTTP Method
                            </label>
                            <select name="eth_http_method"
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-yellow-500">
                                <option value="POST">POST</option>
                                <option value="GET">GET</option>
                            </select>
                            <p class="text-xs text-gray-500 mt-1">HTTP method used by your gateway's API</p>
                        </div>

                        <div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                            <p class="text-sm text-yellow-800">
                                <i class="fas fa-lightbulb mr-2"></i>
                                <strong>Note:</strong> Contact your local SMS gateway provider for API credentials. Common Ethiopian providers include SMS Gateway Ethiopia, Yanet SMS, and custom enterprise solutions.
                            </p>
                        </div>
                    </div>

                    <div class="flex gap-3 mt-6">
                        <button type="button" onclick="closeSMSConfigModal()" class="flex-1 px-4 py-2 border rounded-lg hover:bg-gray-50">
                            Cancel
                        </button>
                        <button type="submit" class="flex-1 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700">
                            Save & Configure
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Configure Ethio Telecom Modal -->
    <div id="configure-ethio-telecom-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeSMSConfigModal()"></div>
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-teal-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-mobile-alt text-xl text-teal-600"></i>
                    </div>
                    <h2 class="text-xl font-bold">Configure Ethio Telecom SMS</h2>
                </div>
                <button class="modal-close" onclick="closeSMSConfigModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="ethio-telecom-form" onsubmit="saveSMSProviderConfig(event, 'ethio_telecom')">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                Enterprise Account ID <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="et_account_id" required
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-teal-500"
                                placeholder="Your Ethio Telecom enterprise account ID">
                            <p class="text-xs text-gray-500 mt-1">Provided by Ethio Telecom for business accounts</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                API Key <span class="text-red-500">*</span>
                            </label>
                            <input type="password" name="et_api_key" required
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-teal-500"
                                placeholder="Your Ethio Telecom API key">
                            <p class="text-xs text-gray-500 mt-1">API key from your enterprise dashboard</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                API Secret <span class="text-red-500">*</span>
                            </label>
                            <input type="password" name="et_api_secret" required
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-teal-500"
                                placeholder="Your API secret key">
                            <p class="text-xs text-gray-500 mt-1">Keep this highly secure</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                Short Code / Sender ID <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="et_short_code" required
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-teal-500"
                                placeholder="e.g., 9999 or ASTEGNI">
                            <p class="text-xs text-gray-500 mt-1">Your registered short code or sender ID</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold mb-2">
                                API Endpoint
                            </label>
                            <input type="url" name="et_api_endpoint"
                                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-teal-500"
                                placeholder="https://api.ethiotelecom.et/sms/send">
                            <p class="text-xs text-gray-500 mt-1">API endpoint (usually provided by Ethio Telecom)</p>
                        </div>

                        <div class="p-4 bg-teal-50 border border-teal-200 rounded-lg">
                            <p class="text-sm text-teal-800 mb-2">
                                <i class="fas fa-info-circle mr-2"></i>
                                <strong>Getting Started with Ethio Telecom SMS:</strong>
                            </p>
                            <ul class="text-xs text-teal-800 space-y-1 ml-5 list-disc">
                                <li>Contact Ethio Telecom Enterprise Services</li>
                                <li>Apply for SMS Gateway business account</li>
                                <li>Register your short code or sender ID</li>
                                <li>Receive API credentials and documentation</li>
                            </ul>
                        </div>
                    </div>

                    <div class="flex gap-3 mt-6">
                        <button type="button" onclick="closeSMSConfigModal()" class="flex-1 px-4 py-2 border rounded-lg hover:bg-gray-50">
                            Cancel
                        </button>
                        <button type="submit" class="flex-1 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700">
                            Save & Configure
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

        <!-- Edit Profile Modal -->
    <!-- This modal ONLY edits admin_profile table fields (personal information) -->
    <!-- admin_profile_stats fields (employee_id, access_level, etc.) are managed by super admin or system -->
    <div id="edit-profile-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeEditProfileModal()"></div>
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2 class="text-xl font-bold">Edit Profile</h2>
                <button class="modal-close" onclick="closeEditProfileModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="editProfileForm" onsubmit="handleProfileUpdate(event)">
                    <!-- Username (Display Name) - PRIMARY FIELD -->
                    <div class="form-group mb-4">
                        <label class="block text-sm font-medium mb-1">Username (Display Name) *</label>
                        <input type="text" id="usernameInput"
                            class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                            placeholder="e.g., admin_user, john_doe" required>
                        <p class="text-xs text-gray-500 mt-1">This will be displayed as your profile name</p>
                    </div>

                    <!-- Ethiopian Naming Convention (Required) -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-3 text-gray-900">
                            Ethiopian Name Fields *
                        </label>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="form-group">
                                <label class="block text-sm font-medium mb-1">First Name *</label>
                                <input type="text" id="firstNameInput"
                                    class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="e.g., Abebe" required>
                            </div>
                            <div class="form-group">
                                <label class="block text-sm font-medium mb-1">Father's Name *</label>
                                <input type="text" id="fatherNameInput"
                                    class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="e.g., Kebede" required>
                            </div>
                            <div class="form-group">
                                <label class="block text-sm font-medium mb-1">Grandfather's Name *</label>
                                <input type="text" id="grandfatherNameInput"
                                    class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="e.g., Tesfa" required>
                            </div>
                        </div>
                    </div>

                    <!-- Position (from manage_system_settings_profile) -->
                    <div class="form-group mb-4">
                        <label class="block text-sm font-medium mb-1">Position / Title</label>
                        <input type="text" id="positionInput"
                            class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                            placeholder="e.g., Super Admin, System Administrator">
                        <p class="text-xs text-gray-500 mt-1">Your administrative position or title</p>
                    </div>

                    <!-- Contact Information -->
                    <div class="mb-4">
                        <!-- Email with OTP Verification -->
                        <div class="form-group mb-4">
                            <label class="block text-sm font-medium mb-1">Email</label>
                            <div class="flex gap-2">
                                <input type="email" id="emailInput"
                                    class="flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="admin@astegni.et" onchange="handleEmailChange()">
                                <button type="button" id="sendOtpBtn"
                                    class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed hidden"
                                    onclick="sendEmailOTP()" disabled>
                                    Send OTP
                                </button>
                            </div>
                            <p id="emailChangeNote" class="text-xs text-amber-600 mt-1 hidden">
                                <i class="fas fa-exclamation-triangle mr-1"></i>
                                Email changed. You must verify the new email with OTP before saving.
                            </p>
                        </div>

                        <!-- OTP Input (Hidden by default, shown when OTP is sent) -->
                        <div id="otpVerificationSection" class="form-group mb-4 hidden">
                            <label class="block text-sm font-medium mb-1">Enter OTP Code</label>
                            <div class="flex gap-2">
                                <input type="text" id="otpCodeInput"
                                    class="flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="Enter 6-digit code" maxlength="6">
                                <button type="button" id="verifyOtpBtn"
                                    class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600"
                                    onclick="verifyEmailOTP()">
                                    Verify
                                </button>
                            </div>
                            <p id="otpTimer" class="text-xs text-gray-500 mt-1">OTP sent. Valid for 5 minutes.</p>
                            <p id="otpVerifiedMsg" class="text-xs text-green-600 mt-1 hidden">
                                <i class="fas fa-check-circle mr-1"></i>
                                Email verified successfully!
                            </p>
                        </div>

                        <!-- Phone Number -->
                        <div class="form-group">
                            <label class="block text-sm font-medium mb-1">Phone Number</label>
                            <input type="tel" id="phoneNumberInput"
                                class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                placeholder="+251911234567">
                        </div>
                    </div>

                    <!-- Bio -->
                    <div class="form-group mb-4">
                        <label class="block text-sm font-medium mb-1">Bio</label>
                        <textarea id="bioInput" rows="3"
                            class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                            placeholder="Tell us about yourself..."></textarea>
                    </div>

                    <!-- Quote -->
                    <div class="form-group mb-4">
                        <label class="block text-sm font-medium mb-1">Quote</label>
                        <input type="text" id="quoteInput"
                            class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                            placeholder="Your personal quote or motto">
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn-secondary px-4 py-2 border rounded-lg hover:bg-gray-100"
                            onclick="closeEditProfileModal()">Cancel</button>
                        <button type="submit"
                            class="btn-primary px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Update
                            Profile</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Upload Profile Picture Modal -->
    <div id="upload-profile-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeUploadProfileModal()"></div>
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2 class="text-xl font-bold">Upload Profile Picture</h2>
                <button class="modal-close" onclick="closeUploadProfileModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="upload-area border-2 border-dashed border-gray-300 rounded-lg p-8 text-center mb-4">
                    <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                    </svg>
                    <input type="file" id="profilePictureInput" accept="image/*" class="hidden"
                        onchange="previewProfilePicture(event)">
                    <label for="profilePictureInput" class="cursor-pointer">
                        <p class="mt-2 text-sm text-gray-600">
                            <span class="font-medium text-blue-500 hover:text-blue-600">Click to upload</span> or drag
                            and drop
                        </p>
                        <p class="text-xs text-gray-500">PNG, JPG, GIF up to 5MB</p>
                    </label>
                </div>
                <div id="profilePreview" class="hidden mb-4">
                    <img id="profilePreviewImg" class="w-32 h-32 mx-auto rounded-full object-cover" alt="Preview">
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary px-4 py-2 border rounded-lg hover:bg-gray-100"
                        onclick="closeUploadProfileModal()">Cancel</button>
                    <button id="uploadProfileBtn"
                        class="btn-primary px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
                        onclick="handleProfilePictureUpload()">Upload</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Cover Image Modal -->
    <div id="upload-cover-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeUploadCoverModal()"></div>
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2 class="text-xl font-bold">Upload Cover Image</h2>
                <button class="modal-close" onclick="closeUploadCoverModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="upload-area border-2 border-dashed border-gray-300 rounded-lg p-8 text-center mb-4">
                    <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                    <input type="file" id="coverImageInput" accept="image/*" class="hidden"
                        onchange="previewCoverImage(event)">
                    <label for="coverImageInput" class="cursor-pointer">
                        <p class="mt-2 text-sm text-gray-600">
                            <span class="font-medium text-blue-500 hover:text-blue-600">Click to upload</span> or drag
                            and drop
                        </p>
                        <p class="text-xs text-gray-500">Recommended: 1200x300px (PNG, JPG up to 10MB)</p>
                    </label>
                </div>
                <div id="coverPreview" class="hidden mb-4">
                    <img id="coverPreviewImg" class="w-full h-32 object-cover rounded-lg" alt="Preview">
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary px-4 py-2 border rounded-lg hover:bg-gray-100"
                        onclick="closeUploadCoverModal()">Cancel</button>
                    <button id="uploadCoverBtn"
                        class="btn-primary px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
                        onclick="handleCoverImageUpload()">Upload</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Unified Image Upload Modal -->
    <div id="image-upload-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeImageUploadModal()"></div>
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2 class="text-xl font-bold">üì∑ Upload Image</h2>
                <button class="modal-close" onclick="closeImageUploadModal()">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Image Type Selection -->
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">What is this image for? *</label>
                    <select id="imageTypeSelect"
                        class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        onchange="updateImageTargetOptions()">
                        <option value="">Select image type...</option>
                        <option value="profile">Profile Picture</option>
                        <option value="cover">Cover Image</option>
                        <option value="logo">Logo</option>
                        <option value="favicon">Favicon</option>
                        <option value="system">System Image</option>
                    </select>
                </div>

                <!-- Target User/Entity Selection -->
                <div id="imageTargetSection" class="mb-4 hidden">
                    <label class="block text-sm font-medium mb-2">For which profile/entity? *</label>
                    <select id="imageTargetSelect"
                        class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">Select target...</option>
                        <!-- Options will be populated dynamically -->
                    </select>
                </div>

                <!-- File Upload Area -->
                <div class="upload-area border-2 border-dashed border-gray-300 rounded-lg p-8 text-center mb-4">
                    <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                    </svg>
                    <input type="file" id="systemImageInput" accept="image/*" class="hidden"
                        onchange="previewSystemImage(event)">
                    <label for="systemImageInput" class="cursor-pointer">
                        <p class="mt-2 text-sm text-gray-600">
                            <span class="font-medium text-blue-500 hover:text-blue-600">Click to upload</span> or drag
                            and drop
                        </p>
                        <p class="text-xs text-gray-500">PNG, JPG, GIF, SVG, ICO up to 10MB</p>
                    </label>
                </div>

                <!-- Image Preview -->
                <div id="systemImagePreview" class="hidden mb-4">
                    <img id="systemImagePreviewImg" class="max-w-full h-48 mx-auto object-contain rounded-lg"
                        alt="Preview">
                </div>

                <!-- Additional Options -->
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Image Title (Optional)</label>
                    <input type="text" id="imageTitle"
                        class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        placeholder="e.g., Main Logo, Default Avatar">
                </div>

                <div class="modal-footer">
                    <button class="btn-secondary px-4 py-2 border rounded-lg hover:bg-gray-100"
                        onclick="closeImageUploadModal()">Cancel</button>
                    <button id="uploadSystemImageBtn"
                        class="btn-primary px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
                        onclick="handleSystemImageUpload()">Upload Image</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Video Upload Modal -->
    <div id="video-upload-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeVideoUploadModal()"></div>
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2 class="text-xl font-bold">üé• Upload Video</h2>
                <button class="modal-close" onclick="closeVideoUploadModal()">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Video Type Selection -->
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">What is this video for? *</label>
                    <select id="videoTypeSelect"
                        class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        onchange="updateVideoClassificationOptions()">
                        <option value="">Select video type...</option>
                        <option value="ad">Advertisement</option>
                        <option value="alert">Alert/System Notification</option>
                    </select>
                </div>

                <!-- Ad Classification (shown when video type is 'ad') -->
                <div id="adClassificationSection" class="mb-4 hidden">
                    <label class="block text-sm font-medium mb-2">Ad Classification *</label>
                    <select id="adClassificationSelect"
                        class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">Select ad type...</option>
                        <option value="ad">Ad</option>
                        <option value="tutorial">Tutorial</option>
                        <option value="course">Course</option>
                        <option value="success-story">Success Story</option>
                        <option value="tips-tricks">Tips & Tricks</option>
                        <option value="entertainment">Entertainment</option>
                        <option value="news">News</option>
                    </select>
                </div>

                <!-- Target Entity Selection with Checkboxes -->
                <div id="videoTargetSection" class="mb-4 hidden">
                    <label class="block text-sm font-medium mb-2">Target Pages/Profiles * (Select all that
                        apply)</label>
                    <div class="border rounded-lg p-4 max-h-64 overflow-y-auto">
                        <!-- Homepage -->
                        <div class="mb-3 pb-3 border-b">
                            <label class="flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded">
                                <input type="checkbox" name="videoTarget" value="homepage"
                                    class="w-4 h-4 text-blue-600">
                                <span class="font-medium">üè† Homepage</span>
                            </label>
                        </div>

                        <!-- User Side Profiles -->
                        <div class="mb-3">
                            <div class="text-xs font-semibold text-gray-500 uppercase mb-2 px-2">User Profiles</div>
                            <div class="space-y-1">
                                <label class="flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded">
                                    <input type="checkbox" name="videoTarget" value="tutor"
                                        class="w-4 h-4 text-blue-600">
                                    <span>üë®‚Äçüè´ Tutors</span>
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded">
                                    <input type="checkbox" name="videoTarget" value="student"
                                        class="w-4 h-4 text-blue-600">
                                    <span>üë®‚Äçüéì Students</span>
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded">
                                    <input type="checkbox" name="videoTarget" value="parent"
                                        class="w-4 h-4 text-blue-600">
                                    <span>üë™ Parents</span>
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded">
                                    <input type="checkbox" name="videoTarget" value="user"
                                        class="w-4 h-4 text-blue-600">
                                    <span>üë§ Users</span>
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded">
                                    <input type="checkbox" name="videoTarget" value="advertiser"
                                        class="w-4 h-4 text-blue-600">
                                    <span>üì¢ Advertisers</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <p class="text-xs text-gray-500 mt-2">Select one or more pages where this video should appear</p>
                </div>

                <!-- File Upload Area -->
                <div class="upload-area border-2 border-dashed border-gray-300 rounded-lg p-8 text-center mb-4">
                    <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M7 4v16M17 4v16M3 8h18M3 12h18M3 16h18" />
                    </svg>
                    <input type="file" id="systemVideoInput" accept="video/*" class="hidden"
                        onchange="previewSystemVideo(event)">
                    <label for="systemVideoInput" class="cursor-pointer">
                        <p class="mt-2 text-sm text-gray-600">
                            <span class="font-medium text-green-500 hover:text-green-600">Click to upload</span> or drag
                            and drop
                        </p>
                        <p class="text-xs text-gray-500">MP4, AVI, MOV, WMV up to 200MB</p>
                    </label>
                </div>

                <!-- Video Preview -->
                <div id="systemVideoPreview" class="hidden mb-4">
                    <video id="systemVideoPreviewPlayer" class="w-full h-48 rounded-lg" controls>
                        <source id="systemVideoPreviewSource" src="" type="video/mp4">
                    </video>
                    <p id="videoFileName" class="text-sm text-gray-600 mt-2"></p>
                </div>

                <!-- Video Details -->
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Video Title *</label>
                    <input type="text" id="videoTitle"
                        class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        placeholder="e.g., Introduction to Mathematics" required>
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Description (Optional)</label>
                    <textarea id="videoDescription" rows="3"
                        class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        placeholder="Brief description of the video content..."></textarea>
                </div>

                <!-- Thumbnail Upload -->
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Video Thumbnail *</label>
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-4">
                        <div class="flex items-center gap-4">
                            <div id="thumbnailPreview" class="hidden">
                                <img id="thumbnailPreviewImg" class="w-32 h-20 object-cover rounded" alt="Thumbnail">
                            </div>
                            <div class="flex-1">
                                <input type="file" id="videoThumbnail" accept="image/*" class="hidden"
                                    onchange="previewThumbnail(event)">
                                <label for="videoThumbnail"
                                    class="cursor-pointer inline-block px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm">
                                    Choose Thumbnail
                                </label>
                                <p class="text-xs text-gray-500 mt-2">Recommended: 1280x720px (16:9 ratio), PNG or JPG
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Upload Progress -->
                <div id="videoUploadProgress" class="hidden mb-4">
                    <div class="flex justify-between text-sm mb-1">
                        <span>Uploading...</span>
                        <span id="videoUploadPercent">0%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div id="videoUploadProgressBar" class="bg-green-500 h-2 rounded-full transition-all"
                            style="width: 0%"></div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button class="btn-secondary px-4 py-2 border rounded-lg hover:bg-gray-100"
                        onclick="closeVideoUploadModal()">Cancel</button>
                    <button id="uploadSystemVideoBtn"
                        class="btn-primary px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600"
                        onclick="handleSystemVideoUpload()">Upload Video</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Invite Admin Modal - Simplified -->
    <!-- Invite Admin Modal -->
    <div id="invite-admin-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeInviteAdminModal()"></div>
        <div class="modal-content" style="max-width: 600px; max-height: 90vh; overflow-y: auto;">
            <div class="modal-header">
                <h2 class="text-xl font-bold">Invite New Administrator</h2>
                <button class="modal-close" onclick="closeInviteAdminModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="inviteAdminForm" onsubmit="handleAdminInvitation(event)">
                    <!-- Ethiopian Naming Convention -->
                    <div class="mb-4">
                        <h3 class="text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2">
                            <i class="fas fa-user text-blue-500"></i>
                            Personal Information
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="form-group">
                                <label class="block text-sm font-medium mb-1">First Name *</label>
                                <input type="text" id="invite-admin-first-name"
                                    class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="e.g., Abebe" required>
                            </div>
                            <div class="form-group">
                                <label class="block text-sm font-medium mb-1">Father's Name *</label>
                                <input type="text" id="invite-admin-father-name"
                                    class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="e.g., Kebede" required>
                            </div>
                            <div class="form-group">
                                <label class="block text-sm font-medium mb-1">Grandfather's Name *</label>
                                <input type="text" id="invite-admin-grandfather-name"
                                    class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="e.g., Tesfa" required>
                            </div>
                        </div>
                    </div>

                    <!-- Contact Information -->
                    <div class="mb-4">
                        <h3 class="text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2">
                            <i class="fas fa-envelope text-blue-500"></i>
                            Contact Details
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="form-group">
                                <label class="block text-sm font-medium mb-1">Email Address *</label>
                                <input type="email" id="invite-admin-email"
                                    class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="admin@astegni.et" required>
                            </div>
                            <div class="form-group">
                                <label class="block text-sm font-medium mb-1">Phone Number</label>
                                <input type="tel" id="invite-admin-phone"
                                    class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="+251911234567">
                            </div>
                        </div>
                    </div>

                    <!-- Department, Position and Employee ID -->
                    <div class="mb-4">
                        <h3 class="text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2">
                            <i class="fas fa-user-tag text-blue-500"></i>
                            Department & Identification
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="form-group">
                                <label class="block text-sm font-medium mb-1">Department *</label>
                                <select id="invite-admin-department"
                                    class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    required>
                                    <option value="">Select Department</option>
                                    <option value="manage-tutor-documents">Manage Tutor documents</option>
                                    <option value="manage-courses">Manage Courses</option>
                                    <option value="manage-campaigns">Manage Campaigns</option>
                                    <option value="manage-schools">Manage Schools</option>
                                    <option value="manage-customers">Manage Customers</option>
                                    <option value="manage-system-settings">Manage System Settings</option>
                                    <option value="manage-contents">Manage Contents</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="block text-sm font-medium mb-1">Position *</label>
                                <input type="text" id="invite-admin-position"
                                    class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="e.g., Manager, Coordinator, Specialist" required>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                            <div class="form-group">
                                <label class="block text-sm font-medium mb-1">Employee ID</label>
                                <input type="text" id="invite-admin-employee-id"
                                    class="w-full px-3 py-2 border rounded-lg bg-gray-50 cursor-not-allowed"
                                    placeholder="Auto-generated" readonly>
                                <p class="text-xs text-gray-500 mt-1">Generated automatically upon creation</p>
                            </div>
                            <div class="form-group">
                                <label class="block text-sm font-medium mb-1">Joined In</label>
                                <input type="text" id="invite-admin-joined-in"
                                    class="w-full px-3 py-2 border rounded-lg bg-gray-50 cursor-not-allowed"
                                    placeholder="Auto-filled" readonly>
                                <p class="text-xs text-gray-500 mt-1">Current date and time</p>
                            </div>
                        </div>
                    </div>

                    <!-- Welcome Message -->
                    <div class="form-group mb-4">
                        <label class="block text-sm font-medium mb-1">Welcome Message (Optional)</label>
                        <textarea id="invite-admin-message" rows="3"
                            class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                            placeholder="Add a personal welcome message for the new administrator..."></textarea>
                        <p class="text-xs text-gray-500 mt-1">This message will be included in the OTP email</p>
                    </div>

                    <!-- Info Banner -->
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-info-circle text-blue-500 text-lg mt-0.5"></i>
                            <div>
                                <h4 class="font-semibold text-sm text-gray-800 mb-2">OTP Details</h4>
                                <ul class="text-xs text-gray-600 space-y-1">
                                    <li>‚Ä¢ A secure OTP will be sent to the provided email address</li>
                                    <li>‚Ä¢ The OTP expires in 7 days</li>
                                    <li>‚Ä¢ Email will be sent from noreplay@astegni.com</li>
                                    <li>‚Ä¢ They'll need to enter the OTP to complete account setup</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn-secondary px-4 py-2 border rounded-lg hover:bg-gray-100"
                            onclick="closeInviteAdminModal()">Cancel</button>
                        <button type="submit"
                            class="btn-primary px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center gap-2">
                            <i class="fas fa-key"></i>
                            Send OTP
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Admin Details Modal -->
    <div id="admin-details-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeAdminDetailsModal()"></div>
        <div class="modal-content" style="max-width: 700px;">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Administrator Details</h2>
                <button onclick="closeAdminDetailsModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div id="admin-details-content">
                <!-- Content will be dynamically loaded -->
                <div class="text-center py-8">
                    <i class="fas fa-spinner fa-spin text-4xl text-gray-400"></i>
                    <p class="text-gray-600 mt-4">Loading admin details...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Admin Role Modal -->
    <div id="edit-admin-role-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeEditAdminRoleModal()"></div>
        <div class="modal-content" style="max-width: 500px;">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Edit Admin Role</h2>
                <button onclick="closeEditAdminRoleModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form onsubmit="handleEditAdminRole(event)">
                <div class="space-y-4">
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <div class="flex items-center gap-3">
                            <img id="edit-admin-avatar" src="" alt="Admin" class="w-12 h-12 rounded-full">
                            <div>
                                <div id="edit-admin-name" class="font-semibold"></div>
                                <div id="edit-admin-email" class="text-sm text-gray-600"></div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">New Role *</label>
                        <select id="edit-admin-role-select" required
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="admin">Admin</option>
                            <option value="moderator">Moderator</option>
                            <option value="support">Support</option>
                            <option value="super-admin">Super Admin</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Reason for Change (Optional)</label>
                        <textarea id="edit-admin-reason" rows="3"
                            placeholder="Explain why this role is being changed..."
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"></textarea>
                    </div>
                </div>
                <div class="flex justify-end gap-3 mt-6">
                    <button type="button" onclick="closeEditAdminRoleModal()"
                        class="px-6 py-2 border rounded-lg hover:bg-gray-100">
                        Cancel
                    </button>
                    <button type="submit" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                        Update Role
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Suspend Admin Modal -->
    <div id="suspend-admin-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeSuspendAdminModal()"></div>
        <div class="modal-content" style="max-width: 500px;">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-red-600">Suspend Administrator</h2>
                <button onclick="closeSuspendAdminModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form onsubmit="handleSuspendAdmin(event)">
                <div class="space-y-4">
                    <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                        <div class="flex items-start gap-2">
                            <i class="fas fa-exclamation-triangle text-red-600 mt-1"></i>
                            <div>
                                <p class="font-semibold text-red-800">Warning: Suspension Action</p>
                                <p class="text-sm text-red-700 mt-1">This admin will immediately lose access to the
                                    platform. They can be reactivated later.</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <div class="flex items-center gap-3">
                            <img id="suspend-admin-avatar" src="" alt="Admin" class="w-12 h-12 rounded-full">
                            <div>
                                <div id="suspend-admin-name" class="font-semibold"></div>
                                <div id="suspend-admin-email" class="text-sm text-gray-600"></div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Suspension Reason *</label>
                        <select id="suspend-reason" required
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500">
                            <option value="">Select a reason...</option>
                            <option value="policy-violation">Policy Violation</option>
                            <option value="security-concern">Security Concern</option>
                            <option value="inactive">Extended Inactivity</option>
                            <option value="misconduct">Misconduct</option>
                            <option value="investigation">Under Investigation</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Additional Details *</label>
                        <textarea id="suspend-details" rows="4" required
                            placeholder="Provide specific details about the suspension..."
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Duration (Optional)</label>
                        <select id="suspend-duration"
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500">
                            <option value="indefinite">Indefinite (until manually reactivated)</option>
                            <option value="7">7 Days</option>
                            <option value="14">14 Days</option>
                            <option value="30">30 Days</option>
                            <option value="90">90 Days</option>
                        </select>
                    </div>
                </div>
                <div class="flex justify-end gap-3 mt-6">
                    <button type="button" onclick="closeSuspendAdminModal()"
                        class="px-6 py-2 border rounded-lg hover:bg-gray-100">
                        Cancel
                    </button>
                    <button type="submit"
                        class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2">
                        <i class="fas fa-ban"></i>
                        Suspend Admin
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Revoke Admin Access Modal -->
    <div id="revoke-admin-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeRevokeAdminModal()"></div>
        <div class="modal-content" style="max-width: 500px;">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-red-600">Revoke Admin Access</h2>
                <button onclick="closeRevokeAdminModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="space-y-4">
                <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                    <div class="flex items-start gap-2">
                        <i class="fas fa-exclamation-circle text-red-600 mt-1"></i>
                        <div>
                            <p class="font-semibold text-red-800">Critical Action: This cannot be undone</p>
                            <p class="text-sm text-red-700 mt-1">This will permanently remove this admin's access. They
                                will need to be re-invited to regain access.</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <div class="flex items-center gap-3">
                        <img id="revoke-admin-avatar" src="" alt="Admin" class="w-12 h-12 rounded-full">
                        <div>
                            <div id="revoke-admin-name" class="font-semibold"></div>
                            <div id="revoke-admin-email" class="text-sm text-gray-600"></div>
                        </div>
                    </div>
                </div>
                <div>
                    <label class="flex items-center gap-2 cursor-pointer">
                        <input type="checkbox" id="revoke-confirm-checkbox" class="rounded">
                        <span class="text-sm">I understand this action is permanent and cannot be undone</span>
                    </label>
                </div>
            </div>
            <div class="flex justify-end gap-3 mt-6">
                <button onclick="closeRevokeAdminModal()" class="px-6 py-2 border rounded-lg hover:bg-gray-100">
                    Cancel
                </button>
                <button onclick="confirmRevokeAdmin()"
                    class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"
                    id="revoke-confirm-btn" disabled>
                    <i class="fas fa-user-times"></i>
                    Permanently Revoke Access
                </button>
            </div>
        </div>
    </div>

    <!-- Edit Email Template Modal - Enhanced -->
    <div id="edit-email-template-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeEditEmailTemplateModal()"></div>
        <div class="modal-content" style="max-width: 900px; max-height: 90vh; overflow-y: auto;">
            <div class="flex justify-between items-center mb-6">
                <div>
                    <h2 class="text-2xl font-bold">Edit Email Template</h2>
                    <p class="text-sm text-gray-500 mt-1">Customize email content with HTML or plain text</p>
                </div>
                <button onclick="closeEditEmailTemplateModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <div class="space-y-4">
                <!-- Template Info -->
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block mb-2 font-semibold">Template Name</label>
                        <input type="text" id="template-name" class="w-full p-2 border rounded-lg bg-gray-50" readonly>
                    </div>
                    <div>
                        <label class="block mb-2 font-semibold">Status</label>
                        <label class="flex items-center gap-2 p-2 border rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="checkbox" id="template-enabled" class="w-4 h-4">
                            <span class="font-medium">Enable this template</span>
                        </label>
                    </div>
                </div>

                <!-- Subject Line -->
                <div>
                    <label class="block mb-2 font-semibold">Subject Line</label>
                    <input type="text" id="template-subject" class="w-full p-2 border rounded-lg"
                        placeholder="Email subject...">
                    <p class="text-xs text-gray-500 mt-1">Tip: Use {{name}} to personalize the subject</p>
                </div>

                <!-- Format Switcher -->
                <div>
                    <label class="block mb-2 font-semibold">Email Format</label>
                    <div class="flex gap-2 mb-3">
                        <button type="button" onclick="switchEmailFormat('html')"
                            id="html-format-btn"
                            class="px-4 py-2 border rounded-lg bg-blue-500 text-white font-medium">
                            <i class="fas fa-code mr-2"></i>HTML
                        </button>
                        <button type="button" onclick="switchEmailFormat('plain')"
                            id="plain-format-btn"
                            class="px-4 py-2 border rounded-lg hover:bg-gray-50">
                            <i class="fas fa-align-left mr-2"></i>Plain Text
                        </button>
                    </div>
                </div>

                <!-- HTML Editor -->
                <div id="html-editor-container">
                    <label class="block mb-2 font-semibold">HTML Content</label>

                    <!-- Toolbar -->
                    <div class="border rounded-t-lg bg-gray-50 p-2 flex gap-2 flex-wrap">
                        <button type="button" onclick="insertEmailTag('{{name}}')"
                            class="px-3 py-1 bg-white border rounded hover:bg-gray-100 text-sm">
                            <i class="fas fa-user mr-1"></i>Name
                        </button>
                        <button type="button" onclick="insertEmailTag('{{email}}')"
                            class="px-3 py-1 bg-white border rounded hover:bg-gray-100 text-sm">
                            <i class="fas fa-envelope mr-1"></i>Email
                        </button>
                        <button type="button" onclick="insertEmailTag('{{link}}')"
                            class="px-3 py-1 bg-white border rounded hover:bg-gray-100 text-sm">
                            <i class="fas fa-link mr-1"></i>Link
                        </button>
                        <button type="button" onclick="insertEmailTag('{{platform_name}}')"
                            class="px-3 py-1 bg-white border rounded hover:bg-gray-100 text-sm">
                            <i class="fas fa-globe mr-1"></i>Platform
                        </button>
                        <button type="button" onclick="insertEmailTag('{{otp_code}}')"
                            class="px-3 py-1 bg-white border rounded hover:bg-gray-100 text-sm">
                            <i class="fas fa-key mr-1"></i>OTP Code
                        </button>
                        <button type="button" onclick="insertEmailTag('{{course_name}}')"
                            class="px-3 py-1 bg-white border rounded hover:bg-gray-100 text-sm">
                            <i class="fas fa-book mr-1"></i>Course
                        </button>
                        <div class="border-l mx-2"></div>
                        <button type="button" onclick="applyEmailTemplate('welcome')"
                            class="px-3 py-1 bg-green-50 border border-green-300 rounded hover:bg-green-100 text-sm">
                            <i class="fas fa-magic mr-1"></i>Load Template
                        </button>
                    </div>

                    <textarea id="template-body" class="w-full p-3 border border-t-0 rounded-b-lg font-mono text-sm"
                        rows="14" placeholder="Enter HTML content..." style="tab-size: 2;"></textarea>

                    <div class="mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm">
                        <div class="font-semibold text-blue-900 mb-2">
                            <i class="fas fa-lightbulb mr-1"></i>Available Variables:
                        </div>
                        <div class="grid grid-cols-2 gap-2 text-blue-800">
                            <div><code class="bg-white px-2 py-1 rounded">{{name}}</code> - User's name</div>
                            <div><code class="bg-white px-2 py-1 rounded">{{email}}</code> - User's email</div>
                            <div><code class="bg-white px-2 py-1 rounded">{{link}}</code> - Action link</div>
                            <div><code class="bg-white px-2 py-1 rounded">{{platform_name}}</code> - Astegni</div>
                            <div><code class="bg-white px-2 py-1 rounded">{{otp_code}}</code> - OTP code</div>
                            <div><code class="bg-white px-2 py-1 rounded">{{course_name}}</code> - Course name</div>
                        </div>
                    </div>
                </div>

                <!-- Plain Text Editor (hidden by default) -->
                <div id="plain-editor-container" class="hidden">
                    <label class="block mb-2 font-semibold">Plain Text Content</label>
                    <textarea id="template-body-plain" class="w-full p-3 border rounded-lg"
                        rows="14" placeholder="Enter plain text content..."></textarea>
                    <p class="text-sm text-gray-500 mt-2">
                        <i class="fas fa-info-circle mr-1"></i>
                        Plain text emails work everywhere but don't support formatting
                    </p>
                </div>

                <!-- Preview Variables -->
                <div>
                    <label class="block mb-2 font-semibold">Test Data for Preview</label>
                    <div class="grid grid-cols-3 gap-3">
                        <input type="text" id="preview-name" class="p-2 border rounded-lg text-sm"
                            placeholder="Name" value="Abebe Kebede">
                        <input type="text" id="preview-email" class="p-2 border rounded-lg text-sm"
                            placeholder="Email" value="abebe@example.com">
                        <input type="text" id="preview-link" class="p-2 border rounded-lg text-sm"
                            placeholder="Link" value="https://astegni.com/verify">
                    </div>
                </div>

                <!-- Statistics (if available) -->
                <div id="template-stats" class="hidden p-4 bg-gray-50 border rounded-lg">
                    <div class="font-semibold mb-3">Template Statistics</div>
                    <div class="grid grid-cols-3 gap-4 text-sm">
                        <div>
                            <div class="text-gray-500">Sent</div>
                            <div class="text-2xl font-bold" id="stat-sent">0</div>
                        </div>
                        <div>
                            <div class="text-gray-500">Opened</div>
                            <div class="text-2xl font-bold" id="stat-opened">0</div>
                        </div>
                        <div>
                            <div class="text-gray-500">Clicked</div>
                            <div class="text-2xl font-bold" id="stat-clicked">0</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Actions -->
            <div class="flex justify-between gap-3 mt-6 pt-6 border-t">
                <div class="flex gap-2">
                    <button onclick="previewEmailTemplate()"
                        class="px-6 py-2 border rounded-lg hover:bg-gray-50 font-medium">
                        <i class="fas fa-eye mr-2"></i>Preview
                    </button>
                    <button onclick="sendTestEmailFromModal()"
                        class="px-6 py-2 border rounded-lg hover:bg-gray-50 font-medium">
                        <i class="fas fa-paper-plane mr-2"></i>Send Test
                    </button>
                </div>
                <div class="flex gap-3">
                    <button onclick="closeEditEmailTemplateModal()"
                        class="px-6 py-2 border rounded-lg hover:bg-gray-50 font-medium">Cancel</button>
                    <button onclick="saveEmailTemplate()"
                        class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 font-medium">
                        <i class="fas fa-save mr-2"></i>Save Template
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add New Email Template Modal -->
    <div id="add-email-template-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeAddEmailTemplateModal()"></div>
        <div class="modal-content" style="max-width: 700px;">
            <div class="flex justify-between items-center mb-6">
                <div>
                    <h2 class="text-2xl font-bold">Create New Email Template</h2>
                    <p class="text-sm text-gray-500 mt-1">Add a new email template to the system</p>
                </div>
                <button onclick="closeAddEmailTemplateModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <form id="add-template-form" onsubmit="handleAddEmailTemplate(event)">
                <div class="space-y-4">
                    <!-- Template Name/Type -->
                    <div>
                        <label class="block mb-2 font-semibold">Template Name *</label>
                        <input type="text" id="new-template-name" class="w-full p-2 border rounded-lg"
                            placeholder="e.g., Welcome Email" required>
                        <p class="text-xs text-gray-500 mt-1">Internal name for this template (e.g., welcome, password-reset, otp)</p>
                    </div>

                    <!-- Template Key -->
                    <div>
                        <label class="block mb-2 font-semibold">Template Key *</label>
                        <input type="text" id="new-template-key" class="w-full p-2 border rounded-lg font-mono text-sm"
                            placeholder="e.g., welcome_email" required pattern="[a-z_]+">
                        <p class="text-xs text-gray-500 mt-1">Unique identifier (lowercase letters and underscores only)</p>
                    </div>

                    <!-- Subject Line -->
                    <div>
                        <label class="block mb-2 font-semibold">Subject Line *</label>
                        <input type="text" id="new-template-subject" class="w-full p-2 border rounded-lg"
                            placeholder="Welcome to {{platform_name}}!" required>
                        <p class="text-xs text-gray-500 mt-1">Email subject (supports variables like {{name}}, {{platform_name}})</p>
                    </div>

                    <!-- Email Body -->
                    <div>
                        <label class="block mb-2 font-semibold">Email Body *</label>
                        <textarea id="new-template-body" class="w-full p-3 border rounded-lg font-mono text-sm"
                            rows="10" placeholder="Hello {{name}},

Welcome to {{platform_name}}! We're excited to have you here.

Best regards,
The Team" required></textarea>
                        <p class="text-xs text-gray-500 mt-1">Email content (HTML supported)</p>
                    </div>

                    <!-- Available Variables Info -->
                    <div class="p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm">
                        <div class="font-semibold text-blue-900 mb-2">
                            <i class="fas fa-lightbulb mr-1"></i>Available Variables:
                        </div>
                        <div class="grid grid-cols-2 gap-2 text-blue-800">
                            <div><code class="bg-white px-2 py-1 rounded">{{name}}</code> - User's name</div>
                            <div><code class="bg-white px-2 py-1 rounded">{{email}}</code> - User's email</div>
                            <div><code class="bg-white px-2 py-1 rounded">{{link}}</code> - Action link</div>
                            <div><code class="bg-white px-2 py-1 rounded">{{platform_name}}</code> - Astegni</div>
                            <div><code class="bg-white px-2 py-1 rounded">{{otp_code}}</code> - OTP code</div>
                            <div><code class="bg-white px-2 py-1 rounded">{{course_name}}</code> - Course name</div>
                        </div>
                    </div>

                    <!-- Enable Template -->
                    <div>
                        <label class="flex items-center gap-2 p-2 border rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="checkbox" id="new-template-enabled" class="w-4 h-4" checked>
                            <span class="font-medium">Enable this template immediately</span>
                        </label>
                    </div>
                </div>

                <!-- Actions -->
                <div class="flex justify-end gap-3 mt-6 pt-6 border-t">
                    <button type="button" onclick="closeAddEmailTemplateModal()"
                        class="px-6 py-2 border rounded-lg hover:bg-gray-50 font-medium">Cancel</button>
                    <button type="submit"
                        class="px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 font-medium">
                        <i class="fas fa-plus mr-2"></i>Create Template
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Integration Modal - Enhanced -->
    <div id="add-integration-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeAddIntegrationModal()"></div>
        <div class="modal-content" style="max-width: 700px;">
            <!-- Header with gradient -->
            <div class="bg-gradient-to-r from-indigo-600 to-purple-600 -m-8 mb-6 p-6 rounded-t-xl">
                <div class="flex justify-between items-center">
                    <div class="flex items-center gap-3">
                        <div class="bg-white bg-opacity-20 p-3 rounded-lg">
                            <i class="fas fa-plug text-white text-2xl"></i>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-white">Add New Integration</h2>
                            <p class="text-white text-opacity-90 text-sm mt-1">Connect third-party services to your
                                platform</p>
                        </div>
                    </div>
                    <button onclick="closeAddIntegrationModal()"
                        class="text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>

            <div class="space-y-5">
                <!-- Integration Type Selection -->
                <div>
                    <label class="block mb-2 font-semibold text-lg">Integration Type</label>
                    <select id="integration-type"
                        class="w-full p-3 border-2 rounded-lg text-base focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition"
                        onchange="updateIntegrationFields()">
                        <option value="">Select integration type...</option>
                        <option value="social">üîê Social Login</option>
                        <option value="email">üìß Email Service</option>
                        <option value="sms">üì± SMS Gateway</option>
                        <option value="analytics">üìä Analytics</option>
                        <option value="payment">üí≥ Payment Gateway</option>
                        <option value="storage">‚òÅÔ∏è Cloud Storage</option>
                    </select>
                </div>

                <!-- Provider Search (for social integrations) -->
                <div id="social-integrations" class="hidden">
                    <label class="block mb-2 font-semibold text-lg">Search Provider</label>
                    <div class="relative">
                        <input type="text" id="provider-search"
                            class="w-full p-3 pl-10 border-2 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition"
                            placeholder="Search for social login provider (e.g., Twitter, Instagram, TikTok)..."
                            oninput="filterProviders(this.value)">
                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    </div>

                    <!-- Provider List -->
                    <div id="provider-list" class="mt-3 max-h-64 overflow-y-auto border-2 rounded-lg bg-white">
                        <div class="divide-y">
                            <!-- Popular Providers -->
                            <div class="provider-item p-3 hover:bg-indigo-50 cursor-pointer transition flex items-center gap-3"
                                onclick="selectProvider('twitter', 'Twitter / X', 'fab fa-twitter')">
                                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                    <i class="fab fa-twitter text-blue-500 text-xl"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold">Twitter / X</div>
                                    <div class="text-xs text-gray-500">Social login via Twitter</div>
                                </div>
                            </div>
                            <div class="provider-item p-3 hover:bg-indigo-50 cursor-pointer transition flex items-center gap-3"
                                onclick="selectProvider('instagram', 'Instagram', 'fab fa-instagram')">
                                <div class="w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center">
                                    <i class="fab fa-instagram text-pink-500 text-xl"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold">Instagram</div>
                                    <div class="text-xs text-gray-500">Social login via Instagram</div>
                                </div>
                            </div>
                            <div class="provider-item p-3 hover:bg-indigo-50 cursor-pointer transition flex items-center gap-3"
                                onclick="selectProvider('tiktok', 'TikTok', 'fab fa-tiktok')">
                                <div class="w-10 h-10 bg-black rounded-full flex items-center justify-center">
                                    <i class="fab fa-tiktok text-white text-xl"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold">TikTok</div>
                                    <div class="text-xs text-gray-500">Social login via TikTok</div>
                                </div>
                            </div>
                            <div class="provider-item p-3 hover:bg-indigo-50 cursor-pointer transition flex items-center gap-3"
                                onclick="selectProvider('github', 'GitHub', 'fab fa-github')">
                                <div class="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center">
                                    <i class="fab fa-github text-white text-xl"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold">GitHub</div>
                                    <div class="text-xs text-gray-500">Developer login via GitHub</div>
                                </div>
                            </div>
                            <div class="provider-item p-3 hover:bg-indigo-50 cursor-pointer transition flex items-center gap-3"
                                onclick="selectProvider('linkedin', 'LinkedIn', 'fab fa-linkedin')">
                                <div class="w-10 h-10 bg-blue-700 rounded-full flex items-center justify-center">
                                    <i class="fab fa-linkedin text-white text-xl"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold">LinkedIn</div>
                                    <div class="text-xs text-gray-500">Professional login via LinkedIn</div>
                                </div>
                            </div>
                            <div class="provider-item p-3 hover:bg-indigo-50 cursor-pointer transition flex items-center gap-3"
                                onclick="selectProvider('microsoft', 'Microsoft', 'fab fa-microsoft')">
                                <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center">
                                    <i class="fab fa-microsoft text-white text-xl"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold">Microsoft</div>
                                    <div class="text-xs text-gray-500">Microsoft account login</div>
                                </div>
                            </div>
                            <div class="provider-item p-3 hover:bg-indigo-50 cursor-pointer transition flex items-center gap-3"
                                onclick="selectProvider('apple', 'Apple', 'fab fa-apple')">
                                <div class="w-10 h-10 bg-black rounded-full flex items-center justify-center">
                                    <i class="fab fa-apple text-white text-xl"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold">Apple</div>
                                    <div class="text-xs text-gray-500">Sign in with Apple</div>
                                </div>
                            </div>
                            <div class="provider-item p-3 hover:bg-indigo-50 cursor-pointer transition flex items-center gap-3"
                                onclick="selectProvider('discord', 'Discord', 'fab fa-discord')">
                                <div class="w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center">
                                    <i class="fab fa-discord text-white text-xl"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold">Discord</div>
                                    <div class="text-xs text-gray-500">Discord community login</div>
                                </div>
                            </div>
                            <div class="provider-item p-3 hover:bg-indigo-50 cursor-pointer transition flex items-center gap-3"
                                onclick="selectProvider('reddit', 'Reddit', 'fab fa-reddit')">
                                <div class="w-10 h-10 bg-orange-600 rounded-full flex items-center justify-center">
                                    <i class="fab fa-reddit text-white text-xl"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold">Reddit</div>
                                    <div class="text-xs text-gray-500">Reddit account login</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Selected Provider Display -->
                <div id="selected-provider"
                    class="hidden bg-gradient-to-r from-indigo-50 to-purple-50 p-4 rounded-lg border-2 border-indigo-200">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <i id="selected-provider-icon" class="text-3xl"></i>
                            <div>
                                <div class="text-sm text-gray-600">Selected Provider:</div>
                                <div id="selected-provider-name" class="font-bold text-lg"></div>
                            </div>
                        </div>
                        <button onclick="clearProviderSelection()"
                            class="text-red-500 hover:bg-red-100 p-2 rounded-lg transition">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <!-- Integration Configuration Fields -->
                <div id="integration-fields" class="space-y-4 hidden">
                    <div class="bg-gray-50 p-4 rounded-lg border">
                        <h3 class="font-semibold mb-3 flex items-center gap-2">
                            <i class="fas fa-cog text-indigo-600"></i>
                            Configuration Details
                        </h3>
                        <div class="space-y-3">
                            <div>
                                <label class="block mb-2 font-semibold text-sm">Integration Name</label>
                                <input type="text" id="integration-name" class="w-full p-2 border rounded-lg"
                                    placeholder="e.g., Twitter Login">
                            </div>
                            <div>
                                <label class="block mb-2 font-semibold text-sm">Client ID / API Key</label>
                                <input type="text" id="integration-client-id" class="w-full p-2 border rounded-lg"
                                    placeholder="Enter client ID or API key">
                            </div>
                            <div>
                                <label class="block mb-2 font-semibold text-sm">Client Secret / API Secret</label>
                                <div class="relative">
                                    <input type="password" id="integration-client-secret"
                                        class="w-full p-2 pr-10 border rounded-lg" placeholder="Enter client secret">
                                    <button type="button" onclick="toggleSecretVisibility()"
                                        class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">
                                        <i class="fas fa-eye" id="secret-eye-icon"></i>
                                    </button>
                                </div>
                            </div>
                            <div>
                                <label class="block mb-2 font-semibold text-sm">Callback URL</label>
                                <input type="text" id="integration-callback" class="w-full p-2 border rounded-lg"
                                    placeholder="https://astegni.com/auth/callback">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Info Banner -->
                <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                    <div class="flex items-start gap-2">
                        <i class="fas fa-info-circle text-blue-600 mt-1"></i>
                        <div class="flex-1 text-sm text-gray-700">
                            <p class="font-semibold mb-1">Setup Instructions:</p>
                            <ul class="list-disc list-inside space-y-1">
                                <li>Configure the integration in your provider's developer dashboard first</li>
                                <li>Obtain the necessary API credentials (Client ID and Secret)</li>
                                <li>Add the callback URL to your provider's allowed redirect URIs</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex justify-end gap-3 mt-6 pt-6 border-t">
                <button onclick="closeAddIntegrationModal()"
                    class="px-6 py-2 border-2 rounded-lg hover:bg-gray-50 transition">
                    Cancel
                </button>
                <button onclick="saveIntegration()"
                    class="px-6 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition shadow-lg">
                    <i class="fas fa-plug mr-2"></i>Add Integration
                </button>
            </div>
        </div>
    </div>

    <!-- Campaign Package Modal (Add/Edit) -->
    <div id="campaign-package-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeCampaignPackageModal()"></div>
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2 class="text-xl font-bold" id="campaign-modal-title">
                    <i class="fas fa-bullhorn mr-2"></i>Add Campaign Package
                </h2>
                <button class="modal-close" onclick="closeCampaignPackageModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="campaign-package-form" onsubmit="saveCampaignPackage(event)">
                    <!-- Hidden ID for editing -->
                    <input type="hidden" id="campaign-package-id" placeholder="">

                    <!-- Package Name -->
                    <div class="mb-4">
                        <label class="block text-sm font-semibold mb-2">Package Name *</label>
                        <input type="text" id="campaign-package-name" class="w-full px-3 py-2 border rounded-lg"
                            placeholder="e.g., Up to 3 Days" required>
                        <p class="text-xs text-gray-500 mt-1">Display name for this package</p>
                    </div>

                    <!-- Duration (Days) -->
                    <div class="mb-4">
                        <label class="block text-sm font-semibold mb-2">Maximum Duration (Days) *</label>
                        <input type="number" id="campaign-package-days" class="w-full px-3 py-2 border rounded-lg"
                            placeholder="e.g., 3" min="1" required>
                        <p class="text-xs text-gray-500 mt-1">Maximum number of days for this package</p>
                    </div>

                    <!-- Price per Day -->
                    <div class="mb-4">
                        <label class="block text-sm font-semibold mb-2">Price per Day (ETB) *</label>
                        <input type="number" id="campaign-package-price" class="w-full px-3 py-2 border rounded-lg"
                            placeholder="e.g., 2000" min="0" step="50" required>
                        <p class="text-xs text-gray-500 mt-1">Cost per day in Ethiopian Birr</p>
                    </div>

                    <!-- Set as Base Package -->
                    <div class="mb-4">
                        <label class="flex items-center gap-2">
                            <input type="checkbox" id="campaign-is-base" class="w-4 h-4">
                            <span class="text-sm font-semibold">Set as Base Package (for discount calculations)</span>
                        </label>
                        <p class="text-xs text-gray-500 mt-1">Other packages will show discount % compared to this base
                            price</p>
                    </div>

                    <!-- Package Popularity Labels -->
                    <div class="mb-4">
                        <label class="block text-sm font-semibold mb-2">Package Label</label>
                        <div class="space-y-2">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="radio" name="campaign-package-label" value="none" class="w-4 h-4" checked>
                                <span class="text-sm">No Label</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer p-2 border rounded-lg hover:bg-blue-50 transition">
                                <input type="radio" name="campaign-package-label" value="popular" class="w-4 h-4">
                                <span class="flex items-center gap-2">
                                    <span class="px-2 py-0.5 bg-blue-500 text-white text-xs font-bold rounded">POPULAR</span>
                                    <span class="text-sm">Mark as Popular</span>
                                </span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer p-2 border rounded-lg hover:bg-orange-50 transition">
                                <input type="radio" name="campaign-package-label" value="most-popular" class="w-4 h-4">
                                <span class="flex items-center gap-2">
                                    <span class="px-2 py-0.5 bg-gradient-to-r from-orange-500 to-red-500 text-white text-xs font-bold rounded">MOST POPULAR</span>
                                    <span class="text-sm">Mark as Most Popular</span>
                                </span>
                            </label>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">Labels help highlight recommended packages to advertisers</p>
                    </div>

                    <!-- Description -->
                    <div class="mb-4">
                        <label class="block text-sm font-semibold mb-2">Description</label>
                        <input type="text" id="campaign-package-description" class="w-full px-3 py-2 border rounded-lg"
                            placeholder="e.g., Short-term campaigns">
                        <p class="text-xs text-gray-500 mt-1">Brief description of this package</p>
                    </div>

                    <!-- Package Includes -->
                    <div class="mb-6">
                        <div class="flex items-center justify-between mb-2">
                            <label class="block text-sm font-semibold">Package Includes</label>
                            <button type="button" onclick="addPackageInclude()"
                                class="flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition">
                                <i class="fas fa-plus"></i>
                                <span>Add Feature</span>
                            </button>
                        </div>
                        <p class="text-xs text-gray-500 mb-3">What features are included in this package (e.g., Unlimited Impressions, Priority Placement, etc.)</p>

                        <!-- Container for dynamic include items -->
                        <div id="package-includes-container" class="space-y-2">
                            <!-- Dynamic include items will be added here -->
                        </div>

                        <!-- Empty state message -->
                        <div id="includes-empty-state" class="text-center py-4 text-gray-400 text-sm border-2 border-dashed rounded-lg">
                            <i class="fas fa-list-ul mb-2"></i>
                            <p>No features added yet. Click "Add Feature" to start.</p>
                        </div>
                    </div>

                    <!-- Submit Buttons -->
                    <div class="flex justify-end gap-3">
                        <button type="button" onclick="closeCampaignPackageModal()"
                            class="px-6 py-2 border rounded-lg hover:bg-gray-50">
                            Cancel
                        </button>
                        <button type="submit" class="px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700">
                            <i class="fas fa-save mr-2"></i>Save Package
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Payment Gateway Modal -->
    <div id="payment-gateway-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closePaymentGatewayModal()"></div>
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2 class="text-xl font-bold">
                    <i class="fas fa-credit-card mr-2"></i>Add Payment Gateway
                </h2>
                <button class="modal-close" onclick="closePaymentGatewayModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="payment-gateway-form" onsubmit="savePaymentGateway(event)">
                    <!-- Gateway Name -->
                    <div class="mb-4">
                        <label class="block text-sm font-semibold mb-2">Gateway Name *</label>
                        <input type="text" id="gateway-name" class="w-full px-3 py-2 border rounded-lg"
                            placeholder="e.g., Bank of Abyssinia, Awash Bank" required>
                        <p class="text-xs text-gray-500 mt-1">Name of the payment gateway or bank</p>
                    </div>

                    <!-- Account/Merchant ID -->
                    <div class="mb-4">
                        <label class="block text-sm font-semibold mb-2">Account/Merchant ID</label>
                        <input type="text" id="gateway-merchant-id" class="w-full px-3 py-2 border rounded-lg"
                            placeholder="Enter merchant or account ID">
                        <p class="text-xs text-gray-500 mt-1">Your merchant or account identifier</p>
                    </div>

                    <!-- API Key/Secret -->
                    <div class="mb-4">
                        <label class="block text-sm font-semibold mb-2">API Key/Secret</label>
                        <input type="password" id="gateway-api-key" class="w-full px-3 py-2 border rounded-lg"
                            placeholder="Enter API key or secret">
                        <p class="text-xs text-gray-500 mt-1">API key or secret key for authentication</p>
                    </div>

                    <!-- Additional Info (Optional) -->
                    <div class="mb-4">
                        <label class="block text-sm font-semibold mb-2">Additional Information</label>
                        <textarea id="gateway-additional-info" class="w-full px-3 py-2 border rounded-lg" rows="3"
                            placeholder="Any additional configuration details..."></textarea>
                        <p class="text-xs text-gray-500 mt-1">Optional notes or configuration details</p>
                    </div>

                    <!-- Enable Gateway -->
                    <div class="mb-4">
                        <label class="flex items-center gap-2">
                            <input type="checkbox" id="gateway-enabled" class="w-4 h-4" checked>
                            <span class="text-sm font-semibold">Enable this gateway</span>
                        </label>
                    </div>

                    <!-- Submit Buttons -->
                    <div class="flex justify-end gap-3">
                        <button type="button" onclick="closePaymentGatewayModal()"
                            class="px-6 py-2 border rounded-lg hover:bg-gray-50">
                            Cancel
                        </button>
                        <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                            <i class="fas fa-save mr-2"></i>Add Gateway
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add/Edit Email Account Modal -->
    <div id="email-form-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeEmailForm()"></div>
        <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
            <div class="modal-header">
                <h2 class="text-xl font-bold" id="email-form-title">
                    <i class="fas fa-envelope mr-2 text-blue-600"></i>Add Email Account
                </h2>
                <button class="modal-close" onclick="closeEmailForm()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="emailConfigForm" onsubmit="handleEmailConfigSubmit(event)">
                    <!-- Account Information -->
                    <div class="mb-4">
                        <h3 class="text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2">
                            <i class="fas fa-user-circle text-blue-500"></i>
                            Account Information
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block mb-2 font-semibold text-sm">Account Name</label>
                                <input type="text" id="email-account-name" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="Primary Email Account">
                                <p class="text-xs text-gray-500 mt-1">Friendly name for this email account</p>
                            </div>
                            <div>
                                <label class="block mb-2 font-semibold text-sm">Provider</label>
                                <select id="email-provider" onchange="autoFillProviderSettings()" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="custom">Custom SMTP</option>
                                    <option value="gmail">Gmail / Google Workspace</option>
                                    <option value="outlook">Outlook / Office365</option>
                                    <option value="sendgrid">SendGrid</option>
                                    <option value="mailgun">Mailgun</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- SMTP Configuration -->
                    <div class="mb-4">
                        <h3 class="text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2">
                            <i class="fas fa-server text-blue-500"></i>
                            SMTP Configuration
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block mb-2 font-semibold text-sm">SMTP Host *</label>
                                <input type="text" id="smtp-host" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="smtp.gmail.com" required>
                            </div>
                            <div>
                                <label class="block mb-2 font-semibold text-sm">SMTP Port *</label>
                                <input type="number" id="smtp-port" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="587" value="587" required>
                            </div>
                            <div>
                                <label class="block mb-2 font-semibold text-sm">SMTP Username *</label>
                                <input type="text" id="smtp-username" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="your-email@gmail.com" required>
                            </div>
                            <div>
                                <label class="block mb-2 font-semibold text-sm">SMTP Password *</label>
                                <input type="password" id="smtp-password" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                                <p class="text-xs text-gray-500 mt-1">App Password for Gmail/Google Workspace</p>
                            </div>
                            <div>
                                <label class="block mb-2 font-semibold text-sm">SMTP Encryption</label>
                                <select id="smtp-encryption" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="TLS">TLS (Port 587)</option>
                                    <option value="SSL">SSL (Port 465)</option>
                                    <option value="NONE">None</option>
                                </select>
                            </div>
                            <div>
                                <label class="block mb-2 font-semibold text-sm">Daily Email Limit</label>
                                <input type="number" id="daily-limit" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="2000" value="1000">
                            </div>
                        </div>
                    </div>

                    <!-- Sender Information -->
                    <div class="mb-4">
                        <h3 class="text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2">
                            <i class="fas fa-paper-plane text-blue-500"></i>
                            Sender Information
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block mb-2 font-semibold text-sm">From Email *</label>
                                <input type="email" id="from-email" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="noreplay@astegni.com" required>
                            </div>
                            <div>
                                <label class="block mb-2 font-semibold text-sm">From Name</label>
                                <input type="text" id="from-name" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="Astegni Educational Platform">
                            </div>
                        </div>
                    </div>

                    <!-- Info Banner -->
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-info-circle text-blue-500 text-lg mt-0.5"></i>
                            <div>
                                <h4 class="font-semibold text-sm text-gray-800 mb-2">Configuration Tips</h4>
                                <ul class="text-xs text-gray-600 space-y-1">
                                    <li>‚Ä¢ For Gmail, use an App Password instead of your regular password</li>
                                    <li>‚Ä¢ Default ports: TLS uses 587, SSL uses 465</li>
                                    <li>‚Ä¢ Test your configuration after saving to ensure it works</li>
                                    <li>‚Ä¢ Keep your daily limit reasonable to avoid being flagged as spam</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn-secondary px-4 py-2 border rounded-lg hover:bg-gray-100"
                            onclick="closeEmailForm()">Cancel</button>
                        <button type="button" onclick="testEmailConfig(event)" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors">
                            <i class="fas fa-paper-plane mr-2"></i>Test Configuration
                        </button>
                        <button type="submit"
                            class="btn-primary px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                            <i class="fas fa-save mr-2"></i>Save Email Account
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Churn Others Details Modal -->
    <div id="churn-others-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeChurnOthersModal()"></div>
        <div class="modal-content" style="max-width: 700px;">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">User Churn - Other Reasons</h2>
                <button onclick="closeChurnOthersModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <div class="mb-6">
                <div class="bg-gradient-to-r from-yellow-50 to-orange-50 p-4 rounded-lg border border-yellow-200">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-chart-pie text-yellow-600 text-2xl"></i>
                        <div>
                            <p class="font-bold text-lg">15% of users</p>
                            <p class="text-sm text-gray-600">Left for other reasons (78 users this period)</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="space-y-4">
                <h3 class="font-bold text-lg mb-3">Detailed Breakdown</h3>

                <div class="border rounded-lg p-4 hover:bg-gray-50">
                    <div class="flex justify-between items-center mb-2">
                        <div class="font-semibold">Found better alternative</div>
                        <span class="px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-semibold">28 users
                            (5.4%)</span>
                    </div>
                    <p class="text-sm text-gray-600">Users mentioned switching to competitor platforms</p>
                </div>

                <div class="border rounded-lg p-4 hover:bg-gray-50">
                    <div class="flex justify-between items-center mb-2">
                        <div class="font-semibold">Not using platform enough</div>
                        <span class="px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm font-semibold">22
                            users (4.2%)</span>
                    </div>
                    <p class="text-sm text-gray-600">Low engagement, subscription not worth the cost</p>
                </div>

                <div class="border rounded-lg p-4 hover:bg-gray-50">
                    <div class="flex justify-between items-center mb-2">
                        <div class="font-semibold">Life circumstances changed</div>
                        <span class="px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm font-semibold">15
                            users (2.9%)</span>
                    </div>
                    <p class="text-sm text-gray-600">Job changes, relocation, education completed</p>
                </div>

                <div class="border rounded-lg p-4 hover:bg-gray-50">
                    <div class="flex justify-between items-center mb-2">
                        <div class="font-semibold">Privacy concerns</div>
                        <span class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-semibold">8 users
                            (1.5%)</span>
                    </div>
                    <p class="text-sm text-gray-600">Data handling and privacy policy concerns</p>
                </div>

                <div class="border rounded-lg p-4 hover:bg-gray-50">
                    <div class="flex justify-between items-center mb-2">
                        <div class="font-semibold">No reason provided</div>
                        <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm font-semibold">5 users
                            (1.0%)</span>
                    </div>
                    <p class="text-sm text-gray-600">Users canceled without providing feedback</p>
                </div>
            </div>

            <div class="bg-blue-50 p-4 rounded-lg mt-6">
                <h4 class="font-semibold mb-2 flex items-center gap-2">
                    <i class="fas fa-lightbulb text-blue-600"></i>
                    Recommended Actions
                </h4>
                <ul class="text-sm text-gray-600 space-y-1 ml-6">
                    <li>‚Ä¢ Implement exit survey to gather more specific feedback</li>
                    <li>‚Ä¢ Create win-back campaigns for users who left for competitors</li>
                    <li>‚Ä¢ Offer flexible subscription options for low-engagement users</li>
                    <li>‚Ä¢ Enhance privacy documentation and transparency</li>
                </ul>
            </div>

            <div class="flex justify-end gap-3 mt-6 pt-6 border-t">
                <button onclick="exportChurnData()" class="px-6 py-2 border rounded-lg hover:bg-gray-50">
                    <i class="fas fa-download mr-2"></i>Export Data
                </button>
                <button onclick="closeChurnOthersModal()"
                    class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Close</button>
            </div>
        </div>
    </div>

    <!-- FAB (Floating Action Button) -->
    <div class="fab-container" id="fabContainer">
        <button class="fab" id="fabButton" aria-label="Quick Actions Menu">
            <span class="fab-icon">‚ö°</span>
        </button>
        <div class="fab-menu" id="fabMenu">
            <button class="fab-option" onclick="restartServices()" aria-label="Restart Services">
                <span>üîÑ</span>
                <span>Restart Services</span>
            </button>
            <button class="fab-option" onclick="clearCache()" aria-label="Clear Cache">
                <span>üßπ</span>
                <span>Clear Cache</span>
            </button>
            <button class="fab-option" onclick="generateReport()" aria-label="Generate Report">
                <span>üìä</span>
                <span>Generate Report</span>
            </button>
            <button class="fab-option" onclick="securityScan()" aria-label="Security Scan">
                <span>üõ°Ô∏è</span>
                <span>Security Scan</span>
            </button>
        </div>
    </div>

    <!-- FAB JavaScript -->
    <script>
        // FAB Toggle Functionality
        const fabContainer = document.getElementById('fabContainer');
        const fabButton = document.getElementById('fabButton');
        const fabMenu = document.getElementById('fabMenu');

        fabButton.addEventListener('click', (e) => {
            e.stopPropagation();
            fabContainer.classList.toggle('active');
            fabButton.classList.toggle('active');
        });

        // Close FAB menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!fabContainer.contains(e.target)) {
                fabContainer.classList.remove('active');
                fabButton.classList.remove('active');
            }
        });

        // Close FAB menu after selecting an option
        document.querySelectorAll('.fab-option').forEach(option => {
            option.addEventListener('click', () => {
                fabContainer.classList.remove('active');
                fabButton.classList.remove('active');
            });
        });

        // FAB Action Functions
        function restartServices() {
            alert('Restarting services... This may take a few moments.');
            // Add actual restart service logic here
            console.log('Restart Services clicked');
        }

        function clearCache() {
            if (confirm('Are you sure you want to clear all cache?')) {
                alert('Cache cleared successfully!');
                // Add actual cache clearing logic here
                console.log('Clear Cache clicked');
            }
        }

        function generateReport() {
            alert('Generating system report...');
            // Add actual report generation logic here
            console.log('Generate Report clicked');
        }

        function securityScan() {
            alert('Starting security scan... You will be notified when complete.');
            // Add actual security scan logic here
            console.log('Security Scan clicked');
        }
    </script>

    <!-- Reports Modal JavaScript -->
    <script src="../js/admin-pages/system-modals.js"></script>
    <script src="../js/admin-pages/pricing-functions.js"></script>
    <!-- REMOVED: campaign-pricing-manager.js - merged into pricing-features-manager.js -->
    <script src="../js/admin-pages/manage-reviews.js"></script>
    <script src="../js/admin-pages/system-settings-enhancements.js?v=3"></script>
    <script src="../js/admin-pages/system-settings-fixes.js"></script>

</body>

</html>