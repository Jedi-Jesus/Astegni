# Admin Invite - Quick Start Guide

## What Changed

The "Invite New Administrator" modal has been updated:

### Removed:
- ‚ùå Username field
- ‚ùå Access Permissions checkboxes

### Changed:
- üîÑ "Role" ‚Üí "Department" (dropdown with 7 options)

### Added:
- ‚úÖ "Position" field (free text input)

## Department Options

1. **Manage Tutors** - Handles tutor verification, profiles, courses
2. **Manage Courses** - Oversees course creation and approval
3. **Manage Campaigns** - Manages advertising campaigns
4. **Manage Schools** - Administers school partnerships
5. **Manage Customers** - Customer support and relations
6. **Manage System Settings** - System configuration and settings
7. **Manage Contents** - Content moderation and management

## How to Test

### Step 1: Start Backend (if not running)

```bash
cd astegni-backend
python app.py
```

### Step 2: Open Admin Page

Navigate to: `http://localhost:8080/admin-pages/manage-system-settings.html`

### Step 3: Invite an Admin

1. Switch to "**Manage Admins**" panel (left sidebar)
2. Click "**Invite Administrator**" button
3. Fill in the form:
   - **First Name**: Abebe
   - **Father's Name**: Kebede
   - **Grandfather's Name**: Tesfa *(optional)*
   - **Email**: abebe.kebede@astegni.et
   - **Phone**: +251911234567 *(optional)*
   - **Department**: Select "Manage Tutors"
   - **Position**: Manager
   - **Welcome Message**: Welcome to Astegni! *(optional)*
4. Click "**Send Invitation**"

### Step 4: Verify

After submitting, you should see:
- Success alert with admin details
- Employee ID auto-generated (e.g., `ASTEG-TUTO-0001`)
- Admin appears in the list

## API Endpoint

**POST** `/api/admin/invite`

**Request Body:**
```json
{
  "first_name": "Abebe",
  "father_name": "Kebede",
  "grandfather_name": "Tesfa",
  "email": "abebe.kebede@astegni.et",
  "phone_number": "+251911234567",
  "department": "manage-tutors",
  "position": "Manager",
  "welcome_message": "Welcome to Astegni!"
}
```

**Response:**
```json
{
  "success": true,
  "message": "Admin invited successfully",
  "admin_id": 2,
  "employee_id": "ASTEG-TUTO-0001",
  "temp_password": "TempPass123!",
  "email": "abebe.kebede@astegni.et"
}
```

## Database Structure

The `admin_profile` table already has the correct structure:

```sql
CREATE TABLE admin_profile (
    id SERIAL PRIMARY KEY,
    first_name VARCHAR(100),
    father_name VARCHAR(100),
    grandfather_name VARCHAR(100),
    email VARCHAR(255),
    phone_number VARCHAR(20),
    department VARCHAR(100),
    position VARCHAR(100),
    password_hash VARCHAR(255),
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    -- ... other fields
);
```

## No Migration Needed!

‚úÖ The table structure is already correct
‚úÖ All required columns exist
‚úÖ No database migration required
‚úÖ Ready to use immediately

## Files Modified

1. **Frontend:**
   - `admin-pages/manage-system-settings.html` - Modal HTML
   - `js/admin-pages/manage-system-settings.js` - Form handling

2. **Backend:**
   - `astegni-backend/admin_management_endpoints.py` - API endpoints

## Testing Checklist

- [ ] Open manage-system-settings.html
- [ ] Click "Invite Administrator" button
- [ ] Fill form with Ethiopian name (3 parts)
- [ ] Select a department from dropdown
- [ ] Enter a position
- [ ] Submit form
- [ ] Verify success message shows
- [ ] Check employee_id is auto-generated
- [ ] Verify admin appears in admin list

## Common Issues

### Issue: Email already exists
**Solution:** Use a unique email address for each admin

### Issue: Department dropdown empty
**Solution:** Refresh the page, the options should be hardcoded

### Issue: Employee ID not showing
**Solution:** It's auto-generated by the backend, check the response

## Position Examples

Common positions you can enter:
- Manager
- Coordinator
- Specialist
- Lead
- Administrator
- Supervisor
- Director

The position field is free-text, allowing flexibility for your organization's structure.

## Next Steps

After inviting an admin:
1. The admin receives an invitation email (when email service is configured)
2. They use the temporary password to log in
3. They're prompted to change their password
4. They can access their assigned department

## Support

If you encounter issues:
1. Check backend console for errors
2. Verify backend is running on port 8000
3. Check browser console for JavaScript errors
4. Ensure database connection is working
