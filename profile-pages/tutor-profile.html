<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>ASTEGNI - Tutor Profile</title>
    <!-- TailwindCSS CDN -->
    <script src="js/config.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Animate.css for animations -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <!-- Custom Styles -->
    <link rel="stylesheet" href="../css/root.css">
    <!-- Tutor Profile Specific Right Widgets -->
    <link rel="stylesheet" href="../css/tutor-profile/right-widgets.css">
    <link rel="stylesheet" href="../css/tutor-profile/tutor-profile.css">
    <link rel="stylesheet" href="../css/view-tutor/view-tutor.css">
    <link rel="stylesheet" href="../css/tutor-profile/package-modal-enhanced.css">
    <link rel="stylesheet" href="../css/tutor-profile/whiteboard-modal-enhanced.css">
    <link rel="stylesheet" href="../css/tutor-profile/whiteboard-modal-fixes.css">
    <!-- Quiz Modal Styles -->
    <link rel="stylesheet" href="../css/tutor-profile/coursework-modal.css">
    <!-- Community Modal Styles -->
    <link rel="stylesheet" href="../css/tutor-profile/community-modal.css">
    <!-- Reviews Panel Styles -->
    <link rel="stylesheet" href="../css/tutor-profile/reviews-panel.css">
    <!-- Credentials Panel Styles -->
    <link rel="stylesheet" href="../css/tutor-profile/credentials-panel.css">
    <!-- Quill.js Rich Text Editor -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/find-tutors/hero-section.css">
    <!-- Shared Modal Styles -->
    <link rel="stylesheet" href="../css/common-modals/add-role-modal.css">
    <link rel="stylesheet" href="../css/common-modals/coming-soon-modal.css">
    <link rel="stylesheet" href="../css/common-modals/ad-modal.css">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="../css/root/testimonials-widget.css">
    <!-- Finance/Settings Modal Styles -->
    <link rel="stylesheet" href="../css/plug-ins/finance.css">
    <!-- Chat Modal Styles -->
    <link rel="stylesheet" href="../css/common-modals/chat-modal.css">
    <link rel="stylesheet" href="../css/common-modals/view-request-modal.css">
    <!-- Package Modal Fix - MUST be loaded LAST to override all conflicts -->
    <link rel="stylesheet" href="../css/tutor-profile/package-modal-fix.css">
    <!-- Market Trend Styles -->
    <link rel="stylesheet" href="../css/tutor-profile/market-trend-styles.css">

    <!-- Minimal inline styles - only for profile-specific fixes -->
    <link rel="stylesheet" href="../css/tutor-profile/profile-specific-fix.css">

    <!-- Chart.js for Market Trends -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    
    <!-- Debug Script for Rating Tooltip -->
    <script src="../js/tutor-profile/debug-rating-tooltip.js"></script>
</head>

<body class="font-sans">

    <!-- Navigation -->
    <nav class="navbar" role="navigation" aria-label="Main navigation">
        <div class="nav-container" style="max-width: 100%; padding: 0 1rem;">
            <div class="nav-brand">
                <button class="sidebar-toggle" id="hamburger" aria-label="Toggle sidebar">
                    <span class="hamburger">
                        <span></span>
                        <span></span>
                        <span></span>
                    </span>
                </button>
                <a href="../profile-pages/tutor-profile.html" class="logo-container">
                    <div class="logo-text">
                        <span class="logo-main">Astegni</span>
                        <span class="logo-sub">Tutor Profile</span>
                    </div>
                    <span class="logo-badge">Beta</span>
                </a>
            </div>

            <!-- Right Section: Nav Menu + Actions -->
            <div class="nav-actions" style="display: flex; align-items: center; gap: 0.5rem; margin-right: 0;">
                <!-- Navigation Links -->
                <div class="nav-items" style="display: flex; gap: 0.25rem;">
                    <a class="nav-link" href="../index.html">
                        <span class="nav-icon">üè†</span> Home
                    </a>
                    <a class="nav-link" href="../branch/find-tutors.html">
                        <span class="nav-icon">üë®‚Äçüè´</span> Find Tutors
                    </a>
                    <a class="nav-link" href="#" onclick="handleNavLinkClick(event, 'news')">
                        <span class="nav-icon">üì∞</span> News
                    </a>
                    <a class="nav-link" href="../branch/reels.html">
                        <span class="nav-icon">üé¨</span> Reels
                    </a>
                    <a class="nav-link" href="#" onclick="handleNavLinkClick(event, 'store')">
                        <span class="nav-icon">üìö</span> Bookstore
                    </a>
                    <a class="nav-link" href="#" onclick="handleNavLinkClick(event, 'find-jobs')">
                        <span class="nav-icon">üíº</span> Find a Job
                    </a>
                </div>
                <!-- Profile container -->
                <div id="profile-container" class="profile-dropdown-container">
                    <button id="profile-dropdown-toggle" class="profile-dropdown-toggle"
                        onclick="toggleProfileDropdown()">
                        <img id="profile-pic" class="profile-pic" alt="Profile">
                        <span id="profile-name" class="profile-name"></span>
                        <svg class="dropdown-arrow" width="12" height="12" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd"
                                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                clip-rule="evenodd"></path>
                        </svg>
                    </button>

                    <div id="profile-dropdown-menu" class="profile-dropdown-menu">
                        <!-- User info header - CLICKABLE to go to profile page -->
                        <a href="#" id="dropdown-profile-link" class="dropdown-header-link">
                            <div class="dropdown-header">
                                <img id="dropdown-profile-pic" class="profile-pic" alt="Profile">
                                <div class="dropdown-user-info">
                                    <span id="dropdown-user-name" class="dropdown-user-name"></span>
                                    <span id="dropdown-user-email" class="dropdown-user-email"></span>
                                    <span id="dropdown-user-role" class="dropdown-user-role"></span>
                                </div>
                                <svg class="dropdown-header-arrow" width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                                </svg>
                            </div>
                        </a>

                        <div class="dropdown-divider"></div>

                        <!-- Role switcher (shown only if user has multiple roles) -->
                        <div id="role-switcher-section" class="role-switcher-section hidden">
                            <div class="dropdown-item-header">Switch Role</div>
                            <div id="role-options" class="role-options">
                                <!-- Role options will be dynamically added here -->
                            </div>
                            <div class="dropdown-divider"></div>
                        </div>

                        <div class="dropdown-divider"></div>

                        <button class="dropdown-item logout-item" onclick="showLogoutModal()">
                            <svg class="dropdown-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1">
                                </path>
                            </svg>
                            Logout
                        </button>
                    </div>
                </div>


                <!-- Notification Icon -->
                <button class="icon-btn" aria-label="Notifications">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9">
                        </path>
                    </svg>
                    <span class="notification-badge">3</span>
                </button>

                <!-- Theme Toggle -->
                <button id="theme-toggle-btn" class="icon-btn" aria-label="Toggle theme">
                    <svg id="theme-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z">
                        </path>
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <!-- Top Advertisement Placeholder -->
    <div class="ad-container premium-ad" style="margin-top: 2rem;" onclick="openAdAnalyticsModal()">
        <div class="ad-animation">
            <div class="pulse-ring"></div>
            <div class="pulse-ring"></div>
        </div>
        <div class="ad-content">
            <span class="ad-label">Advertisement</span>
            <h3 class="ad-title">Boost Your Reach Today</h3>
            <p class="ad-text">Premium placement available</p>
            <button class="ad-cta" onclick="openAdAnalyticsModal()">Learn More</button>
        </div>
        <div class="ad-visual">
            <div class="ad-circles">
                <div class="circle circle-1"></div>
                <div class="circle circle-2"></div>
                <div class="circle circle-3"></div>
            </div>
        </div>
    </div>


    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar-container">
        <div class="sidebar-content">
            <div class="sidebar-nav">
                <h3>Tutor Dashboard</h3>

                <a href="#" onclick="switchPanel('dashboard'); return false;" class="sidebar-link active">
                    <span class="sidebar-icon">üè†</span>
                    <span>Dashboard</span>
                </a>
                <a href="#" onclick="switchPanel('credentials'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üìÑ</span>
                    <span>Credentials</span>
                </a>
                <a href="#" onclick="switchPanel('analysis'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üìä</span>
                    <span>Analysis</span>
                </a>
                <hr class="my-4 border-gray-300">                
                <a href="#" onclick="switchPanel('notes'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üìã</span>
                    <span>Notes</span>
                </a>
                <a href="#" onclick="switchPanel('schedule'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üóìÔ∏è</span>
                    <span>My Schedule</span>
                </a>
                <a href="#" onclick="switchPanel('packages'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üì¶</span>
                    <span>Packages</span>
                </a>
                <a href="#" onclick="switchPanel('requests'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üìÆ</span>
                    <span>Requests</span>
                </a>
                <a href="#" onclick="switchPanel('my-students'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üë•</span>
                    <span>My Students</span>
                </a>
                <a href="#" onclick="switchPanel('teaching-tools'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üõ†Ô∏è</span>
                    <span>Teaching Tools</span>
                </a>
                <a href="#" onclick="switchPanel('tutor-community'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üë•</span>
                    <span>Community</span>
                </a> 
                <hr class="my-4 border-gray-300">
                <a href="#" onclick="switchPanel('documents'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üìö</span>
                    <span>Documents</span>
                </a>
                <a href="#" onclick="switchPanel('blog'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üìù</span>
                    <span>Blog Posts</span>
                </a>
                <a href="#" onclick="switchPanel('stories'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üì∏</span>
                    <span>Stories</span>
                    <span class="badge-count"
                        style="background: var(--button-bg); color: white; padding: 2px 6px; border-radius: 12px; font-size: 0.75rem; margin-left: auto;">12</span>
                </a>
                <a href="#" onclick="switchPanel('images'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üñºÔ∏è</span>
                    <span>Images</span>
                </a>
                <a href="#" onclick="switchPanel('videos'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üé¨</span>
                    <span>My Videos</span>
                </a>
                <a href="#" onclick="switchPanel('podcasts'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üéôÔ∏è</span>
                    <span>Podcasts</span>
                </a>
                <hr class="my-4 border-gray-300">               
                <a href="#" onclick="switchPanel('earnings-investments'); return false;" class="sidebar-link">
                    <span class="sidebar-icon"
                        style="font-family: 'Times New Roman', serif; font-weight: bold; font-size: 1.1rem;">‚Ñ∞</span>
                    <span>Earnings & Investments</span>
                </a>
                <a href="#" onclick="switchPanel('reviews'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">‚≠ê</span>
                    <span>Reviews & Ratings</span>
                </a>
                <hr class="my-4 border-gray-300">
                <a href="#" onclick="switchPanel('settings'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">‚öôÔ∏è</span>
                    <span>Settings</span>
                </a>
                <a href="#" onclick="showLogoutModal(); return false;" class="sidebar-link text-red-500 hover:bg-red-50">
                    <span class="sidebar-icon">üö™</span>
                    <span>Logout</span>
                </a>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <section class="py-8" style="padding-top: 1rem;">
        <div class="container mx-auto px-4">

            <!-- Main Content with Widgets -->
            <div class="flex gap-6">
                <!-- Left Content Area -->
                <div class="flex-1">
                    <!-- Panels Section -->
                    <div class="panels-container">
                        <!-- Dashboard Panel (Default) -->
                        <div id="dashboard-panel" class="panel-content active">


                            <!-- Hero Section -->
                            <section class="hero-section animate__animated animate__fadeIn">
                                <h2 class="hero-title">
                                    <span id="hero-text-content"></span>
                                    <span class="typing-cursor">|</span>
                                </h2>
                                <p id="hero-subtitle" class="hero-subtitle"></p>
                                <div class="hero-stats">
                                    <div class="stat-item animate__animated animate__fadeInUp"
                                        style="animation-delay: 0.2s">
                                        <span class="stat-number" data-target="1200" data-suffix="+">0</span>
                                        <span class="stat-label">Students Taught</span>
                                    </div>
                                    <div class="stat-item animate__animated animate__fadeInUp"
                                        style="animation-delay: 0.3s">
                                        <span class="stat-number" data-target="45" data-suffix="+">0</span>
                                        <span class="stat-label">Courses Created</span>
                                    </div>
                                    <div class="stat-item animate__animated animate__fadeInUp"
                                        style="animation-delay: 0.4s">
                                        <span class="stat-number" data-target="4.8" data-suffix="‚òÖ"
                                            data-decimal="1">0</span>
                                        <span class="stat-label">Average Rating</span>
                                    </div>
                                </div>
                            </section>

                            <!-- Profile Header Section (Only visible in Dashboard) -->
                            <section class="profile-header-section mb-8">
                                <div class="cover-image-container relative">
                                    <img id="cover-img"
                                        src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='300'%3E%3Crect width='1200' height='300' fill='%23e5e7eb'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%239ca3af' font-family='sans-serif' font-size='20'%3E1200x300%3C/text%3E%3C/svg%3E"
                                        alt="Cover" class="cover-img">
                                    <div class="cover-overlay"></div>
                                    <!-- Cover Upload Button -->
                                    <button onclick="openUploadStoryModal('cover')" class="cover-upload-btn">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z">
                                            </path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                    </button>
                                </div>

                                <div class="profile-main-info">
                                    <div class="profile-info-wrapper">
                                        <div class="profile-avatar-container">
                                            <!-- Story Ring Indicator -->
                                            <div class="story-ring-wrapper" onclick="viewTutorStories()"
                                                style="position: relative; width: 150px; height: 150px; padding: 3px; border-radius: 50%; background: linear-gradient(45deg, #f59e0b, #ec4899, #8b5cf6); cursor: pointer; animation: pulse 2s infinite;">
                                                <div
                                                    style="background: var(--card-bg); width: 100%; height: 100%; border-radius: 50%; padding: 3px; display: flex; align-items: center; justify-content: center;">
                                                    <img id="profile-avatar"
                                                        src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150'%3E%3Crect width='150' height='150' fill='%23e5e7eb'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%239ca3af' font-family='sans-serif' font-size='16'%3E150x150%3C/text%3E%3C/svg%3E"
                                                        alt="Admin Profile" class="profile-avatar">
                                                </div>
                                            </div>
                                            <span class="online-indicator"></span>
                                            <!-- Add Story Button -->
                                            <button onclick="openUploadStoryModal()" class="story-add-btn"
                                                style="position: absolute; bottom: 10px; right: 10px; width: 32px; height: 32px; background: var(--button-bg); color: white; border: 3px solid var(--card-bg); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 18px; z-index: 2;">
                                                +
                                            </button>
                                            <!-- Profile Picture Upload Button -->
                                            <button onclick="openUploadStoryModal('profile')" class="avatar-upload-btn">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor"
                                                    viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        stroke-width="2"
                                                        d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z">
                                                    </path>
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                                </svg>
                                            </button>
                                        </div>

                                        <div class="profile-details-section" style="flex: 1; padding-top: 1.5rem;">
                                            <div class="profile-name-row" style="margin-bottom: 1.25rem;">
                                                <h1 class="profile-name" id="tutorName" style="margin-bottom: 0.5rem;">
                                                    Professional Tutor</h1>
                                                <!-- Username field under name -->
                                                <div id="tutorUsername"
                                                    style="font-size: 0.95rem; color: var(--text-muted); font-weight: 500; margin-bottom: 1rem;">
                                                    <!-- Username will be populated dynamically -->
                                                </div>
                                                <div class="badges-row"
                                                    style="display: flex; flex-wrap: wrap; gap: 0.75rem; margin-bottom: 1rem; margin-top: 1rem;">
                                                    <span class="profile-badge verified" id="verification-badge">‚úî
                                                        Verified Tutor</span>
                                                    <span class="profile-badge expert" id="expertise-badge">üéì Expert Educator</span>
                                                    <span class="profile-badge experience" id="experience-badge">üíº 5+
                                                        Years Experience</span>
                                                </div>
                                            </div>

                                            <div class="rating-section" style="margin-bottom: 1rem;">
                                                <div class="rating-wrapper" id="rating-hover-trigger"
                                                    style="display: flex; align-items: center; gap: 0.75rem;">
                                                    <div class="rating-stars" id="rating-stars"
                                                        style="color: #f59e0b; font-size: 1.5rem; letter-spacing: 2px;">
                                                        ‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</div>
                                                    <span class="rating-value" id="tutor-rating"
                                                        style="font-size: 1.5rem; font-weight: 700; color: #f59e0b;">0.0</span>
                                                    <span class="rating-count" id="rating-count"
                                                        style="color: var(--text-secondary); font-size: 0.95rem; font-weight: 500;">(0
                                                        reviews)</span>

                                                    <!-- Rating Tooltip -->
                                                    <div class="rating-tooltip" id="rating-tooltip">
                                                        <h4
                                                            style="margin: 0 0 1rem 0; font-size: 0.9rem; font-weight: 600; color: var(--heading);">
                                                            Rating Breakdown</h4>

                                                        <div class="rating-metric">
                                                            <div class="metric-header">
                                                                <span class="metric-label">Discipline</span>
                                                                <span class="metric-score">0.0</span>
                                                            </div>
                                                            <div class="metric-bar">
                                                                <div class="metric-fill" style="width: 0%"></div>
                                                            </div>
                                                        </div>

                                                        <div class="rating-metric">
                                                            <div class="metric-header">
                                                                <span class="metric-label">Punctuality</span>
                                                                <span class="metric-score">0.0</span>
                                                            </div>
                                                            <div class="metric-bar">
                                                                <div class="metric-fill" style="width: 0%"></div>
                                                            </div>
                                                        </div>

                                                        <div class="rating-metric">
                                                            <div class="metric-header">
                                                                <span class="metric-label">Subject Understanding</span>
                                                                <span class="metric-score">0.0</span>
                                                            </div>
                                                            <div class="metric-bar">
                                                                <div class="metric-fill" style="width: 0%"></div>
                                                            </div>
                                                        </div>

                                                        <div class="rating-metric">
                                                            <div class="metric-header">
                                                                <span class="metric-label">Communication Skills</span>
                                                                <span class="metric-score">0.0</span>
                                                            </div>
                                                            <div class="metric-bar">
                                                                <div class="metric-fill" style="width: 0%"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Location & Gender (paired as requested) -->
                                            <div class="profile-contact-info" id="location-gender-container"
                                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.75rem; margin-bottom: 0.75rem;">
                                                <div id="location-container"
                                                    style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; background: rgba(var(--button-bg-rgb), 0.05); border-radius: 12px;">
                                                    <span style="font-size: 1.25rem;">üìç</span>
                                                    <div style="flex: 1;">
                                                        <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.125rem;">
                                                            Location</div>
                                                        <div id="tutor-location" style="color: var(--text); font-size: 0.875rem; font-weight: 500;">
                                                            Loading...</div>
                                                    </div>
                                                </div>
                                                <div id="gender-container"
                                                    style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; background: rgba(var(--button-bg-rgb), 0.05); border-radius: 12px;">
                                                    <span style="font-size: 1.25rem;" id="gender-icon">üë§</span>
                                                    <div style="flex: 1;">
                                                        <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.125rem;">
                                                            Gender</div>
                                                        <div id="tutor-gender" style="color: var(--text); font-size: 0.875rem; font-weight: 500;">
                                                            Loading...</div>
                                                    </div>
                                                </div>
                                            </div>


                                            <!-- Contact Information (Email & Phone) - Populated dynamically by JS -->
                                            <div class="profile-contact-info" id="email-phone-container"
                                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.75rem; margin-bottom: 0.75rem;">
                                                <!-- Contact info will be populated dynamically -->
                                            </div>

                                            <!-- Teaches At & Languages (Contact Info Style) -->
                                            <div class="profile-contact-info" id="teaches-languages-container"
                                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.75rem; margin-bottom: 0.75rem;">
                                                <div id="teaches-at-container"
                                                    style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; background: rgba(var(--button-bg-rgb), 0.05); border-radius: 12px;">
                                                    <span style="font-size: 1.25rem;">üè´</span>
                                                    <div style="flex: 1;">
                                                        <div
                                                            style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.125rem;">
                                                            Teaches At</div>
                                                        <div id="tutor-teaches-at-field"
                                                            style="color: var(--text); font-size: 0.875rem; font-weight: 500;">
                                                            Loading...</div>
                                                    </div>
                                                </div>
                                                <div id="languages-container"
                                                    style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; background: rgba(var(--button-bg-rgb), 0.05); border-radius: 12px;">
                                                    <span style="font-size: 1.25rem;">üåê</span>
                                                    <div style="flex: 1;">
                                                        <div
                                                            style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.125rem;">
                                                            Languages</div>
                                                        <div id="tutor-languages-inline"
                                                            style="color: var(--text); font-size: 0.875rem; font-weight: 500;">
                                                            Loading...</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Social Links -->
                                            <div class="profile-social-links" id="social-links-container"
                                                style="display: flex; gap: 0.75rem; margin-top: 1.5rem; margin-bottom: 0.75rem; padding: 0.5rem 0;">
                                                <!-- Social links will be populated dynamically by JS with beautiful styling -->
                                            </div>

                                            <div class="profile-quote"
                                                style="background: linear-gradient(135deg, rgba(79,70,229,0.1) 0%, rgba(124,58,237,0.05) 100%); border-left: 4px solid #4f46e5; border-radius: 12px; padding: 1.25rem 1.5rem; margin-top: 1.5rem; position: relative; font-style: italic; color: var(--text); font-size: 1rem; line-height: 1.6; box-shadow: 0 2px 8px rgba(79,70,229,0.1);">
                                                <span id="tutor-quote">"Passionate about making complex concepts simple
                                                    and helping students achieve their academic goals."</span>
                                            </div>

                                            <!-- Connections Section -->
                                            <div class="profile-connections" style="margin-top: 1.5rem;">
                                                <div class="connections-header"
                                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                                    <h4
                                                        style="font-weight: 600; font-size: 0.95rem; color: var(--heading);">
                                                        <span style="margin-right: 0.5rem;">üë•</span>Connections
                                                    </h4>
                                                    <button onclick="openCommunityModal()" class="btn-sm"
                                                        style="font-size: 0.75rem; padding: 0.25rem 0.75rem;">
                                                        View All
                                                    </button>
                                                </div>
                                                <div class="connections-stats"
                                                    style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; text-align: center;">
                                                    <div class="stat-box"
                                                        style="padding: 0.75rem; background: rgba(var(--button-bg-rgb), 0.05); border-radius: var(--radius-md); cursor: pointer;"
                                                        onclick="openCommunityModal('requests')">
                                                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--heading);"
                                                            id="profile-header-requests-count">0</div>
                                                        <div
                                                            style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.25rem;">
                                                            Requests</div>
                                                    </div>
                                                    <div class="stat-box"
                                                        style="padding: 0.75rem; background: rgba(var(--button-bg-rgb), 0.05); border-radius: var(--radius-md); cursor: pointer;"
                                                        onclick="openCommunityModal('connections')">
                                                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--heading);"
                                                            id="profile-header-connections-count">0</div>
                                                        <div
                                                            style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.25rem;">
                                                            Connections</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="profile-actions">
                                                <button onclick="openEditProfileModal()" class="btn-primary">
                                                    <span class="mr-2">‚úèÔ∏è</span>
                                                    Edit Profile
                                                </button>
                                                <button onclick="openChatModal()" class="btn-secondary ml-2">
                                                    <span class="mr-2">üí¨</span>
                                                    Message
                                                </button>
                                                <button onclick="shareProfile()" class="btn-secondary ml-2">
                                                    <span class="mr-2">üîó</span>
                                                    Share Profile
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- About Section -->
                            <section
                                style="background: var(--card-bg); border-radius: 16px; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                <h3
                                    style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem; color: var(--heading);">
                                    About Me</h3>
                                <p id="tutor-bio" style="color: var(--text); line-height: 1.7;">Loading profile
                                    information...</p>
                            </section>

                            <!-- All Statistics Cards -->
                            <div class="dashboard-grid mb-8">
                                <!-- Teaching Statistics -->
                                <div class="card p-4">
                                    <div class="flex items-center gap-3 mb-2">
                                        <span class="text-3xl">üë•</span>
                                        <h3 class="text-lg font-semibold">Current Students</h3>
                                    </div>
                                    <p class="text-2xl font-bold text-blue-600" id="stat-current-students">0</p>
                                    <span class="text-sm text-gray-500">Active</span>
                                </div>

                                <div class="card p-4">
                                    <div class="flex items-center gap-3 mb-2">
                                        <span class="text-3xl">üìã</span>
                                        <h3 class="text-lg font-semibold">Requests</h3>
                                    </div>
                                    <p class="text-2xl font-bold text-purple-600" id="stat-total-requests">0</p>
                                    <span class="text-sm text-gray-500">Package requests</span>
                                </div>

                                <div class="card p-4">
                                    <div class="flex items-center gap-3 mb-2">
                                        <span class="text-3xl">üéØ</span>
                                        <h3 class="text-lg font-semibold">Success Rate</h3>
                                    </div>
                                    <p class="text-2xl font-bold text-green-600" id="stat-success-rate">0%</p>
                                    <span class="text-sm text-gray-500">Student improvement</span>
                                </div>

                                <div class="card p-4">
                                    <div class="flex items-center gap-3 mb-2">
                                        <span class="text-3xl">‚è±Ô∏è</span>
                                        <h3 class="text-lg font-semibold">Response Time</h3>
                                    </div>
                                    <p class="text-2xl font-bold text-orange-600"><span
                                            id="stat-response-time">24</span> hrs</p>
                                    <span class="text-sm text-gray-500">Average reply time</span>
                                </div>
                            </div>


                            <!-- Reviews Section (Success Stories Style) -->
                            <div class="card p-6 mb-8">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                                    <h3 class="text-xl font-semibold" style="margin: 0;">üåü Recent Reviews</h3>
                                    <button
                                        class="px-4 py-2 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition"
                                        onclick="switchPanel('reviews')" style="font-size: 0.875rem;">
                                        View All Reviews ‚Üí
                                    </button>
                                </div>
                                <div class="success-stories-grid" id="dashboard-reviews-grid">
                                    <!-- Reviews will be loaded dynamically from database in Success Stories style -->
                                    <div
                                        style="text-align: center; padding: 2rem; color: var(--text-muted); font-style: italic; grid-column: 1 / -1;">
                                        Loading reviews...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Requests Panel -->
                    <div id="requests-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">My Requests</h1>
                            <p class="text-gray-600">Manage your courses, schools, sessions, and parenting requests</p>
                        </div>

                        <!-- Request Type Filter Cards -->
                        <div class="request-type-cards grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <div class="request-type-card card p-4 cursor-pointer border-2 transition active"
                                onclick="filterTutorRequestType('courses')" data-type="courses">
                                <div class="flex items-center gap-3">
                                    <div class="text-3xl">üìö</div>
                                    <div>
                                        <h3 class="font-bold text-lg">Requested Courses</h3>
                                        <p class="text-sm text-gray-600">View course requests</p>
                                        <button class="mt-2 text-xs bg-blue-500 text-white px-3 py-1 rounded-full hover:bg-blue-600 transition"
                                            onclick="event.stopPropagation(); openCourseRequestModal()">
                                            <i class="fas fa-plus"></i> Request Course
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="request-type-card card p-4 cursor-pointer border-2 transition"
                                onclick="filterTutorRequestType('schools')" data-type="schools">
                                <div class="flex items-center gap-3">
                                    <div class="text-3xl">üè´</div>
                                    <div>
                                        <h3 class="font-bold text-lg">Requested Schools</h3>
                                        <p class="text-sm text-gray-600">View school requests</p>
                                    </div>
                                </div>
                            </div>

                            <div class="request-type-card card p-4 cursor-pointer border-2 transition"
                                onclick="filterTutorRequestType('sessions')" data-type="sessions">
                                <div class="flex items-center gap-3">
                                    <div class="text-3xl">üìÖ</div>
                                    <div>
                                        <h3 class="font-bold text-lg">Requested Sessions</h3>
                                        <p class="text-sm text-gray-600">View session requests</p>
                                    </div>
                                </div>
                            </div>

                            <div class="request-type-card card p-4 cursor-pointer border-2 transition"
                                onclick="filterTutorRequestType('parenting')" data-type="parenting">
                                <div class="flex items-center gap-3">
                                    <div class="text-3xl">üë™</div>
                                    <div>
                                        <h3 class="font-bold text-lg">Parenting Invitations</h3>
                                        <p class="text-sm text-gray-600">Students inviting you as parent</p>
                                        <span id="parenting-invitation-count" class="text-xs bg-purple-500 text-white px-2 py-0.5 rounded-full hidden">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Request Status Sub-Tabs (for courses, schools, sessions) -->
                        <div class="status-tabs mb-6"
                            style="display: flex; gap: 1rem; border-bottom: 2px solid var(--border-color); padding-bottom: 0.5rem;">
                            <button class="status-tab active"
                                onclick="filterTutorRequestStatus('all')" data-status="all">
                                All
                            </button>
                            <button class="status-tab"
                                onclick="filterTutorRequestStatus('pending')"
                                data-status="pending">
                                Pending
                            </button>
                            <button class="status-tab"
                                onclick="filterTutorRequestStatus('accepted')"
                                data-status="accepted">
                                Accepted
                            </button>
                            <button class="status-tab"
                                onclick="filterTutorRequestStatus('rejected')"
                                data-status="rejected">
                                Rejected
                            </button>
                        </div>

                        <!-- Parenting Direction Tabs (only visible for parenting type) -->
                        <div id="parenting-direction-tabs" class="mb-6 hidden"
                            style="display: none; gap: 1rem; border-bottom: 2px solid var(--border-color); padding-bottom: 0.5rem;">
                            <button class="parenting-tab active"
                                onclick="filterParentingDirection('invited')" data-direction="invited"
                                style="padding: 0.5rem 1rem; font-weight: 500; color: var(--primary-color); border-bottom: 2px solid var(--primary-color); background: none; border-left: none; border-right: none; border-top: none; cursor: pointer;">
                                <i class="fas fa-inbox mr-2"></i>Invited (Received)
                                <span id="parenting-invited-count" class="ml-2 text-xs bg-purple-500 text-white px-2 py-0.5 rounded-full hidden">0</span>
                            </button>
                            <button class="parenting-tab"
                                onclick="filterParentingDirection('invites')" data-direction="invites"
                                style="padding: 0.5rem 1rem; font-weight: 400; color: var(--text-secondary); border-bottom: 2px solid transparent; background: none; border-left: none; border-right: none; border-top: none; cursor: pointer;">
                                <i class="fas fa-paper-plane mr-2"></i>Invites (Sent)
                                <span id="parenting-invites-count" class="ml-2 text-xs bg-blue-500 text-white px-2 py-0.5 rounded-full hidden">0</span>
                            </button>
                        </div>

                        <!-- Requests List Container -->
                        <div id="tutor-requests-list">
                            <!-- Requests will be loaded dynamically -->
                            <div class="text-center py-8 text-gray-500">
                                <i class="fas fa-spinner fa-spin text-3xl mb-3"></i>
                                <p>Loading your requests...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Packages Panel -->
                    <div id="packages-panel" class="panel-content hidden">
                        <div class="section-header">
                            <h2 class="section-title">My Packages</h2>
                            <div class="section-header-actions">
                                <button class="btn-primary" onclick="openPackageModal()">
                                    <i class="fas fa-plus"></i> Create Package
                                </button>
                            </div>
                        </div>

                        <!-- Packages Grid -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="packages-grid">
                            <!-- Packages will be loaded dynamically from packageManagerClean -->
                        </div>
                    </div>

                    <!-- My Students Panel -->
                    <div id="my-students-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                                <h1 class="text-3xl font-bold">My Students</h1>
                                <span id="student-count-badge" class="hidden" style="background: var(--primary-color); color: white; padding: 0.25rem 0.75rem; border-radius: 999px; font-size: 0.875rem; font-weight: 600;">0 students</span>
                            </div>
                            <p class="text-gray-600">View and manage your enrolled students from the enrolled_students table</p>
                        </div>

                        <div class="card p-6 mb-6">
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <div style="position: relative; flex: 1;">
                                    <i class="fas fa-search" style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: var(--text-secondary);"></i>
                                    <input type="search" id="student-search" class="w-full p-3 pl-12 border-2 rounded-lg"
                                        placeholder="Search students by name, grade, package, or email..."
                                        autocomplete="new-password" autocorrect="off" autocapitalize="off" spellcheck="false"
                                        data-form-type="other" data-lpignore="true">
                                </div>
                                <button onclick="SessionRequestManager.loadMyStudents()" class="btn-secondary" style="padding: 0.75rem 1.25rem; white-space: nowrap;">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                            </div>
                        </div>

                        <div class="students-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
                            id="my-students-grid">
                            <!-- Students will be loaded dynamically from enrolled_students table -->
                            <div class="col-span-full card p-6 text-center text-gray-500">
                                <i class="fas fa-spinner fa-spin text-3xl mb-3"></i>
                                <p>Loading students...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Schedule Panel -->
                    <div id="schedule-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">My Schedule</h1>
                            <p class="text-gray-600">Manage your teaching schedule and sessions</p>
                        </div>

                        <!-- Tab Navigation -->
                        <div class="mb-6 border-b border-gray-200">
                            <div class="flex gap-2">
                                <button id="tab-schedules"
                                    class="schedule-tab active px-6 py-3 font-semibold border-b-2 border-blue-500 text-blue-500 transition"
                                    onclick="switchScheduleTab('schedules')">
                                    <i class="fas fa-calendar-alt mr-2"></i>Schedules
                                </button>
                                <button id="tab-sessions"
                                    class="schedule-tab px-6 py-3 font-semibold border-b-2 border-transparent text-gray-500 hover:text-gray-700 transition"
                                    onclick="switchScheduleTab('sessions')">
                                    <i class="fas fa-users mr-2"></i>Sessions
                                </button>
                            </div>
                        </div>

                        <!-- Schedules Tab Content -->
                        <div id="schedules-tab-content" class="schedule-tab-content">
                            <!-- Create Schedule Button and Search Bar in One Row -->
                            <div class="card p-6 mb-6">
                                <div style="display: flex; gap: 16px; align-items: center; margin-bottom: 12px;">
                                    <button class="cta-button" onclick="openScheduleModal()"
                                        style="white-space: nowrap;">
                                        <i class="fas fa-plus"></i> Create Schedule
                                    </button>
                                    <div class="relative" style="flex: 1;">
                                        <i
                                            class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                        <input type="text" id="schedule-search"
                                            class="w-full p-3 pl-12 border-2 rounded-lg"
                                            placeholder="Search schedules by title, priority level, or role..."
                                            oninput="searchSchedules(this.value)">
                                    </div>
                                </div>
                            </div>

                            <!-- Schedules Table -->
                            <div class="card p-6 mb-6">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-2xl font-bold">My Teaching Schedules</h3>
                                    <!-- Schedule Priority Filters -->
                                    <div class="flex gap-2 flex-wrap">
                                        <button class="px-4 py-2 rounded-full bg-blue-500 text-white text-sm"
                                            onclick="filterSchedules('all')">
                                            All
                                        </button>
                                        <button class="px-4 py-2 rounded-full bg-gray-200 text-sm"
                                            onclick="filterSchedules('urgent')" title="Critical tasks requiring immediate attention">
                                            üî¥ Urgent
                                        </button>
                                        <button class="px-4 py-2 rounded-full bg-gray-200 text-sm"
                                            onclick="filterSchedules('high')" title="Important tasks with high priority">
                                            üü† High
                                        </button>
                                        <button class="px-4 py-2 rounded-full bg-gray-200 text-sm"
                                            onclick="filterSchedules('medium')" title="Regular scheduled tasks">
                                            üîµ Medium
                                        </button>
                                        <button class="px-4 py-2 rounded-full bg-gray-200 text-sm"
                                            onclick="filterSchedules('low')" title="Optional or flexible tasks">
                                            üü¢ Low
                                        </button>
                                    </div>
                                </div>
                                <div id="schedules-table-container">
                                    <div class="text-center py-8 text-gray-500">
                                        <i class="fas fa-spinner fa-spin text-3xl mb-3"></i>
                                        <p>Loading schedules...</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Sessions Tab Content -->
                        <div id="sessions-tab-content" class="schedule-tab-content hidden">
                            <!-- Search Bar -->
                            <div class="card p-6 mb-6">
                                <div class="relative mb-3">
                                    <i
                                        class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                    <input type="text" id="sessions-search" class="w-full p-3 pl-12 border-2 rounded-lg"
                                        placeholder="Search sessions by subject, student, or topic..."
                                        oninput="searchSessions(this.value)">
                                </div>
                            </div>

                            <!-- Session Filters -->
                            <div class="mb-6 flex gap-4 flex-wrap">
                                <button class="px-4 py-2 rounded-full bg-blue-500 text-white"
                                    onclick="filterSessions('all')">
                                    All Sessions
                                </button>
                                <button class="px-4 py-2 rounded-full bg-gray-200"
                                    onclick="filterSessions('scheduled')">
                                    Scheduled
                                </button>
                                <button class="px-4 py-2 rounded-full bg-gray-200"
                                    onclick="filterSessions('in-progress')">
                                    In Progress
                                </button>
                                <button class="px-4 py-2 rounded-full bg-gray-200"
                                    onclick="filterSessions('completed')">
                                    Completed
                                </button>
                                <button class="px-4 py-2 rounded-full bg-gray-200"
                                    onclick="filterSessions('cancelled')">
                                    Cancelled
                                </button>
                            </div>

                            <!-- Sessions Table -->
                            <div class="card p-6 mb-6">
                                <h3 class="text-2xl font-bold mb-4">My Tutoring Sessions</h3>
                                <div id="sessions-table-container">
                                    <div class="text-center py-8 text-gray-500">
                                        <i class="fas fa-spinner fa-spin text-3xl mb-3"></i>
                                        <p>Loading sessions...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Teaching Tools Panel -->
                    <div id="teaching-tools-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Teaching Tools</h1>
                            <p class="text-gray-600">Access digital tools to enhance your teaching</p>
                        </div>

                        <div class="tools-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <div class="card p-6 text-center cursor-pointer hover:shadow-lg transition"
                                onclick="openDigitalLab()">
                                <div class="text-6xl mb-4">üî¨</div>
                                <h4 class="text-xl font-bold mb-2">Digital Lab</h4>
                                <p class="text-gray-600">Virtual experiments</p>
                            </div>
                            <div class="card p-6 text-center cursor-pointer hover:shadow-lg transition"
                                onclick="whiteboardManager.openWhiteboard()">
                                <div class="text-6xl mb-4">üìù</div>
                                <h4 class="text-xl font-bold mb-2">Digital Whiteboard</h4>
                                <p class="text-gray-600">Interactive teaching board</p>
                            </div>
                            <div class="card p-6 text-center cursor-pointer hover:shadow-lg transition"
                                onclick="openCourseworkMaker()">
                                <div class="text-6xl mb-4">üìã</div>
                                <h4 class="text-xl font-bold mb-2">Coursework Maker</h4>
                                <p class="text-gray-600">Create custom courseworks</p>
                            </div>
                        </div>
                    </div>

                    <!-- Documents Panel (Teaching/Learning Materials) -->
                    <div id="documents-panel" class="panel-content hidden">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h1 class="text-3xl font-bold mb-2">Documents</h1>
                                <p class="text-gray-600">Manage and organize your teaching documents</p>
                            </div>
                            <!-- Storage Used Stat -->
                            <div class="flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg">
                                <span class="text-xl">üíæ</span>
                                <div>
                                    <p class="text-xs text-gray-500">Storage</p>
                                    <p class="text-sm font-bold">2.4 GB</p>
                                </div>
                            </div>
                        </div>

                        <!-- View Tabs: Folders vs Documents -->
                        <div class="flex items-center gap-4 mb-6 border-b">
                            <button id="folders-tab" onclick="switchDocsViewTab('folders')"
                                class="px-4 py-3 font-semibold text-blue-600 border-b-2 border-blue-600 -mb-px">
                                <i class="fas fa-folder mr-2"></i>Folders
                            </button>
                            <button id="documents-tab" onclick="switchDocsViewTab('documents')"
                                class="px-4 py-3 font-semibold text-gray-500 hover:text-gray-700">
                                <i class="fas fa-file-alt mr-2"></i>All Documents
                            </button>
                        </div>

                        <!-- FOLDERS VIEW -->
                        <div id="folders-view">
                            <!-- Folders Search -->
                            <div class="mb-4">
                                <div class="relative max-w-md">
                                    <input type="text" id="folders-search"
                                        class="w-full px-4 py-2 pl-10 border rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        placeholder="Search folders..."
                                        oninput="searchFolders(this.value)">
                                    <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                </div>
                            </div>
                            <!-- Folders Grid - Rendered dynamically by folder-manager.js -->
                            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4 mb-6" id="teaching-docs-folders">
                                <!-- New Folder Card (always shown) -->
                                <div class="card p-4 text-center cursor-pointer hover:shadow-lg transition border-2 border-dashed border-gray-300 hover:border-blue-400"
                                    onclick="openCreateFolderModal()">
                                    <div class="text-4xl mb-2 text-gray-400">‚ûï</div>
                                    <p class="font-semibold text-sm text-gray-500">New Folder</p>
                                </div>
                                <!-- Folder cards will be rendered dynamically by folder-manager.js -->
                            </div>
                        </div>

                        <!-- DOCUMENTS VIEW (Hidden by default) -->
                        <div id="documents-view" class="hidden">

                            <!-- Document Filters with Counts + Upload Button -->
                            <div class="flex gap-2 mb-4 flex-wrap items-center">
                                <button class="teaching-doc-filter px-4 py-2 rounded-full bg-blue-500 text-white flex items-center gap-2"
                                    onclick="filterTeachingDocs('all')">
                                    All Docs <span class="bg-white/20 px-2 py-0.5 rounded-full text-xs">40</span>
                                </button>
                                <button class="teaching-doc-filter px-4 py-2 rounded-full bg-gray-200 flex items-center gap-2"
                                    onclick="filterTeachingDocs('pdf')">
                                    PDFs <span class="bg-gray-300 px-2 py-0.5 rounded-full text-xs">18</span>
                                </button>
                                <button class="teaching-doc-filter px-4 py-2 rounded-full bg-gray-200 flex items-center gap-2"
                                    onclick="filterTeachingDocs('presentations')">
                                    Presentations <span class="bg-gray-300 px-2 py-0.5 rounded-full text-xs">8</span>
                                </button>
                                <button class="teaching-doc-filter px-4 py-2 rounded-full bg-gray-200 flex items-center gap-2"
                                    onclick="filterTeachingDocs('worksheets')">
                                    Worksheets <span class="bg-gray-300 px-2 py-0.5 rounded-full text-xs">7</span>
                                </button>
                                <button class="teaching-doc-filter px-4 py-2 rounded-full bg-gray-200 flex items-center gap-2"
                                    onclick="filterTeachingDocs('exams')">
                                    Exams <span class="bg-gray-300 px-2 py-0.5 rounded-full text-xs">5</span>
                                </button>
                                <button class="teaching-doc-filter px-4 py-2 rounded-full bg-gray-200 flex items-center gap-2"
                                    onclick="filterTeachingDocs('other')">
                                    Other <span class="bg-gray-300 px-2 py-0.5 rounded-full text-xs">2</span>
                                </button>
                                <!-- Upload Button - pushed to the right -->
                                <button class="ml-auto px-4 py-2 rounded-full bg-green-500 text-white flex items-center gap-2 hover:bg-green-600 transition-colors"
                                    onclick="openUploadTeachingDocModal()">
                                    <i class="fas fa-plus"></i> Upload Document
                                </button>
                            </div>

                            <!-- Documents Search and Sort Row -->
                            <div class="flex flex-wrap items-center gap-4 mb-6">
                                <!-- Search -->
                                <div class="relative flex-1 max-w-md">
                                    <input type="text" id="documents-search"
                                        class="w-full px-4 py-2 pl-10 border rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        placeholder="Search documents..."
                                        oninput="searchDocuments(this.value)">
                                    <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                </div>
                                <!-- Sort Dropdown - pushed to the right -->
                                <div class="ml-auto flex items-center gap-2">
                                    <label class="text-sm text-gray-600">Sort by:</label>
                                    <select id="documents-sort"
                                        class="px-4 py-2 border rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white cursor-pointer"
                                        onchange="sortDocuments(this.value)">
                                        <option value="upload_date">Upload Date</option>
                                        <option value="title">Title (A-Z)</option>
                                        <option value="subject">Subject</option>
                                        <option value="category">Category</option>
                                        <option value="grade_level">Grade Level</option>
                                        <option value="views">Most Viewed</option>
                                        <option value="downloads">Most Downloaded</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Teaching Docs Grid -->
                        <div class="teaching-docs-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
                            id="teaching-docs-grid">
                            <!-- Sample Teaching Docs - Updated Design with data attributes for sorting -->
                            <div class="card p-6 hover:shadow-lg transition" data-subject="mathematics" data-category="notes" data-grade-level="10" data-upload-date="2024-11-25" data-views="128" data-downloads="45">
                                <div class="flex items-start justify-between mb-4">
                                    <div class="text-5xl">üìÑ</div>
                                    <div class="relative">
                                        <button class="text-gray-500 hover:text-gray-700 p-2"
                                            onclick="toggleDocMenu(1)">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </button>
                                        <div id="doc-menu-1" class="hidden absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border z-10">
                                            <button onclick="editTeachingDoc(1)" class="w-full text-left px-4 py-2 hover:bg-gray-100 text-sm">
                                                <i class="fas fa-edit mr-2"></i>Edit
                                            </button>
                                            <button onclick="deleteTeachingDoc(1)" class="w-full text-left px-4 py-2 hover:bg-red-50 text-red-600 text-sm">
                                                <i class="fas fa-trash mr-2"></i>Delete
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <h3><a href="#" onclick="openTeachingDoc(1); return false;" class="text-lg font-bold mb-2 hover:text-blue-600 cursor-pointer block">Mathematics Grade 10 Notes</a></h3>
                                <p class="text-sm text-gray-600 mb-2">PDF ‚Ä¢ 2.5 MB</p>
                                <div class="flex flex-wrap gap-1 mb-3">
                                    <span class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full">Mathematics</span>
                                    <span class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full">Grade 10</span>
                                    <span class="text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full">Notes</span>
                                </div>
                                <div class="flex items-center justify-between text-xs text-gray-500 mb-3">
                                    <span>Modified: 2 days ago</span>
                                </div>
                                <div class="flex items-center justify-between text-xs text-gray-400 border-t pt-3">
                                    <span><i class="fas fa-eye mr-1"></i>128 views</span>
                                    <span><i class="fas fa-download mr-1"></i>45 downloads</span>
                                </div>
                            </div>

                            <div class="card p-6 hover:shadow-lg transition" data-subject="physics" data-category="presentation" data-grade-level="11" data-upload-date="2024-11-20" data-views="89" data-downloads="32">
                                <div class="flex items-start justify-between mb-4">
                                    <div class="text-5xl">üìä</div>
                                    <div class="relative">
                                        <button class="text-gray-500 hover:text-gray-700 p-2"
                                            onclick="toggleDocMenu(2)">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </button>
                                        <div id="doc-menu-2" class="hidden absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border z-10">
                                            <button onclick="editTeachingDoc(2)" class="w-full text-left px-4 py-2 hover:bg-gray-100 text-sm">
                                                <i class="fas fa-edit mr-2"></i>Edit
                                            </button>
                                            <button onclick="deleteTeachingDoc(2)" class="w-full text-left px-4 py-2 hover:bg-red-50 text-red-600 text-sm">
                                                <i class="fas fa-trash mr-2"></i>Delete
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <h3><a href="#" onclick="openTeachingDoc(2); return false;" class="text-lg font-bold mb-2 hover:text-blue-600 cursor-pointer block">Physics Chapter 5 Slides</a></h3>
                                <p class="text-sm text-gray-600 mb-2">PPTX ‚Ä¢ 8.3 MB</p>
                                <div class="flex flex-wrap gap-1 mb-3">
                                    <span class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full">Physics</span>
                                    <span class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full">Grade 11</span>
                                    <span class="text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full">Presentation</span>
                                </div>
                                <div class="flex items-center justify-between text-xs text-gray-500 mb-3">
                                    <span>Modified: 1 week ago</span>
                                </div>
                                <div class="flex items-center justify-between text-xs text-gray-400 border-t pt-3">
                                    <span><i class="fas fa-eye mr-1"></i>89 views</span>
                                    <span><i class="fas fa-download mr-1"></i>32 downloads</span>
                                </div>
                            </div>

                            <div class="card p-6 hover:shadow-lg transition" data-subject="chemistry" data-category="worksheet" data-grade-level="9" data-upload-date="2024-11-24" data-views="56" data-downloads="28">
                                <div class="flex items-start justify-between mb-4">
                                    <div class="text-5xl">üìù</div>
                                    <div class="relative">
                                        <button class="text-gray-500 hover:text-gray-700 p-2"
                                            onclick="toggleDocMenu(3)">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </button>
                                        <div id="doc-menu-3" class="hidden absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border z-10">
                                            <button onclick="editTeachingDoc(3)" class="w-full text-left px-4 py-2 hover:bg-gray-100 text-sm">
                                                <i class="fas fa-edit mr-2"></i>Edit
                                            </button>
                                            <button onclick="deleteTeachingDoc(3)" class="w-full text-left px-4 py-2 hover:bg-red-50 text-red-600 text-sm">
                                                <i class="fas fa-trash mr-2"></i>Delete
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <h3><a href="#" onclick="openTeachingDoc(3); return false;" class="text-lg font-bold mb-2 hover:text-blue-600 cursor-pointer block">Chemistry Practice Worksheet</a></h3>
                                <p class="text-sm text-gray-600 mb-2">DOCX ‚Ä¢ 450 KB</p>
                                <div class="flex flex-wrap gap-1 mb-3">
                                    <span class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full">Chemistry</span>
                                    <span class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full">Grade 9</span>
                                    <span class="text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full">Worksheet</span>
                                </div>
                                <div class="flex items-center justify-between text-xs text-gray-500 mb-3">
                                    <span>Modified: 3 days ago</span>
                                </div>
                                <div class="flex items-center justify-between text-xs text-gray-400 border-t pt-3">
                                    <span><i class="fas fa-eye mr-1"></i>56 views</span>
                                    <span><i class="fas fa-download mr-1"></i>28 downloads</span>
                                </div>
                            </div>

                            <div class="card p-6 hover:shadow-lg transition" data-subject="biology" data-category="exam" data-grade-level="12" data-upload-date="2024-10-27" data-views="234" data-downloads="67">
                                <div class="flex items-start justify-between mb-4">
                                    <div class="text-5xl">üìã</div>
                                    <div class="relative">
                                        <button class="text-gray-500 hover:text-gray-700 p-2"
                                            onclick="toggleDocMenu(4)">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </button>
                                        <div id="doc-menu-4" class="hidden absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border z-10">
                                            <button onclick="editTeachingDoc(4)" class="w-full text-left px-4 py-2 hover:bg-gray-100 text-sm">
                                                <i class="fas fa-edit mr-2"></i>Edit
                                            </button>
                                            <button onclick="deleteTeachingDoc(4)" class="w-full text-left px-4 py-2 hover:bg-red-50 text-red-600 text-sm">
                                                <i class="fas fa-trash mr-2"></i>Delete
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <h3><a href="#" onclick="openTeachingDoc(4); return false;" class="text-lg font-bold mb-2 hover:text-blue-600 cursor-pointer block">Biology Final Exam 2024</a></h3>
                                <p class="text-sm text-gray-600 mb-2">PDF ‚Ä¢ 1.2 MB</p>
                                <div class="flex flex-wrap gap-1 mb-3">
                                    <span class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full">Biology</span>
                                    <span class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full">Grade 12</span>
                                    <span class="text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full">Exam</span>
                                </div>
                                <div class="flex items-center justify-between text-xs text-gray-500 mb-3">
                                    <span>Modified: 1 month ago</span>
                                </div>
                                <div class="flex items-center justify-between text-xs text-gray-400 border-t pt-3">
                                    <span><i class="fas fa-eye mr-1"></i>234 views</span>
                                    <span><i class="fas fa-download mr-1"></i>67 downloads</span>
                                </div>
                            </div>

                            <div class="card p-6 hover:shadow-lg transition" data-subject="english" data-category="notes" data-grade-level="11" data-upload-date="2024-11-15" data-views="78" data-downloads="51">
                                <div class="flex items-start justify-between mb-4">
                                    <div class="text-5xl">üìö</div>
                                    <div class="relative">
                                        <button class="text-gray-500 hover:text-gray-700 p-2"
                                            onclick="toggleDocMenu(5)">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </button>
                                        <div id="doc-menu-5" class="hidden absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border z-10">
                                            <button onclick="editTeachingDoc(5)" class="w-full text-left px-4 py-2 hover:bg-gray-100 text-sm">
                                                <i class="fas fa-edit mr-2"></i>Edit
                                            </button>
                                            <button onclick="deleteTeachingDoc(5)" class="w-full text-left px-4 py-2 hover:bg-red-50 text-red-600 text-sm">
                                                <i class="fas fa-trash mr-2"></i>Delete
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <h3><a href="#" onclick="openTeachingDoc(5); return false;" class="text-lg font-bold mb-2 hover:text-blue-600 cursor-pointer block">English Literature Guide</a></h3>
                                <p class="text-sm text-gray-600 mb-2">PDF ‚Ä¢ 3.8 MB</p>
                                <div class="flex flex-wrap gap-1 mb-3">
                                    <span class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full">English</span>
                                    <span class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full">Grade 11</span>
                                    <span class="text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full">Notes</span>
                                </div>
                                <div class="flex items-center justify-between text-xs text-gray-500 mb-3">
                                    <span>Modified: 2 weeks ago</span>
                                </div>
                                <div class="flex items-center justify-between text-xs text-gray-400 border-t pt-3">
                                    <span><i class="fas fa-eye mr-1"></i>78 views</span>
                                    <span><i class="fas fa-download mr-1"></i>51 downloads</span>
                                </div>
                            </div>

                            <div class="card p-6 hover:shadow-lg transition" data-subject="mathematics" data-category="worksheet" data-grade-level="8" data-upload-date="2024-11-22" data-views="92" data-downloads="39">
                                <div class="flex items-start justify-between mb-4">
                                    <div class="text-5xl">üßÆ</div>
                                    <div class="relative">
                                        <button class="text-gray-500 hover:text-gray-700 p-2"
                                            onclick="toggleDocMenu(6)">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </button>
                                        <div id="doc-menu-6" class="hidden absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border z-10">
                                            <button onclick="editTeachingDoc(6)" class="w-full text-left px-4 py-2 hover:bg-gray-100 text-sm">
                                                <i class="fas fa-edit mr-2"></i>Edit
                                            </button>
                                            <button onclick="deleteTeachingDoc(6)" class="w-full text-left px-4 py-2 hover:bg-red-50 text-red-600 text-sm">
                                                <i class="fas fa-trash mr-2"></i>Delete
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <h3><a href="#" onclick="openTeachingDoc(6); return false;" class="text-lg font-bold mb-2 hover:text-blue-600 cursor-pointer block">Algebra Problem Set</a></h3>
                                <p class="text-sm text-gray-600 mb-2">PDF ‚Ä¢ 890 KB</p>
                                <div class="flex flex-wrap gap-1 mb-3">
                                    <span class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full">Mathematics</span>
                                    <span class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full">Grade 8</span>
                                    <span class="text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full">Worksheet</span>
                                </div>
                                <div class="flex items-center justify-between text-xs text-gray-500 mb-3">
                                    <span>Modified: 5 days ago</span>
                                </div>
                                <div class="flex items-center justify-between text-xs text-gray-400 border-t pt-3">
                                    <span><i class="fas fa-eye mr-1"></i>92 views</span>
                                    <span><i class="fas fa-download mr-1"></i>39 downloads</span>
                                </div>
                            </div>
                        </div>
                        </div><!-- End documents-view -->
                    </div>

                    <!-- Videos Panel -->
                    <div id="videos-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Video Gallery</h1>
                            <p class="text-gray-600">Manage your educational videos</p>
                        </div>

                        <div class="flex gap-4 mb-6">
                            <button class="cta-button" onclick="openUploadVideoModal()">
                                <i class="fas fa-video"></i> Upload Video
                            </button>
                            <button class="btn-secondary px-6 py-3 rounded-lg" onclick="goLive()">
                                <i class="fas fa-circle text-red-500"></i> Go Live
                            </button>
                        </div>

                        <!-- Video Filters -->
                        <div class="flex gap-2 mb-6 flex-wrap">
                            <button class="px-4 py-2 rounded-full bg-blue-500 text-white"
                                onclick="filterVideos('all')">All Videos</button>
                            <button class="px-4 py-2 rounded-full bg-gray-200"
                                onclick="filterVideos('published')">Published</button>
                            <button class="px-4 py-2 rounded-full bg-gray-200"
                                onclick="filterVideos('draft')">Drafts</button>
                            <button class="px-4 py-2 rounded-full bg-gray-200"
                                onclick="filterVideos('favorites')">Favorites</button>
                            <button class="px-4 py-2 rounded-full bg-gray-200"
                                onclick="filterVideos('saved')">Saved</button>
                            <button class="px-4 py-2 rounded-full bg-gray-200"
                                onclick="filterVideos('playlists')">Playlists</button>
                        </div>

                        <div class="videos-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="videos-grid">
                            <!-- Videos will be loaded dynamically -->
                            <div class="card p-6 text-center text-gray-500">
                                <p>No videos yet</p>
                            </div>
                        </div>
                    </div>

                    <!-- Blog Panel -->
                    <div id="blog-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Blog Posts</h1>
                            <p class="text-gray-600">Share your knowledge through blog posts</p>
                        </div>

                        <div class="mb-6">
                            <button class="cta-button" onclick="openCreateBlogModal()">
                                <i class="fas fa-pen"></i> Create Blog Post
                            </button>
                        </div>

                        <div class="blog-grid grid grid-cols-1 md:grid-cols-2 gap-6" id="blog-grid">
                            <!-- Blog posts will be loaded dynamically -->
                            <div class="card p-6 text-center text-gray-500">
                                <p>No blog posts yet</p>
                            </div>
                        </div>
                    </div>

                    <!-- Podcasts Panel -->
                    <div id="podcasts-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Podcast Library</h1>
                            <p class="text-gray-600">Create and manage your educational podcasts</p>
                        </div>

                        <div class="mb-6">
                            <button class="cta-button" onclick="createPodcast()">
                                <i class="fas fa-microphone"></i> Create Podcast
                            </button>
                        </div>

                        <div class="podcast-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
                            id="podcast-grid">
                            <!-- Podcasts will be loaded dynamically -->
                            <div class="card p-6 text-center text-gray-500">
                                <p>No podcasts yet</p>
                            </div>
                        </div>
                    </div>

                    <!-- Stories Panel -->
                    <div id="stories-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">üì∏ My Stories</h1>
                            <p class="text-gray-600">Share educational moments and teaching highlights</p>
                        </div>

                        <!-- Story Stats -->
                        <div class="story-stats-grid"
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                            <div class="stat-card card p-4" style="text-align: center;">
                                <div style="font-size: 1.875rem; font-weight: 700; color: var(--button-bg);">12</div>
                                <div style="font-size: 0.875rem; color: var(--text-muted);">Total Stories</div>
                            </div>
                            <div class="stat-card card p-4" style="text-align: center;">
                                <div style="font-size: 1.875rem; font-weight: 700; color: #8b5cf6;">3.5K</div>
                                <div style="font-size: 0.875rem; color: var(--text-muted);">Total Views</div>
                            </div>
                            <div class="stat-card card p-4" style="text-align: center;">
                                <div style="font-size: 1.875rem; font-weight: 700; color: #10b981;">245</div>
                                <div style="font-size: 0.875rem; color: var(--text-muted);">Total Likes</div>
                            </div>
                            <div class="stat-card card p-4" style="text-align: center;">
                                <div style="font-size: 1.875rem; font-weight: 700; color: #f59e0b;">89</div>
                                <div style="font-size: 0.875rem; color: var(--text-muted);">Comments</div>
                            </div>
                        </div>

                        <!-- Add New Story Button -->
                        <div style="margin-bottom: 2rem;">
                            <button onclick="openUploadStoryModal()" class="cta-button"
                                style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                                <span style="font-size: 1.25rem;">‚ûï</span> Add New Story
                            </button>
                        </div>

                        <!-- Stories Grid -->
                        <div class="stories-grid"
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1.5rem;">
                            <!-- Story Card 1 -->
                            <div class="story-card" onclick="viewStory('story1')"
                                style="background: var(--card-bg); border-radius: 12px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s ease;">
                                <div style="position: relative;">
                                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='250'%3E%3Crect width='200' height='250' fill='%23e5e7eb'/%3E%3C/svg%3E"
                                        alt="Story" style="width: 100%; height: 250px; object-fit: cover;">
                                    <div
                                        style="position: absolute; top: 10px; left: 10px; background: var(--button-bg); color: white; padding: 4px 8px; border-radius: 6px; font-size: 0.75rem; font-weight: 600;">
                                        Math Tips
                                    </div>
                                    <div style="position: absolute; bottom: 10px; left: 10px; right: 10px;">
                                        <p
                                            style="color: white; font-weight: 600; text-shadow: 0 2px 4px rgba(0,0,0,0.5); margin: 0;">
                                            Today's Lesson</p>
                                        <p
                                            style="color: rgba(255,255,255,0.9); font-size: 0.75rem; text-shadow: 0 2px 4px rgba(0,0,0,0.5); margin: 0;">
                                            2 hours ago</p>
                                    </div>
                                </div>
                                <div style="padding: 0.75rem;">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.875rem; color: var(--text-muted);">üëÅÔ∏è 245
                                            views</span>
                                        <span style="font-size: 0.875rem; color: var(--text-muted);">‚ù§Ô∏è 32</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Story Card 2 -->
                            <div class="story-card" onclick="viewStory('story2')"
                                style="background: var(--card-bg); border-radius: 12px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s ease;">
                                <div style="position: relative;">
                                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='250'%3E%3Crect width='200' height='250' fill='%23d1d5db'/%3E%3C/svg%3E"
                                        alt="Story" style="width: 100%; height: 250px; object-fit: cover;">
                                    <div
                                        style="position: absolute; top: 10px; left: 10px; background: #8b5cf6; color: white; padding: 4px 8px; border-radius: 6px; font-size: 0.75rem; font-weight: 600;">
                                        Physics Lab
                                    </div>
                                    <div style="position: absolute; bottom: 10px; left: 10px; right: 10px;">
                                        <p
                                            style="color: white; font-weight: 600; text-shadow: 0 2px 4px rgba(0,0,0,0.5); margin: 0;">
                                            Experiment Demo</p>
                                        <p
                                            style="color: rgba(255,255,255,0.9); font-size: 0.75rem; text-shadow: 0 2px 4px rgba(0,0,0,0.5); margin: 0;">
                                            5 hours ago</p>
                                    </div>
                                </div>
                                <div style="padding: 0.75rem;">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.875rem; color: var(--text-muted);">üëÅÔ∏è 189
                                            views</span>
                                        <span style="font-size: 0.875rem; color: var(--text-muted);">‚ù§Ô∏è 28</span>
                                    </div>
                                </div>
                            </div>

                            <!-- More story cards can be added here -->
                        </div>

                        <!-- Load More Button -->
                        <div style="margin-top: 2rem; text-align: center;">
                            <button onclick="loadMoreStories()"
                                style="padding: 0.75rem 2rem; background: transparent; color: var(--button-bg); border: 2px solid var(--button-bg); border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                                Load More Stories
                            </button>
                        </div>
                    </div>

                    <!-- Reviews Panel -->
                    <div id="reviews-panel" class="panel-content hidden">
                        <div style="margin-bottom: 2rem;">
                            <h2
                                style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--heading);">
                                <span style="display: inline-flex; align-items: center; gap: 0.75rem;">
                                    <span>‚≠ê</span> Reviews & Ratings
                                </span>
                            </h2>
                            <p style="color: var(--text-secondary);">See what students and parents are saying about you
                            </p>
                        </div>

                        <!-- Rating Overview Card -->
                        <section
                            style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 16px; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 4px 16px rgba(245,158,11,0.3); color: white;">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 2rem;">
                                <div style="flex: 1; min-width: 200px;">
                                    <div
                                        style="font-size: 0.95rem; font-weight: 600; margin-bottom: 0.5rem; opacity: 0.95;">
                                        Overall Tutor Rating</div>
                                    <div
                                        style="display: flex; align-items: baseline; gap: 0.75rem; margin-bottom: 0.75rem;">
                                        <div id="reviews-avg-rating"
                                            style="font-size: 3.5rem; font-weight: 700; line-height: 1;">4.9</div>
                                        <div style="font-size: 1.25rem; opacity: 0.9;">/ 5.0</div>
                                    </div>
                                    <div style="color: rgba(255,255,255,0.95); font-size: 1rem; margin-bottom: 1rem;">
                                        ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ
                                    </div>
                                    <div id="reviews-total-count" style="font-size: 0.95rem; opacity: 0.9;">Based on 127
                                        student & parent reviews</div>
                                </div>

                                <div style="flex: 2; min-width: 300px;">
                                    <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                                        <!-- Subject Matter Expertise -->
                                        <div style="display: flex; align-items: center; gap: 0.75rem;">
                                            <span style="font-size: 0.875rem; width: 180px;">Subject Matter
                                                Expertise</span>
                                            <div
                                                style="flex: 1; height: 8px; background: rgba(255,255,255,0.2); border-radius: 4px; overflow: hidden;">
                                                <div id="reviews-subject-bar"
                                                    style="height: 100%; width: 98%; background: white; border-radius: 4px;">
                                                </div>
                                            </div>
                                            <span id="reviews-subject-understanding"
                                                style="font-size: 0.875rem; width: 40px; text-align: right; font-weight: 600;">4.9</span>
                                        </div>
                                        <!-- Communication Skills -->
                                        <div style="display: flex; align-items: center; gap: 0.75rem;">
                                            <span style="font-size: 0.875rem; width: 180px;">Communication Skills</span>
                                            <div
                                                style="flex: 1; height: 8px; background: rgba(255,255,255,0.2); border-radius: 4px; overflow: hidden;">
                                                <div id="reviews-communication-bar"
                                                    style="height: 100%; width: 96%; background: white; border-radius: 4px;">
                                                </div>
                                            </div>
                                            <span id="reviews-communication"
                                                style="font-size: 0.875rem; width: 40px; text-align: right; font-weight: 600;">4.8</span>
                                        </div>
                                        <!-- Discipline -->
                                        <div style="display: flex; align-items: center; gap: 0.75rem;">
                                            <span style="font-size: 0.875rem; width: 180px;">Discipline</span>
                                            <div
                                                style="flex: 1; height: 8px; background: rgba(255,255,255,0.2); border-radius: 4px; overflow: hidden;">
                                                <div id="reviews-discipline-bar"
                                                    style="height: 100%; width: 100%; background: white; border-radius: 4px;">
                                                </div>
                                            </div>
                                            <span id="reviews-discipline"
                                                style="font-size: 0.875rem; width: 40px; text-align: right; font-weight: 600;">5.0</span>
                                        </div>
                                        <!-- Punctuality -->
                                        <div style="display: flex; align-items: center; gap: 0.75rem;">
                                            <span style="font-size: 0.875rem; width: 180px;">Punctuality</span>
                                            <div
                                                style="flex: 1; height: 8px; background: rgba(255,255,255,0.2); border-radius: 4px; overflow: hidden;">
                                                <div id="reviews-punctuality-bar"
                                                    style="height: 100%; width: 94%; background: white; border-radius: 4px;">
                                                </div>
                                            </div>
                                            <span id="reviews-punctuality"
                                                style="font-size: 0.875rem; width: 40px; text-align: right; font-weight: 600;">4.7</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- Filter & Sort Controls -->
                        <div
                            style="background: var(--card-bg); border-radius: 12px; padding: 1.25rem; margin-bottom: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                                <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
                                    <button onclick="filterReviews('all')" class="filter-btn active" data-filter="all"
                                        style="padding: 0.5rem 1rem; border-radius: 8px; border: 2px solid var(--button-bg); background: var(--button-bg); color: white; font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: all 0.3s;">
                                        All (127)
                                    </button>
                                    <button onclick="filterReviews('5')" class="filter-btn" data-filter="5"
                                        style="padding: 0.5rem 1rem; border-radius: 8px; border: 2px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: all 0.3s;">
                                        5 Stars (98)
                                    </button>
                                    <button onclick="filterReviews('4')" class="filter-btn" data-filter="4"
                                        style="padding: 0.5rem 1rem; border-radius: 8px; border: 2px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: all 0.3s;">
                                        4 Stars (22)
                                    </button>
                                    <button onclick="filterReviews('3')" class="filter-btn" data-filter="3"
                                        style="padding: 0.5rem 1rem; border-radius: 8px; border: 2px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: all 0.3s;">
                                        3 Stars (7)
                                    </button>
                                </div>
                                <select onchange="sortReviews(this.value)"
                                    style="padding: 0.5rem 1rem; border-radius: 8px; border: 2px solid rgba(var(--border-rgb), 0.3); background: var(--card-bg); color: var(--text); font-size: 0.875rem; cursor: pointer;">
                                    <option value="recent">Most Recent</option>
                                    <option value="helpful">Most Helpful</option>
                                    <option value="highest">Highest Rating</option>
                                    <option value="lowest">Lowest Rating</option>
                                </select>
                            </div>
                        </div>

                        <!-- Reviews List -->
                        <div id="reviews-list" style="display: grid; gap: 1.5rem;">
                            <!-- Review 1 - Featured/Helpful -->
                            <div class="review-card" data-rating="5"
                                style="background: var(--card-bg); border-radius: 16px; padding: 2rem; box-shadow: 0 2px 12px rgba(0,0,0,0.08); border-left: 4px solid #f59e0b;">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1.25rem;">
                                    <div style="display: flex; gap: 1rem; align-items: center;">
                                        <img src="../uploads/system_images/system_profile_pictures/student-teenage-girl.jpg"
                                            alt="Student"
                                            style="width: 56px; height: 56px; border-radius: 50%; object-fit: cover; border: 3px solid #f59e0b;">
                                        <div>
                                            <h4
                                                style="font-size: 1.125rem; font-weight: 600; margin: 0 0 0.25rem 0; color: var(--heading);">
                                                Meron Bekele</h4>
                                            <p
                                                style="font-size: 0.875rem; color: var(--text-muted); margin: 0 0 0.25rem 0;">
                                                Grade 11 Student ‚Ä¢ Mathematics</p>
                                            <div class="rating-tooltip-container" style="display: inline-block;">
                                                <div style="color: #f59e0b; font-size: 1rem;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                                                <div class="rating-tooltip">
                                                    <div class="tooltip-header">Meron's Rating</div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Subject Matter Expertise</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill subject-matter"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Communication Skills</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill communication"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Discipline</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill discipline"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Punctuality</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill punctuality"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-overall">
                                                        <div class="tooltip-overall-label">Overall</div>
                                                        <div class="tooltip-overall-value">5.0 / 5.0</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="text-align: right;">
                                        <div
                                            style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600; margin-bottom: 0.5rem;">
                                            ‚≠ê Featured Review
                                        </div>
                                        <span style="font-size: 0.875rem; color: var(--text-muted);">2 weeks ago</span>
                                    </div>
                                </div>
                                <p
                                    style="color: var(--text); line-height: 1.7; margin: 0 0 1.25rem 0; font-size: 1rem;">
                                    "Outstanding tutor! Explains complex mathematical concepts in such a clear and
                                    simple way. Very patient and encourages questions. Always arrives on time and
                                    well-prepared. My grades have improved significantly since I started learning with
                                    this tutor. Highly recommend!"</p>
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; padding-top: 1rem; border-top: 1px solid rgba(var(--border-rgb), 0.3);">
                                    <div style="display: flex; gap: 1rem;">
                                        <button onclick="markHelpful(this)"
                                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; cursor: pointer; transition: all 0.3s;">
                                            <span>üëç</span> Helpful (45)
                                        </button>
                                        <button onclick="reportReview(this)"
                                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; cursor: pointer; transition: all 0.3s;">
                                            <span>üö©</span> Report
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Review 2 -->
                            <div class="review-card" data-rating="5"
                                style="background: var(--card-bg); border-radius: 16px; padding: 2rem; box-shadow: 0 2px 12px rgba(0,0,0,0.08); border-left: 4px solid #3b82f6;">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1.25rem;">
                                    <div style="display: flex; gap: 1rem; align-items: center;">
                                        <img src="../uploads/system_images/system_profile_pictures/Dad-profile.jpg"
                                            alt="Parent"
                                            style="width: 56px; height: 56px; border-radius: 50%; object-fit: cover;">
                                        <div>
                                            <h4
                                                style="font-size: 1.125rem; font-weight: 600; margin: 0 0 0.25rem 0; color: var(--heading);">
                                                Ato Alemayehu Tadesse</h4>
                                            <p
                                                style="font-size: 0.875rem; color: var(--text-muted); margin: 0 0 0.25rem 0;">
                                                Parent ‚Ä¢ Child: Grade 9 Physics</p>
                                            <div class="rating-tooltip-container" style="display: inline-block;">
                                                <div style="color: #f59e0b; font-size: 1rem;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                                                <div class="rating-tooltip">
                                                    <div class="tooltip-header">Alemayehu's Rating</div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Subject Matter Expertise</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill subject-matter"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Communication Skills</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill communication"
                                                                style="width: 90%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">4.5</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Discipline</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill discipline"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Punctuality</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill punctuality"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-overall">
                                                        <div class="tooltip-overall-label">Overall</div>
                                                        <div class="tooltip-overall-value">4.9 / 5.0</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <span style="font-size: 0.875rem; color: var(--text-muted);">1 month ago</span>
                                </div>
                                <p
                                    style="color: var(--text); line-height: 1.7; margin: 0 0 1.25rem 0; font-size: 1rem;">
                                    "Excellent tutor! My son's physics understanding has improved dramatically. Very
                                    professional, always punctual, and creates a positive learning environment. The
                                    tutor uses practical examples that make difficult concepts easy to understand. Worth
                                    every birr!"</p>
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; padding-top: 1rem; border-top: 1px solid rgba(var(--border-rgb), 0.3);">
                                    <div style="display: flex; gap: 1rem;">
                                        <button onclick="markHelpful(this)"
                                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; cursor: pointer; transition: all 0.3s;">
                                            <span>üëç</span> Helpful (32)
                                        </button>
                                        <button onclick="reportReview(this)"
                                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; cursor: pointer; transition: all 0.3s;">
                                            <span>üö©</span> Report
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Review 3 -->
                            <div class="review-card" data-rating="4"
                                style="background: var(--card-bg); border-radius: 16px; padding: 2rem; box-shadow: 0 2px 12px rgba(0,0,0,0.08); border-left: 4px solid #10b981;">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1.25rem;">
                                    <div style="display: flex; gap: 1rem; align-items: center;">
                                        <img src="../uploads/system_images/system_profile_pictures/student-college-boy.jpg"
                                            alt="Student"
                                            style="width: 56px; height: 56px; border-radius: 50%; object-fit: cover;">
                                        <div>
                                            <h4
                                                style="font-size: 1.125rem; font-weight: 600; margin: 0 0 0.25rem 0; color: var(--heading);">
                                                Daniel Haile</h4>
                                            <p
                                                style="font-size: 0.875rem; color: var(--text-muted); margin: 0 0 0.25rem 0;">
                                                University Student ‚Ä¢ Advanced Calculus</p>
                                            <div class="rating-tooltip-container" style="display: inline-block;">
                                                <div style="color: #f59e0b; font-size: 1rem;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                                                <div class="rating-tooltip">
                                                    <div class="tooltip-header">Daniel's Rating</div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Subject Matter Expertise</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill subject-matter"
                                                                style="width: 90%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">4.5</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Communication Skills</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill communication"
                                                                style="width: 80%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">4.0</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Discipline</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill discipline"
                                                                style="width: 80%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">4.0</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Punctuality</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill punctuality"
                                                                style="width: 90%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">4.5</div>
                                                    </div>
                                                    <div class="tooltip-overall">
                                                        <div class="tooltip-overall-label">Overall</div>
                                                        <div class="tooltip-overall-value">4.3 / 5.0</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <span style="font-size: 0.875rem; color: var(--text-muted);">2 months ago</span>
                                </div>
                                <p
                                    style="color: var(--text); line-height: 1.7; margin: 0 0 1.25rem 0; font-size: 1rem;">
                                    "Good tutor with solid knowledge of calculus. Helpful for exam preparation.
                                    Sometimes moves a bit fast through topics, but overall a positive experience. Would
                                    recommend having specific questions prepared before each session."</p>
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; padding-top: 1rem; border-top: 1px solid rgba(var(--border-rgb), 0.3);">
                                    <div style="display: flex; gap: 1rem;">
                                        <button onclick="markHelpful(this)"
                                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; cursor: pointer; transition: all 0.3s;">
                                            <span>üëç</span> Helpful (18)
                                        </button>
                                        <button onclick="reportReview(this)"
                                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; cursor: pointer; transition: all 0.3s;">
                                            <span>üö©</span> Report
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Review 4 -->
                            <div class="review-card" data-rating="5"
                                style="background: var(--card-bg); border-radius: 16px; padding: 2rem; box-shadow: 0 2px 12px rgba(0,0,0,0.08); border-left: 4px solid #8b5cf6;">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1.25rem;">
                                    <div style="display: flex; gap: 1rem; align-items: center;">
                                        <img src="../uploads/system_images/system_profile_pictures/Mom-profile.jpg"
                                            alt="Parent"
                                            style="width: 56px; height: 56px; border-radius: 50%; object-fit: cover;">
                                        <div>
                                            <h4
                                                style="font-size: 1.125rem; font-weight: 600; margin: 0 0 0.25rem 0; color: var(--heading);">
                                                Weizero Sara Abraham</h4>
                                            <p
                                                style="font-size: 0.875rem; color: var(--text-muted); margin: 0 0 0.25rem 0;">
                                                Parent ‚Ä¢ Child: Grade 8 English</p>
                                            <div class="rating-tooltip-container" style="display: inline-block;">
                                                <div style="color: #f59e0b; font-size: 1rem;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                                                <div class="rating-tooltip">
                                                    <div class="tooltip-header">Sara's Rating</div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Subject Matter Expertise</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill subject-matter"
                                                                style="width: 96%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">4.8</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Communication Skills</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill communication"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Discipline</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill discipline"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Punctuality</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill punctuality"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-overall">
                                                        <div class="tooltip-overall-label">Overall</div>
                                                        <div class="tooltip-overall-value">4.9 / 5.0</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <span style="font-size: 0.875rem; color: var(--text-muted);">3 weeks ago</span>
                                </div>
                                <p
                                    style="color: var(--text); line-height: 1.7; margin: 0 0 1.25rem 0; font-size: 1rem;">
                                    "Wonderful tutor! My daughter's English has improved so much. Very patient and
                                    creates engaging lessons. Always prepared and professional. My daughter actually
                                    looks forward to the tutoring sessions now. Thank you!"</p>
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; padding-top: 1rem; border-top: 1px solid rgba(var(--border-rgb), 0.3);">
                                    <div style="display: flex; gap: 1rem;">
                                        <button onclick="markHelpful(this)"
                                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; cursor: pointer; transition: all 0.3s;">
                                            <span>üëç</span> Helpful (27)
                                        </button>
                                        <button onclick="reportReview(this)"
                                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; cursor: pointer; transition: all 0.3s;">
                                            <span>üö©</span> Report
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Analysis Panel -->
                    <div id="analysis-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">üìä Tutor Analysis</h1>
                            <p class="text-gray-600">Analytics and insights about your teaching performance</p>
                        </div>

                        <div class="card p-12 text-center">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">üìä</div>
                            <h2 class="text-2xl font-bold mb-3" style="color: var(--text);">Coming Soon</h2>
                            <p class="text-lg" style="color: var(--muted); max-width: 500px; margin: 0 auto;">
                                We're working on advanced analytics to help you track your teaching performance,
                                student progress, earnings trends, and more. Stay tuned!
                            </p>
                        </div>
                    </div>

                    <!-- Credentials Panel (Academic Certificates, Achievements, Experience) -->
                    <div id="credentials-panel" class="panel-content hidden">
                        <div class="mb-8 flex justify-between items-center">
                            <div>
                                <h1 class="text-3xl font-bold mb-2">üìÑ My Credentials</h1>
                                <p class="text-gray-600">Manage your academic certificates, achievements, and experience
                                </p>
                            </div>
                            <button onclick="openUploadCredentialModal()" class="btn-primary">
                                <span>üì§ Upload Credential</span>
                            </button>
                        </div>

                        <!-- Credential Type Selector Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <!-- Achievements Card -->
                            <div onclick="switchCredentialSection('achievement')" id="cred-card-achievement"
                                class="credential-type-card active cursor-pointer card p-6 bg-gradient-to-br from-yellow-50 to-amber-50 border-yellow-200 hover:shadow-lg transition-all duration-200">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-3xl">üèÜ</span>
                                    <span
                                        class="text-xs font-semibold text-yellow-600 bg-yellow-100 px-2 py-1 rounded-full"
                                        id="achievement-count">0</span>
                                </div>
                                <h3 class="text-lg font-bold text-gray-800 mb-1">Achievements</h3>
                                <p class="text-sm text-gray-600">Awards, honors & milestones</p>
                            </div>

                            <!-- Academic Card -->
                            <div onclick="switchCredentialSection('academic')" id="cred-card-academic"
                                class="credential-type-card cursor-pointer card p-6 bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200 hover:shadow-lg transition-all duration-200">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-3xl">üéì</span>
                                    <span class="text-xs font-semibold text-blue-600 bg-blue-100 px-2 py-1 rounded-full"
                                        id="academic-count">0</span>
                                </div>
                                <h3 class="text-lg font-bold text-gray-800 mb-1">Academic</h3>
                                <p class="text-sm text-gray-600">Degrees & certifications</p>
                            </div>

                            <!-- Experience Card -->
                            <div onclick="switchCredentialSection('experience')" id="cred-card-experience"
                                class="credential-type-card cursor-pointer card p-6 bg-gradient-to-br from-green-50 to-emerald-50 border-green-200 hover:shadow-lg transition-all duration-200">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-3xl">üíº</span>
                                    <span
                                        class="text-xs font-semibold text-green-600 bg-green-100 px-2 py-1 rounded-full"
                                        id="experience-count">0</span>
                                </div>
                                <h3 class="text-lg font-bold text-gray-800 mb-1">Experience</h3>
                                <p class="text-sm text-gray-600">Work history & credentials</p>
                            </div>
                        </div>

                        <!-- Credentials Grid (dynamically populated based on selected type) -->
                        <div class="card p-6">
                            <div class="mb-4 flex items-center justify-between">
                                <h2 class="text-xl font-bold text-gray-800" id="current-cred-type-title">
                                    üèÜ Achievements
                                </h2>
                                <span class="text-sm text-gray-500" id="current-cred-count">0 credentials</span>
                            </div>

                            <div id="credentials-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <!-- Credentials will be loaded dynamically -->
                                <div class="text-center text-gray-500 py-12 col-span-full" id="credentials-empty-state">
                                    <div class="text-6xl mb-4">üìÑ</div>
                                    <p class="text-lg font-semibold mb-2">No credentials yet</p>
                                    <p class="text-sm">Click "Upload Credential" to add your first credential</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Earnings & Investments Panel -->
                    <div id="earnings-investments-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Earnings & Investments</h1>
                            <p class="text-gray-600">Track your income streams and investment portfolio</p>
                        </div>

                        <!-- Tabs -->
                        <div class="flex gap-4 mb-6 border-b border-gray-200">
                            <button onclick="switchEarningsTab('earnings')" id="earnings-tab"
                                class="earnings-tab-btn px-6 py-3 font-semibold text-blue-600 border-b-2 border-blue-600 transition-all">
                                Earnings
                            </button>
                            <button onclick="switchEarningsTab('investments')" id="investments-tab"
                                class="earnings-tab-btn px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 transition-all">
                                Investments
                            </button>
                        </div>

                        <!-- Earnings Tab Content -->
                        <div id="earnings-tab-content" class="earnings-tab-content">
                            <!-- Summary Cards (Clickable) -->
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                                <div onclick="toggleEarningsSection('total')"
                                    class="card p-6 bg-gradient-to-br from-green-50 to-emerald-50 border-green-200 cursor-pointer hover:shadow-lg transition-all duration-200 active-earnings-card">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-green-600 text-2xl">üí∞</span>
                                        <span class="text-xs text-green-600 font-semibold">COMPLETED</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mb-1">Total Earnings</p>
                                    <h3 class="text-2xl font-bold text-gray-800" id="total-earnings">0 ETB</h3>
                                    <p class="text-xs text-green-600 mt-2 font-medium">Click to view all</p>
                                </div>
                                <div onclick="toggleEarningsSection('direct')"
                                    class="card p-6 bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200 cursor-pointer hover:shadow-lg transition-all duration-200">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-blue-600 text-2xl">üë•</span>
                                        <span class="text-xs text-blue-600 font-semibold">DIRECT</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mb-1">Direct Affiliate</p>
                                    <h3 class="text-2xl font-bold text-gray-800" id="direct-affiliate-earnings">0 ETB
                                    </h3>
                                    <p class="text-xs text-blue-600 mt-2 font-medium">Click to view</p>
                                </div>
                                <div onclick="toggleEarningsSection('indirect')"
                                    class="card p-6 bg-gradient-to-br from-purple-50 to-pink-50 border-purple-200 cursor-pointer hover:shadow-lg transition-all duration-200">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-purple-600 text-2xl">üîó</span>
                                        <span class="text-xs text-purple-600 font-semibold">INDIRECT</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mb-1">Indirect Affiliate</p>
                                    <h3 class="text-2xl font-bold text-gray-800" id="indirect-affiliate-earnings">0 ETB
                                    </h3>
                                    <p class="text-xs text-purple-600 mt-2 font-medium">Click to view</p>
                                </div>
                                <div onclick="toggleEarningsSection('tutoring')"
                                    class="card p-6 bg-gradient-to-br from-orange-50 to-amber-50 border-orange-200 cursor-pointer hover:shadow-lg transition-all duration-200">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-orange-600 text-2xl">üìö</span>
                                        <span class="text-xs text-orange-600 font-semibold">TUTORING</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mb-1">Tutoring Sessions</p>
                                    <h3 class="text-2xl font-bold text-gray-800" id="tutoring-earnings">0 ETB</h3>
                                    <p class="text-xs text-orange-600 mt-2 font-medium">Click to view</p>
                                </div>
                            </div>

                            <!-- Earnings Sections -->
                            <div class="space-y-8">
                                <!-- Total Earnings Section -->
                                <div id="total-earnings-section" class="card p-6 earnings-section">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-green-600">üí∞</span>
                                                Total Earnings - All Sources
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Combined view of all your earnings</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <select id="total-period-selector" onchange="loadTotalEarningsData()"
                                                class="p-2 border-2 rounded-lg text-sm font-medium">
                                                <option value="1">Last Month</option>
                                                <option value="3">Last 3 Months</option>
                                                <option value="6" selected>Last 6 Months</option>
                                                <option value="12">Last Year</option>
                                            </select>
                                        </div>
                                    </div>
                                    <!-- Total Earnings Chart -->
                                    <div class="mb-6 bg-gray-50 p-4 rounded-lg" style="height: 300px;">
                                        <canvas id="total-earnings-chart"></canvas>
                                    </div>
                                    <!-- Combined List -->
                                    <div id="total-earnings-list" class="space-y-3 max-h-96 overflow-y-auto min-h-[300px]">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- Direct Affiliate Section -->
                                <div id="direct-affiliate-section" class="card p-6 earnings-section hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-blue-600">üë•</span>
                                                Direct Affiliate Earnings
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Commission from users you directly
                                                referred</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <select id="direct-period-selector" onchange="loadDirectAffiliateData()"
                                                class="p-2 border-2 rounded-lg text-sm font-medium">
                                                <option value="1">Last Month</option>
                                                <option value="3">Last 3 Months</option>
                                                <option value="6" selected>Last 6 Months</option>
                                                <option value="12">Last Year</option>
                                            </select>
                                        </div>
                                    </div>
                                    <!-- Line Graph -->
                                    <div class="mb-6 bg-gray-50 p-4 rounded-lg" style="height: 250px;">
                                        <canvas id="direct-affiliate-chart"></canvas>
                                    </div>
                                    <!-- List of People -->
                                    <div id="direct-affiliate-list" class="space-y-3 max-h-96 overflow-y-auto min-h-[300px]">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- Indirect Affiliate Section -->
                                <div id="indirect-affiliate-section" class="card p-6 earnings-section hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-purple-600">üîó</span>
                                                Indirect Affiliate Earnings
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Commission from second-level referrals
                                            </p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <select id="indirect-period-selector" onchange="loadIndirectAffiliateData()"
                                                class="p-2 border-2 rounded-lg text-sm font-medium">
                                                <option value="1">Last Month</option>
                                                <option value="3">Last 3 Months</option>
                                                <option value="6" selected>Last 6 Months</option>
                                                <option value="12">Last Year</option>
                                            </select>
                                        </div>
                                    </div>
                                    <!-- Line Graph -->
                                    <div class="mb-6 bg-gray-50 p-4 rounded-lg" style="height: 250px;">
                                        <canvas id="indirect-affiliate-chart"></canvas>
                                    </div>
                                    <!-- List of People -->
                                    <div id="indirect-affiliate-list" class="space-y-3 max-h-96 overflow-y-auto min-h-[300px]">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- Tutoring Earnings Section -->
                                <div id="tutoring-earnings-section" class="card p-6 earnings-section hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-orange-600">üìö</span>
                                                Tutoring Session Earnings
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Income from teaching sessions</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <select id="tutoring-period-selector" onchange="loadTutoringData()"
                                                class="p-2 border-2 rounded-lg text-sm font-medium">
                                                <option value="1">Last Month</option>
                                                <option value="3">Last 3 Months</option>
                                                <option value="6" selected>Last 6 Months</option>
                                                <option value="12">Last Year</option>
                                            </select>
                                        </div>
                                    </div>
                                    <!-- Line Graph -->
                                    <div class="mb-6 bg-gray-50 p-4 rounded-lg" style="height: 250px;">
                                        <canvas id="tutoring-earnings-chart"></canvas>
                                    </div>
                                    <!-- List of Sessions -->
                                    <div id="tutoring-earnings-list" class="space-y-3 max-h-96 overflow-y-auto min-h-[300px]">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Investments Tab Content -->
                        <div id="investments-tab-content" class="earnings-tab-content hidden">
                            <!-- Investment Summary Cards -->
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                                <div class="card p-6 bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-blue-600 text-2xl">üíº</span>
                                        <span class="text-xs text-blue-600 font-semibold">INVESTED</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mb-1">Total Investment</p>
                                    <h3 class="text-2xl font-bold text-gray-800" id="total-invested">0 ETB</h3>
                                </div>
                                <div class="card p-6 bg-gradient-to-br from-purple-50 to-pink-50 border-purple-200">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-purple-600 text-2xl">üëÅÔ∏è</span>
                                        <span class="text-xs text-purple-600 font-semibold">IMPRESSIONS</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mb-1">Total Impressions</p>
                                    <h3 class="text-2xl font-bold text-gray-800" id="total-impressions">0</h3>
                                </div>
                                <div class="card p-6 bg-gradient-to-br from-green-50 to-emerald-50 border-green-200">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-green-600 text-2xl">üìä</span>
                                        <span class="text-xs text-green-600 font-semibold">CPM</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mb-1">Cost Per Mille</p>
                                    <h3 class="text-2xl font-bold text-gray-800" id="average-cpm">0 ETB</h3>
                                </div>
                            </div>

                            <!-- Investments List -->
                            <div class="card p-6">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-xl font-bold flex items-center gap-2">
                                        <span class="text-blue-600">üí∞</span>
                                        Investment Portfolio
                                    </h3>
                                    <button
                                        class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                                        + Add Investment
                                    </button>
                                </div>
                                <div id="investments-list" class="space-y-4">
                                    <!-- Purchase Card 1: Mathematics Advanced Course -->
                                    <div
                                        class="card p-6 hover:shadow-lg transition-all duration-300 border-l-4 border-blue-500">
                                        <div class="flex items-start justify-between mb-4">
                                            <div class="flex items-center gap-4 flex-1">
                                                <div
                                                    class="w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center text-white text-2xl">
                                                    üìö
                                                </div>
                                                <div class="flex-1">
                                                    <h4 class="font-bold text-lg text-gray-800 mb-1">Mathematics
                                                        Advanced Course</h4>
                                                    <p class="text-sm text-gray-600">Grade 12 - Advanced Calculus &
                                                        Algebra</p>
                                                    <div class="flex items-center gap-2 mt-2">
                                                        <span
                                                            class="bg-green-100 text-green-800 text-xs px-3 py-1 rounded-full font-semibold">Completed</span>
                                                        <span
                                                            class="bg-blue-100 text-blue-800 text-xs px-3 py-1 rounded-full font-semibold">Course</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <div class="text-2xl font-bold text-blue-600">850 ETB</div>
                                                <div class="text-xs text-gray-500 mt-1">Jan 15, 2024</div>
                                            </div>
                                        </div>

                                        <div
                                            class="grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg mb-4">
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Amount</div>
                                                <div class="font-semibold text-gray-800">850 ETB</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Date</div>
                                                <div class="font-semibold text-gray-800">Jan 15, 2024</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Status</div>
                                                <div class="font-semibold text-green-600">Completed</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Payment Method</div>
                                                <div class="font-semibold text-gray-800">Chapa Pay</div>
                                            </div>
                                        </div>

                                        <div class="flex gap-2">
                                            <button
                                                class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium">
                                                View Certificate
                                            </button>
                                            <button
                                                class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium">
                                                Download Invoice
                                            </button>
                                            <button
                                                class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium">
                                                Leave Review
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Purchase Card 2: Physics Tutoring Session Package -->
                                    <div
                                        class="card p-6 hover:shadow-lg transition-all duration-300 border-l-4 border-purple-500">
                                        <div class="flex items-start justify-between mb-4">
                                            <div class="flex items-center gap-4 flex-1">
                                                <div
                                                    class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg flex items-center justify-center text-white text-2xl">
                                                    üéØ
                                                </div>
                                                <div class="flex-1">
                                                    <h4 class="font-bold text-lg text-gray-800 mb-1">Physics Tutoring
                                                        Session Package</h4>
                                                    <p class="text-sm text-gray-600">10 Sessions with Dr. Abebe Kebede
                                                    </p>
                                                    <div class="flex items-center gap-2 mt-2">
                                                        <span
                                                            class="bg-yellow-100 text-yellow-800 text-xs px-3 py-1 rounded-full font-semibold">In
                                                            Progress</span>
                                                        <span
                                                            class="bg-purple-100 text-purple-800 text-xs px-3 py-1 rounded-full font-semibold">Tutoring</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <div class="text-2xl font-bold text-purple-600">1,200 ETB</div>
                                                <div class="text-xs text-gray-500 mt-1">Feb 3, 2024</div>
                                            </div>
                                        </div>

                                        <div
                                            class="grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg mb-4">
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Amount</div>
                                                <div class="font-semibold text-gray-800">1,200 ETB</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Date</div>
                                                <div class="font-semibold text-gray-800">Feb 3, 2024</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Status</div>
                                                <div class="font-semibold text-yellow-600">In Progress</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Payment Method</div>
                                                <div class="font-semibold text-gray-800">M-Pesa</div>
                                            </div>
                                        </div>

                                        <div class="mb-3 p-3 bg-blue-50 rounded-lg border border-blue-200">
                                            <div class="flex items-center gap-2 text-sm">
                                                <span class="font-semibold text-blue-800">Progress:</span>
                                                <span class="text-blue-600">6 of 10 sessions completed</span>
                                            </div>
                                            <div class="w-full bg-blue-200 rounded-full h-2 mt-2">
                                                <div class="bg-blue-600 h-2 rounded-full" style="width: 60%"></div>
                                            </div>
                                        </div>

                                        <div class="flex gap-2">
                                            <button
                                                class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium">
                                                View Schedule
                                            </button>
                                            <button
                                                class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium">
                                                Download Invoice
                                            </button>
                                            <button
                                                class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium">
                                                Contact Tutor
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Purchase Card 3: Chemistry Study Materials Bundle -->
                                    <div
                                        class="card p-6 hover:shadow-lg transition-all duration-300 border-l-4 border-green-500">
                                        <div class="flex items-start justify-between mb-4">
                                            <div class="flex items-center gap-4 flex-1">
                                                <div
                                                    class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center text-white text-2xl">
                                                    üß™
                                                </div>
                                                <div class="flex-1">
                                                    <h4 class="font-bold text-lg text-gray-800 mb-1">Chemistry Study
                                                        Materials Bundle</h4>
                                                    <p class="text-sm text-gray-600">Grade 11 - Organic Chemistry (3
                                                        PDFs + 5 Videos)</p>
                                                    <div class="flex items-center gap-2 mt-2">
                                                        <span
                                                            class="bg-green-100 text-green-800 text-xs px-3 py-1 rounded-full font-semibold">Delivered</span>
                                                        <span
                                                            class="bg-green-100 text-green-800 text-xs px-3 py-1 rounded-full font-semibold">Materials</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <div class="text-2xl font-bold text-green-600">350 ETB</div>
                                                <div class="text-xs text-gray-500 mt-1">Jan 28, 2024</div>
                                            </div>
                                        </div>

                                        <div
                                            class="grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg mb-4">
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Amount</div>
                                                <div class="font-semibold text-gray-800">350 ETB</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Date</div>
                                                <div class="font-semibold text-gray-800">Jan 28, 2024</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Status</div>
                                                <div class="font-semibold text-green-600">Delivered</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Payment Method</div>
                                                <div class="font-semibold text-gray-800">Telebirr</div>
                                            </div>
                                        </div>

                                        <div class="flex gap-2">
                                            <button
                                                class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium">
                                                Access Materials
                                            </button>
                                            <button
                                                class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium">
                                                Download Invoice
                                            </button>
                                            <button
                                                class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium">
                                                Leave Review
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Purchase Card 4: Biology Lab Access Subscription -->
                                    <div
                                        class="card p-6 hover:shadow-lg transition-all duration-300 border-l-4 border-orange-500">
                                        <div class="flex items-start justify-between mb-4">
                                            <div class="flex items-center gap-4 flex-1">
                                                <div
                                                    class="w-16 h-16 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg flex items-center justify-center text-white text-2xl">
                                                    üî¨
                                                </div>
                                                <div class="flex-1">
                                                    <h4 class="font-bold text-lg text-gray-800 mb-1">Biology Lab Access
                                                        Subscription</h4>
                                                    <p class="text-sm text-gray-600">3-Month Premium Digital Lab Access
                                                    </p>
                                                    <div class="flex items-center gap-2 mt-2">
                                                        <span
                                                            class="bg-green-100 text-green-800 text-xs px-3 py-1 rounded-full font-semibold">Active</span>
                                                        <span
                                                            class="bg-orange-100 text-orange-800 text-xs px-3 py-1 rounded-full font-semibold">Subscription</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <div class="text-2xl font-bold text-orange-600">600 ETB</div>
                                                <div class="text-xs text-gray-500 mt-1">Feb 10, 2024</div>
                                            </div>
                                        </div>

                                        <div
                                            class="grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg mb-4">
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Amount</div>
                                                <div class="font-semibold text-gray-800">600 ETB</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Date</div>
                                                <div class="font-semibold text-gray-800">Feb 10, 2024</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Status</div>
                                                <div class="font-semibold text-green-600">Active</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Payment Method</div>
                                                <div class="font-semibold text-gray-800">Bank Transfer</div>
                                            </div>
                                        </div>

                                        <div class="mb-3 p-3 bg-orange-50 rounded-lg border border-orange-200">
                                            <div class="flex items-center justify-between text-sm">
                                                <span class="font-semibold text-orange-800">Subscription:</span>
                                                <span class="text-orange-600">Expires May 10, 2024 (60 days left)</span>
                                            </div>
                                        </div>

                                        <div class="flex gap-2">
                                            <button
                                                class="px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors text-sm font-medium">
                                                Access Lab
                                            </button>
                                            <button
                                                class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium">
                                                Renew Now
                                            </button>
                                            <button
                                                class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium">
                                                Download Invoice
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Purchase Card 5: SAT Prep Course with Mock Tests -->
                                    <div
                                        class="card p-6 hover:shadow-lg transition-all duration-300 border-l-4 border-indigo-500">
                                        <div class="flex items-start justify-between mb-4">
                                            <div class="flex items-center gap-4 flex-1">
                                                <div
                                                    class="w-16 h-16 bg-gradient-to-br from-indigo-500 to-blue-600 rounded-lg flex items-center justify-center text-white text-2xl">
                                                    üìù
                                                </div>
                                                <div class="flex-1">
                                                    <h4 class="font-bold text-lg text-gray-800 mb-1">SAT Prep Course
                                                        with Mock Tests</h4>
                                                    <p class="text-sm text-gray-600">Complete SAT Preparation (Math +
                                                        English + 10 Mock Tests)</p>
                                                    <div class="flex items-center gap-2 mt-2">
                                                        <span
                                                            class="bg-blue-100 text-blue-800 text-xs px-3 py-1 rounded-full font-semibold">Scheduled</span>
                                                        <span
                                                            class="bg-indigo-100 text-indigo-800 text-xs px-3 py-1 rounded-full font-semibold">Exam
                                                            Prep</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <div class="text-2xl font-bold text-indigo-600">1,500 ETB</div>
                                                <div class="text-xs text-gray-500 mt-1">Feb 15, 2024</div>
                                            </div>
                                        </div>

                                        <div
                                            class="grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg mb-4">
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Amount</div>
                                                <div class="font-semibold text-gray-800">1,500 ETB</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Date</div>
                                                <div class="font-semibold text-gray-800">Feb 15, 2024</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Status</div>
                                                <div class="font-semibold text-blue-600">Scheduled</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-gray-500 mb-1">Payment Method</div>
                                                <div class="font-semibold text-gray-800">Chapa Pay</div>
                                            </div>
                                        </div>

                                        <div class="mb-3 p-3 bg-indigo-50 rounded-lg border border-indigo-200">
                                            <div class="flex items-center gap-2 text-sm">
                                                <span class="font-semibold text-indigo-800">Course Start:</span>
                                                <span class="text-indigo-600">March 1, 2024 at 9:00 AM</span>
                                            </div>
                                        </div>

                                        <div class="flex gap-2">
                                            <button
                                                class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm font-medium">
                                                View Details
                                            </button>
                                            <button
                                                class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium">
                                                Add to Calendar
                                            </button>
                                            <button
                                                class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium">
                                                Download Invoice
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tutor Community Panel (Restructured to match Earnings-Investments pattern) -->
                    <div class="panel-content hidden" id="tutor-community-panel">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Community</h1>
                            <p class="text-gray-600">Connect with students, parents, tutors, and join events & clubs</p>
                        </div>

                        <!-- Main Section Cards (Clickable Cards instead of Tabs) -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                            <div onclick="switchCommunityMainTab('connections')" id="connections-main-tab"
                                class="card p-6 bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200 cursor-pointer hover:shadow-lg transition-all duration-200 community-main-card active-community-card"
                                style="display: flex; flex-direction: column; min-height: 140px; overflow: visible;">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-blue-600" style="font-size: 2.5rem; line-height: 1;">üë•</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-800 mb-2" style="line-height: 1.3;">Connections
                                </h3>
                                <p class="text-sm text-gray-600 mb-2" style="line-height: 1.4; flex-grow: 1;">Manage
                                    your network</p>
                                <p class="text-xs text-blue-600 font-medium" style="margin-top: auto;">Click to open</p>
                            </div>
                            <div onclick="switchCommunityMainTab('requests')" id="requests-main-tab"
                                class="card p-6 bg-gradient-to-br from-orange-50 to-amber-50 border-orange-200 cursor-pointer hover:shadow-lg transition-all duration-200 community-main-card"
                                style="display: flex; flex-direction: column; min-height: 140px; overflow: visible;">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-orange-600" style="font-size: 2.5rem; line-height: 1;">üì¨</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-800 mb-2" style="line-height: 1.3;">Requests</h3>
                                <p class="text-sm text-gray-600 mb-2" style="line-height: 1.4; flex-grow: 1;">Pending
                                    requests</p>
                                <p class="text-xs text-orange-600 font-medium" style="margin-top: auto;">Click to open
                                </p>
                            </div>
                            <div onclick="switchCommunityMainTab('events')" id="events-main-tab"
                                class="card p-6 bg-gradient-to-br from-green-50 to-emerald-50 border-green-200 cursor-pointer hover:shadow-lg transition-all duration-200 community-main-card"
                                style="display: flex; flex-direction: column; min-height: 140px; overflow: visible;">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-green-600" style="font-size: 2.5rem; line-height: 1;">üìÖ</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-800 mb-2" style="line-height: 1.3;">Events</h3>
                                <p class="text-sm text-gray-600 mb-2" style="line-height: 1.4; flex-grow: 1;">Join &
                                    discover events</p>
                                <p class="text-xs text-green-600 font-medium" style="margin-top: auto;">Click to open
                                </p>
                            </div>
                            <div onclick="switchCommunityMainTab('clubs')" id="clubs-main-tab"
                                class="card p-6 bg-gradient-to-br from-purple-50 to-pink-50 border-purple-200 cursor-pointer hover:shadow-lg transition-all duration-200 community-main-card"
                                style="display: flex; flex-direction: column; min-height: 140px; overflow: visible;">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-purple-600" style="font-size: 2.5rem; line-height: 1;">üé≠</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-800 mb-2" style="line-height: 1.3;">Clubs</h3>
                                <p class="text-sm text-gray-600 mb-2" style="line-height: 1.4; flex-grow: 1;">Explore &
                                    join clubs</p>
                                <p class="text-xs text-purple-600 font-medium" style="margin-top: auto;">Click to open
                                </p>
                            </div>
                        </div>

                        <!-- Connections Tab Content -->
                        <div id="connections-main-tab-content" class="community-main-tab-content">
                            <!-- Sub-Section Tabs (Regular Tabs) -->
                            <div class="flex gap-4 mb-6 border-b border-gray-200">
                                <button onclick="toggleConnectionsSubSection('all')" id="all-connections-tab"
                                    class="connections-sub-tab px-6 py-3 font-semibold text-blue-600 border-b-2 border-blue-600 transition-all">
                                    All Connections
                                </button>
                                <button onclick="toggleConnectionsSubSection('students')" id="students-connections-tab"
                                    class="connections-sub-tab px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 transition-all">
                                    Students
                                </button>
                                <button onclick="toggleConnectionsSubSection('parents')" id="parents-connections-tab"
                                    class="connections-sub-tab px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 transition-all">
                                    Parents
                                </button>
                                <button onclick="toggleConnectionsSubSection('tutors')" id="tutors-connections-tab"
                                    class="connections-sub-tab px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 transition-all">
                                    Tutors
                                </button>
                            </div>

                            <!-- Connections Sub-Sections -->
                            <div class="space-y-8">
                                <!-- All Connections Section -->
                                <div id="all-connections-subsection" class="card p-6 connections-subsection">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-blue-600">üë•</span>
                                                All Connections
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">View all your connections in one place
                                            </p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <input type="text" id="all-connections-search"
                                                placeholder="Search connections..."
                                                class="p-2 border-2 rounded-lg text-sm"
                                                oninput="searchAllConnections(this.value)">
                                        </div>
                                    </div>
                                    <!-- Connections Grid -->
                                    <div id="all-connections-grid"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto min-h-[300px]">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- Students Section -->
                                <div id="students-connections-subsection"
                                    class="card p-6 connections-subsection hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-green-600">üë®‚Äçüéì</span>
                                                Student Connections
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Students you're teaching</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <input type="text" id="student-connections-search"
                                                placeholder="Search students..." class="p-2 border-2 rounded-lg text-sm"
                                                oninput="searchStudentConnections(this.value)">
                                        </div>
                                    </div>
                                    <div id="students-connections-grid"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto min-h-[300px]">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- Parents Section -->
                                <div id="parents-connections-subsection" class="card p-6 connections-subsection hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-orange-600">üë®‚Äçüë©‚Äçüëß</span>
                                                Parent Connections
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Parents you're connected with</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <input type="text" id="parent-connections-search"
                                                placeholder="Search parents..." class="p-2 border-2 rounded-lg text-sm"
                                                oninput="searchParentConnections(this.value)">
                                        </div>
                                    </div>
                                    <div id="parents-connections-grid"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto min-h-[300px]">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- Tutors Section -->
                                <div id="tutors-connections-subsection" class="card p-6 connections-subsection hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-purple-600">üë®‚Äçüè´</span>
                                                Tutor Connections
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Other tutors in your network</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <input type="text" id="tutor-connections-search"
                                                placeholder="Search tutors..." class="p-2 border-2 rounded-lg text-sm"
                                                oninput="searchTutorConnections(this.value)">
                                        </div>
                                    </div>
                                    <div id="tutors-connections-grid"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto min-h-[300px]">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Requests Tab Content (NEW) -->
                        <div id="requests-main-tab-content" class="community-main-tab-content hidden">
                            <!-- Request Summary Cards -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                                <div onclick="toggleRequestsSubSection('sent')"
                                    class="card p-6 bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200 cursor-pointer hover:shadow-lg transition-all duration-200 active-requests-card">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-blue-600 text-2xl">üì§</span>
                                        <span class="text-xs text-blue-600 font-semibold">SENT</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mb-1">Requests Sent</p>
                                    <h3 class="text-2xl font-bold text-gray-800" id="sent-requests-count">0</h3>
                                    <p class="text-xs text-blue-600 mt-2 font-medium">Click to view</p>
                                </div>
                                <div onclick="toggleRequestsSubSection('received')"
                                    class="card p-6 bg-gradient-to-br from-green-50 to-emerald-50 border-green-200 cursor-pointer hover:shadow-lg transition-all duration-200">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-green-600 text-2xl">üì•</span>
                                        <span class="text-xs text-green-600 font-semibold">RECEIVED</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mb-1">Requests Received</p>
                                    <h3 class="text-2xl font-bold text-gray-800" id="received-requests-count">0</h3>
                                    <p class="text-xs text-green-600 mt-2 font-medium">Click to view</p>
                                </div>
                            </div>

                            <!-- Requests Sub-Sections -->
                            <div class="space-y-8">
                                <!-- Requests Sent Section -->
                                <div id="sent-requests-subsection" class="card p-6 requests-subsection">
                                    <div class="mb-6">
                                        <div class="mb-4">
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-blue-600">üì§</span>
                                                Requests Sent
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Connection requests you've sent to
                                                others</p>
                                        </div>
                                        <!-- Status Filter Tabs -->
                                        <div class="flex items-center gap-2 border-b-2 border-gray-200">
                                            <button onclick="filterSentRequests('all')" data-status="all"
                                                class="sent-requests-status-tab px-4 py-2 font-medium text-sm border-b-2 border-blue-600 text-blue-600 transition-all">
                                                All Requests
                                            </button>
                                            <button onclick="filterSentRequests('pending')" data-status="pending"
                                                class="sent-requests-status-tab px-4 py-2 font-medium text-sm border-b-2 border-transparent text-gray-600 hover:text-gray-800 transition-all">
                                                Pending
                                            </button>
                                            <button onclick="filterSentRequests('accepted')" data-status="accepted"
                                                class="sent-requests-status-tab px-4 py-2 font-medium text-sm border-b-2 border-transparent text-gray-600 hover:text-gray-800 transition-all">
                                                Accepted
                                            </button>
                                            <button onclick="filterSentRequests('rejected')" data-status="rejected"
                                                class="sent-requests-status-tab px-4 py-2 font-medium text-sm border-b-2 border-transparent text-gray-600 hover:text-gray-800 transition-all">
                                                Rejected
                                            </button>
                                        </div>
                                    </div>
                                    <div id="sent-requests-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto min-h-[300px]">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- Requests Received Section -->
                                <div id="received-requests-subsection" class="card p-6 requests-subsection hidden">
                                    <div class="mb-6">
                                        <div class="mb-4">
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-green-600">üì•</span>
                                                Requests Received
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Connection requests from others
                                                waiting for your response</p>
                                        </div>
                                        <!-- Status Filter Tabs -->
                                        <div class="flex items-center gap-2 border-b-2 border-gray-200">
                                            <button onclick="filterReceivedRequests('all')" data-status="all"
                                                class="received-requests-status-tab px-4 py-2 font-medium text-sm border-b-2 border-green-600 text-green-600 transition-all">
                                                All Requests
                                            </button>
                                            <button onclick="filterReceivedRequests('pending')" data-status="pending"
                                                class="received-requests-status-tab px-4 py-2 font-medium text-sm border-b-2 border-transparent text-gray-600 hover:text-gray-800 transition-all">
                                                Pending
                                            </button>
                                            <button onclick="filterReceivedRequests('accepted')" data-status="accepted"
                                                class="received-requests-status-tab px-4 py-2 font-medium text-sm border-b-2 border-transparent text-gray-600 hover:text-gray-800 transition-all">
                                                Accepted
                                            </button>
                                            <button onclick="filterReceivedRequests('rejected')" data-status="rejected"
                                                class="received-requests-status-tab px-4 py-2 font-medium text-sm border-b-2 border-transparent text-gray-600 hover:text-gray-800 transition-all">
                                                Rejected
                                            </button>
                                        </div>
                                    </div>
                                    <div id="received-requests-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto min-h-[300px]">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Events Tab Content -->
                        <div id="events-main-tab-content" class="community-main-tab-content hidden">
                            <!-- Sub-Section Tabs (Regular Tabs like Connections) -->
                            <div class="flex gap-4 mb-6 border-b border-gray-200">
                                <button onclick="toggleEventsSubSection('all')" id="all-events-tab"
                                    class="events-sub-tab px-6 py-3 font-semibold text-blue-600 border-b-2 border-blue-600 transition-all">
                                    All Events
                                </button>
                                <button onclick="toggleEventsSubSection('my-events')" id="my-events-events-tab"
                                    class="events-sub-tab px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 transition-all">
                                    My Events
                                </button>
                                <button onclick="toggleEventsSubSection('discover')" id="discover-events-tab"
                                    class="events-sub-tab px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 transition-all">
                                    Discover Events
                                </button>
                                <button onclick="toggleEventsSubSection('joined')" id="joined-events-tab"
                                    class="events-sub-tab px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 transition-all">
                                    Joined Events
                                </button>
                                <button onclick="toggleEventsSubSection('upcoming')" id="upcoming-events-tab"
                                    class="events-sub-tab px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 transition-all">
                                    Upcoming Events
                                </button>
                            </div>

                            <!-- Events Sub-Sections -->
                            <div class="space-y-8">
                                <!-- All Events Section -->
                                <div id="all-events-subsection" class="card p-6 events-subsection">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-blue-600">üìÖ</span>
                                                All Events
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">View all events in one place</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <input type="text" id="all-events-search" placeholder="Search events..."
                                                class="p-2 border-2 rounded-lg text-sm"
                                                oninput="searchAllEvents(this.value)">
                                        </div>
                                    </div>
                                    <div id="all-events-grid"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- My Events Section -->
                                <div id="my-events-events-subsection" class="card p-6 events-subsection hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-green-600">üéØ</span>
                                                My Events
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Events you created and manage</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <button onclick="openModal('create-event-modal')"
                                                class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium">
                                                ‚ûï Create Event
                                            </button>
                                            <input type="text" id="my-events-search"
                                                placeholder="Search my events..." class="p-2 border-2 rounded-lg text-sm"
                                                oninput="searchMyEvents(this.value)">
                                        </div>
                                    </div>
                                    <div id="my-events-grid"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- Discover Events Section -->
                                <div id="discover-events-subsection" class="card p-6 events-subsection hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-purple-600">üîç</span>
                                                Discover Events
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Explore and join new events</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <input type="text" id="discover-events-search" placeholder="Search events..."
                                                class="p-2 border-2 rounded-lg text-sm"
                                                oninput="searchDiscoverEvents(this.value)">
                                        </div>
                                    </div>
                                    <div id="discover-events-grid"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- Joined Events Section -->
                                <div id="joined-events-subsection" class="card p-6 events-subsection hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-blue-600">‚úÖ</span>
                                                Joined Events
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Events you've registered for</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <input type="text" id="joined-events-search" placeholder="Search events..."
                                                class="p-2 border-2 rounded-lg text-sm"
                                                oninput="searchJoinedEvents(this.value)">
                                        </div>
                                    </div>
                                    <div id="joined-events-grid"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- Upcoming Events Section -->
                                <div id="upcoming-events-subsection" class="card p-6 events-subsection hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-green-600">üìÖ</span>
                                                Upcoming Events
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Upcoming events happening soon</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <input type="text" id="upcoming-events-search" placeholder="Search events..."
                                                class="p-2 border-2 rounded-lg text-sm"
                                                oninput="searchUpcomingEvents(this.value)">
                                        </div>
                                    </div>
                                    <div id="upcoming-events-grid"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Clubs Tab Content -->
                        <div id="clubs-main-tab-content" class="community-main-tab-content hidden">
                            <!-- Sub-Section Tabs (Regular Tabs like Connections) -->
                            <div class="flex gap-4 mb-6 border-b border-gray-200">
                                <button onclick="toggleClubsSubSection('all')" id="all-clubs-tab"
                                    class="clubs-sub-tab px-6 py-3 font-semibold text-purple-600 border-b-2 border-purple-600 transition-all">
                                    All Clubs
                                </button>
                                <button onclick="toggleClubsSubSection('my-clubs')" id="my-clubs-clubs-tab"
                                    class="clubs-sub-tab px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 transition-all">
                                    My Clubs
                                </button>
                                <button onclick="toggleClubsSubSection('discover')" id="discover-clubs-tab"
                                    class="clubs-sub-tab px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 transition-all">
                                    Discover Clubs
                                </button>
                                <button onclick="toggleClubsSubSection('joined')" id="joined-clubs-tab"
                                    class="clubs-sub-tab px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 transition-all">
                                    Joined Clubs
                                </button>
                                <button onclick="toggleClubsSubSection('upcoming')" id="upcoming-clubs-tab"
                                    class="clubs-sub-tab px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 transition-all">
                                    Upcoming Clubs
                                </button>
                            </div>

                            <!-- Clubs Sub-Sections -->
                            <div class="space-y-8">
                                <!-- All Clubs Section -->
                                <div id="all-clubs-subsection" class="card p-6 clubs-subsection">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-purple-600">üé≠</span>
                                                All Clubs
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">View all clubs in one place</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <input type="text" id="all-clubs-search" placeholder="Search clubs..."
                                                class="p-2 border-2 rounded-lg text-sm"
                                                oninput="searchAllClubs(this.value)">
                                        </div>
                                    </div>
                                    <div id="all-clubs-grid"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- My Clubs Section -->
                                <div id="my-clubs-clubs-subsection" class="card p-6 clubs-subsection hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-green-600">üéØ</span>
                                                My Clubs
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Clubs you created and manage</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <button onclick="openModal('create-club-modal')"
                                                class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium">
                                                ‚ûï Create Club
                                            </button>
                                            <input type="text" id="my-clubs-search" placeholder="Search my clubs..."
                                                class="p-2 border-2 rounded-lg text-sm"
                                                oninput="searchMyClubs(this.value)">
                                        </div>
                                    </div>
                                    <div id="my-clubs-grid"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>
                                
                                <!-- Discover Clubs Section -->
                                <div id="discover-clubs-subsection" class="card p-6 clubs-subsection hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-blue-600">üîç</span>
                                                Discover Clubs
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Explore and join new clubs</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <input type="text" id="discover-clubs-search" placeholder="Search clubs..."
                                                class="p-2 border-2 rounded-lg text-sm"
                                                oninput="searchDiscoverClubs(this.value)">
                                        </div>
                                    </div>
                                    <div id="discover-clubs-grid"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- Joined Clubs Section -->
                                <div id="joined-clubs-subsection" class="card p-6 clubs-subsection hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-blue-600">‚úÖ</span>
                                                Joined Clubs
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Clubs you've joined</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <input type="text" id="joined-clubs-search" placeholder="Search clubs..."
                                                class="p-2 border-2 rounded-lg text-sm"
                                                oninput="searchJoinedClubs(this.value)">
                                        </div>
                                    </div>
                                    <div id="joined-clubs-grid"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- Upcoming Clubs Section -->
                                <div id="upcoming-clubs-subsection" class="card p-6 clubs-subsection hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-green-600">üìÖ</span>
                                                Upcoming Clubs
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">New clubs launching soon</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <input type="text" id="upcoming-clubs-search" placeholder="Search clubs..."
                                                class="p-2 border-2 rounded-lg text-sm"
                                                oninput="searchUpcomingClubs(this.value)">
                                        </div>
                                    </div>
                                    <div id="upcoming-clubs-grid"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Settings Panel -->
                    <div id="settings-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Settings</h1>
                            <p class="text-gray-600">Manage your account settings and preferences</p>
                        </div>

                        <div class="settings-section">
                            <!-- Verify Personal Info Card -->
                            <div class="card p-8 cursor-pointer hover:shadow-lg transition-all duration-300 border-2 border-transparent hover:border-blue-500"
                                onclick="openVerifyPersonalInfoModal()">
                                <div class="flex items-center gap-6">
                                    <div class="flex-shrink-0">
                                        <div
                                            class="w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg">
                                            <span class="text-4xl">üîê</span>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="text-2xl font-bold mb-2 text-gray-800">Verify Personal Information
                                        </h3>
                                        <p class="text-gray-600 mb-3">
                                            Your personal details, contact information, and institutional affiliations
                                            <strong>require verification</strong>.
                                        </p>
                                    </div>
                                    <div class="flex-shrink-0">
                                        <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M9 5l7 7-7 7"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            <!-- Payment Method Card -->
                            <div class="card p-8 cursor-pointer hover:shadow-lg transition-all duration-300 border-2 border-transparent hover:border-green-500 mt-6"
                                onclick="openPaymentMethodModal()">
                                <div class="flex items-center gap-6">
                                    <div class="flex-shrink-0">
                                        <div
                                            class="w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg">
                                            <span class="text-4xl">üí≥</span>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="text-2xl font-bold mb-2 text-gray-800">Payment Method</h3>
                                        <p class="text-gray-600 mb-3">
                                            Set up your payment method to receive earnings from students.
                                        </p>
                                    </div>
                                    <div class="flex-shrink-0">
                                        <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M9 5l7 7-7 7"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            <!-- Subscription Card -->
                            <div class="card p-8 cursor-pointer hover:shadow-lg transition-all duration-300 border-2 border-transparent hover:border-purple-500 mt-6"
                                onclick="openSubscriptionModal()">
                                <div class="flex items-center gap-6">
                                    <div class="flex-shrink-0">
                                        <div
                                            class="w-20 h-20 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center shadow-lg">
                                            <span class="text-4xl">‚≠ê</span>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="text-2xl font-bold mb-2 text-gray-800">Subscription & Storage</h3>
                                        <p class="text-gray-600 mb-3">
                                            Upgrade your storage plan and enjoy boosted visibility on search and videos.
                                        </p>
                                    </div>
                                    <div class="flex-shrink-0">
                                        <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M9 5l7 7-7 7"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            <!-- Leave Astegni Card -->
                            <div class="card p-8 cursor-pointer hover:shadow-lg transition-all duration-300 border-2 border-transparent hover:border-red-500 mt-6"
                                onclick="openLeaveAstegniModal()">
                                <div class="flex items-center gap-6">
                                    <div class="flex-shrink-0">
                                        <div
                                            class="w-20 h-20 bg-gradient-to-br from-red-500 to-red-700 rounded-full flex items-center justify-center shadow-lg">
                                            <span class="text-4xl">üö™</span>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="text-2xl font-bold mb-2 text-gray-800">Leave Astegni</h3>
                                        <p class="text-gray-600 mb-3">
                                            Delete your account and all associated data permanently.
                                        </p>
                                    </div>
                                    <div class="flex-shrink-0">
                                        <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M9 5l7 7-7 7"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End of flex-1 div -->

                <!-- Right Sidebar Widgets (Persistent across all panels) -->
                <div class="right-widgets">

                    <!-- Recent Activity Widget -->
                    <div class="widget-card">
                        <h3 class="text-lg font-semibold mb-4">üîî Recent Activity</h3>
                        <div class="activity-ticker-container">
                            <div class="activity-ticker">
                                <div class="activity-item">
                                    <span class="text-blue-500">üìñ</span>
                                    <div class="flex-1 text-sm">
                                        <p class="text-gray-700">New student enrolled in Math</p>
                                        <p class="text-xs text-gray-500">2 hours ago</p>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <span class="text-yellow-500">‚≠ê</span>
                                    <div class="flex-1 text-sm">
                                        <p class="text-gray-700">5-star review received</p>
                                        <p class="text-xs text-gray-500">5 hours ago</p>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <span class="text-green-500">üí∞</span>
                                    <div class="flex-1 text-sm">
                                        <p class="text-gray-700">Payment received: ETB 2,500</p>
                                        <p class="text-xs text-gray-500">1 day ago</p>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <span class="text-purple-500">üìù</span>
                                    <div class="flex-1 text-sm">
                                        <p class="text-gray-700">New session request</p>
                                        <p class="text-xs text-gray-500">2 days ago</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Stats Widget -->
                    <div class="widget-card">
                        <h3 class="text-lg font-semibold mb-4">üìä This Week</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Sessions Completed</span>
                                <span class="font-semibold text-green-600">18/20</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-green-500 h-2 rounded-full" style="width: 90%"></div>
                            </div>

                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Hours Taught</span>
                                <span class="font-semibold text-blue-600">24h</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-blue-500 h-2 rounded-full" style="width: 75%"></div>
                            </div>

                            <!-- Fire Streak for Weekly Goals -->
                            <div class="mt-4 pt-3" style="border-top: 1px solid rgba(0,0,0,0.1);">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm text-gray-600 font-semibold">üî• Weekly Streak</span>
                                    <span class="font-bold text-orange-600">6 days</span>
                                </div>
                                <div class="flex gap-1 justify-between">
                                    <!-- Monday -->
                                    <div class="flex flex-col items-center gap-1" style="flex: 1;">
                                        <span class="text-2xl" title="Monday - Goal Achieved">üî•</span>
                                        <span class="text-xs text-gray-500">M</span>
                                    </div>
                                    <!-- Tuesday -->
                                    <div class="flex flex-col items-center gap-1" style="flex: 1;">
                                        <span class="text-2xl" title="Tuesday - Goal Achieved">üî•</span>
                                        <span class="text-xs text-gray-500">T</span>
                                    </div>
                                    <!-- Wednesday -->
                                    <div class="flex flex-col items-center gap-1" style="flex: 1;">
                                        <span class="text-2xl" title="Wednesday - Goal Achieved">üî•</span>
                                        <span class="text-xs text-gray-500">W</span>
                                    </div>
                                    <!-- Thursday -->
                                    <div class="flex flex-col items-center gap-1" style="flex: 1;">
                                        <span class="text-2xl" title="Thursday - Goal Achieved">üî•</span>
                                        <span class="text-xs text-gray-500">T</span>
                                    </div>
                                    <!-- Friday -->
                                    <div class="flex flex-col items-center gap-1" style="flex: 1;">
                                        <span class="text-2xl" title="Friday - Goal Achieved">üî•</span>
                                        <span class="text-xs text-gray-500">F</span>
                                    </div>
                                    <!-- Saturday -->
                                    <div class="flex flex-col items-center gap-1" style="flex: 1;">
                                        <span class="text-2xl" title="Saturday - Goal Achieved">üî•</span>
                                        <span class="text-xs text-gray-500">S</span>
                                    </div>
                                    <!-- Sunday -->
                                    <div class="flex flex-col items-center gap-1" style="flex: 1;">
                                        <span class="text-2xl opacity-30" title="Sunday - No Goal Yet">‚ö™</span>
                                        <span class="text-xs text-gray-500">S</span>
                                    </div>
                                </div>
                                <div class="text-xs text-center text-gray-500 mt-2">
                                    Keep the streak alive! üöÄ
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Today's Schedule Widget -->
                    <div class="widget-card">
                        <h3 class="text-lg font-semibold mb-4">üìÖ Today's Schedule</h3>
                        <div class="space-y-3">
                            <div class="p-3 bg-blue-50 rounded-lg">
                                <div class="flex justify-between items-center mb-1">
                                    <span class="text-sm font-semibold">Mathematics</span>
                                    <span class="text-xs text-gray-600">10:00 AM</span>
                                </div>
                                <div class="text-xs text-gray-600">Grade 10 - Online</div>
                            </div>
                            <div class="p-3 bg-green-50 rounded-lg">
                                <div class="flex justify-between items-center mb-1">
                                    <span class="text-sm font-semibold">Physics</span>
                                    <span class="text-xs text-gray-600">2:00 PM</span>
                                </div>
                                <div class="text-xs text-gray-600">Grade 11 - In-person</div>
                            </div>
                            <div class="p-3 bg-purple-50 rounded-lg">
                                <div class="flex justify-between items-center mb-1">
                                    <span class="text-sm font-semibold">Chemistry</span>
                                    <span class="text-xs text-gray-600">4:30 PM</span>
                                </div>
                                <div class="text-xs text-gray-600">Grade 12 - Online</div>
                            </div>
                            <button
                                class="w-full mt-2 px-4 py-2 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                View Full Schedule
                            </button>
                        </div>
                    </div>

                    <!-- Monthly Earnings Widget with Line Graph -->
                    <div class="widget-card"
                        style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);">
                        <div class="flex items-center justify-between mb-3">
                            <h3 id="widget-title" class="text-lg font-semibold">üí∞ Monthly Earnings</h3>
                            <select id="earnings-period-select"
                                style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; padding: 4px 8px; font-size: 12px; cursor: pointer;">
                                <option value="earnings" style="color: #333;">Earnings</option>
                                <option value="investments" style="color: #333;">Investments</option>
                            </select>
                        </div>

                        <div class="mb-4">
                            <div class="text-3xl font-bold mb-1">ETB <span id="current-month-earnings">0</span></div>
                            <div class="flex items-center gap-2 text-sm">
                                <span id="earnings-change" class="text-green-300">+0%</span>
                                <span id="change-label" style="opacity: 0.8;">vs last month</span>
                            </div>
                        </div>

                        <!-- Line Graph Canvas -->
                        <div style="position: relative; height: 120px; margin: 0 -1rem;">
                            <canvas id="earnings-line-chart"></canvas>
                        </div>

                        <!-- Month Labels -->
                        <div id="earnings-months-labels" class="flex justify-between text-xs mt-2"
                            style="opacity: 0.8;">
                            <!-- Will be populated by JavaScript -->
                        </div>

                        <!-- View Details Button -->
                        <button onclick="switchPanel('earnings-investments'); return false;"
                            class="mt-4 w-full py-2 px-4 bg-white text-purple-600 rounded-lg font-semibold hover:bg-purple-50 transition-colors shadow-md">
                            View Details ‚Üí
                        </button>
                    </div>
                </div>
                <!-- End of right-widgets -->

            </div>
            <!-- End of flex gap-6 container -->

        </div>
        <!-- End of container mx-auto px-4 -->
    </section>

    <!-- Bottom Widgets Section -->
    <section class="bottom-widgets" style="margin-top: 3rem; margin-bottom: 3rem;">
        <div class="container mx-auto px-4">
            <div class="bottom-widgets-grid"
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 1.5rem;">

                <!-- News Widget -->
                <div class="sidebar-widget news-widget card" onclick="openComingSoonModal('news')"
                    style="cursor: pointer; padding: 1.5rem; background: var(--card-bg); border-radius: 16px; transition: transform 0.3s ease, box-shadow 0.3s ease;"
                    onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 8px 16px rgba(0,0,0,0.1)'"
                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                    <div class="widget-header"
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0;">üì∞ Latest News</h3>
                        <a href="#" onclick="openComingSoonModal('news'); return false;"
                            style="color: var(--button-bg); text-decoration: none; font-size: 0.875rem;">View All</a>
                    </div>

                    <div class="news-carousel" style="position: relative; overflow: hidden;">
                        <div class="news-card-container" id="newsCardContainer">
                            <div class="news-card active" data-news-index="0"
                                style="opacity: 1; transition: opacity 0.5s ease;">
                                <div class="news-card-header"
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <span class="news-category-badge"
                                        style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">Education</span>
                                    <span class="news-time" style="color: var(--text-muted); font-size: 0.875rem;">2h
                                        ago</span>
                                </div>
                                <div class="news-card-image" style="margin-bottom: 1rem;">
                                    <img src="https://images.unsplash.com/photo-1427504494785-3a9ca7044f45?w=400"
                                        alt="Education News"
                                        style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px;">
                                </div>
                                <div class="news-card-content">
                                    <h4
                                        style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--heading);">
                                        New Education Reforms Transform Ethiopian Schools</h4>
                                    <p
                                        style="color: var(--text); opacity: 0.8; font-size: 0.875rem; line-height: 1.6; margin-bottom: 1rem;">
                                        Latest educational initiatives are revolutionizing how students learn across
                                        Ethiopia...</p>
                                    <div class="news-stats" style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                        <span class="news-stat"
                                            style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.875rem; color: var(--text-muted);">üî•
                                            Trending</span>
                                        <span class="news-stat"
                                            style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.875rem; color: var(--text-muted);">üëÅÔ∏è
                                            1.2k views</span>
                                        <span class="news-stat"
                                            style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.875rem; color: var(--text-muted);">üí¨
                                            45 comments</span>
                                    </div>
                                </div>
                            </div>
                            <div class="news-card" data-news-index="1"
                                style="display: none; opacity: 0; transition: opacity 0.5s ease;">
                                <div class="news-card-header"
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <span class="news-category-badge"
                                        style="background: linear-gradient(135deg, #f093fb, #f5576c); color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">Technology</span>
                                    <span class="news-time" style="color: var(--text-muted); font-size: 0.875rem;">5h
                                        ago</span>
                                </div>
                                <div class="news-card-image" style="margin-bottom: 1rem;">
                                    <img src="https://images.unsplash.com/photo-1488590528505-98d2b5aba04b?w=400"
                                        alt="Tech News"
                                        style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px;">
                                </div>
                                <div class="news-card-content">
                                    <h4
                                        style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--heading);">
                                        Digital Learning Platforms Surge in Popularity</h4>
                                    <p
                                        style="color: var(--text); opacity: 0.8; font-size: 0.875rem; line-height: 1.6; margin-bottom: 1rem;">
                                        Ethiopian students embrace online education tools for enhanced learning
                                        experiences...</p>
                                    <div class="news-stats" style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                        <span class="news-stat"
                                            style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.875rem; color: var(--text-muted);">üí°
                                            Innovation</span>
                                        <span class="news-stat"
                                            style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.875rem; color: var(--text-muted);">üëÅÔ∏è
                                            890 views</span>
                                        <span class="news-stat"
                                            style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.875rem; color: var(--text-muted);">üí¨
                                            32 comments</span>
                                    </div>
                                </div>
                            </div>
                            <div class="news-card" data-news-index="2"
                                style="display: none; opacity: 0; transition: opacity 0.5s ease;">
                                <div class="news-card-header"
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <span class="news-category-badge"
                                        style="background: linear-gradient(135deg, #4facfe, #00f2fe); color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">Career</span>
                                    <span class="news-time" style="color: var(--text-muted); font-size: 0.875rem;">1d
                                        ago</span>
                                </div>
                                <div class="news-card-image" style="margin-bottom: 1rem;">
                                    <img src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=400"
                                        alt="Career News"
                                        style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px;">
                                </div>
                                <div class="news-card-content">
                                    <h4
                                        style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--heading);">
                                        Top Skills Every Tutor Should Master in 2025</h4>
                                    <p
                                        style="color: var(--text); opacity: 0.8; font-size: 0.875rem; line-height: 1.6; margin-bottom: 1rem;">
                                        Professional development insights for educators to stay competitive and
                                        effective...</p>
                                    <div class="news-stats" style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                        <span class="news-stat"
                                            style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.875rem; color: var(--text-muted);">üìö
                                            Featured</span>
                                        <span class="news-stat"
                                            style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.875rem; color: var(--text-muted);">üëÅÔ∏è
                                            2.1k views</span>
                                        <span class="news-stat"
                                            style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.875rem; color: var(--text-muted);">üí¨
                                            67 comments</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bookstore Widget -->
                <div class="sidebar-widget bookstore-widget card" onclick="openComingSoonModal('store')"
                    style="cursor: pointer; padding: 1.5rem; background: var(--card-bg); border-radius: 16px; transition: transform 0.3s ease, box-shadow 0.3s ease;"
                    onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 8px 16px rgba(0,0,0,0.1)'"
                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                    <div class="widget-header"
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0; color: var(--heading);">üìö Bookstore
                        </h3>
                        <span
                            style="background: var(--button-bg); color: white; padding: 0.5rem 0.75rem; border-radius: 8px; font-size: 0.75rem; font-weight: 600;">Coming
                            Soon</span>
                    </div>

                    <!-- Bookstore Content -->
                    <div class="bookstore-content">
                        <div class="bookstore-main" style="text-align: center; margin-bottom: 1.5rem;">
                            <div class="bookstore-icon" style="font-size: 4rem; margin-bottom: 0.5rem;">üìñ</div>
                            <div class="bookstore-title-animated"
                                style="position: relative; height: 2.5rem; overflow: hidden;">
                                <div class="bookstore-title"
                                    style="font-size: 1.5rem; font-weight: bold; margin-bottom: 0.5rem; color: var(--heading); position: absolute; width: 100%; opacity: 1; transition: opacity 0.6s ease, transform 0.6s ease;">
                                    Educational Books</div>
                            </div>
                            <div class="bookstore-subtitle" style="font-size: 1rem; color: var(--text);">Buy, Sell &
                                Rent Textbooks</div>
                        </div>
                        <div class="bookstore-features"
                            style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                            <div class="feature-item"
                                style="background: var(--highlight-bg); padding: 0.75rem; border-radius: 8px; text-align: center;">
                                <span style="display: block; font-size: 1.5rem; margin-bottom: 0.25rem;">üìó</span>
                                <span style="display: block; font-size: 0.875rem; color: var(--text);">New Books</span>
                            </div>
                            <div class="feature-item"
                                style="background: var(--highlight-bg); padding: 0.75rem; border-radius: 8px; text-align: center;">
                                <span style="display: block; font-size: 1.5rem; margin-bottom: 0.25rem;">üìò</span>
                                <span style="display: block; font-size: 0.875rem; color: var(--text);">Used Books</span>
                            </div>
                            <div class="feature-item"
                                style="background: var(--highlight-bg); padding: 0.75rem; border-radius: 8px; text-align: center;">
                                <span style="display: block; font-size: 1.5rem; margin-bottom: 0.25rem;">üí∞</span>
                                <span style="display: block; font-size: 0.875rem; color: var(--text);">Best
                                    Prices</span>
                            </div>
                            <div class="feature-item"
                                style="background: var(--highlight-bg); padding: 0.75rem; border-radius: 8px; text-align: center;">
                                <span style="display: block; font-size: 1.5rem; margin-bottom: 0.25rem;">üöö</span>
                                <span style="display: block; font-size: 0.875rem; color: var(--text);">Fast
                                    Delivery</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gamestore Widget -->
                <div class="sidebar-widget gamestore-widget card" onclick="openComingSoonModal('gamestore')"
                    style="cursor: pointer; padding: 1.5rem; background: var(--card-bg); border-radius: 16px; transition: transform 0.3s ease, box-shadow 0.3s ease;"
                    onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 8px 16px rgba(0,0,0,0.1)'"
                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                    <div class="widget-header"
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0; color: var(--heading);">üéÆ Gamestore
                        </h3>
                        <span
                            style="background: var(--button-bg); color: white; padding: 0.5rem 0.75rem; border-radius: 8px; font-size: 0.75rem; font-weight: 600;">Coming
                            Soon</span>
                    </div>
                    <div class="gamestore-content">
                        <div class="gamestore-main" style="text-align: center; margin-bottom: 1.5rem;">
                            <div class="gamestore-icon" style="font-size: 4rem; margin-bottom: 0.5rem;">üéÆ</div>
                            <div class="gamestore-title-animated"
                                style="position: relative; height: 2.5rem; overflow: hidden;">
                                <div class="gamestore-title"
                                    style="font-size: 1.5rem; font-weight: bold; margin-bottom: 0.5rem; color: var(--heading); position: absolute; width: 100%; opacity: 1; transition: opacity 0.6s ease, transform 0.6s ease;">
                                    Educational Games</div>
                            </div>
                            <div class="gamestore-subtitle" style="font-size: 1rem; color: var(--text);">Learn While
                                Playing</div>
                        </div>
                        <div class="gamestore-features"
                            style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                            <div class="feature-item"
                                style="background: var(--highlight-bg); padding: 0.75rem; border-radius: 8px; text-align: center;">
                                <span style="display: block; font-size: 1.5rem; margin-bottom: 0.25rem;">üßÆ</span>
                                <span style="display: block; font-size: 0.875rem; color: var(--text);">Puzzle
                                    Games</span>
                            </div>
                            <div class="feature-item"
                                style="background: var(--highlight-bg); padding: 0.75rem; border-radius: 8px; text-align: center;">
                                <span style="display: block; font-size: 1.5rem; margin-bottom: 0.25rem;">üéØ</span>
                                <span style="display: block; font-size: 0.875rem; color: var(--text);">Strategy
                                    Games</span>
                            </div>
                            <div class="feature-item"
                                style="background: var(--highlight-bg); padding: 0.75rem; border-radius: 8px; text-align: center;">
                                <span style="display: block; font-size: 1.5rem; margin-bottom: 0.25rem;">üèÜ</span>
                                <span style="display: block; font-size: 0.875rem; color: var(--text);">Top Rated</span>
                            </div>
                            <div class="feature-item"
                                style="background: var(--highlight-bg); padding: 0.75rem; border-radius: 8px; text-align: center;">
                                <span style="display: block; font-size: 1.5rem; margin-bottom: 0.25rem;">üéÅ</span>
                                <span style="display: block; font-size: 0.875rem; color: var(--text);">Free to
                                    Play</span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>
    
    <!-- Coursework Loading Spinner -->
    <div id="courseworkLoadingSpinner" class="coursework-loading-spinner">
        <div class="coursework-spinner"></div>
    </div>

    <!-- Coursework Toast Notification -->
    <div id="courseworkToast" class="coursework-toast-notification"></div>

    <!-- ========== END QUIZ MODALS ========== -->


    <!-- Enhanced Footer -->
    <footer class="footer-section" id="footer" role="contentinfo">
        <div class="footer-wave" aria-hidden="true">
            <svg viewBox="0 0 1440 120" preserveAspectRatio="none">
                <defs>
                    <linearGradient id="wave-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:var(--footer-accent);stop-opacity:0" />
                        <stop offset="25%" style="stop-color:var(--footer-accent);stop-opacity:1" />
                        <stop offset="75%" style="stop-color:var(--footer-hover);stop-opacity:1" />
                        <stop offset="100%" style="stop-color:var(--footer-hover);stop-opacity:0" />
                    </linearGradient>
                </defs>
                <!-- Main wave fill with explicit class -->
                <path class="wave-fill"
                    d="M0,64L48,69.3C96,75,192,85,288,80C384,75,480,53,576,48C672,43,768,53,864,58.7C960,64,1056,64,1152,58.7C1248,53,1344,43,1392,37.3L1440,32L1440,120L1392,120C1344,120,1248,120,1152,120C1056,120,960,120,864,120C768,120,672,120,576,120C480,120,384,120,288,120C192,120,96,120,48,120L0,120Z">
                </path>
                <!-- Animated line following the wave curve -->
                <path class="wave-line"
                    d="M0,64L48,69.3C96,75,192,85,288,80C384,75,480,53,576,48C672,43,768,53,864,58.7C960,64,1056,64,1152,58.7C1248,53,1344,43,1392,37.3L1440,32">
                </path>
            </svg>
        </div>

        <div class="container">
            <div class="footer-content">
                <div class="footer-section-item">
                    <h3 class="footer-title">About Astegni</h3>
                    <p class="footer-description">Ethiopia's premier educational platform connecting students with
                        expert tutors and quality learning resources.</p>
                    <div class="footer-stats">
                        <div class="stat-item">
                            <span class="stat-number">10k+</span>
                            <span class="stat-label">Active Users</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">500+</span>
                            <span class="stat-label">Courses</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">95%</span>
                            <span class="stat-label">Success Rate</span>
                        </div>
                    </div>
                </div>

                <div class="footer-section-item">
                    <h3 class="footer-title">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#" class="footer-link">About Us</a></li>
                        <li><a href="#" class="footer-link">How It Works</a></li>
                        <li><a href="#" class="footer-link">Pricing</a></li>
                        <li><a href="#" class="footer-link">Success Stories</a></li>
                        <li><a href="#" class="footer-link">Blog</a></li>
                        <li><a href="#" class="footer-link">Careers</a></li>
                    </ul>
                </div>

                <div class="footer-section-item">
                    <h3 class="footer-title">Support</h3>
                    <ul class="footer-links">
                        <li><a href="#" class="footer-link">Help Center</a></li>
                        <li><a href="#" class="footer-link">Contact Us</a></li>
                        <li><a href="#" class="footer-link">FAQs</a></li>
                        <li><a href="#" class="footer-link">Terms of Service</a></li>
                        <li><a href="#" class="footer-link">Privacy Policy</a></li>
                        <li><a href="#" class="footer-link">Safety</a></li>
                    </ul>
                </div>

                <div class="footer-section-item">
                    <h3 class="footer-title">Connect With Us</h3>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook" class="social-link" target="_blank" rel="noopener noreferrer">
                            <svg class="w-6 h-6" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3V2z"></path>
                            </svg>
                        </a>
                        <a href="#" aria-label="Twitter" class="social-link" target="_blank" rel="noopener noreferrer">
                            <svg class="w-6 h-6" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z">
                                </path>
                            </svg>
                        </a>
                        <a href="#" aria-label="LinkedIn" class="social-link" target="_blank" rel="noopener noreferrer">
                            <svg class="w-6 h-6" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z">
                                </path>
                                <circle cx="4" cy="4" r="2"></circle>
                            </svg>
                        </a>
                        <a href="#" aria-label="Instagram" class="social-link" target="_blank"
                            rel="noopener noreferrer">
                            <svg class="w-6 h-6" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                                <path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"></path>
                                <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                            </svg>
                        </a>
                        <a href="https://www.youtube.com/@Astegni" aria-label="YouTube" class="social-link"
                            target="_blank" rel="noopener noreferrer">
                            <svg class="w-6 h-6" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M22.54 6.42a2.78 2.78 0 00-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 00-1.94 2A29 29 0 001 12a29 29 0 00.46 5.58A2.78 2.78 0 003.4 19.6c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 001.94-2A29 29 0 0023 12a29 29 0 00-.46-5.58zM9.75 15.02V8.98L15.5 12l-5.75 3.02z">
                                </path>
                            </svg>
                        </a>
                    </div>

                    <div class="newsletter-signup">
                        <h4>Subscribe to Newsletter</h4>
                        <form class="newsletter-form" id="newsletterForm">
                            <input type="email" placeholder="Your email address" class="newsletter-input"
                                id="emailInput" aria-label="Email address" required>
                            <button type="submit" class="newsletter-btn" id="submitBtn">Subscribe</button>
                            <div class="newsletter-feedback" id="feedback"></div>
                        </form>
                    </div>
                </div>
            </div>

            <div class="footer-bottom-content">
                <div class="footer-badges">
                    <div class="company-brand">
                        <span>From the deep of</span>
                        <span class="trademark-symbol">‚Ñ¢</span>
                        <span class="company-text">Eshtaol</span>
                    </div>
                    <a href="tel:+251935244245" class="phone-link">
                        <span class="phone-icon">üìû</span>
                        <span>+251-935-24-42-45</span>
                        <span>+251-997-40-98-66</span>
                    </a>
                </div>
                <div class="footer-badges">
                    <p class="copyright">¬© </p>
                    <p>2025 Astegni. All rights reserved.</p>
                </div>
                <div class="footer-badges">
                    <span class="badge glow" tabindex="0">üîí SSL Secured</span>
                    <span class="badge" tabindex="0">‚úì Verified Platform</span>
                    <span class="badge" tabindex="0">üèÜ Future Awards Winner</span>
                </div>
            </div>
            <!-- TODO: counting cards should count from users where role = 'parent', 'student', 'tutor', etc... register-modal, reviews section professional-reviews-card should be enhanced. -->
        </div>
    </footer>

    <!-- Scripts -->
    <script src="../js/root/default-avatar.js"></script>
    <script src="../js/root/app.js"></script>
    <script src="../js/root/auth.js"></script>
    <script src="../js/root/theme-toggle.js"></script>

    <!-- ============================================ -->
    <!-- PAGE STRUCTURE SCRIPTS - FULLY MODULARIZED  -->
    <!-- Import only what tutor profile needs         -->
    <!-- ============================================ -->

    <!-- Core State & Utilities (Required by most features) -->
    <script src="../js/page-structure/stateManager.js"></script>
    <script src="../js/page-structure/utilsManager.js"></script>

    <!-- Modal System -->
    <script src="../js/page-structure/modalManager.js"></script>
    <script src="../js/page-structure/modalActionsManager.js"></script>

    <!-- Profile & Schedule Functions (For edit profile, schedule modals) -->
    <script src="../js/page-structure/profileFunctionsManager.js"></script>

    <!-- Navigation -->
    <script src="../js/page-structure/navigationManager.js"></script>

    <!-- Content Actions (For content management) -->
    <script src="../js/page-structure/contentActionsManager.js"></script>

    <!-- Optional: Uncomment if needed -->
    <!-- <script src="../js/page-structure/contentFilterManager.js"></script> --> <!-- For filtering content -->
    <!-- <script src="../js/page-structure/adPackageFunctionsManager.js"></script> --> <!-- For ad packages -->
    <!-- <script src="../js/page-structure/aiInsightsManager.js"></script> --> <!-- For journalist AI features -->
    <!-- <script src="../js/page-structure/deliveryManager.js"></script> --> <!-- For delivery tracking -->

    <!-- Initialization (Auto-initializes all loaded managers) -->
    <script src="../js/page-structure/initializationManager.js"></script>

    <!-- Profile System -->
    <script src="../js/root/profile-system.js?v=20251122"></script>

    <!-- Common Modals -->
    <script src="../js/index/init-modals.js"></script>
    <script src="../js/common-modals/coming-soon-modal.js"></script>
    <script src="../js/common-modals/ad-modal.js"></script>

    <!-- Stats Counter for Hero Section -->
    <script src="../js/find-tutors/stats-counter.js"></script>

    <!-- ============================================ -->
    <!-- TUTOR PROFILE MODULES (Modularized)         -->
    <!-- Load in strict order for proper initialization -->
    <!-- ============================================ -->

    <!-- 1. State Management (Must load first) -->
    <script src="../js/tutor-profile/state-manager.js"></script>

    <!-- 1.5 Resource Manager (Shared with student) -->
    <script src="../js/student-profile/resource-manager.js"></script>

    <!-- 2. API Service -->
    <script src="../js/tutor-profile/api-service.js"></script>

    <!-- 3. UI Manager -->
    <script src="../js/tutor-profile/ui-manager.js"></script>

    <!-- 4. Modal Manager -->
    <script src="../js/tutor-profile/modal-manager.js"></script>




    <!-- 5. Upload Handler -->
    <script src="../js/tutor-profile/upload-handler.js"></script>

    <!-- 6. Main Controller -->
    <script src="../js/tutor-profile/profile-controller.js"></script>

    <!-- 6.25. Session Request Manager (MUST load before panel-manager.js) -->
    <script src="../js/tutor-profile/session-request-manager.js"></script>

    <!-- 6.5. Panel Manager (for sidebar panel switching) -->
    <script src="../js/tutor-profile/panel-manager.js"></script>

    <!-- 6.75. Modal Loader (MUST load before global-functions.js) -->
    <script src="../modals/tutor-profile/modal-loader.js"></script>

    <!-- 7. Global Functions (for HTML onclick handlers) -->
    <script src="../js/tutor-profile/global-functions.js?v=20251122"></script>

    <!-- 7.5 Schedule Tab Manager (3-tab interface for schedule panel) -->
    <script src="../js/tutor-profile/schedule-tab-manager.js"></script>

    <!-- 8. Additional Features -->

    <!-- 9. NEW: Backend Integration Modules -->
    <script src="../js/tutor-profile/earnings-widget.js"></script>
    <script src="../js/tutor-profile/bookstore-widget.js"></script>
    <script src="../js/tutor-profile/gamestore-widget.js"></script>
    <script src="../js/tutor-profile/image-upload-handler.js"></script>
    <script src="../js/tutor-profile/profile-edit-handler.js"></script>
    <script src="../js/tutor-profile/package-manager-clean.js"></script>
    <script src="../js/tutor-profile/course-request-manager.js"></script>
    <script src="../js/tutor-profile/market-trend-functions.js"></script>
    <script src="../js/tutor-profile/reviews-panel-manager.js?v=20251122"></script>

    <!-- 10. Shared Utilities -->
    <script src="../js/shared/sidebar-toggle.js"></script>

    <!-- Folder Manager (for document folders) -->
    <script src="../js/shared/folder-manager.js"></script>

    <script src="../js/root/testimonials-widget.js"></script>
    <script>
        TestimonialsWidget.init('testimonials', 'parent-profile', 6);
    </script>

    <!-- Whiteboard System -->
    <script src="../js/tutor-profile/whiteboard-manager.js"></script>

    <!-- Quill.js Rich Text Editor -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

    <!-- Quiz Management System -->
    <script src="../js/tutor-profile/coursework-manager.js"></script>

    <!-- Profile Extensions Manager (Certifications, Achievements, Experience) -->
    <script src="../js/tutor-profile/profile-extensions-manager.js"></script>

    <!-- Credential Manager (Academic Certificates, Achievements, Experience) -->
    <script src="../js/tutor-profile/credential-manager.js"></script>

    <!-- Earnings & Investments Manager -->
    <script src="../js/tutor-profile/earnings-investments-manager.js"></script>

    <!-- Student-Specific Managers for Teaching Panel -->
    <!-- Note: StudentWhiteboardManager is now included in whiteboard-manager.js -->
    <!-- Note: StudentCourseworkManager is now included in coursework-manager.js -->

    <!-- 11. Initialize (MUST BE LAST) -->
    <!-- Events and Clubs Manager -->
    <script src="../js/tutor-profile/events-clubs-manager.js"></script>

    <!-- Community Panel Data Loader (NEW: Fetches and displays connections, events, clubs) 
    <script src="../js/tutor-profile/community-panel-data-loader.js"></script>

    Community Panel Integration (NEW: Hooks into panel switching) 
    <script src="../js/tutor-profile/community-panel-integration.js"></script> -->

    <!-- Community Manager (Database Integration - Class Definition) -->
    <script src="../js/page-structure/communityManager.js"></script>

    <!-- Tutor Community Panel Manager (NEW: Handles Community panel with database integration) -->
    <script src="../js/tutor-profile/community-panel-manager.js?v=20251122"></script>

    <!-- Community Search & Filter Functions -->
    <script src="../js/tutor-profile/community-search-filter.js"></script>

    <!-- Community Panel Debug Console (DEVELOPMENT ONLY - Remove in production) -->
    <script src="../js/tutor-profile/community-panel-debug.js"></script>

    <script src="../js/tutor-profile/community-modal-manager.js"></script>

    <script src="../js/tutor-profile/init.js"></script>

    <!-- Settings Panel & Verify Personal Info Modal JavaScript -->
    <script src="../js/tutor-profile/settings-panel-personal-verification.js"></script>

    <!-- Edit Profile Modal JavaScript (Grade Levels, Languages, Locations, Courses) -->
    <script src="../js/tutor-profile/edit-profile-modal.js"></script>

    <!-- Hero Section Typewriter Animation -->
    <script src="../js/tutor-profile/hero-section.js"></script>

    <!-- Profile Header Data Loading JavaScript -->
     <script src="../js/tutor-profile/profile-data-loader.js"></script>
    <script>
        // Initialize profile data loader
        document.addEventListener("DOMContentLoaded", () => {
            if (typeof TutorProfileDataLoader !== "undefined") {
                TutorProfileDataLoader.init();
            }

            // Initialize folder manager for tutor profile
            if (typeof initializeFolderManager === 'function') {
                initializeFolderManager('tutor');
            }
        });
    </script>
    
    <!-- Rating Display Update JavaScript (4-Factor Rating System) -->
    <script src="../js/tutor-profile/rating-display-update.js"></script>

    <!-- Payment Method Modal JavaScript -->
    <script src="../js/tutor-profile/payment-method-modal.js"></script>

    <!-- Subscription Modal JavaScript -->
    <script src="../js/tutor-profile/subscription-modal.js"></script>

    <!-- Leave Astegni Modal JavaScript -->
    <script src="../js/tutor-profile/leave-astegni-modal.js"></script>

    <!-- Logout Modal JavaScript -->
    <script src="../js/common-modals/logout-modal.js"></script>

    <!-- ==================== MODAL LOADER INTEGRATION ==================== -->
    <!-- Modal Container: All modals will be loaded here dynamically -->
    <div id="modal-container"></div>

    <!-- Modal Loader Script: Moved earlier in load order (before global-functions.js) -->
    <!-- See line 3879 for modal-loader.js script tag -->

    <!-- Modal Open Fix: Loads external modals on-demand (working version) -->
    <script src="../modals/tutor-profile/modal-open-fix-simple.js"></script>

    <!--
        LAZY LOADING ENABLED (Performance Mode)
        Modals will load automatically when first accessed.
        No manual preloading required - modal-loader.js handles this.

        Modal opening is automatically fixed - all show functions wrapped.
    -->
    <!-- ================================================================== -->

    <!-- Coming Soon Modal - Loaded dynamically from modals/common-modals/coming-soon-modal.html -->

    <!-- Toast Notification Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Chat Modal Container (loaded dynamically) -->
    <div id="chat-modal-container"></div>

    <!-- Chat Modal JavaScript -->
    <script src="../js/common-modals/chat-modal.js"></script>
    <script src="../js/common-modals/view-request-modal.js"></script>
    <script>
        // Load chat modal HTML dynamically
        (function loadChatModal() {
            fetch('../modals/common-modals/chat-modal.html')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('chat-modal-container').innerHTML = html;
                    // Re-initialize chat modal after HTML is loaded
                    if (typeof ChatModalManager !== 'undefined') {
                        ChatModalManager.init();
                    }
                })
                .catch(err => console.log('Chat modal will load on demand:', err.message));
        })();
    </script>

</body>
</html>
