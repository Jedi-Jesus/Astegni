<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>ASTEGNI - Tutor Profile</title>
    <!-- TailwindCSS CDN -->
    <script src="../js/config.js?v=20260216"></script>
    <!-- Safe wrapper for openChatModal - waits for function to be available -->
    <script>
        // Temporary stub - will be replaced by chat-modal.js when it loads
        if (!window.openChatModal) {
            window.openChatModal = function (targetUser = null) {
                if (typeof ChatModalManager !== 'undefined') {
                    ChatModalManager.open(targetUser);
                } else {
                    console.log('Chat modal not loaded yet, waiting...');
                    // Wait for chat modal to load
                    const checkInterval = setInterval(function () {
                        if (typeof ChatModalManager !== 'undefined') {
                            clearInterval(checkInterval);
                            ChatModalManager.open(targetUser);
                        }
                    }, 100);
                    // Stop checking after 10 seconds
                    setTimeout(function () {
                        clearInterval(checkInterval);
                    }, 10000);
                }
            };
        }
    </script>
    <!-- Active Role Guard - Prevents access to deactivated roles -->
    <script src="../js/root/active-role-guard.js"></script>
    <!-- Preconnect for faster font loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Google Fonts - For Appearance Modal Font Selection -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto:wght@400;500;700&family=Open+Sans:wght@400;600;700&family=Comic+Neue:wght@400;700&family=Caveat:wght@400;500;600;700&family=Patrick+Hand&family=Dancing+Script:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Animate.css for animations -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <!-- Custom Styles -->
    <link rel="stylesheet" href="../css/root.css?v=20260206-adblocker-fix">
    <!-- Mobile Menu Styles from find-tutors -->
    <link rel="stylesheet" href="../css/find-tutors/navbar.css">
    <!-- Shared Profile Responsive Styles -->
    <link rel="stylesheet" href="../css/shared/profile-responsive.css">
    <!-- Tutor Profile Specific Right Widgets -->
    <link rel="stylesheet" href="../css/tutor-profile/right-widgets.css?v=20260216-responsive-fix">
    <link rel="stylesheet" href="../css/tutor-profile/tutor-profile.css">
    <link rel="stylesheet" href="../css/view-tutor/view-tutor.css">
    <!-- Package Modal Unified Styles (consolidated from enhanced, fix, and responsive) -->
    <link rel="stylesheet" href="../css/tutor-profile/package-modal-unified.css?v=20260204k">
    <link rel="stylesheet" href="../css/tutor-profile/whiteboard-modal.css">
    <!-- Quiz Modal Styles -->
    <link rel="stylesheet" href="../css/tutor-profile/coursework-modal.css">
    <!-- Community Modal Styles -->
    <link rel="stylesheet" href="../css/common-modals/community-modal.css">
    <!-- Reviews Panel Styles -->
    <link rel="stylesheet" href="../css/tutor-profile/reviews-panel.css">
    <!-- Credentials Panel Styles -->
    <link rel="stylesheet" href="../css/tutor-profile/credentials-panel.css">
    <!-- Requests Panel Styles -->
    <link rel="stylesheet" href="../css/tutor-profile/requests-panel.css">
    <!-- Quill.js Rich Text Editor -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/find-tutors/hero-section.css">
    <!-- Shared Modal Styles -->
    <link rel="stylesheet" href="../css/common-modals/access-restricted-modal.css">
    <link rel="stylesheet" href="../css/common-modals/add-role-modal.css">
    <link rel="stylesheet" href="../css/common-modals/coming-soon-modal.css">
    <link rel="stylesheet" href="../css/common-modals/ad-modal.css">
    <link rel="stylesheet" href="../css/common-modals/appearance-modal.css">
    <link rel="stylesheet" href="../css/common-modals/upload-document-modal.css">
    <link rel="stylesheet" href="../css/common-modals/delete-credential-modal.css">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="../css/root/testimonials-widget.css">
    <!-- Finance/Settings Modal Styles -->
    <link rel="stylesheet" href="../css/plug-ins/finance.css">
    <!-- Chat Modal Styles -->
    <link rel="stylesheet" href="../css/common-modals/chat-modal.css">
    <!-- Standalone Chat Call Modal Styles -->
    <link rel="stylesheet" href="../css/common-modals/chat-call-modal.css">
    <link rel="stylesheet" href="../css/common-modals/view-request-modal.css">
    <link rel="stylesheet" href="../css/common-modals/view-schedule-modal.css">
    <link rel="stylesheet" href="../css/common-modals/confirm-delete-schedule-modal.css">
    <link rel="stylesheet" href="../css/common-modals/digital-lab-modal.css">
    <!-- Advanced Notes Styles -->
    <link rel="stylesheet" href="../css/common-modals/advanced-notes.css">
    <!-- Market Trend Styles -->
    <link rel="stylesheet" href="../css/tutor-profile/market-trend-styles.css">

    <!-- Minimal inline styles - only for profile-specific fixes -->
    <link rel="stylesheet" href="../css/tutor-profile/profile-specific-fix.css?v=20260216-inherit">

    <!-- Comprehensive Responsive Styles - MUST be loaded LAST for responsive overrides -->
    <link rel="stylesheet" href="../css/tutor-profile/tutor-profile-responsive.css">

    <!-- Chart.js for Market Trends -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>

    <!-- Debug Script for Rating Tooltip -->
    <script src="../js/tutor-profile/debug-rating-tooltip.js"></script>

    <!-- Sessions Panel Manager - Load early to ensure functions are available for onclick handlers -->
    <script src="../js/tutor-profile/sessions-panel-manager.js?v=20260130h"></script>

    <!-- Schedule Panel Manager - Load early to ensure filterSchedulesByRole is available for onclick handlers -->
    <script src="../js/tutor-profile/schedule-panel-manager-NEW.js?v=20260204y"></script>

    <!-- Today's Schedule Widget -->
    <script src="../js/tutor-profile/today-schedule-widget.js?v=20260205"></script>

    <!-- This Week's Schedule Widget -->
    <script src="../js/tutor-profile/week-schedule-widget.js?v=20260205"></script>
</head>

<body class="font-sans">
    <!-- <Loading Screen> -->
    <div id="loading-screen" class="loading-screen">
        <div class="loader">
            <div class="loader-circle"></div>
            <div class="loader-circle"></div>
            <div class="loader-circle"></div>
        </div>
        <h2 class="loading-text">ASTEGNI</h2>
    </div>
    <script>
        // Hide loading screen only after page fully loads
        window.addEventListener('load', function () {
            // Wait for all resources (images, styles, scripts) to fully load
            setTimeout(() => {
                const loadingScreen = document.getElementById("loading-screen");
                if (loadingScreen) {
                    loadingScreen.classList.add("fade-out");
                    setTimeout(() => {
                        loadingScreen.style.display = "none";
                    }, 600);
                }
            }, 300); // Reduced delay since we're already waiting for full load
        });

        // Fallback: Force hide after 10 seconds if something goes wrong
        setTimeout(() => {
            const loadingScreen = document.getElementById("loading-screen");
            if (loadingScreen && loadingScreen.style.display !== "none") {
                loadingScreen.classList.add("fade-out");
                setTimeout(() => {
                    loadingScreen.style.display = "none";
                }, 600);
            }
        }, 10000);
    </script>

    <!-- Navigation -->
    <nav class="navbar" role="navigation" aria-label="Main navigation">
        <div class="nav-container" style="max-width: 100%; padding: 0 1rem;">
            <div class="nav-brand">
                <button class="sidebar-toggle" id="hamburger" aria-label="Toggle sidebar">
                    <span class="hamburger">
                        <span></span>
                        <span></span>
                        <span></span>
                    </span>
                </button>
                <a href="../index.html" class="logo-container">
                    <div class="logo-text">
                        <span class="logo-main">Astegni</span>
                        <span class="logo-sub">Tutor Profile</span>
                    </div>
                    <span class="logo-badge">Beta</span>
                </a>
            </div>

            <!-- Right Section: Nav Menu + Actions -->
            <div class="nav-actions" style="display: flex; align-items: center; gap: 0.5rem; margin-right: 0;">
                <!-- Navigation Links -->
                <div class="nav-items" style="display: flex; gap: 0.25rem;">
                    <a class="nav-link" href="#" onclick="handleNavLinkClick(event, 'news')">
                        <span class="nav-icon">üì∞</span> News
                    </a>
                    <a class="nav-link" href="../branch/find-tutors.html">
                        <span class="nav-icon">üë®‚Äçüè´</span> Find Tutors
                    </a>
                    <a class="nav-link" href="../branch/videos.html">
                        <span class="nav-icon">üé¨</span> Videos
                    </a>
                    <a class="nav-link" href="#" onclick="handleNavLinkClick(event, 'store')">
                        <span class="nav-icon">üìö</span> Bookstore
                    </a>
                    <a class="nav-link" href="#" onclick="handleNavLinkClick(event, 'find-jobs')">
                        <span class="nav-icon">üíº</span> Find a Job
                    </a>
                </div>
                <!-- Profile container -->
                <div id="profile-container" class="profile-dropdown-container">
                    <button id="profile-dropdown-toggle" class="profile-dropdown-toggle"
                        onclick="toggleProfileDropdown()">
                        <img id="profile-pic" class="profile-pic" alt="Profile">
                        <span id="profile-name" class="profile-name"></span>
                        <svg class="dropdown-arrow" width="12" height="12" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd"
                                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                clip-rule="evenodd"></path>
                        </svg>
                    </button>

                    <div id="profile-dropdown-menu" class="profile-dropdown-menu">
                        <!-- User info header - CLICKABLE to go to profile page -->
                        <a href="#" id="dropdown-profile-link" class="dropdown-header-link">
                            <div class="dropdown-header">
                                <img id="dropdown-profile-pic" class="profile-pic" alt="Profile">
                                <div class="dropdown-user-info">
                                    <span id="dropdown-user-name" class="dropdown-user-name"></span>
                                    <span id="dropdown-user-email" class="dropdown-user-email"></span>
                                    <span id="dropdown-user-role" class="dropdown-user-role"></span>
                                </div>
                                <svg class="dropdown-header-arrow" width="16" height="16" fill="currentColor"
                                    viewBox="0 0 20 20">
                                    <path fill-rule="evenodd"
                                        d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                                        clip-rule="evenodd"></path>
                                </svg>
                            </div>
                        </a>

                        <div class="dropdown-divider"></div>

                        <!-- Deletion Countdown Banner (shown when role is scheduled for deletion) -->
                        <div id="deletion-countdown-banner" class="deletion-countdown-banner hidden">
                            <div class="countdown-content">
                                <div class="countdown-icon">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                </div>
                                <div class="countdown-text">
                                    <div class="countdown-title">Role Scheduled for Deletion</div>
                                    <div class="countdown-details">
                                        Your <span id="countdown-role-name" class="font-semibold"></span> role will be
                                        deleted in
                                        <span id="countdown-days" class="font-bold text-orange-600"></span> days
                                    </div>
                                </div>
                            </div>
                            <button onclick="openAddRoleModal()" class="countdown-restore-btn">
                                Restore Role
                            </button>
                        </div>

                        <div class="dropdown-divider" id="countdown-divider" style="display: none;"></div>

                        <!-- Role switcher (shown only if user has multiple roles) -->
                        <div id="role-switcher-section" class="role-switcher-section hidden">
                            <div class="dropdown-item-header">Switch Role</div>
                            <div id="role-options" class="role-options">
                                <!-- Role options will be dynamically added here -->
                            </div>
                            <div class="dropdown-divider"></div>
                        </div>

                        <div class="dropdown-divider"></div>

                        <button class="dropdown-item logout-item" onclick="showLogoutModal()">
                            <svg class="dropdown-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1">
                                </path>
                            </svg>
                            Logout
                        </button>
                    </div>
                </div>

                <!-- Notification Icon -->
                <button class="icon-btn" aria-label="Notifications">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9">
                        </path>
                    </svg>
                    <span class="notification-badge">3</span>
                </button>

                <!-- Theme Toggle (Desktop) -->
                <button id="theme-toggle-btn" class="icon-btn desktop-only-lg" aria-label="Toggle theme">
                    <svg id="theme-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z">
                        </path>
                    </svg>
                </button>
            </div>

            <!-- Mobile Menu Button (< 1024px) -->
            <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle mobile menu">
                <span class="mobile-hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </span>
            </button>
        </div>
    </nav>

    <!-- Mobile Menu (< 1024px) -->
    <div id="mobileMenu" class="mobile-menu hidden">
        <div class="mobile-menu-content">
            <!-- Mobile Menu Header with Logo -->
            <div class="mobile-menu-header">
                <a href="tutor-profile.html" class="mobile-logo-container">
                    <div class="logo-text">
                        <span class="logo-main">Astegni</span>
                        <span class="logo-sub">Tutor Profile</span>
                    </div>
                    <span class="logo-badge">Beta</span>
                </a>
            </div>

            <div class="mobile-menu-divider"></div>

            <!-- Navigation Links -->
            <a class="mobile-menu-link" href="#" onclick="handleNavLinkClick(event, 'news'); closeMobileMenu();">
                <span class="nav-icon">üì∞</span> News
            </a>
            <a class="mobile-menu-link" href="../branch/find-tutors.html">
                <span class="nav-icon">üë®‚Äçüè´</span> Find Tutors
            </a>
            <a class="mobile-menu-link" href="../branch/videos.html">
                <span class="nav-icon">üé¨</span> Videos
            </a>
            <a class="mobile-menu-link" href="#" onclick="handleNavLinkClick(event, 'store'); closeMobileMenu();">
                <span class="nav-icon">üìö</span> Bookstore
            </a>
            <a class="mobile-menu-link" href="#" onclick="handleNavLinkClick(event, 'find-jobs'); closeMobileMenu();">
                <span class="nav-icon">üíº</span> Find a Job
            </a>

            <div class="mobile-menu-divider"></div>

            <!-- Mobile Profile Section -->
            <div id="mobile-profile-section" class="mobile-profile-section">
                <div class="mobile-profile-dropdown">
                    <button id="mobile-profile-header" class="mobile-profile-header"
                        onclick="toggleMobileProfileDropdown()">
                        <img id="mobile-profile-pic" class="mobile-profile-pic" src="" alt="Profile">
                        <div class="mobile-profile-info">
                            <span id="mobile-profile-name" class="mobile-profile-name"></span>
                            <span id="mobile-profile-role" class="mobile-profile-role">Tutor</span>
                        </div>
                        <svg class="mobile-profile-arrow" width="16" height="16" fill="currentColor"
                            viewBox="0 0 20 20">
                            <path fill-rule="evenodd"
                                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                clip-rule="evenodd"></path>
                        </svg>
                    </button>

                    <div class="mobile-profile-dropdown-content">
                        <!-- View Profile Link -->
                        <a href="tutor-profile.html" class="mobile-dropdown-user-info" onclick="closeMobileMenu();">
                            <img id="mobile-dropdown-pic" class="mobile-dropdown-pic" src="" alt="Profile">
                            <div class="mobile-dropdown-info">
                                <span id="mobile-dropdown-name" class="mobile-dropdown-name"></span>
                                <span id="mobile-dropdown-email" class="mobile-dropdown-email"></span>
                            </div>
                        </a>

                        <!-- Role Switcher -->
                        <div id="mobile-role-switcher-section" class="mobile-role-switcher-section hidden">
                            <div class="mobile-role-switcher-header">Switch Role</div>
                            <div id="mobile-role-options" class="mobile-role-options">
                                <!-- Role options will be dynamically added here -->
                            </div>
                        </div>

                        <!-- Logout Button -->
                        <button id="mobile-logout-btn" class="mobile-dropdown-logout"
                            onclick="showLogoutModal(); closeMobileMenu();">
                            <svg class="mobile-menu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1">
                                </path>
                            </svg>
                            Logout
                        </button>
                    </div>
                </div>
                <div class="mobile-menu-divider"></div>
            </div>

            <!-- Theme Toggle -->
            <button id="mobile-theme-toggle-btn" class="mobile-menu-item" onclick="toggleTheme(); closeMobileMenu();">
                <svg id="mobile-theme-icon" class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor"
                    viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z">
                    </path>
                </svg>
                Toggle Theme
            </button>

            <!-- Notification Button (Mobile) -->
            <button id="mobile-notification-btn" class="mobile-menu-item"
                onclick="openNotificationModal(); closeMobileMenu();">
                <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9">
                    </path>
                </svg>
                Notifications
                <span class="notification-badge-mobile">3</span>
            </button>
        </div>
    </div>

    <!-- Mobile Menu Overlay -->
    <div id="mobileMenuOverlay" class="mobile-menu-overlay hidden"></div>

    <!-- Rotating Ad Section - 4 Placeholder Ads -->
    <div class="leaderboard-banner premium-promo" style="margin-top: 2rem;" data-placement="leaderboard_banner"
        data-profile-type="tutor" data-location="tutor_profile">
        <!-- Ads will be loaded dynamically via adRotationManager -->
    </div>

    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar-container">
        <div class="sidebar-content">
            <div class="sidebar-nav">
                <h3>Tutor Dashboard</h3>

                <a href="#" onclick="switchPanel('dashboard'); return false;" class="sidebar-link active">
                    <span class="sidebar-icon">üè†</span>
                    <span>Dashboard</span>
                </a>
                <a href="#" onclick="switchPanel('credentials'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üìÑ</span>
                    <span>Credentials</span>
                </a>
                <a href="#" onclick="switchPanel('analysis'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üìä</span>
                    <span>Analysis</span>
                </a>
                <hr class="my-4 border-gray-300">
                <a href="#" onclick="switchPanel('notes'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üìã</span>
                    <span>Notes</span>
                </a>
                <a href="#" onclick="switchPanel('packages'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üì¶</span>
                    <span>Packages</span>
                </a>
                <a href="#" onclick="switchPanel('schedule'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üóìÔ∏è</span>
                    <span>My Schedule</span>
                </a>
                <a href="#" onclick="switchPanel('sessions'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üë®‚Äçüè´</span>
                    <span>My Sessions</span>
                </a>
                <a href="#" onclick="switchPanel('my-students'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üë•</span>
                    <span>My Students</span>
                </a>
                <a href="#" onclick="switchPanel('teaching-tools'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üõ†Ô∏è</span>
                    <span>Teaching Tools</span>
                </a>
                <a href="#" onclick="switchPanel('documents'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üìö</span>
                    <span>Documents</span>
                </a>
                <hr class="my-4 border-gray-300">
                <a href="#" onclick="switchPanel('requests'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üìÆ</span>
                    <span>Requests</span>
                </a>
                <a href="#" onclick="switchPanel('community'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üë•</span>
                    <span>Community</span>
                </a>
                <a href="#" onclick="switchPanel('events'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üìÖ</span>
                    <span>Events</span>
                </a>
                <a href="#" onclick="switchPanel('blog'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üìù</span>
                    <span>Blog Posts</span>
                </a>
                <a href="#" onclick="switchPanel('stories'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üì∏</span>
                    <span>Stories</span>
                    <span id="sidebar-stories-count" class="badge-count"
                        style="background: var(--button-bg); color: white; padding: 2px 6px; border-radius: 12px; font-size: 0.75rem; margin-left: auto; display: none;">0</span>
                </a>
                <a href="#" onclick="switchPanel('videos'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">üé¨</span>
                    <span>My Videos</span>
                </a>
                <hr class="my-4 border-gray-300">
                <a href="#" onclick="switchPanel('earnings-investments'); return false;" class="sidebar-link">
                    <span class="sidebar-icon"
                        style="font-family: 'Times New Roman', serif; font-weight: bold; font-size: 1.1rem;">‚Ñ∞</span>
                    <span>Earnings & Investments</span>
                </a>
                <a href="#" onclick="switchPanel('reviews'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">‚≠ê</span>
                    <span>Reviews & Ratings</span>
                </a>
                <hr class="my-4 border-gray-300">
                <a href="#" onclick="switchPanel('settings'); return false;" class="sidebar-link">
                    <span class="sidebar-icon">‚öôÔ∏è</span>
                    <span>Settings</span>
                </a>
                <a href="#" onclick="showLogoutModal(); return false;"
                    class="sidebar-link text-red-500 hover:bg-red-50">
                    <span class="sidebar-icon">üö™</span>
                    <span>Logout</span>
                </a>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <section class="py-8" style="padding-top: 1rem;">
        <div class="container mx-auto px-4">

            <!-- Main Content with Widgets -->
            <div class="flex gap-6">
                <!-- Left Content Area -->
                <div class="flex-1">
                    <!-- Panels Section -->
                    <div class="panels-container">
                        <!-- Dashboard Panel (Default) -->
                        <div id="dashboard-panel" class="panel-content active">

                            <!-- Hero Section -->
                            <section class="hero-section animate__animated animate__fadeIn">
                                <h2 class="hero-title">
                                    <span id="hero-text-content"></span>
                                    <span class="typing-cursor">|</span>
                                </h2>
                                <p id="hero-subtitle" class="hero-subtitle"></p>
                                <div class="hero-stats">
                                    <div class="stat-item animate__animated animate__fadeInUp"
                                        style="animation-delay: 0.2s">
                                        <span class="stat-number" data-target="1200" data-suffix="+">0</span>
                                        <span class="stat-label">Students Taught</span>
                                    </div>
                                    <div class="stat-item animate__animated animate__fadeInUp"
                                        style="animation-delay: 0.3s">
                                        <span class="stat-number" data-target="45" data-suffix="+">0</span>
                                        <span class="stat-label">Courses Created</span>
                                    </div>
                                    <div class="stat-item animate__animated animate__fadeInUp"
                                        style="animation-delay: 0.4s">
                                        <span class="stat-number" data-target="4.8" data-suffix="‚òÖ"
                                            data-decimal="1">0</span>
                                        <span class="stat-label">Average Rating</span>
                                    </div>
                                </div>
                            </section>

                            <!-- Profile Header Section (Only visible in Dashboard) -->
                            <section class="profile-header-section mb-8">
                                <div class="cover-image-container relative">
                                    <img id="cover-img"
                                        src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='300'%3E%3Crect width='1200' height='300' fill='%23e5e7eb'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%239ca3af' font-family='sans-serif' font-size='20'%3E1200x300%3C/text%3E%3C/svg%3E"
                                        alt="Cover" class="cover-img">
                                    <div class="cover-overlay"></div>
                                    <!-- Cover Upload Button -->
                                    <button onclick="openUploadStoryModal('cover')" class="cover-upload-btn">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z">
                                            </path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                    </button>
                                </div>

                                <div class="profile-main-info">
                                    <div class="profile-info-wrapper">
                                        <div class="profile-avatar-container">
                                            <!-- Story Ring Indicator (only shown when stories exist) -->
                                            <div class="story-ring-wrapper" id="story-ring-wrapper" onclick="openStoryViewer()">
                                                <!-- Ring gradient border -->
                                            </div>

                                            <!-- Profile Avatar (always visible) -->
                                            <div id="profile-avatar-wrapper" onclick="handleProfileAvatarClick()">
                                                <img id="profile-avatar"
                                                    src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150'%3E%3Crect width='150' height='150' fill='%23e5e7eb'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%239ca3af' font-family='sans-serif' font-size='16'%3E150x150%3C/text%3E%3C/svg%3E"
                                                    alt="Profile Picture" class="profile-avatar">
                                            </div>

                                            <span class="online-indicator"></span>
                                            <!-- Add Story Button -->
                                            <button onclick="openUploadStoryModal()" class="story-add-btn">
                                                +
                                            </button>
                                            <!-- Profile Picture Upload Button -->
                                            <button onclick="openUploadStoryModal('profile')" class="avatar-upload-btn">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor"
                                                    viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        stroke-width="2"
                                                        d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z">
                                                    </path>
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                                </svg>
                                            </button>
                                        </div>

                                        <div class="profile-details-section" style="flex: 1; padding-top: 1.5rem;">
                                            <div class="profile-name-row" style="margin-bottom: 1.25rem;">
                                                <h1 class="profile-name" id="tutorName" style="margin-bottom: 0.5rem;">
                                                    Professional Tutor</h1>
                                                <!-- Username field under name -->
                                                <div id="tutorUsername"
                                                    style="font-size: 0.95rem; color: var(--text-muted); font-weight: 500; margin-bottom: 1rem;">
                                                    <!-- Username will be populated dynamically -->
                                                </div>
                                                <div class="badges-row"
                                                    style="display: flex; flex-wrap: wrap; gap: 0.75rem; margin-bottom: 1rem; margin-top: 1rem;">
                                                    <span class="profile-badge verified" id="verification-badge">‚úî
                                                        Verified Tutor</span>
                                                    <span class="profile-badge expert" id="expertise-badge">üéì Expert
                                                        Educator</span>
                                                    <span class="profile-badge experience" id="experience-badge">üíº 5+
                                                        Years Experience</span>
                                                </div>
                                            </div>

                                            <div class="rating-section" style="margin-bottom: 1rem;">
                                                <div class="rating-wrapper" id="rating-hover-trigger"
                                                    style="display: flex; align-items: center; gap: 0.75rem;">
                                                    <div class="rating-stars" id="rating-stars"
                                                        style="color: #f59e0b; font-size: 1.5rem; letter-spacing: 2px;">
                                                        ‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</div>
                                                    <span class="rating-value" id="tutor-rating"
                                                        style="font-size: 1.5rem; font-weight: 700; color: #f59e0b;">0.0</span>
                                                    <span class="rating-count" id="rating-count"
                                                        style="color: var(--text-secondary); font-size: 0.95rem; font-weight: 500;">(0
                                                        reviews)</span>

                                                    <!-- Rating Tooltip -->
                                                    <div class="rating-tooltip" id="rating-tooltip">
                                                        <h4
                                                            style="margin: 0 0 1rem 0; font-size: 0.9rem; font-weight: 600; color: var(--heading);">
                                                            Rating Breakdown</h4>

                                                        <div class="rating-metric">
                                                            <div class="metric-header">
                                                                <span class="metric-label">Discipline</span>
                                                                <span class="metric-score">0.0</span>
                                                            </div>
                                                            <div class="metric-bar">
                                                                <div class="metric-fill" style="width: 0%"></div>
                                                            </div>
                                                        </div>

                                                        <div class="rating-metric">
                                                            <div class="metric-header">
                                                                <span class="metric-label">Punctuality</span>
                                                                <span class="metric-score">0.0</span>
                                                            </div>
                                                            <div class="metric-bar">
                                                                <div class="metric-fill" style="width: 0%"></div>
                                                            </div>
                                                        </div>

                                                        <div class="rating-metric">
                                                            <div class="metric-header">
                                                                <span class="metric-label">Subject Understanding</span>
                                                                <span class="metric-score">0.0</span>
                                                            </div>
                                                            <div class="metric-bar">
                                                                <div class="metric-fill" style="width: 0%"></div>
                                                            </div>
                                                        </div>

                                                        <div class="rating-metric">
                                                            <div class="metric-header">
                                                                <span class="metric-label">Communication Skills</span>
                                                                <span class="metric-score">0.0</span>
                                                            </div>
                                                            <div class="metric-bar">
                                                                <div class="metric-fill" style="width: 0%"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Location & Gender (paired as requested) -->
                                            <div class="profile-contact-info" id="location-gender-container"
                                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.75rem; margin-bottom: 0.75rem;">
                                                <div id="location-container"
                                                    style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; background: rgba(var(--button-bg-rgb), 0.05); border-radius: 12px;">
                                                    <span style="font-size: 1.25rem;">üìç</span>
                                                    <div style="flex: 1;">
                                                        <div
                                                            style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.125rem;">
                                                            Location</div>
                                                        <div id="tutor-location"
                                                            style="color: var(--text); font-size: 0.875rem; font-weight: 500;">
                                                            Loading...</div>
                                                    </div>
                                                </div>
                                                <div id="gender-container"
                                                    style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; background: rgba(var(--button-bg-rgb), 0.05); border-radius: 12px;">
                                                    <span style="font-size: 1.25rem;" id="gender-icon">üë§</span>
                                                    <div style="flex: 1;">
                                                        <div
                                                            style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.125rem;">
                                                            Gender</div>
                                                        <div id="tutor-gender"
                                                            style="color: var(--text); font-size: 0.875rem; font-weight: 500;">
                                                            Loading...</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Contact Information (Email & Phone) - Populated dynamically by JS -->
                                            <div class="profile-contact-info" id="email-phone-container"
                                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.75rem; margin-bottom: 0.75rem;">
                                                <!-- Contact info will be populated dynamically -->
                                            </div>

                                            <!-- Teaches At & Languages (Contact Info Style) -->
                                            <div class="profile-contact-info" id="teaches-languages-container"
                                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.75rem; margin-bottom: 0.75rem;">
                                                <div id="teaches-at-container"
                                                    style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; background: rgba(var(--button-bg-rgb), 0.05); border-radius: 12px;">
                                                    <span style="font-size: 1.25rem;">üè´</span>
                                                    <div style="flex: 1;">
                                                        <div
                                                            style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.125rem;">
                                                            Teaches At</div>b
                                                        <div id="tutor-teaches-at-field"
                                                            style="color: var(--text); font-size: 0.875rem; font-weight: 500;">
                                                            Loading...</div>
                                                    </div>
                                                </div>
                                                <div id="languages-container"
                                                    style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; background: rgba(var(--button-bg-rgb), 0.05); border-radius: 12px;">
                                                    <span style="font-size: 1.25rem;">üåê</span>
                                                    <div style="flex: 1;">
                                                        <div
                                                            style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.125rem;">
                                                            Languages</div>
                                                        <div id="tutor-languages-inline"
                                                            style="color: var(--text); font-size: 0.875rem; font-weight: 500;">
                                                            Loading...</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Hobbies & Interests -->
                                            <div id="hobbies-display-container"
                                                style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; background: rgba(var(--button-bg-rgb), 0.05); border-radius: 12px; margin-bottom: 0.75rem;">
                                                <span style="font-size: 1.25rem;">üé®</span>
                                                <div style="flex: 1;">
                                                    <div
                                                        style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.125rem;">
                                                        Hobbies & Interests</div>
                                                    <div id="tutor-hobbies"
                                                        style="color: var(--text-muted); font-size: 0.875rem; font-weight: 500; font-style: italic;">
                                                        No hobbies yet</div>
                                                </div>
                                            </div>

                                            <!-- Social Links -->
                                            <div class="profile-social-links" id="social-links-container"
                                                style="display: flex; gap: 0.75rem; margin-top: 1.5rem; margin-bottom: 0.75rem; padding: 0.5rem 0;">
                                                <!-- Social links will be populated dynamically by JS with beautiful styling -->
                                            </div>

                                            <div class="profile-quote"
                                                style="background: linear-gradient(135deg, rgba(79,70,229,0.1) 0%, rgba(124,58,237,0.05) 100%); border-left: 4px solid #4f46e5; border-radius: 12px; padding: 1.25rem 1.5rem; margin-top: 1.5rem; position: relative; font-style: italic; color: var(--text); font-size: 1rem; line-height: 1.6; box-shadow: 0 2px 8px rgba(79,70,229,0.1);">
                                                <span id="tutor-quote">"Passionate about making complex concepts simple
                                                    and helping students achieve their academic goals."</span>
                                            </div>

                                            <!-- Connections Section -->
                                            <div class="profile-connections" style="margin-top: 1.5rem;">
                                                <div class="connections-header"
                                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                                    <h4
                                                        style="font-weight: 600; font-size: 0.95rem; color: var(--heading);">
                                                        <span style="margin-right: 0.5rem;">üìä</span>Activity Stats
                                                    </h4>
                                                </div>
                                                <div class="connections-stats"
                                                    style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; text-align: center;">
                                                    <!-- Connections Card -->
                                                    <div class="stat-box" onclick="openCommunityModalTab('connections')"
                                                        style="padding: 0.75rem; background: rgba(var(--button-bg-rgb), 0.05); border-radius: var(--radius-md); cursor: pointer; transition: all 0.3s ease;">
                                                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--heading);"
                                                            id="connections-count">0</div>
                                                        <div
                                                            style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.25rem;">
                                                            Connections</div>
                                                    </div>
                                                    <!-- Pending Requests Card -->
                                                    <div class="stat-box" onclick="openCommunityModalTab('pending')"
                                                        style="padding: 0.75rem; background: rgba(var(--button-bg-rgb), 0.05); border-radius: var(--radius-md); cursor: pointer; transition: all 0.3s ease;">
                                                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--heading);"
                                                            id="pending-requests-count">0</div>
                                                        <div
                                                            style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.25rem;">
                                                            Pending Requests</div>
                                                    </div>
                                                    <!-- Received Requests Card -->
                                                    <div class="stat-box" onclick="openCommunityModalTab('received')"
                                                        style="padding: 0.75rem; background: rgba(var(--button-bg-rgb), 0.05); border-radius: var(--radius-md); cursor: pointer; transition: all 0.3s ease;">
                                                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--heading);"
                                                            id="received-requests-count">0</div>
                                                        <div
                                                            style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.25rem;">
                                                            Received Requests</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="profile-actions">
                                                <button onclick="openEditProfileModal()" class="btn-primary">
                                                    <span class="mr-2">‚úèÔ∏è</span>
                                                    Edit Profile
                                                </button>
                                                <button onclick="openChatModal()" class="btn-secondary ml-2">
                                                    <span class="mr-2">üí¨</span>
                                                    Message
                                                </button>
                                                <button onclick="shareProfile(event)" class="btn-secondary ml-2">
                                                    <span class="mr-2">üîó</span>
                                                    Share Profile
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- About Section -->
                            <section
                                style="background: var(--card-bg); border-radius: 16px; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                <h3
                                    style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem; color: var(--heading);">
                                    About Me</h3>
                                <p id="tutor-bio" style="color: var(--text); line-height: 1.7;">Loading profile
                                    information...</p>
                            </section>

                            <!-- All Statistics Cards -->
                            <div class="dashboard-grid mb-8">
                                <!-- Teaching Statistics -->
                                <div class="card p-4">
                                    <div class="flex items-center gap-3 mb-2">
                                        <span class="text-3xl">üë•</span>
                                        <h3 class="text-lg font-semibold">Current Students</h3>
                                    </div>
                                    <p class="text-2xl font-bold text-blue-600" id="stat-current-students">0</p>
                                    <span class="text-sm text-gray-500">Active</span>
                                </div>

                                <div class="card p-4">
                                    <div class="flex items-center gap-3 mb-2">
                                        <span class="text-3xl">üìã</span>
                                        <h3 class="text-lg font-semibold">Requests</h3>
                                    </div>
                                    <p class="text-2xl font-bold text-purple-600" id="stat-total-requests">0</p>
                                    <span class="text-sm text-gray-500">Package requests</span>
                                </div>

                                <div class="card p-4">
                                    <div class="flex items-center gap-3 mb-2">
                                        <span class="text-3xl">üéØ</span>
                                        <h3 class="text-lg font-semibold">Success Rate</h3>
                                    </div>
                                    <p class="text-2xl font-bold text-green-600" id="stat-success-rate">0%</p>
                                    <span class="text-sm text-gray-500">Student improvement</span>
                                </div>

                                <div class="card p-4">
                                    <div class="flex items-center gap-3 mb-2">
                                        <span class="text-3xl">‚è±Ô∏è</span>
                                        <h3 class="text-lg font-semibold">Response Time</h3>
                                    </div>
                                    <p class="text-2xl font-bold text-orange-600"><span
                                            id="stat-response-time">24</span> hrs</p>
                                    <span class="text-sm text-gray-500">Average reply time</span>
                                </div>
                            </div>

                            <!-- Reviews Section (Success Stories Style) -->
                            <div class="card p-6 mb-8">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                                    <h3 class="text-xl font-semibold" style="margin: 0;">üåü Recent Reviews</h3>
                                    <button
                                        class="px-4 py-2 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition"
                                        onclick="switchPanel('reviews')" style="font-size: 0.875rem;">
                                        View All Reviews ‚Üí
                                    </button>
                                </div>
                                <div class="success-stories-grid" id="dashboard-reviews-grid">
                                    <!-- Reviews will be loaded dynamically from database in Success Stories style -->
                                    <div
                                        style="text-align: center; padding: 2rem; color: var(--text-muted); font-style: italic; grid-column: 1 / -1;">
                                        Loading reviews...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Requests Panel -->
                    <div id="requests-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                <div>
                                    <h1 class="text-3xl font-bold mb-2">My Requests</h1>
                                    <p class="text-gray-600">Manage your courses, schools, sessions, and parenting
                                        requests</p>
                                </div>
                                <div style="display: flex; gap: 0.75rem;">
                                    <button id="request-course-btn" onclick="openCourseRequestModal()"
                                        class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition flex items-center gap-2"
                                        style="display: none;">
                                        <i class="fas fa-plus"></i> Add Course
                                    </button>
                                    <button id="request-school-btn" onclick="openSchoolRequestModal()"
                                        class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition flex items-center gap-2"
                                        style="display: none;">
                                        <i class="fas fa-plus"></i> Request School
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Request Type Filter Cards -->
                        <div class="request-type-cards grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <div class="request-type-card card p-4 cursor-pointer border-2 transition active"
                                onclick="filterTutorRequestType('courses')" data-type="courses">
                                <div class="flex items-center gap-3">
                                    <div class="text-3xl">üìö</div>
                                    <div>
                                        <h3 class="font-bold text-lg">Requested Courses</h3>
                                        <p class="text-sm text-gray-600">View course requests</p>
                                    </div>
                                </div>
                            </div>

                            <div class="request-type-card card p-4 cursor-pointer border-2 transition"
                                onclick="filterTutorRequestType('schools')" data-type="schools">
                                <div class="flex items-center gap-3">
                                    <div class="text-3xl">üè´</div>
                                    <div>
                                        <h3 class="font-bold text-lg">Requested Schools</h3>
                                        <p class="text-sm text-gray-600">View school requests</p>
                                    </div>
                                </div>
                            </div>

                            <div class="request-type-card card p-4 cursor-pointer border-2 transition"
                                onclick="filterTutorRequestType('sessions')" data-type="sessions">
                                <div class="flex items-center gap-3">
                                    <div class="text-3xl">üìÖ</div>
                                    <div>
                                        <h3 class="font-bold text-lg">Requested Sessions</h3>
                                        <p class="text-sm text-gray-600">View session requests</p>
                                    </div>
                                </div>
                            </div>

                            <div class="request-type-card card p-4 cursor-pointer border-2 transition"
                                onclick="filterTutorRequestType('parenting')" data-type="parenting">
                                <div class="flex items-center gap-3">
                                    <div class="text-3xl">üë™</div>
                                    <div>
                                        <h3 class="font-bold text-lg">Parenting Invitations</h3>
                                        <p class="text-sm text-gray-600">Students inviting you as parent</p>
                                        <span id="parenting-invitation-count"
                                            class="text-xs bg-purple-500 text-white px-2 py-0.5 rounded-full hidden">0</span>
                                    </div>
                                </div>
                            </div>
                            <div class="request-type-card card p-4 cursor-pointer border-2 transition"
                                onclick="filterTutorRequestType('child-invitations')" data-type="child-invitations">
                                <div class="flex items-center gap-3">
                                    <div class="text-3xl">üë∂</div>
                                    <div>
                                        <h3 class="font-bold text-lg">Child Invitations</h3>
                                        <p class="text-sm text-gray-600">Parents inviting you as child</p>
                                        <span id="tutor-child-invitation-count"
                                            class="text-xs bg-green-500 text-white px-2 py-0.5 rounded-full hidden">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Request Direction Tabs (Received vs Sent) - Only shown for Session Requests -->
                        <div id="tutor-session-direction-tabs" class="request-direction-tabs mb-4 hidden"
                            style="display: none; gap: 1rem; border-bottom: 2px solid var(--border-color); padding-bottom: 0.5rem;">
                            <button class="direction-tab active" onclick="filterRequestDirection('received')"
                                data-direction="received">
                                <i class="fas fa-inbox"></i> Received
                            </button>
                            <button class="direction-tab" onclick="filterRequestDirection('sent')"
                                data-direction="sent">
                                <i class="fas fa-paper-plane"></i> Sent
                            </button>
                        </div>

                        <!-- Request Status Sub-Tabs (for filtering within request type) -->
                        <div class="status-tabs mb-6"
                            style="display: flex; gap: 1rem; border-bottom: 2px solid var(--border-color); padding-bottom: 0.5rem;">
                            <button class="status-tab active" onclick="filterTutorRequestStatus('all')"
                                data-status="all">
                                All
                            </button>
                            <button class="status-tab" onclick="filterTutorRequestStatus('pending')"
                                data-status="pending">
                                Pending
                            </button>
                            <button class="status-tab" onclick="filterTutorRequestStatus('accepted')"
                                data-status="accepted">
                                Accepted
                            </button>
                            <button class="status-tab" onclick="filterTutorRequestStatus('rejected')"
                                data-status="rejected">
                                Rejected
                            </button>
                        </div>

                        <!-- Requests List Container -->
                        <div id="tutor-requests-list">
                            <!-- Requests will be loaded dynamically -->
                            <div class="text-center py-8 text-gray-500">
                                <i class="fas fa-spinner fa-spin text-3xl mb-3"></i>
                                <p>Loading your requests...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Packages Panel -->
                    <div id="packages-panel" class="panel-content hidden">
                        <div class="section-header">
                            <h2 class="section-title">My Packages</h2>
                            <div class="section-header-actions">
                                <button class="btn-primary" onclick="openPackageModal()">
                                    <i class="fas fa-plus"></i> Create Package
                                </button>
                            </div>
                        </div>

                        <!-- Packages Grid -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="packages-grid">
                            <!-- Packages will be loaded dynamically from packageManagerClean -->
                        </div>
                    </div>

                    <!-- My Students Panel -->
                    <div id="my-students-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                                <h1 class="text-3xl font-bold">My Students</h1>
                                <span id="student-count-badge" class="hidden"
                                    style="background: var(--primary-color); color: white; padding: 0.25rem 0.75rem; border-radius: 999px; font-size: 0.875rem; font-weight: 600;">0
                                    students</span>
                            </div>
                            <p class="text-gray-600">View and manage your enrolled students from the enrolled_students
                                table</p>
                        </div>

                        <div class="card p-6 mb-6">
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <div style="position: relative; flex: 1;">
                                    <i class="fas fa-search"
                                        style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: var(--text-secondary);"></i>
                                    <input type="search" id="student-search"
                                        class="w-full p-3 pl-12 border-2 rounded-lg"
                                        placeholder="Search students by name, grade, package, or email..."
                                        autocomplete="new-password" autocorrect="off" autocapitalize="off"
                                        spellcheck="false" data-form-type="other" data-lpignore="true">
                                </div>
                                <button onclick="SessionRequestManager.loadMyStudents()" class="btn-secondary"
                                    style="padding: 0.75rem 1.25rem; white-space: nowrap;">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                            </div>
                        </div>

                        <div class="students-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
                            id="my-students-grid">
                            <!-- Students will be loaded dynamically from enrolled_students table -->
                            <div class="col-span-full card p-6 text-center text-gray-500">
                                <i class="fas fa-spinner fa-spin text-3xl mb-3"></i>
                                <p>Loading students...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Schedule Panel -->
                    <div id="schedule-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">My Schedule</h1>
                            <p class="text-gray-600">Manage your teaching availability and time blocks</p>
                        </div>

                        <!-- Schedules Content -->
                        <div id="schedules-content">
                            <!-- Create Schedule Button and Search Bar in One Row -->
                            <div class="card p-6 mb-6">
                                <div style="display: flex; gap: 16px; align-items: center; margin-bottom: 12px;">
                                    <button class="cta-button" onclick="openScheduleModal()"
                                        style="white-space: nowrap;">
                                        <i class="fas fa-plus"></i> Create Schedule
                                    </button>
                                    <div class="relative" style="flex: 1;">
                                        <i
                                            class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                        <input type="text" id="schedule-search"
                                            class="w-full p-3 pl-12 border-2 rounded-lg"
                                            placeholder="Search schedules by title, priority level, or role..."
                                            oninput="if(typeof searchSchedules === 'function') searchSchedules(this.value)">
                                    </div>
                                </div>
                            </div>

                            <!-- Role-based Filters -->
                            <div id="schedule-role-filters" class="mb-6 flex gap-4 flex-wrap">
                                <button class="px-4 py-2 rounded-full bg-blue-500 text-white"
                                    onclick="filterSchedulesByRole('all')">
                                    <i class="fas fa-users mr-2"></i>All Schedules
                                </button>
                                <button class="px-4 py-2 rounded-full bg-gray-200"
                                    onclick="filterSchedulesByRole('tutor')">
                                    <i class="fas fa-chalkboard-teacher mr-2"></i>As Tutor
                                </button>
                                <button class="px-4 py-2 rounded-full bg-gray-200"
                                    onclick="filterSchedulesByRole('student')">
                                    <i class="fas fa-user-graduate mr-2"></i>As Student
                                </button>
                                <button class="px-4 py-2 rounded-full bg-gray-200"
                                    onclick="filterSchedulesByRole('parent')">
                                    <i class="fas fa-user-friends mr-2"></i>As Parent
                                </button>
                            </div>

                            <!-- Schedules Table -->
                            <div class="card p-6 mb-6">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-2xl font-bold">My Teaching Schedules</h3>
                                    <!-- Schedule Priority Filters -->
                                    <div class="flex gap-2 flex-wrap">
                                        <button class="px-4 py-2 rounded-full bg-blue-500 text-white text-sm"
                                            onclick="if(typeof filterSchedules === 'function') filterSchedules('all')">
                                            All
                                        </button>
                                        <button class="px-4 py-2 rounded-full bg-gray-200 text-sm"
                                            onclick="if(typeof filterSchedules === 'function') filterSchedules('urgent')"
                                            title="Critical tasks requiring immediate attention">
                                            üî¥ Urgent
                                        </button>
                                        <button class="px-4 py-2 rounded-full bg-gray-200 text-sm"
                                            onclick="if(typeof filterSchedules === 'function') filterSchedules('high')"
                                            title="Important tasks with high priority">
                                            üü† High
                                        </button>
                                        <button class="px-4 py-2 rounded-full bg-gray-200 text-sm"
                                            onclick="if(typeof filterSchedules === 'function') filterSchedules('medium')"
                                            title="Regular scheduled tasks">
                                            üîµ Medium
                                        </button>
                                        <button class="px-4 py-2 rounded-full bg-gray-200 text-sm"
                                            onclick="if(typeof filterSchedules === 'function') filterSchedules('low')"
                                            title="Optional or flexible tasks">
                                            üü¢ Low
                                        </button>
                                    </div>
                                </div>
                                <div id="schedules-table-container">
                                    <div class="text-center py-8 text-gray-500">
                                        <i class="fas fa-spinner fa-spin text-3xl mb-3"></i>
                                        <p>Loading schedules...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- My Sessions Panel -->
                    <div id="sessions-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">My Sessions</h1>
                            <p class="text-gray-600">View and manage your tutoring sessions with students</p>
                        </div>

                        <!-- Session Stats Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <div class="card p-6 text-center">
                                <div class="text-3xl mb-2">üìä</div>
                                <div class="text-2xl font-bold" id="session-stat-total">0</div>
                                <div class="text-sm text-gray-600">Total Sessions</div>
                            </div>
                            <div class="card p-6 text-center">
                                <div class="text-3xl mb-2">‚úÖ</div>
                                <div class="text-2xl font-bold" id="session-stat-completed">0</div>
                                <div class="text-sm text-gray-600">Completed</div>
                            </div>
                            <div class="card p-6 text-center">
                                <div class="text-3xl mb-2">‚è∞</div>
                                <div class="text-2xl font-bold" id="session-stat-hours">0</div>
                                <div class="text-sm text-gray-600">Total Hours</div>
                            </div>
                            <div class="card p-6 text-center">
                                <div class="text-3xl mb-2">üîî</div>
                                <div class="text-2xl font-bold" id="session-stat-earnings">0</div>
                                <div class="text-sm text-gray-600">Active Sessions</div>
                            </div>
                        </div>

                        <!-- Search Bar -->
                        <div class="card p-6 mb-6">
                            <div class="relative mb-3">
                                <i
                                    class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                <input type="text" id="sessions-search" class="w-full p-3 pl-12 border-2 rounded-lg"
                                    placeholder="Search sessions by subject, student, or topic..."
                                    oninput="if(typeof searchSessions === 'function') searchSessions(this.value)">
                            </div>
                        </div>

                        <!-- Session Filters (Role-based) -->
                        <div class="mb-6 flex gap-4 flex-wrap">
                            <button class="px-4 py-2 rounded-full bg-blue-500 text-white"
                                onclick="filterSessionsByRole('all', event)">
                                <i class="fas fa-users mr-2"></i>All Sessions
                            </button>
                            <button class="px-4 py-2 rounded-full bg-gray-200"
                                onclick="filterSessionsByRole('tutor', event)">
                                <i class="fas fa-chalkboard-teacher mr-2"></i>As Tutor
                            </button>
                            <button class="px-4 py-2 rounded-full bg-gray-200"
                                onclick="filterSessionsByRole('student', event)">
                                <i class="fas fa-user-graduate mr-2"></i>As Student
                            </button>
                            <button class="px-4 py-2 rounded-full bg-gray-200"
                                onclick="filterSessionsByRole('parent', event)">
                                <i class="fas fa-user-friends mr-2"></i>As Parent
                            </button>
                        </div>

                        <!-- Sessions Table -->
                        <div class="card p-6 mb-6">
                            <h3 class="text-2xl font-bold mb-4">My Tutoring Sessions</h3>
                            <div id="sessions-table-container">
                                <div class="text-center py-8 text-gray-500">
                                    <i class="fas fa-spinner fa-spin text-3xl mb-3"></i>
                                    <p>Loading sessions...</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Teaching Tools Panel -->
                    <div id="teaching-tools-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Teaching Tools</h1>
                            <p class="text-gray-600">Access digital tools to enhance your teaching</p>
                        </div>

                        <div class="tools-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <div class="card p-6 text-center cursor-pointer hover:shadow-lg transition"
                                onclick="openDigitalLab()">
                                <div class="text-6xl mb-4">üî¨</div>
                                <h4 class="text-xl font-bold mb-2">Digital Lab</h4>
                                <p class="text-gray-600">Virtual experiments</p>
                            </div>
                            <div class="card p-6 text-center cursor-pointer hover:shadow-lg transition"
                                onclick="openWhiteboardFromTeachingTools()">
                                <div class="text-6xl mb-4">üìù</div>
                                <h4 class="text-xl font-bold mb-2">Digital Whiteboard</h4>
                                <p class="text-gray-600">Interactive teaching board</p>
                            </div>
                            <div class="card p-6 text-center cursor-pointer hover:shadow-lg transition"
                                onclick="openCourseworkMaker()">
                                <div class="text-6xl mb-4">üìã</div>
                                <h4 class="text-xl font-bold mb-2">Coursework Maker</h4>
                                <p class="text-gray-600">Create custom courseworks</p>
                            </div>
                        </div>
                    </div>

                    <!-- Documents Panel (Teaching/Learning Materials) -->
                    <div id="documents-panel" class="panel-content hidden">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h1 class="text-3xl font-bold mb-2">Documents</h1>
                                <p class="text-gray-600">Manage and organize your teaching documents</p>
                            </div>
                            <!-- Storage Used Stat -->
                            <div class="flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg">
                                <span class="text-xl">üíæ</span>
                                <div>
                                    <p class="text-xs text-gray-500">Storage</p>
                                    <p class="text-sm font-bold">2.4 GB</p>
                                </div>
                            </div>
                        </div>

                        <!-- View Tabs: Folders vs Documents -->
                        <div class="flex items-center gap-4 mb-6 border-b">
                            <button id="folders-tab" onclick="switchDocsViewTab('folders')"
                                class="px-4 py-3 font-semibold text-blue-600 border-b-2 border-blue-600 -mb-px">
                                <i class="fas fa-folder mr-2"></i>Folders
                            </button>
                            <button id="documents-tab" onclick="switchDocsViewTab('documents')"
                                class="px-4 py-3 font-semibold text-gray-500 hover:text-gray-700">
                                <i class="fas fa-file-alt mr-2"></i>All Documents
                            </button>
                        </div>

                        <!-- FOLDERS VIEW -->
                        <div id="folders-view">
                            <!-- Folders Search -->
                            <div class="mb-4">
                                <div class="relative max-w-md">
                                    <input type="text" id="folders-search"
                                        class="w-full px-4 py-2 pl-10 border rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        placeholder="Search folders..."
                                        oninput="if(typeof searchFolders === 'function') searchFolders(this.value)">
                                    <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                </div>
                            </div>
                            <!-- Folders Grid - Rendered dynamically by folder-manager.js -->
                            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4 mb-6"
                                id="teaching-docs-folders">
                                <!-- New Folder Card (always shown) -->
                                <div class="card p-4 text-center cursor-pointer hover:shadow-lg transition border-2 border-dashed border-gray-300 hover:border-blue-400"
                                    onclick="openCreateFolderModal()">
                                    <div class="text-4xl mb-2 text-gray-400">‚ûï</div>
                                    <p class="font-semibold text-sm text-gray-500">New Folder</p>
                                </div>
                                <!-- Folder cards will be rendered dynamically by folder-manager.js -->
                            </div>
                        </div>

                        <!-- DOCUMENTS VIEW (Hidden by default) -->
                        <div id="documents-view" class="hidden">

                            <!-- Document Filters with Counts + Upload Button -->
                            <div class="flex gap-2 mb-4 flex-wrap items-center">
                                <button
                                    class="teaching-doc-filter px-4 py-2 rounded-full bg-blue-500 text-white flex items-center gap-2"
                                    onclick="filterTeachingDocs('all')">
                                    All Docs <span class="bg-white/20 px-2 py-0.5 rounded-full text-xs">40</span>
                                </button>
                                <button
                                    class="teaching-doc-filter px-4 py-2 rounded-full bg-gray-200 flex items-center gap-2"
                                    onclick="filterTeachingDocs('pdf')">
                                    PDFs <span class="bg-gray-300 px-2 py-0.5 rounded-full text-xs">18</span>
                                </button>
                                <button
                                    class="teaching-doc-filter px-4 py-2 rounded-full bg-gray-200 flex items-center gap-2"
                                    onclick="filterTeachingDocs('presentations')">
                                    Presentations <span class="bg-gray-300 px-2 py-0.5 rounded-full text-xs">8</span>
                                </button>
                                <button
                                    class="teaching-doc-filter px-4 py-2 rounded-full bg-gray-200 flex items-center gap-2"
                                    onclick="filterTeachingDocs('worksheets')">
                                    Worksheets <span class="bg-gray-300 px-2 py-0.5 rounded-full text-xs">7</span>
                                </button>
                                <button
                                    class="teaching-doc-filter px-4 py-2 rounded-full bg-gray-200 flex items-center gap-2"
                                    onclick="filterTeachingDocs('exams')">
                                    Exams <span class="bg-gray-300 px-2 py-0.5 rounded-full text-xs">5</span>
                                </button>
                                <button
                                    class="teaching-doc-filter px-4 py-2 rounded-full bg-gray-200 flex items-center gap-2"
                                    onclick="filterTeachingDocs('other')">
                                    Other <span class="bg-gray-300 px-2 py-0.5 rounded-full text-xs">2</span>
                                </button>
                                <!-- Upload Button - pushed to the right -->
                                <button
                                    class="ml-auto px-4 py-2 rounded-full bg-green-500 text-white flex items-center gap-2 hover:bg-green-600 transition-colors"
                                    onclick="openUploadTeachingDocModal()">
                                    <i class="fas fa-plus"></i> Upload Document
                                </button>
                            </div>

                            <!-- Documents Search and Sort Row -->
                            <div class="flex flex-wrap items-center gap-4 mb-6">
                                <!-- Search -->
                                <div class="relative flex-1 max-w-md">
                                    <input type="text" id="documents-search"
                                        class="w-full px-4 py-2 pl-10 border rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        placeholder="Search documents..."
                                        oninput="if(typeof searchDocuments === 'function') searchDocuments(this.value)">
                                    <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                </div>
                                <!-- Sort Dropdown - pushed to the right -->
                                <div class="ml-auto flex items-center gap-2">
                                    <label class="text-sm text-gray-600">Sort by:</label>
                                    <select id="documents-sort"
                                        class="px-4 py-2 border rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white cursor-pointer"
                                        onchange="sortDocuments(this.value)">
                                        <option value="upload_date">Upload Date</option>
                                        <option value="title">Title (A-Z)</option>
                                        <option value="subject">Subject</option>
                                        <option value="category">Category</option>
                                        <option value="grade_level">Grade Level</option>
                                        <option value="views">Most Viewed</option>
                                        <option value="downloads">Most Downloaded</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Teaching Docs Grid -->
                            <div class="teaching-docs-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
                                id="teaching-docs-grid">
                                <!-- Sample Teaching Docs - Updated Design with data attributes for sorting -->
                                <div class="card p-6 hover:shadow-lg transition" data-subject="mathematics"
                                    data-category="notes" data-grade-level="10" data-upload-date="2024-11-25"
                                    data-views="128" data-downloads="45">
                                    <div class="flex items-start justify-between mb-4">
                                        <div class="text-5xl">üìÑ</div>
                                        <div class="relative">
                                            <button class="text-gray-500 hover:text-gray-700 p-2"
                                                onclick="toggleDocMenu(1)">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                            <div id="doc-menu-1"
                                                class="hidden absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border z-10">
                                                <button onclick="editTeachingDoc(1)"
                                                    class="w-full text-left px-4 py-2 hover:bg-gray-100 text-sm">
                                                    <i class="fas fa-edit mr-2"></i>Edit
                                                </button>
                                                <button onclick="deleteTeachingDoc(1)"
                                                    class="w-full text-left px-4 py-2 hover:bg-red-50 text-red-600 text-sm">
                                                    <i class="fas fa-trash mr-2"></i>Delete
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <h3><a href="#" onclick="openTeachingDoc(1); return false;"
                                            class="text-lg font-bold mb-2 hover:text-blue-600 cursor-pointer block">Mathematics
                                            Grade 10 Notes</a></h3>
                                    <p class="text-sm text-gray-600 mb-2">PDF ‚Ä¢ 2.5 MB</p>
                                    <div class="flex flex-wrap gap-1 mb-3">
                                        <span
                                            class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full">Mathematics</span>
                                        <span class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full">Grade
                                            10</span>
                                        <span
                                            class="text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full">Notes</span>
                                    </div>
                                    <div class="flex items-center justify-between text-xs text-gray-500 mb-3">
                                        <span>Modified: 2 days ago</span>
                                    </div>
                                    <div class="flex items-center justify-between text-xs text-gray-400 border-t pt-3">
                                        <span><i class="fas fa-eye mr-1"></i>128 views</span>
                                        <span><i class="fas fa-download mr-1"></i>45 downloads</span>
                                    </div>
                                </div>

                                <div class="card p-6 hover:shadow-lg transition" data-subject="physics"
                                    data-category="presentation" data-grade-level="11" data-upload-date="2024-11-20"
                                    data-views="89" data-downloads="32">
                                    <div class="flex items-start justify-between mb-4">
                                        <div class="text-5xl">üìä</div>
                                        <div class="relative">
                                            <button class="text-gray-500 hover:text-gray-700 p-2"
                                                onclick="toggleDocMenu(2)">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                            <div id="doc-menu-2"
                                                class="hidden absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border z-10">
                                                <button onclick="editTeachingDoc(2)"
                                                    class="w-full text-left px-4 py-2 hover:bg-gray-100 text-sm">
                                                    <i class="fas fa-edit mr-2"></i>Edit
                                                </button>
                                                <button onclick="deleteTeachingDoc(2)"
                                                    class="w-full text-left px-4 py-2 hover:bg-red-50 text-red-600 text-sm">
                                                    <i class="fas fa-trash mr-2"></i>Delete
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <h3><a href="#" onclick="openTeachingDoc(2); return false;"
                                            class="text-lg font-bold mb-2 hover:text-blue-600 cursor-pointer block">Physics
                                            Chapter 5 Slides</a></h3>
                                    <p class="text-sm text-gray-600 mb-2">PPTX ‚Ä¢ 8.3 MB</p>
                                    <div class="flex flex-wrap gap-1 mb-3">
                                        <span
                                            class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full">Physics</span>
                                        <span class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full">Grade
                                            11</span>
                                        <span
                                            class="text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full">Presentation</span>
                                    </div>
                                    <div class="flex items-center justify-between text-xs text-gray-500 mb-3">
                                        <span>Modified: 1 week ago</span>
                                    </div>
                                    <div class="flex items-center justify-between text-xs text-gray-400 border-t pt-3">
                                        <span><i class="fas fa-eye mr-1"></i>89 views</span>
                                        <span><i class="fas fa-download mr-1"></i>32 downloads</span>
                                    </div>
                                </div>

                                <div class="card p-6 hover:shadow-lg transition" data-subject="chemistry"
                                    data-category="worksheet" data-grade-level="9" data-upload-date="2024-11-24"
                                    data-views="56" data-downloads="28">
                                    <div class="flex items-start justify-between mb-4">
                                        <div class="text-5xl">üìù</div>
                                        <div class="relative">
                                            <button class="text-gray-500 hover:text-gray-700 p-2"
                                                onclick="toggleDocMenu(3)">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                            <div id="doc-menu-3"
                                                class="hidden absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border z-10">
                                                <button onclick="editTeachingDoc(3)"
                                                    class="w-full text-left px-4 py-2 hover:bg-gray-100 text-sm">
                                                    <i class="fas fa-edit mr-2"></i>Edit
                                                </button>
                                                <button onclick="deleteTeachingDoc(3)"
                                                    class="w-full text-left px-4 py-2 hover:bg-red-50 text-red-600 text-sm">
                                                    <i class="fas fa-trash mr-2"></i>Delete
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <h3><a href="#" onclick="openTeachingDoc(3); return false;"
                                            class="text-lg font-bold mb-2 hover:text-blue-600 cursor-pointer block">Chemistry
                                            Practice Worksheet</a></h3>
                                    <p class="text-sm text-gray-600 mb-2">DOCX ‚Ä¢ 450 KB</p>
                                    <div class="flex flex-wrap gap-1 mb-3">
                                        <span
                                            class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full">Chemistry</span>
                                        <span class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full">Grade
                                            9</span>
                                        <span
                                            class="text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full">Worksheet</span>
                                    </div>
                                    <div class="flex items-center justify-between text-xs text-gray-500 mb-3">
                                        <span>Modified: 3 days ago</span>
                                    </div>
                                    <div class="flex items-center justify-between text-xs text-gray-400 border-t pt-3">
                                        <span><i class="fas fa-eye mr-1"></i>56 views</span>
                                        <span><i class="fas fa-download mr-1"></i>28 downloads</span>
                                    </div>
                                </div>

                                <div class="card p-6 hover:shadow-lg transition" data-subject="biology"
                                    data-category="exam" data-grade-level="12" data-upload-date="2024-10-27"
                                    data-views="234" data-downloads="67">
                                    <div class="flex items-start justify-between mb-4">
                                        <div class="text-5xl">üìã</div>
                                        <div class="relative">
                                            <button class="text-gray-500 hover:text-gray-700 p-2"
                                                onclick="toggleDocMenu(4)">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                            <div id="doc-menu-4"
                                                class="hidden absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border z-10">
                                                <button onclick="editTeachingDoc(4)"
                                                    class="w-full text-left px-4 py-2 hover:bg-gray-100 text-sm">
                                                    <i class="fas fa-edit mr-2"></i>Edit
                                                </button>
                                                <button onclick="deleteTeachingDoc(4)"
                                                    class="w-full text-left px-4 py-2 hover:bg-red-50 text-red-600 text-sm">
                                                    <i class="fas fa-trash mr-2"></i>Delete
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <h3><a href="#" onclick="openTeachingDoc(4); return false;"
                                            class="text-lg font-bold mb-2 hover:text-blue-600 cursor-pointer block">Biology
                                            Final Exam 2024</a></h3>
                                    <p class="text-sm text-gray-600 mb-2">PDF ‚Ä¢ 1.2 MB</p>
                                    <div class="flex flex-wrap gap-1 mb-3">
                                        <span
                                            class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full">Biology</span>
                                        <span class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full">Grade
                                            12</span>
                                        <span
                                            class="text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full">Exam</span>
                                    </div>
                                    <div class="flex items-center justify-between text-xs text-gray-500 mb-3">
                                        <span>Modified: 1 month ago</span>
                                    </div>
                                    <div class="flex items-center justify-between text-xs text-gray-400 border-t pt-3">
                                        <span><i class="fas fa-eye mr-1"></i>234 views</span>
                                        <span><i class="fas fa-download mr-1"></i>67 downloads</span>
                                    </div>
                                </div>

                                <div class="card p-6 hover:shadow-lg transition" data-subject="english"
                                    data-category="notes" data-grade-level="11" data-upload-date="2024-11-15"
                                    data-views="78" data-downloads="51">
                                    <div class="flex items-start justify-between mb-4">
                                        <div class="text-5xl">üìö</div>
                                        <div class="relative">
                                            <button class="text-gray-500 hover:text-gray-700 p-2"
                                                onclick="toggleDocMenu(5)">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                            <div id="doc-menu-5"
                                                class="hidden absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border z-10">
                                                <button onclick="editTeachingDoc(5)"
                                                    class="w-full text-left px-4 py-2 hover:bg-gray-100 text-sm">
                                                    <i class="fas fa-edit mr-2"></i>Edit
                                                </button>
                                                <button onclick="deleteTeachingDoc(5)"
                                                    class="w-full text-left px-4 py-2 hover:bg-red-50 text-red-600 text-sm">
                                                    <i class="fas fa-trash mr-2"></i>Delete
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <h3><a href="#" onclick="openTeachingDoc(5); return false;"
                                            class="text-lg font-bold mb-2 hover:text-blue-600 cursor-pointer block">English
                                            Literature Guide</a></h3>
                                    <p class="text-sm text-gray-600 mb-2">PDF ‚Ä¢ 3.8 MB</p>
                                    <div class="flex flex-wrap gap-1 mb-3">
                                        <span
                                            class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full">English</span>
                                        <span class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full">Grade
                                            11</span>
                                        <span
                                            class="text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full">Notes</span>
                                    </div>
                                    <div class="flex items-center justify-between text-xs text-gray-500 mb-3">
                                        <span>Modified: 2 weeks ago</span>
                                    </div>
                                    <div class="flex items-center justify-between text-xs text-gray-400 border-t pt-3">
                                        <span><i class="fas fa-eye mr-1"></i>78 views</span>
                                        <span><i class="fas fa-download mr-1"></i>51 downloads</span>
                                    </div>
                                </div>

                                <div class="card p-6 hover:shadow-lg transition" data-subject="mathematics"
                                    data-category="worksheet" data-grade-level="8" data-upload-date="2024-11-22"
                                    data-views="92" data-downloads="39">
                                    <div class="flex items-start justify-between mb-4">
                                        <div class="text-5xl">üßÆ</div>
                                        <div class="relative">
                                            <button class="text-gray-500 hover:text-gray-700 p-2"
                                                onclick="toggleDocMenu(6)">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                            <div id="doc-menu-6"
                                                class="hidden absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border z-10">
                                                <button onclick="editTeachingDoc(6)"
                                                    class="w-full text-left px-4 py-2 hover:bg-gray-100 text-sm">
                                                    <i class="fas fa-edit mr-2"></i>Edit
                                                </button>
                                                <button onclick="deleteTeachingDoc(6)"
                                                    class="w-full text-left px-4 py-2 hover:bg-red-50 text-red-600 text-sm">
                                                    <i class="fas fa-trash mr-2"></i>Delete
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <h3><a href="#" onclick="openTeachingDoc(6); return false;"
                                            class="text-lg font-bold mb-2 hover:text-blue-600 cursor-pointer block">Algebra
                                            Problem Set</a></h3>
                                    <p class="text-sm text-gray-600 mb-2">PDF ‚Ä¢ 890 KB</p>
                                    <div class="flex flex-wrap gap-1 mb-3">
                                        <span
                                            class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full">Mathematics</span>
                                        <span class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full">Grade
                                            8</span>
                                        <span
                                            class="text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full">Worksheet</span>
                                    </div>
                                    <div class="flex items-center justify-between text-xs text-gray-500 mb-3">
                                        <span>Modified: 5 days ago</span>
                                    </div>
                                    <div class="flex items-center justify-between text-xs text-gray-400 border-t pt-3">
                                        <span><i class="fas fa-eye mr-1"></i>92 views</span>
                                        <span><i class="fas fa-download mr-1"></i>39 downloads</span>
                                    </div>
                                </div>
                            </div>
                        </div><!-- End documents-view -->
                    </div>

                    <!-- Videos Panel -->
                    <div id="videos-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Video Gallery</h1>
                            <p class="text-gray-600">Manage your educational videos</p>
                        </div>

                        <div class="flex gap-4 mb-6">
                            <button class="cta-button" onclick="openUploadVideoModal()">
                                <i class="fas fa-video"></i> Upload Video
                            </button>
                            <button class="btn-secondary px-6 py-3 rounded-lg" onclick="goLive()">
                                <i class="fas fa-circle text-red-500"></i> Go Live
                            </button>
                        </div>

                        <!-- Video Filters -->
                        <div class="flex gap-2 mb-6 flex-wrap">
                            <button class="px-4 py-2 rounded-full bg-blue-500 text-white"
                                onclick="filterVideos('all')">All Videos</button>
                            <button class="px-4 py-2 rounded-full bg-gray-200"
                                onclick="filterVideos('published')">Published</button>
                            <button class="px-4 py-2 rounded-full bg-gray-200"
                                onclick="filterVideos('draft')">Drafts</button>
                            <button class="px-4 py-2 rounded-full bg-gray-200"
                                onclick="filterVideos('favorites')">Favorites</button>
                            <button class="px-4 py-2 rounded-full bg-gray-200"
                                onclick="filterVideos('saved')">Saved</button>
                            <button class="px-4 py-2 rounded-full bg-gray-200"
                                onclick="filterVideos('playlists')">Playlists</button>
                        </div>

                        <div class="videos-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="videos-grid">
                            <!-- Videos will be loaded dynamically -->
                            <div class="card p-6 text-center text-gray-500">
                                <p>No videos yet</p>
                            </div>
                        </div>
                    </div>

                    <!-- Blog Panel -->
                    <div id="blog-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Blog Posts</h1>
                            <p class="text-gray-600">Share your knowledge through blog posts</p>
                        </div>

                        <div class="mb-6">
                            <button class="cta-button" onclick="openCreateBlogModal()">
                                <i class="fas fa-pen"></i> Create Blog Post
                            </button>
                        </div>

                        <div class="blog-grid grid grid-cols-1 md:grid-cols-2 gap-6" id="blog-grid">
                            <!-- Blog posts will be loaded dynamically -->
                            <div class="card p-6 text-center text-gray-500">
                                <p>No blog posts yet</p>
                            </div>
                        </div>
                    </div>

                    <!-- Stories Panel -->
                    <div id="stories-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">üì∏ My Stories</h1>
                            <p class="text-gray-600">Share educational moments and teaching highlights</p>
                        </div>

                        <!-- Story Stats - Dynamic from Database -->
                        <div class="story-stats-grid"
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                            <div class="stat-card card p-4" style="text-align: center;">
                                <div id="total-stories-count"
                                    style="font-size: 1.875rem; font-weight: 700; color: var(--button-bg);">0</div>
                                <div style="font-size: 0.875rem; color: var(--text-muted);">Total Stories</div>
                            </div>
                            <div class="stat-card card p-4" style="text-align: center;">
                                <div id="total-views-count"
                                    style="font-size: 1.875rem; font-weight: 700; color: #8b5cf6;">0</div>
                                <div style="font-size: 0.875rem; color: var(--text-muted);">Total Views</div>
                            </div>
                            <div class="stat-card card p-4" style="text-align: center;">
                                <div id="active-stories-count"
                                    style="font-size: 1.875rem; font-weight: 700; color: #10b981;">0</div>
                                <div style="font-size: 0.875rem; color: var(--text-muted);">Active Stories</div>
                            </div>
                            <div class="stat-card card p-4" style="text-align: center;">
                                <div id="avg-views-count"
                                    style="font-size: 1.875rem; font-weight: 700; color: #f59e0b;">0</div>
                                <div style="font-size: 0.875rem; color: var(--text-muted);">Avg. Views</div>
                            </div>
                        </div>

                        <!-- Add New Story Button -->
                        <div style="margin-bottom: 2rem;">
                            <button onclick="openUploadStoryModal()" class="cta-button"
                                style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                                <span style="font-size: 1.25rem;">‚ûï</span> Add New Story
                            </button>
                        </div>

                        <!-- Stories Grid - Dynamically loaded from database -->
                        <div id="stories-grid" class="stories-grid"
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1.5rem;">
                            <!-- Stories will be loaded here dynamically -->
                            <div
                                style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: var(--text-muted);">
                                <p>Loading stories...</p>
                            </div>
                        </div>

                        <!-- Load More Button -->
                        <div style="margin-top: 2rem; text-align: center;">
                            <button onclick="loadMoreStories()"
                                style="padding: 0.75rem 2rem; background: transparent; color: var(--button-bg); border: 2px solid var(--button-bg); border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                                Load More Stories
                            </button>
                        </div>
                    </div>

                    <!-- Reviews Panel -->
                    <div id="reviews-panel" class="panel-content hidden">
                        <div style="margin-bottom: 2rem;">
                            <h2
                                style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--heading);">
                                <span style="display: inline-flex; align-items: center; gap: 0.75rem;">
                                    <span>‚≠ê</span> Reviews & Ratings
                                </span>
                            </h2>
                            <p style="color: var(--text-secondary);">See what students and parents are saying about you
                            </p>
                        </div>

                        <!-- Rating Overview Card -->
                        <section
                            style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 16px; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 4px 16px rgba(245,158,11,0.3); color: white;">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 2rem;">
                                <div style="flex: 1; min-width: 200px;">
                                    <div
                                        style="font-size: 0.95rem; font-weight: 600; margin-bottom: 0.5rem; opacity: 0.95;">
                                        Overall Tutor Rating</div>
                                    <div
                                        style="display: flex; align-items: baseline; gap: 0.75rem; margin-bottom: 0.75rem;">
                                        <div id="reviews-avg-rating"
                                            style="font-size: 3.5rem; font-weight: 700; line-height: 1;">4.9</div>
                                        <div style="font-size: 1.25rem; opacity: 0.9;">/ 5.0</div>
                                    </div>
                                    <div style="color: rgba(255,255,255,0.95); font-size: 1rem; margin-bottom: 1rem;">
                                        ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ
                                    </div>
                                    <div id="reviews-total-count" style="font-size: 0.95rem; opacity: 0.9;">Based on 127
                                        student & parent reviews</div>
                                </div>

                                <div style="flex: 2; min-width: 300px;">
                                    <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                                        <!-- Subject Matter Expertise -->
                                        <div style="display: flex; align-items: center; gap: 0.75rem;">
                                            <span style="font-size: 0.875rem; width: 180px;">Subject Matter
                                                Expertise</span>
                                            <div
                                                style="flex: 1; height: 8px; background: rgba(255,255,255,0.2); border-radius: 4px; overflow: hidden;">
                                                <div id="reviews-subject-bar"
                                                    style="height: 100%; width: 98%; background: white; border-radius: 4px;">
                                                </div>
                                            </div>
                                            <span id="reviews-subject-understanding"
                                                style="font-size: 0.875rem; width: 40px; text-align: right; font-weight: 600;">4.9</span>
                                        </div>
                                        <!-- Communication Skills -->
                                        <div style="display: flex; align-items: center; gap: 0.75rem;">
                                            <span style="font-size: 0.875rem; width: 180px;">Communication Skills</span>
                                            <div
                                                style="flex: 1; height: 8px; background: rgba(255,255,255,0.2); border-radius: 4px; overflow: hidden;">
                                                <div id="reviews-communication-bar"
                                                    style="height: 100%; width: 96%; background: white; border-radius: 4px;">
                                                </div>
                                            </div>
                                            <span id="reviews-communication"
                                                style="font-size: 0.875rem; width: 40px; text-align: right; font-weight: 600;">4.8</span>
                                        </div>
                                        <!-- Discipline -->
                                        <div style="display: flex; align-items: center; gap: 0.75rem;">
                                            <span style="font-size: 0.875rem; width: 180px;">Discipline</span>
                                            <div
                                                style="flex: 1; height: 8px; background: rgba(255,255,255,0.2); border-radius: 4px; overflow: hidden;">
                                                <div id="reviews-discipline-bar"
                                                    style="height: 100%; width: 100%; background: white; border-radius: 4px;">
                                                </div>
                                            </div>
                                            <span id="reviews-discipline"
                                                style="font-size: 0.875rem; width: 40px; text-align: right; font-weight: 600;">5.0</span>
                                        </div>
                                        <!-- Punctuality -->
                                        <div style="display: flex; align-items: center; gap: 0.75rem;">
                                            <span style="font-size: 0.875rem; width: 180px;">Punctuality</span>
                                            <div
                                                style="flex: 1; height: 8px; background: rgba(255,255,255,0.2); border-radius: 4px; overflow: hidden;">
                                                <div id="reviews-punctuality-bar"
                                                    style="height: 100%; width: 94%; background: white; border-radius: 4px;">
                                                </div>
                                            </div>
                                            <span id="reviews-punctuality"
                                                style="font-size: 0.875rem; width: 40px; text-align: right; font-weight: 600;">4.7</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- Filter & Sort Controls -->
                        <div
                            style="background: var(--card-bg); border-radius: 12px; padding: 1.25rem; margin-bottom: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                                <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
                                    <button onclick="filterReviews('all')" class="filter-btn active" data-filter="all"
                                        style="padding: 0.5rem 1rem; border-radius: 8px; border: 2px solid var(--button-bg); background: var(--button-bg); color: white; font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: all 0.3s;">
                                        All (127)
                                    </button>
                                    <button onclick="filterReviews('5')" class="filter-btn" data-filter="5"
                                        style="padding: 0.5rem 1rem; border-radius: 8px; border: 2px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: all 0.3s;">
                                        5 Stars (98)
                                    </button>
                                    <button onclick="filterReviews('4')" class="filter-btn" data-filter="4"
                                        style="padding: 0.5rem 1rem; border-radius: 8px; border: 2px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: all 0.3s;">
                                        4 Stars (22)
                                    </button>
                                    <button onclick="filterReviews('3')" class="filter-btn" data-filter="3"
                                        style="padding: 0.5rem 1rem; border-radius: 8px; border: 2px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: all 0.3s;">
                                        3 Stars (7)
                                    </button>
                                </div>
                                <select onchange="sortReviews(this.value)"
                                    style="padding: 0.5rem 1rem; border-radius: 8px; border: 2px solid rgba(var(--border-rgb), 0.3); background: var(--card-bg); color: var(--text); font-size: 0.875rem; cursor: pointer;">
                                    <option value="recent">Most Recent</option>
                                    <option value="helpful">Most Helpful</option>
                                    <option value="highest">Highest Rating</option>
                                    <option value="lowest">Lowest Rating</option>
                                </select>
                            </div>
                        </div>

                        <!-- Reviews List -->
                        <div id="reviews-list" style="display: grid; gap: 1.5rem;">
                            <!-- Review 1 - Featured/Helpful -->
                            <div class="review-card" data-rating="5"
                                style="background: var(--card-bg); border-radius: 16px; padding: 2rem; box-shadow: 0 2px 12px rgba(0,0,0,0.08); border-left: 4px solid #f59e0b;">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1.25rem;">
                                    <div style="display: flex; gap: 1rem; align-items: center;">
                                        <img src="../uploads/system_images/system_profile_pictures/student-teenage-girl.jpg"
                                            alt="Student"
                                            style="width: 56px; height: 56px; border-radius: 50%; object-fit: cover; border: 3px solid #f59e0b;">
                                        <div>
                                            <h4
                                                style="font-size: 1.125rem; font-weight: 600; margin: 0 0 0.25rem 0; color: var(--heading);">
                                                Meron Bekele</h4>
                                            <p
                                                style="font-size: 0.875rem; color: var(--text-muted); margin: 0 0 0.25rem 0;">
                                                Grade 11 Student ‚Ä¢ Mathematics</p>
                                            <div class="rating-tooltip-container" style="display: inline-block;">
                                                <div style="color: #f59e0b; font-size: 1rem;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                                                <div class="rating-tooltip">
                                                    <div class="tooltip-header">Meron's Rating</div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Subject Matter Expertise</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill subject-matter"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Communication Skills</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill communication"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Discipline</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill discipline"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Punctuality</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill punctuality"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-overall">
                                                        <div class="tooltip-overall-label">Overall</div>
                                                        <div class="tooltip-overall-value">5.0 / 5.0</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="text-align: right;">
                                        <div
                                            style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600; margin-bottom: 0.5rem;">
                                            ‚≠ê Featured Review
                                        </div>
                                        <span style="font-size: 0.875rem; color: var(--text-muted);">2 weeks ago</span>
                                    </div>
                                </div>
                                <p
                                    style="color: var(--text); line-height: 1.7; margin: 0 0 1.25rem 0; font-size: 1rem;">
                                    "Outstanding tutor! Explains complex mathematical concepts in such a clear and
                                    simple way. Very patient and encourages questions. Always arrives on time and
                                    well-prepared. My grades have improved significantly since I started learning with
                                    this tutor. Highly recommend!"</p>
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; padding-top: 1rem; border-top: 1px solid rgba(var(--border-rgb), 0.3);">
                                    <div style="display: flex; gap: 1rem;">
                                        <button onclick="markHelpful(this)"
                                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; cursor: pointer; transition: all 0.3s;">
                                            <span>üëç</span> Helpful (45)
                                        </button>
                                        <button onclick="reportReview(this)"
                                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; cursor: pointer; transition: all 0.3s;">
                                            <span>üö©</span> Report
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Review 2 -->
                            <div class="review-card" data-rating="5"
                                style="background: var(--card-bg); border-radius: 16px; padding: 2rem; box-shadow: 0 2px 12px rgba(0,0,0,0.08); border-left: 4px solid #3b82f6;">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1.25rem;">
                                    <div style="display: flex; gap: 1rem; align-items: center;">
                                        <img src="../uploads/system_images/system_profile_pictures/Dad-profile.jpg"
                                            alt="Parent"
                                            style="width: 56px; height: 56px; border-radius: 50%; object-fit: cover;">
                                        <div>
                                            <h4
                                                style="font-size: 1.125rem; font-weight: 600; margin: 0 0 0.25rem 0; color: var(--heading);">
                                                Ato Alemayehu Tadesse</h4>
                                            <p
                                                style="font-size: 0.875rem; color: var(--text-muted); margin: 0 0 0.25rem 0;">
                                                Parent ‚Ä¢ Child: Grade 9 Physics</p>
                                            <div class="rating-tooltip-container" style="display: inline-block;">
                                                <div style="color: #f59e0b; font-size: 1rem;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                                                <div class="rating-tooltip">
                                                    <div class="tooltip-header">Alemayehu's Rating</div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Subject Matter Expertise</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill subject-matter"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Communication Skills</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill communication"
                                                                style="width: 90%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">4.5</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Discipline</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill discipline"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Punctuality</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill punctuality"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-overall">
                                                        <div class="tooltip-overall-label">Overall</div>
                                                        <div class="tooltip-overall-value">4.9 / 5.0</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <span style="font-size: 0.875rem; color: var(--text-muted);">1 month ago</span>
                                </div>
                                <p
                                    style="color: var(--text); line-height: 1.7; margin: 0 0 1.25rem 0; font-size: 1rem;">
                                    "Excellent tutor! My son's physics understanding has improved dramatically. Very
                                    professional, always punctual, and creates a positive learning environment. The
                                    tutor uses practical examples that make difficult concepts easy to understand. Worth
                                    every birr!"</p>
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; padding-top: 1rem; border-top: 1px solid rgba(var(--border-rgb), 0.3);">
                                    <div style="display: flex; gap: 1rem;">
                                        <button onclick="markHelpful(this)"
                                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; cursor: pointer; transition: all 0.3s;">
                                            <span>üëç</span> Helpful (32)
                                        </button>
                                        <button onclick="reportReview(this)"
                                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; cursor: pointer; transition: all 0.3s;">
                                            <span>üö©</span> Report
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Review 3 -->
                            <div class="review-card" data-rating="4"
                                style="background: var(--card-bg); border-radius: 16px; padding: 2rem; box-shadow: 0 2px 12px rgba(0,0,0,0.08); border-left: 4px solid #10b981;">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1.25rem;">
                                    <div style="display: flex; gap: 1rem; align-items: center;">
                                        <img src="../uploads/system_images/system_profile_pictures/student-college-boy.jpg"
                                            alt="Student"
                                            style="width: 56px; height: 56px; border-radius: 50%; object-fit: cover;">
                                        <div>
                                            <h4
                                                style="font-size: 1.125rem; font-weight: 600; margin: 0 0 0.25rem 0; color: var(--heading);">
                                                Daniel Haile</h4>
                                            <p
                                                style="font-size: 0.875rem; color: var(--text-muted); margin: 0 0 0.25rem 0;">
                                                University Student ‚Ä¢ Advanced Calculus</p>
                                            <div class="rating-tooltip-container" style="display: inline-block;">
                                                <div style="color: #f59e0b; font-size: 1rem;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                                                <div class="rating-tooltip">
                                                    <div class="tooltip-header">Daniel's Rating</div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Subject Matter Expertise</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill subject-matter"
                                                                style="width: 90%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">4.5</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Communication Skills</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill communication"
                                                                style="width: 80%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">4.0</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Discipline</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill discipline"
                                                                style="width: 80%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">4.0</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Punctuality</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill punctuality"
                                                                style="width: 90%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">4.5</div>
                                                    </div>
                                                    <div class="tooltip-overall">
                                                        <div class="tooltip-overall-label">Overall</div>
                                                        <div class="tooltip-overall-value">4.3 / 5.0</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <span style="font-size: 0.875rem; color: var(--text-muted);">2 months ago</span>
                                </div>
                                <p
                                    style="color: var(--text); line-height: 1.7; margin: 0 0 1.25rem 0; font-size: 1rem;">
                                    "Good tutor with solid knowledge of calculus. Helpful for exam preparation.
                                    Sometimes moves a bit fast through topics, but overall a positive experience. Would
                                    recommend having specific questions prepared before each session."</p>
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; padding-top: 1rem; border-top: 1px solid rgba(var(--border-rgb), 0.3);">
                                    <div style="display: flex; gap: 1rem;">
                                        <button onclick="markHelpful(this)"
                                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; cursor: pointer; transition: all 0.3s;">
                                            <span>üëç</span> Helpful (18)
                                        </button>
                                        <button onclick="reportReview(this)"
                                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; cursor: pointer; transition: all 0.3s;">
                                            <span>üö©</span> Report
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Review 4 -->
                            <div class="review-card" data-rating="5"
                                style="background: var(--card-bg); border-radius: 16px; padding: 2rem; box-shadow: 0 2px 12px rgba(0,0,0,0.08); border-left: 4px solid #8b5cf6;">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1.25rem;">
                                    <div style="display: flex; gap: 1rem; align-items: center;">
                                        <img src="../uploads/system_images/system_profile_pictures/Mom-profile.jpg"
                                            alt="Parent"
                                            style="width: 56px; height: 56px; border-radius: 50%; object-fit: cover;">
                                        <div>
                                            <h4
                                                style="font-size: 1.125rem; font-weight: 600; margin: 0 0 0.25rem 0; color: var(--heading);">
                                                Weizero Sara Abraham</h4>
                                            <p
                                                style="font-size: 0.875rem; color: var(--text-muted); margin: 0 0 0.25rem 0;">
                                                Parent ‚Ä¢ Child: Grade 8 English</p>
                                            <div class="rating-tooltip-container" style="display: inline-block;">
                                                <div style="color: #f59e0b; font-size: 1rem;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                                                <div class="rating-tooltip">
                                                    <div class="tooltip-header">Sara's Rating</div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Subject Matter Expertise</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill subject-matter"
                                                                style="width: 96%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">4.8</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Communication Skills</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill communication"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Discipline</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill discipline"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-rating-row">
                                                        <div class="tooltip-rating-label">Punctuality</div>
                                                        <div class="tooltip-progress-bar">
                                                            <div class="tooltip-progress-fill punctuality"
                                                                style="width: 100%;"></div>
                                                        </div>
                                                        <div class="tooltip-progress-value">5.0</div>
                                                    </div>
                                                    <div class="tooltip-overall">
                                                        <div class="tooltip-overall-label">Overall</div>
                                                        <div class="tooltip-overall-value">4.9 / 5.0</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <span style="font-size: 0.875rem; color: var(--text-muted);">3 weeks ago</span>
                                </div>
                                <p
                                    style="color: var(--text); line-height: 1.7; margin: 0 0 1.25rem 0; font-size: 1rem;">
                                    "Wonderful tutor! My daughter's English has improved so much. Very patient and
                                    creates engaging lessons. Always prepared and professional. My daughter actually
                                    looks forward to the tutoring sessions now. Thank you!"</p>
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; padding-top: 1rem; border-top: 1px solid rgba(var(--border-rgb), 0.3);">
                                    <div style="display: flex; gap: 1rem;">
                                        <button onclick="markHelpful(this)"
                                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; cursor: pointer; transition: all 0.3s;">
                                            <span>üëç</span> Helpful (27)
                                        </button>
                                        <button onclick="reportReview(this)"
                                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid rgba(var(--border-rgb), 0.3); background: transparent; color: var(--text); font-size: 0.875rem; cursor: pointer; transition: all 0.3s;">
                                            <span>üö©</span> Report
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Analysis Panel -->
                    <div id="analysis-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">üìä Tutor Analysis</h1>
                            <p class="text-gray-600">Analytics and insights about your teaching performance</p>
                        </div>

                        <div class="card p-12 text-center">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">üìä</div>
                            <h2 class="text-2xl font-bold mb-3" style="color: var(--text);">Coming Soon</h2>
                            <p class="text-lg" style="color: var(--muted); max-width: 500px; margin: 0 auto;">
                                We're working on advanced analytics to help you track your teaching performance,
                                student progress, earnings trends, and more. Stay tuned!
                            </p>
                        </div>
                    </div>

                    <!-- Notes Panel -->
                    <div id="notes-panel" class="panel-content hidden">
                        <!-- Notes Panel Header -->
                        <div class="dashboard-header">
                            <div class="dashboard-title-section">
                                <h1 class="dashboard-title">
                                    <i class="fas fa-sticky-note"></i>
                                    My Notes
                                </h1>
                                <p class="dashboard-subtitle">Organize your thoughts and knowledge</p>
                            </div>
                            <div class="dashboard-actions">
                                <button class="btn btn-primary" onclick="NotesManager.createNewNote()">
                                    <i class="fas fa-plus"></i> New Note
                                </button>
                            </div>
                        </div>

                        <!-- Stats Bar -->
                        <div class="stats-bar">
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-file-alt"></i>
                                </div>
                                <div class="stat-info">
                                    <span class="stat-number" id="totalNotes">0</span>
                                    <span class="stat-label">Total Notes</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon words">
                                    <i class="fas fa-font"></i>
                                </div>
                                <div class="stat-info">
                                    <span class="stat-number" id="totalWords">0</span>
                                    <span class="stat-label">Total Words</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon courses">
                                    <i class="fas fa-book"></i>
                                </div>
                                <div class="stat-info">
                                    <span class="stat-number" id="totalCourses">0</span>
                                    <span class="stat-label">Courses</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon recent">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="stat-info">
                                    <span class="stat-number" id="recentNotes">0</span>
                                    <span class="stat-label">This Week</span>
                                </div>
                            </div>
                        </div>

                        <!-- Controls Bar: Search, Filter, Sort -->
                        <div class="controls-bar">
                            <div class="search-box">
                                <i class="fas fa-search search-icon"></i>
                                <input type="text" class="search-input" id="searchInput" placeholder="Search notes..."
                                    oninput="NotesManager.searchNotes(this.value)">
                            </div>
                            <div class="filter-buttons">
                                <button class="filter-btn active" data-filter="all"
                                    onclick="NotesManager.filterNotes('all', this)">
                                    <i class="fas fa-th"></i> All Notes
                                </button>
                                <button class="filter-btn" data-filter="recent"
                                    onclick="NotesManager.filterNotes('recent', this)">
                                    <i class="fas fa-clock"></i> Recent
                                </button>
                                <button class="filter-btn" data-filter="favorites"
                                    onclick="NotesManager.filterNotes('favorites', this)">
                                    <i class="fas fa-star"></i> Favorites
                                </button>
                                <button class="filter-btn" data-filter="media"
                                    onclick="NotesManager.filterNotes('media', this)">
                                    <i class="fas fa-microphone"></i> Media Notes
                                </button>
                            </div>
                            <select class="sort-select" id="sortSelect" onchange="NotesManager.sortNotes()">
                                <option value="date-desc">Newest First</option>
                                <option value="date-asc">Oldest First</option>
                                <option value="title">Title A-Z</option>
                                <option value="course">By Course</option>
                            </select>
                        </div>

                        <!-- Notes Grid -->
                        <div class="notes-grid" id="notesGrid">
                            <!-- New Note Card (always shown first) -->
                            <div class="note-card new-note" onclick="NotesManager.createNewNote()">
                                <div class="new-note-content">
                                    <div class="new-note-icon">
                                        <i class="fas fa-plus"></i>
                                    </div>
                                    <h3>Create New Note</h3>
                                    <p>Start writing your next note</p>
                                </div>
                            </div>
                            <!-- Note cards will be rendered here by NotesManager.renderDashboard() -->
                        </div>

                    </div>

                    <!-- Credentials Panel (Academic Credentials, Awards and Honors, Experience) -->
                    <div id="credentials-panel" class="panel-content hidden">
                        <div class="mb-8 flex justify-between items-center">
                            <div>
                                <h1 class="text-3xl font-bold mb-2">üìÑ My Credentials</h1>
                                <p class="text-gray-600">Manage your academic certificates, achievements, and experience
                                </p>
                            </div>
                            <button onclick="openUploadCredentialModal()" class="btn-primary">
                                <span>üì§ Upload Credential</span>
                            </button>
                        </div>

                        <!-- Credential Type Selector Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <!-- Achievements Card -->
                            <div onclick="switchCredentialSection('achievement')" id="cred-card-achievement"
                                class="credential-type-card active cursor-pointer card p-6 bg-gradient-to-br from-yellow-50 to-amber-50 border-yellow-200 hover:shadow-lg transition-all duration-200">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-3xl">üèÜ</span>
                                    <span
                                        class="text-xs font-semibold text-yellow-600 bg-yellow-100 px-2 py-1 rounded-full"
                                        id="achievement-count">0</span>
                                </div>
                                <h3 class="text-lg font-bold text-gray-800 mb-1">Awards and Honors</h3>
                                <p class="text-sm text-gray-600">Competition wins & recognitions</p>
                            </div>

                            <!-- Academic Card -->
                            <div onclick="switchCredentialSection('academic')" id="cred-card-academic"
                                class="credential-type-card cursor-pointer card p-6 bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200 hover:shadow-lg transition-all duration-200">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-3xl">üéì</span>
                                    <span class="text-xs font-semibold text-blue-600 bg-blue-100 px-2 py-1 rounded-full"
                                        id="academic-count">0</span>
                                </div>
                                <h3 class="text-lg font-bold text-gray-800 mb-1">Academic Credentials</h3>
                                <p class="text-sm text-gray-600">Degrees, certificates & diplomas</p>
                            </div>

                            <!-- Experience Card -->
                            <div onclick="switchCredentialSection('experience')" id="cred-card-experience"
                                class="credential-type-card cursor-pointer card p-6 bg-gradient-to-br from-green-50 to-emerald-50 border-green-200 hover:shadow-lg transition-all duration-200">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-3xl">üíº</span>
                                    <span
                                        class="text-xs font-semibold text-green-600 bg-green-100 px-2 py-1 rounded-full"
                                        id="experience-count">0</span>
                                </div>
                                <h3 class="text-lg font-bold text-gray-800 mb-1">Experience</h3>
                                <p class="text-sm text-gray-600">Work history & teaching positions</p>
                            </div>
                        </div>

                        <!-- Credentials Grid (dynamically populated based on selected type) -->
                        <div class="card p-6">
                            <div class="mb-4 flex items-center justify-between">
                                <h2 class="text-xl font-bold text-gray-800" id="current-cred-type-title">
                                    üèÜ Achievements
                                </h2>
                                <span class="text-sm text-gray-500" id="current-cred-count">0 credentials</span>
                            </div>

                            <div id="credentials-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <!-- Credentials will be loaded dynamically -->
                                <div class="text-center text-gray-500 py-12 col-span-full" id="credentials-empty-state">
                                    <div class="text-6xl mb-4">üìÑ</div>
                                    <p class="text-lg font-semibold mb-2">No credentials yet</p>
                                    <p class="text-sm">Click "Upload Credential" to add your first credential</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Earnings & Investments Panel -->
                    <div id="earnings-investments-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Earnings & Investments</h1>
                            <p class="text-gray-600">Track your income streams and investment portfolio</p>
                        </div>

                        <!-- Tabs -->
                        <div class="flex gap-4 mb-6 border-b border-gray-200">
                            <button onclick="switchEarningsTab('earnings')" id="earnings-tab"
                                class="earnings-tab-btn px-6 py-3 font-semibold text-blue-600 border-b-2 border-blue-600 transition-all">
                                Earnings
                            </button>
                            <button onclick="switchEarningsTab('investments')" id="investments-tab"
                                class="earnings-tab-btn px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 transition-all">
                                Investments
                            </button>
                        </div>

                        <!-- Earnings Tab Content -->
                        <div id="earnings-tab-content" class="earnings-tab-content">
                            <!-- Summary Cards (3 Cards: Total, Affiliate, Tutoring) -->
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                                <div onclick="toggleEarningsSection('total')"
                                    class="card p-6 bg-gradient-to-br from-green-50 to-emerald-50 border-green-200 cursor-pointer hover:shadow-lg transition-all duration-200 active-earnings-card">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-green-600 text-2xl">üí∞</span>
                                        <span class="text-xs text-green-600 font-semibold">ALL SOURCES</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mb-1">Total Earnings</p>
                                    <h3 class="text-2xl font-bold text-gray-800" id="total-earnings"><span class="earnings-amount">0</span> <span class="earnings-currency"></span></h3>
                                    <p class="text-xs text-green-600 mt-2 font-medium">Click to view all</p>
                                </div>
                                <div onclick="toggleEarningsSection('affiliate')"
                                    class="card p-6 bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200 cursor-pointer hover:shadow-lg transition-all duration-200">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-blue-600 text-2xl">ü§ù</span>
                                        <span class="text-xs text-blue-600 font-semibold">AFFILIATE</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mb-1">Affiliate Earnings</p>
                                    <h3 class="text-2xl font-bold text-gray-800" id="affiliate-earnings"><span class="earnings-amount">0</span> <span class="earnings-currency"></span></h3>
                                    <p class="text-xs text-blue-600 mt-2 font-medium">Click to view</p>
                                </div>
                                <div onclick="toggleEarningsSection('tutoring')"
                                    class="card p-6 bg-gradient-to-br from-orange-50 to-amber-50 border-orange-200 cursor-pointer hover:shadow-lg transition-all duration-200">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-orange-600 text-2xl">üìö</span>
                                        <span class="text-xs text-orange-600 font-semibold">TUTORING</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mb-1">Tutoring Sessions</p>
                                    <h3 class="text-2xl font-bold text-gray-800" id="tutoring-earnings"><span class="earnings-amount">0</span> <span class="earnings-currency"></span></h3>
                                    <p class="text-xs text-orange-600 mt-2 font-medium">Click to view</p>
                                </div>
                            </div>

                            <!-- Earnings Sections -->
                            <div class="space-y-8">
                                <!-- Total Earnings Section -->
                                <div id="total-earnings-section" class="card p-6 earnings-section">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-green-600">üí∞</span>
                                                Total Earnings - All Sources
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Combined view of all your earnings</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <select id="total-period-selector" onchange="loadTotalEarningsData()"
                                                class="p-2 border-2 rounded-lg text-sm font-medium">
                                                <option value="1">Last Month</option>
                                                <option value="3">Last 3 Months</option>
                                                <option value="6" selected>Last 6 Months</option>
                                                <option value="12">Last Year</option>
                                            </select>
                                        </div>
                                    </div>
                                    <!-- Total Earnings Chart -->
                                    <div class="mb-6 bg-gray-50 p-4 rounded-lg" style="height: 300px;">
                                        <canvas id="total-earnings-chart"></canvas>
                                    </div>
                                    <!-- Combined List -->
                                    <div id="total-earnings-list"
                                        class="space-y-3 max-h-96 overflow-y-auto min-h-[300px]">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- Affiliate Earnings Section (with 3 tabs: Advertisement, Subscription, Commission) -->
                                <div id="affiliate-earnings-section" class="card p-6 earnings-section hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-blue-600">ü§ù</span>
                                                Affiliate Earnings
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Earnings from ads, referrals, and
                                                connections</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <select id="affiliate-period-selector" onchange="loadAffiliateData()"
                                                class="p-2 border-2 rounded-lg text-sm font-medium">
                                                <option value="1">Last Month</option>
                                                <option value="3">Last 3 Months</option>
                                                <option value="6" selected>Last 6 Months</option>
                                                <option value="12">Last Year</option>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Affiliate Sub-Tabs -->
                                    <div class="flex gap-2 mb-6 border-b border-gray-200">
                                        <button onclick="switchAffiliateTab('advertisement')" id="advertisement-tab"
                                            class="affiliate-tab-btn px-4 py-2 font-medium text-blue-600 border-b-2 border-blue-600 transition-all flex items-center gap-2">
                                            <span>üì∫</span> Advertisement
                                        </button>
                                        <button onclick="switchAffiliateTab('subscription')" id="subscription-tab"
                                            class="affiliate-tab-btn px-4 py-2 font-medium text-gray-500 hover:text-gray-700 transition-all flex items-center gap-2">
                                            <span>‚≠ê</span> Subscription
                                        </button>
                                        <button onclick="switchAffiliateTab('commission')" id="commission-tab"
                                            class="affiliate-tab-btn px-4 py-2 font-medium text-gray-500 hover:text-gray-700 transition-all flex items-center gap-2">
                                            <span>üîó</span> Commission
                                        </button>
                                    </div>

                                    <!-- Advertisement Tab Content -->
                                    <div id="advertisement-tab-content" class="affiliate-tab-content">
                                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                                            <p class="text-sm text-blue-800">
                                                <strong>Advertisement Earnings:</strong> Revenue from ads displayed to
                                                users who signed up through your referral link.
                                            </p>
                                        </div>
                                        <!-- Affiliate Levels Info (Single Row, Clickable) -->
                                        <div id="advertisement-affiliate-levels" class="flex flex-wrap gap-3 mb-6">
                                            <!-- Will be populated by JS with clickable affiliate tier level cards -->
                                        </div>
                                        <div class="mb-6 bg-gray-50 p-4 rounded-lg" style="height: 250px;">
                                            <canvas id="advertisement-earnings-chart"></canvas>
                                        </div>
                                        <div id="advertisement-earnings-list"
                                            class="space-y-3 max-h-96 overflow-y-auto min-h-[200px]">
                                            <!-- Will be populated by JS -->
                                        </div>
                                    </div>

                                    <!-- Subscription Tab Content -->
                                    <div id="subscription-tab-content" class="affiliate-tab-content hidden">
                                        <div class="bg-purple-50 border border-purple-200 rounded-lg p-4 mb-4">
                                            <p class="text-sm text-purple-800">
                                                <strong>Subscription Earnings:</strong> Commission from users you
                                                referred who subscribed to premium plans.
                                            </p>
                                        </div>
                                        <!-- Affiliate Levels Info (Single Row, Clickable) -->
                                        <div id="subscription-affiliate-levels" class="flex flex-wrap gap-3 mb-6">
                                            <!-- Will be populated by JS with clickable affiliate tier level cards -->
                                        </div>
                                        <div class="mb-6 bg-gray-50 p-4 rounded-lg" style="height: 250px;">
                                            <canvas id="subscription-earnings-chart"></canvas>
                                        </div>
                                        <div id="subscription-earnings-list"
                                            class="space-y-3 max-h-96 overflow-y-auto min-h-[200px]">
                                            <!-- Will be populated by JS -->
                                        </div>
                                    </div>

                                    <!-- Commission Tab Content -->
                                    <div id="commission-tab-content" class="affiliate-tab-content hidden">
                                        <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4">
                                            <p class="text-sm text-green-800">
                                                <strong>Commission Earnings:</strong> Your share from tutor-student
                                                connections you facilitated.
                                            </p>
                                        </div>
                                        <!-- Affiliate Levels Info (Single Row, Clickable) -->
                                        <div id="commission-affiliate-levels" class="flex flex-wrap gap-3 mb-6">
                                            <!-- Will be populated by JS with clickable affiliate tier level cards -->
                                        </div>
                                        <div class="mb-6 bg-gray-50 p-4 rounded-lg" style="height: 250px;">
                                            <canvas id="commission-earnings-chart"></canvas>
                                        </div>
                                        <div id="commission-earnings-list"
                                            class="space-y-3 max-h-96 overflow-y-auto min-h-[200px]">
                                            <!-- Will be populated by JS -->
                                        </div>
                                    </div>
                                </div>

                                <!-- Tutoring Earnings Section -->
                                <div id="tutoring-earnings-section" class="card p-6 earnings-section hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-orange-600">üìö</span>
                                                Tutoring Session Earnings
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Income from teaching sessions</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <select id="tutoring-period-selector" onchange="loadTutoringData()"
                                                class="p-2 border-2 rounded-lg text-sm font-medium">
                                                <option value="1">Last Month</option>
                                                <option value="3">Last 3 Months</option>
                                                <option value="6" selected>Last 6 Months</option>
                                                <option value="12">Last Year</option>
                                            </select>
                                        </div>
                                    </div>
                                    <!-- Line Graph -->
                                    <div class="mb-6 bg-gray-50 p-4 rounded-lg" style="height: 250px;">
                                        <canvas id="tutoring-earnings-chart"></canvas>
                                    </div>
                                    <!-- List of Sessions -->
                                    <div id="tutoring-earnings-list"
                                        class="space-y-3 max-h-96 overflow-y-auto min-h-[300px]">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Investments Tab Content -->
                        <div id="investments-tab-content" class="earnings-tab-content hidden">
                            <!-- Investment Summary Cards -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                                <!-- Subscriptions Card -->
                                <div class="card p-6 bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200 cursor-pointer hover:shadow-lg transition-all duration-300 border-2 hover:border-blue-400"
                                    onclick="toggleSubscriptionsSection()">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-blue-600 text-2xl">üìã</span>
                                        <span class="text-xs text-blue-600 font-semibold">SUBSCRIPTIONS</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mb-1">Active Subscriptions</p>
                                    <h3 class="text-2xl font-bold text-gray-800" id="total-subscriptions">0</h3>
                                    <p class="text-xs text-gray-500 mt-2">Click to view subscription history</p>
                                </div>

                                <!-- Purchase History Card -->
                                <div class="card p-6 bg-gradient-to-br from-purple-50 to-pink-50 border-purple-200 cursor-pointer hover:shadow-lg transition-all duration-300 border-2 hover:border-purple-400"
                                    onclick="togglePurchaseHistorySection()">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-purple-600 text-2xl">üõí</span>
                                        <span class="text-xs text-purple-600 font-semibold">PURCHASES</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mb-1">Purchase History</p>
                                    <h3 class="text-2xl font-bold text-gray-800">
                                        <span class="text-base text-gray-500">Coming Soon</span>
                                    </h3>
                                    <p class="text-xs text-gray-500 mt-2">Click to view purchase history</p>
                                </div>
                            </div>

                            <!-- Subscriptions List Section -->
                            <div id="subscriptions-section" class="mb-8 hidden">
                                <div class="flex items-center justify-between mb-4">
                                    <h2 class="text-xl font-bold text-gray-800">Subscription History</h2>
                                </div>

                                <!-- Loading State -->
                                <div id="subscriptions-loading" class="hidden text-center py-16">
                                    <div
                                        class="inline-block animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mb-4">
                                    </div>
                                    <p class="text-gray-600 text-lg">Loading subscriptions...</p>
                                </div>

                                <!-- Empty State -->
                                <div id="subscriptions-empty" class="hidden text-center py-16">
                                    <div class="text-6xl mb-4">üì≠</div>
                                    <h3 class="text-2xl font-bold text-gray-800 mb-2">No Subscriptions Yet</h3>
                                    <p class="text-gray-600">You haven't subscribed to any plans yet.</p>
                                </div>

                                <!-- Subscriptions List Container -->
                                <div id="subscriptions-list" class="space-y-4">
                                    <!-- Dynamically populated subscription cards will appear here -->
                                </div>
                            </div>

                            <!-- Purchase History Section (Coming Soon) -->
                            <div id="purchase-history-section" class="mb-8 hidden">
                                <div class="flex items-center justify-between mb-4">
                                    <h2 class="text-xl font-bold text-gray-800">Purchase History</h2>
                                </div>

                                <div class="text-center py-16 card">
                                    <div class="text-6xl mb-4">üöß</div>
                                    <h3 class="text-2xl font-bold text-gray-800 mb-2">Coming Soon</h3>
                                    <p class="text-gray-600 mb-4">Purchase history for materials and resources will be
                                        available soon.</p>
                                    <p class="text-sm text-gray-500">Stay tuned for updates!</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Community Panel (Restructured to match Earnings-Investments pattern) -->
                    <div class="panel-content hidden" id="community-panel">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Community</h1>
                            <p class="text-gray-600">Connect with students, parents, and fellow tutors</p>
                        </div>

                        <!-- Main Section Cards (Clickable Cards instead of Tabs) -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                            <div onclick="switchCommunityMainTab('connections')" id="connections-main-tab"
                                class="card p-6 bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200 cursor-pointer hover:shadow-lg transition-all duration-200 community-main-card active-community-card"
                                style="display: flex; flex-direction: column; min-height: 140px; overflow: visible;">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-blue-600" style="font-size: 2.5rem; line-height: 1;">üë•</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-800 mb-2" style="line-height: 1.3;">Connections
                                </h3>
                                <p class="text-sm text-gray-600 mb-2" style="line-height: 1.4; flex-grow: 1;">Manage
                                    your network</p>
                                <p class="text-xs text-blue-600 font-medium" style="margin-top: auto;">Click to open</p>
                            </div>
                            <div onclick="switchCommunityMainTab('requests-sent')" id="requests-sent-main-tab"
                                class="card p-6 bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200 cursor-pointer hover:shadow-lg transition-all duration-200 community-main-card"
                                style="display: flex; flex-direction: column; min-height: 140px; overflow: visible;">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-blue-600" style="font-size: 2.5rem; line-height: 1;">üì§</span>
                                    <span class="text-xs text-blue-600 font-semibold">SENT</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-800 mb-2" style="line-height: 1.3;">Requests Sent
                                </h3>
                                <p class="text-sm text-gray-600 mb-2" style="line-height: 1.4; flex-grow: 1;">
                                    <span class="text-2xl font-bold" id="sent-requests-count-main">0</span> pending
                                </p>
                                <p class="text-xs text-blue-600 font-medium" style="margin-top: auto;">Click to open</p>
                            </div>
                            <div onclick="switchCommunityMainTab('requests-received')" id="requests-received-main-tab"
                                class="card p-6 bg-gradient-to-br from-green-50 to-emerald-50 border-green-200 cursor-pointer hover:shadow-lg transition-all duration-200 community-main-card"
                                style="display: flex; flex-direction: column; min-height: 140px; overflow: visible;">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-green-600" style="font-size: 2.5rem; line-height: 1;">üì•</span>
                                    <span class="text-xs text-green-600 font-semibold">RECEIVED</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-800 mb-2" style="line-height: 1.3;">Requests
                                    Received</h3>
                                <p class="text-sm text-gray-600 mb-2" style="line-height: 1.4; flex-grow: 1;">
                                    <span class="text-2xl font-bold" id="received-requests-count-main">0</span> pending
                                </p>
                                <p class="text-xs text-green-600 font-medium" style="margin-top: auto;">Click to open
                                </p>
                            </div>
                        </div>

                        <!-- Connections Tab Content -->
                        <div id="connections-main-tab-content" class="community-main-tab-content">
                            <!-- Sub-Section Tabs (Regular Tabs) -->
                            <div class="flex gap-4 mb-6 border-b border-gray-200">
                                <button onclick="toggleConnectionsSubSection('all')" id="all-connections-tab"
                                    class="connections-sub-tab px-6 py-3 font-semibold text-blue-600 border-b-2 border-blue-600 transition-all">
                                    All Connections
                                </button>
                                <button onclick="toggleConnectionsSubSection('students')" id="students-connections-tab"
                                    class="connections-sub-tab px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 transition-all">
                                    Students
                                </button>
                                <button onclick="toggleConnectionsSubSection('parents')" id="parents-connections-tab"
                                    class="connections-sub-tab px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 transition-all">
                                    Parents
                                </button>
                                <button onclick="toggleConnectionsSubSection('tutors')" id="tutors-connections-tab"
                                    class="connections-sub-tab px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 transition-all">
                                    Tutors
                                </button>
                            </div>

                            <!-- Connections Sub-Sections -->
                            <div class="space-y-8">
                                <!-- All Connections Section -->
                                <div id="all-connections-subsection" class="card p-6 connections-subsection">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-blue-600">üë•</span>
                                                All Connections
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">View all your connections in one place
                                            </p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <input type="text" id="all-connections-search"
                                                placeholder="Search connections..."
                                                class="p-2 border-2 rounded-lg text-sm"
                                                oninput="if(typeof searchAllConnections === 'function') searchAllConnections(this.value)">
                                        </div>
                                    </div>
                                    <!-- Connections Grid -->
                                    <div id="all-connections-grid"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto min-h-[300px]">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- Students Section -->
                                <div id="students-connections-subsection"
                                    class="card p-6 connections-subsection hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-green-600">üë®‚Äçüéì</span>
                                                Student Connections
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Students you're teaching</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <input type="text" id="student-connections-search"
                                                placeholder="Search students..." class="p-2 border-2 rounded-lg text-sm"
                                                oninput="if(typeof searchStudentConnections === 'function') searchStudentConnections(this.value)">
                                        </div>
                                    </div>
                                    <div id="students-connections-grid"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto min-h-[300px]">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- Parents Section -->
                                <div id="parents-connections-subsection" class="card p-6 connections-subsection hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-orange-600">üë®‚Äçüë©‚Äçüëß</span>
                                                Parent Connections
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Parents you're connected with</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <input type="text" id="parent-connections-search"
                                                placeholder="Search parents..." class="p-2 border-2 rounded-lg text-sm"
                                                oninput="if(typeof searchParentConnections === 'function') searchParentConnections(this.value)">
                                        </div>
                                    </div>
                                    <div id="parents-connections-grid"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto min-h-[300px]">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- Tutors Section -->
                                <div id="tutors-connections-subsection" class="card p-6 connections-subsection hidden">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-purple-600">üë®‚Äçüè´</span>
                                                Tutor Connections
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Other tutors in your network</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <input type="text" id="tutor-connections-search"
                                                placeholder="Search tutors..." class="p-2 border-2 rounded-lg text-sm"
                                                oninput="if(typeof searchTutorConnections === 'function') searchTutorConnections(this.value)">
                                        </div>
                                    </div>
                                    <div id="tutors-connections-grid"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto min-h-[300px]">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Requests Tab Content (NEW) -->
                        <div id="requests-main-tab-content" class="community-main-tab-content hidden">
                            <!-- Requests Sub-Sections -->
                            <div class="space-y-8">
                                <!-- Requests Sent Section -->
                                <div id="sent-requests-subsection" class="card p-6 requests-subsection">
                                    <div class="mb-6">
                                        <div class="mb-4">
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-blue-600">üì§</span>
                                                Requests Sent
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Connection requests you've sent to
                                                others</p>
                                        </div>
                                        <!-- Status Filter Tabs -->
                                        <div class="flex items-center gap-2 border-b-2 border-gray-200">
                                            <button onclick="filterSentRequests('all')" data-status="all"
                                                class="sent-requests-status-tab px-4 py-2 font-medium text-sm border-b-2 border-blue-600 text-blue-600 transition-all">
                                                All Requests
                                            </button>
                                            <button onclick="filterSentRequests('pending')" data-status="pending"
                                                class="sent-requests-status-tab px-4 py-2 font-medium text-sm border-b-2 border-transparent text-gray-600 hover:text-gray-800 transition-all">
                                                Pending
                                            </button>
                                            <button onclick="filterSentRequests('accepted')" data-status="accepted"
                                                class="sent-requests-status-tab px-4 py-2 font-medium text-sm border-b-2 border-transparent text-gray-600 hover:text-gray-800 transition-all">
                                                Accepted
                                            </button>
                                            <button onclick="filterSentRequests('rejected')" data-status="rejected"
                                                class="sent-requests-status-tab px-4 py-2 font-medium text-sm border-b-2 border-transparent text-gray-600 hover:text-gray-800 transition-all">
                                                Rejected
                                            </button>
                                        </div>
                                    </div>
                                    <div id="sent-requests-list"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto min-h-[300px]">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>

                                <!-- Requests Received Section -->
                                <div id="received-requests-subsection" class="card p-6 requests-subsection hidden">
                                    <div class="mb-6">
                                        <div class="mb-4">
                                            <h3 class="text-xl font-bold flex items-center gap-2">
                                                <span class="text-green-600">üì•</span>
                                                Requests Received
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Connection requests from others
                                                waiting for your response</p>
                                        </div>
                                        <!-- Status Filter Tabs -->
                                        <div class="flex items-center gap-2 border-b-2 border-gray-200">
                                            <button onclick="filterReceivedRequests('all')" data-status="all"
                                                class="received-requests-status-tab px-4 py-2 font-medium text-sm border-b-2 border-green-600 text-green-600 transition-all">
                                                All Requests
                                            </button>
                                            <button onclick="filterReceivedRequests('pending')" data-status="pending"
                                                class="received-requests-status-tab px-4 py-2 font-medium text-sm border-b-2 border-transparent text-gray-600 hover:text-gray-800 transition-all">
                                                Pending
                                            </button>
                                            <button onclick="filterReceivedRequests('accepted')" data-status="accepted"
                                                class="received-requests-status-tab px-4 py-2 font-medium text-sm border-b-2 border-transparent text-gray-600 hover:text-gray-800 transition-all">
                                                Accepted
                                            </button>
                                            <button onclick="filterReceivedRequests('rejected')" data-status="rejected"
                                                class="received-requests-status-tab px-4 py-2 font-medium text-sm border-b-2 border-transparent text-gray-600 hover:text-gray-800 transition-all">
                                                Rejected
                                            </button>
                                        </div>
                                    </div>
                                    <div id="received-requests-list"
                                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto min-h-[300px]">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Events Panel -->
                    <div class="panel-content hidden" id="events-panel">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Events</h1>
                            <p class="text-gray-600">Discover and join events created by advertisers</p>
                        </div>

                        <!-- Events Tabs -->
                        <div class="flex gap-4 mb-6 border-b border-gray-200">
                            <button onclick="switchEventsTab('past')" id="past-events-tab"
                                class="events-tab px-6 py-3 font-semibold text-blue-600 border-b-2 border-blue-600 transition-all">
                                Past Events
                            </button>
                            <button onclick="switchEventsTab('upcoming')" id="upcoming-events-panel-tab"
                                class="events-tab px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 transition-all">
                                Upcoming Events
                            </button>
                            <button onclick="switchEventsTab('joined')" id="joined-events-panel-tab"
                                class="events-tab px-6 py-3 font-semibold text-gray-500 hover:text-gray-700 transition-all">
                                Joined Events
                            </button>
                        </div>

                        <!-- Past Events Tab -->
                        <div id="past-events-tab-content" class="events-tab-content">
                            <div class="card p-6">
                                <div class="flex items-center justify-between mb-6">
                                    <div>
                                        <h3 class="text-xl font-bold flex items-center gap-2">
                                            <span class="text-gray-600">üïê</span>
                                            Past Events
                                        </h3>
                                        <p class="text-sm text-gray-600 mt-1">Events you haven't joined that already
                                            happened</p>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <input type="text" id="past-events-search" placeholder="Search past events..."
                                            class="p-2 border-2 rounded-lg text-sm"
                                            oninput="if(typeof searchPastEvents === 'function') searchPastEvents(this.value)">
                                    </div>
                                </div>
                                <div id="past-events-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                    <!-- Will be populated by JS -->
                                </div>
                            </div>
                        </div>

                        <!-- Upcoming Events Tab -->
                        <div id="upcoming-events-panel-tab-content" class="events-tab-content hidden">
                            <div class="card p-6">
                                <div class="flex items-center justify-between mb-6">
                                    <div>
                                        <h3 class="text-xl font-bold flex items-center gap-2">
                                            <span class="text-green-600">üìÖ</span>
                                            Upcoming Events
                                        </h3>
                                        <p class="text-sm text-gray-600 mt-1">Events you haven't joined yet that are
                                            scheduled for the future</p>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <input type="text" id="upcoming-events-panel-search"
                                            placeholder="Search upcoming events..."
                                            class="p-2 border-2 rounded-lg text-sm"
                                            oninput="if(typeof searchUpcomingPanelEvents === 'function') searchUpcomingPanelEvents(this.value)">
                                    </div>
                                </div>
                                <div id="upcoming-events-panel-grid"
                                    class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                    <!-- Will be populated by JS -->
                                </div>
                            </div>
                        </div>

                        <!-- Joined Events Tab -->
                        <div id="joined-events-panel-tab-content" class="events-tab-content hidden">
                            <div class="card p-6">
                                <div class="flex items-center justify-between mb-6">
                                    <div>
                                        <h3 class="text-xl font-bold flex items-center gap-2">
                                            <span class="text-blue-600">‚úÖ</span>
                                            Joined Events
                                        </h3>
                                        <p class="text-sm text-gray-600 mt-1">All events you have joined (past and
                                            upcoming)</p>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <input type="text" id="joined-events-panel-search"
                                            placeholder="Search joined events..."
                                            class="p-2 border-2 rounded-lg text-sm"
                                            oninput="if(typeof searchJoinedPanelEvents === 'function') searchJoinedPanelEvents(this.value)">
                                    </div>
                                </div>
                                <div id="joined-events-panel-grid"
                                    class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                    <!-- Will be populated by JS -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Settings Panel -->
                    <div id="settings-panel" class="panel-content hidden">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Settings</h1>
                            <p class="text-gray-600">Manage your account settings and preferences</p>
                        </div>

                        <!-- Account & Security Section -->
                        <div class="settings-section mb-8">
                            <h2 class="text-xl font-semibold mb-4 text-gray-700 flex items-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z">
                                    </path>
                                </svg>
                                Account & Security
                            </h2>

                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- Verify Personal Info Card -->
                                <div class="card p-6 cursor-pointer hover:shadow-lg transition-all duration-300 border-2 border-transparent hover:border-blue-500"
                                    onclick="openVerifyPersonalInfoModal()">
                                    <div class="flex flex-col items-center text-center">
                                        <div
                                            class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg mb-4">
                                            <span class="text-3xl">üîê</span>
                                        </div>
                                        <h3 class="text-lg font-bold mb-2 text-gray-800">Verify Personal Info</h3>
                                        <p class="text-sm text-gray-600">Personal details and contact verification</p>
                                    </div>
                                </div>

                                <!-- Two-Factor Authentication Card -->
                                <div class="card p-6 cursor-pointer hover:shadow-lg transition-all duration-300 border-2 border-transparent hover:border-indigo-500"
                                    onclick="openTwoFactorAuthModal()">
                                    <div class="flex flex-col items-center text-center">
                                        <div
                                            class="w-16 h-16 bg-gradient-to-br from-indigo-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg mb-4">
                                            <span class="text-3xl">üõ°Ô∏è</span>
                                        </div>
                                        <h3 class="text-lg font-bold mb-2 text-gray-800">Two-Factor Auth</h3>
                                        <p class="text-sm text-gray-600">Extra security with 2FA</p>
                                        <span id="2fa-status-badge"
                                            class="mt-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                            Not Enabled
                                        </span>
                                    </div>
                                </div>

                                <!-- Login Activity Card -->
                                <div class="card p-6 cursor-pointer hover:shadow-lg transition-all duration-300 border-2 border-transparent hover:border-cyan-500"
                                    onclick="openLoginActivityModal()">
                                    <div class="flex flex-col items-center text-center">
                                        <div
                                            class="w-16 h-16 bg-gradient-to-br from-cyan-500 to-teal-600 rounded-full flex items-center justify-center shadow-lg mb-4">
                                            <span class="text-3xl">üì±</span>
                                        </div>
                                        <h3 class="text-lg font-bold mb-2 text-gray-800">Login Activity</h3>
                                        <p class="text-sm text-gray-600">Active sessions and history</p>
                                    </div>
                                </div>

                                <!-- Connected Accounts Card -->
                                <div class="card p-6 cursor-pointer hover:shadow-lg transition-all duration-300 border-2 border-transparent hover:border-orange-500"
                                    onclick="openConnectedAccountsModal()">
                                    <div class="flex flex-col items-center text-center">
                                        <div
                                            class="w-16 h-16 bg-gradient-to-br from-orange-500 to-amber-600 rounded-full flex items-center justify-center shadow-lg mb-4">
                                            <span class="text-3xl">üîó</span>
                                        </div>
                                        <h3 class="text-lg font-bold mb-2 text-gray-800">Connected Accounts</h3>
                                        <p class="text-sm text-gray-600">Manage Google and other links</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Payments & Subscription Section -->
                        <div class="settings-section mb-8">
                            <h2 class="text-xl font-semibold mb-4 text-gray-700 flex items-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z">
                                    </path>
                                </svg>
                                Payments & Subscription
                            </h2>

                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- Payment Method Card -->
                                <div class="card p-6 cursor-pointer hover:shadow-lg transition-all duration-300 border-2 border-transparent hover:border-green-500"
                                    onclick="openPaymentMethodModal()">
                                    <div class="flex flex-col items-center text-center">
                                        <div
                                            class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg mb-4">
                                            <span class="text-3xl">üí≥</span>
                                        </div>
                                        <h3 class="text-lg font-bold mb-2 text-gray-800">Payment Method</h3>
                                        <p class="text-sm text-gray-600">Receive earnings from students</p>
                                    </div>
                                </div>

                                <!-- Subscription Card -->
                                <div class="card p-6 cursor-pointer hover:shadow-lg transition-all duration-300 border-2 border-transparent hover:border-purple-500"
                                    onclick="openComingSoonModal('Subscription & Storage')">
                                    <div class="flex flex-col items-center text-center">
                                        <div
                                            class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center shadow-lg mb-4">
                                            <span class="text-3xl">‚≠ê</span>
                                        </div>
                                        <h3 class="text-lg font-bold mb-2 text-gray-800">Subscription & Storage</h3>
                                        <p class="text-sm text-gray-600">Upgrade plan and boost visibility</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Personalization Section -->
                        <div class="settings-section mb-8">
                            <h2 class="text-xl font-semibold mb-4 text-gray-700 flex items-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01">
                                    </path>
                                </svg>
                                Personalization
                            </h2>

                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- Appearance Card -->
                                <div class="card p-6 cursor-pointer hover:shadow-lg transition-all duration-300 border-2 border-transparent hover:border-violet-500"
                                    onclick="openAppearanceModal()">
                                    <div class="flex flex-col items-center text-center">
                                        <div
                                            class="w-16 h-16 bg-gradient-to-br from-violet-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg mb-4">
                                            <span class="text-3xl">üé®</span>
                                        </div>
                                        <h3 class="text-lg font-bold mb-2 text-gray-800">Appearance</h3>
                                        <p class="text-sm text-gray-600">Theme, font size, and display</p>
                                    </div>
                                </div>

                                <!-- Language Preferences Card -->
                                <div class="card p-6 cursor-pointer hover:shadow-lg transition-all duration-300 border-2 border-transparent hover:border-sky-500"
                                    onclick="openComingSoonModal('Language Preferences')">
                                    <div class="flex flex-col items-center text-center">
                                        <div
                                            class="w-16 h-16 bg-gradient-to-br from-sky-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg mb-4">
                                            <span class="text-3xl">üåê</span>
                                        </div>
                                        <h3 class="text-lg font-bold mb-2 text-gray-800">Language</h3>
                                        <p class="text-sm text-gray-600">UI language and translation</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Data & Privacy Section -->
                        <div class="settings-section mb-8">
                            <h2 class="text-xl font-semibold mb-4 text-gray-700 flex items-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
                                    </path>
                                </svg>
                                Data & Privacy
                            </h2>

                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- Export Data Card -->
                                <div class="card p-6 cursor-pointer hover:shadow-lg transition-all duration-300 border-2 border-transparent hover:border-teal-500"
                                    onclick="openComingSoonModal('Export Data')">
                                    <div class="flex flex-col items-center text-center">
                                        <div
                                            class="w-16 h-16 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-full flex items-center justify-center shadow-lg mb-4">
                                            <span class="text-3xl">üì¶</span>
                                        </div>
                                        <h3 class="text-lg font-bold mb-2 text-gray-800">Export Data</h3>
                                        <p class="text-sm text-gray-600">Download your personal data</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Feedback & Support Section -->
                        <div class="settings-section mb-8">
                            <h2 class="text-xl font-semibold mb-4 text-gray-700 flex items-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z">
                                    </path>
                                </svg>
                                Feedback & Support
                            </h2>

                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- Review & Rate Astegni Card -->
                                <div class="card p-6 cursor-pointer hover:shadow-lg transition-all duration-300 border-2 border-transparent hover:border-yellow-500"
                                    onclick="openReviewAstegniModal()">
                                    <div class="flex flex-col items-center text-center">
                                        <div
                                            class="w-16 h-16 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-full flex items-center justify-center shadow-lg mb-4">
                                            <span class="text-3xl">‚≠ê</span>
                                        </div>
                                        <h3 class="text-lg font-bold mb-2 text-gray-800">Review Astegni</h3>
                                        <p class="text-sm text-gray-600">Share your feedback with us</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Danger Zone Section -->
                        <div class="settings-section">
                            <h2 class="text-xl font-semibold mb-4 text-red-600 flex items-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">
                                    </path>
                                </svg>
                                Danger Zone
                            </h2>

                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- Manage Roles Card -->
                                <div class="card p-6 cursor-pointer hover:shadow-lg transition-all duration-300 border-2 border-transparent hover:border-rose-500"
                                    onclick="openManageRoleModal()">
                                    <div class="flex flex-col items-center text-center">
                                        <div
                                            class="w-16 h-16 bg-gradient-to-br from-rose-500 to-pink-600 rounded-full flex items-center justify-center shadow-lg mb-4">
                                            <span class="text-3xl">üóëÔ∏è</span>
                                        </div>
                                        <h3 class="text-lg font-bold mb-2 text-gray-800">Manage Roles</h3>
                                        <p class="text-sm text-gray-600">Deactivate or remove your role</p>
                                    </div>
                                </div>

                                <!-- Leave Astegni Card -->
                                <div class="card p-6 cursor-pointer hover:shadow-lg transition-all duration-300 border-2 border-transparent hover:border-red-500"
                                    onclick="openLeaveAstegniModal()">
                                    <div class="flex flex-col items-center text-center">
                                        <div
                                            class="w-16 h-16 bg-gradient-to-br from-red-500 to-red-700 rounded-full flex items-center justify-center shadow-lg mb-4">
                                            <span class="text-3xl">üö™</span>
                                        </div>
                                        <h3 class="text-lg font-bold mb-2 text-gray-800">Leave Astegni</h3>
                                        <p class="text-sm text-gray-600">Delete account permanently</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End of flex-1 div -->

                <!-- Right Sidebar Widgets (Persistent across all panels) -->
                <div class="right-widgets">

                    <!-- Ad Widget -->
                    <!-- Dynamic Logo Ad Widget -->
                    <div class="widget-card" style="padding: 1.5rem; margin-bottom: 1.5rem;">
                        <div class="widget-header"
                            style="margin-bottom: 0.75rem; display: flex; justify-content: flex-end;">
                            <span
                                style="font-size: 0.65rem; color: var(--text-secondary); background: var(--bg-secondary); padding: 0.2rem 0.5rem; border-radius: 4px;">Ad</span>
                        </div>
                        <!-- Dynamic ad container loaded by AdRotationManager -->
                        <div data-placement="logo" data-profile-type="tutor" class="leaderboard-banner premium-promo"
                            style="min-height: 170px; border-radius: 12px; overflow: hidden; position: relative; background: var(--bg-secondary);">
                            <!-- Ads will be dynamically loaded here -->
                        </div>
                    </div>

                    <!-- Monthly Earnings Widget with Line Graph -->
                    <div class="widget-card"
                        style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);">
                        <div class="flex items-center justify-between mb-3">
                            <h3 id="widget-title" class="text-lg font-semibold">üí∞ Monthly Earnings</h3>
                            <select id="earnings-period-select"
                                style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; padding: 4px 8px; font-size: 12px; cursor: pointer;">
                                <option value="earnings" style="color: #333;">Earnings</option>
                                <option value="investments" style="color: #333;">Investments</option>
                            </select>
                        </div>

                        <div class="mb-4">
                            <div class="text-3xl font-bold mb-1"><span id="earnings-currency-symbol"></span> <span
                                    id="current-month-earnings">0</span></div>
                            <div class="flex items-center gap-2 text-sm">
                                <span id="earnings-change" class="text-green-300">+0%</span>
                                <span id="change-label" style="opacity: 0.8;">vs last month</span>
                            </div>
                        </div>

                        <!-- Line Graph Canvas -->
                        <div style="position: relative; height: 120px; margin: 0 -1rem;">
                            <canvas id="earnings-line-chart"></canvas>
                        </div>

                        <!-- Month Labels -->
                        <div id="earnings-months-labels" class="flex justify-between text-xs mt-2"
                            style="opacity: 0.8;">
                            <!-- Will be populated by JavaScript -->
                        </div>

                        <!-- View Details Button -->
                        <button onclick="openComingSoonModal('Earnings & Investments'); return false;"
                            class="mt-4 w-full py-2 px-4 bg-white text-purple-600 rounded-lg font-semibold hover:bg-purple-50 transition-colors shadow-md">
                            View Details ‚Üí
                        </button>
                    </div>

                    <!-- Today's Schedule Widget -->
                    <div class="widget-card">
                        <h3 class="text-lg font-semibold mb-4">üìÖ Today's Schedule</h3>
                        <div id="today-schedule-widget-content">
                            <!-- Dynamic content loaded by today-schedule-widget.js -->
                            <div class="text-center py-4">
                                <i class="fas fa-spinner fa-spin text-2xl text-gray-400"></i>
                                <p class="text-sm text-gray-500 mt-2">Loading...</p>
                            </div>
                        </div>
                    </div>

                    <!-- This Week's Schedule Widget -->
                    <div class="widget-card">
                        <h3 class="text-lg font-semibold mb-4">üìÖ This Week's Schedule</h3>
                        <div id="week-schedule-widget-content">
                            <!-- Dynamic content loaded by week-schedule-widget.js -->
                            <div class="text-center py-4">
                                <i class="fas fa-spinner fa-spin text-2xl text-gray-400"></i>
                                <p class="text-sm text-gray-500 mt-2">Loading...</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End of right-widgets -->

            </div>
            <!-- End of flex gap-6 container -->

        </div>
        <!-- End of container mx-auto px-4 -->
    </section>

    <!-- Bottom Widgets Section -->
    <section class="bottom-widgets" style="margin-top: 3rem; margin-bottom: 3rem;">
        <div class="container mx-auto px-4">
            <div class="bottom-widgets-grid"
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 1.5rem;">

                <!-- News Widget -->
                <div class="sidebar-widget news-widget card" onclick="openComingSoonModal('news')"
                    style="cursor: pointer; padding: 1.5rem; background: var(--card-bg); border-radius: 16px; transition: transform 0.3s ease, box-shadow 0.3s ease;"
                    onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 8px 16px rgba(0,0,0,0.1)'"
                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                    <div class="widget-header"
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0;">üì∞ Latest News</h3>
                        <a href="#" onclick="openComingSoonModal('news'); return false;"
                            style="color: var(--button-bg); text-decoration: none; font-size: 0.875rem;">View All</a>
                    </div>

                    <div class="news-carousel" style="position: relative; overflow: hidden;">
                        <div class="news-card-container" id="newsCardContainer">
                            <div class="news-card active" data-news-index="0"
                                style="opacity: 1; transition: opacity 0.5s ease;">
                                <div class="news-card-header"
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <span class="news-category-badge"
                                        style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">Education</span>
                                    <span class="news-time" style="color: var(--text-muted); font-size: 0.875rem;">2h
                                        ago</span>
                                </div>
                                <div class="news-card-image" style="margin-bottom: 1rem;">
                                    <img src="https://images.unsplash.com/photo-1427504494785-3a9ca7044f45?w=400"
                                        alt="Education News"
                                        style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px;">
                                </div>
                                <div class="news-card-content">
                                    <h4
                                        style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--heading);">
                                        New Education Reforms Transform Ethiopian Schools</h4>
                                    <p
                                        style="color: var(--text); opacity: 0.8; font-size: 0.875rem; line-height: 1.6; margin-bottom: 1rem;">
                                        Latest educational initiatives are revolutionizing how students learn across
                                        Ethiopia...</p>
                                    <div class="news-stats" style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                        <span class="news-stat"
                                            style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.875rem; color: var(--text-muted);">üî•
                                            Trending</span>
                                        <span class="news-stat"
                                            style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.875rem; color: var(--text-muted);">üëÅÔ∏è
                                            1.2k views</span>
                                        <span class="news-stat"
                                            style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.875rem; color: var(--text-muted);">üí¨
                                            45 comments</span>
                                    </div>
                                </div>
                            </div>
                            <div class="news-card" data-news-index="1"
                                style="display: none; opacity: 0; transition: opacity 0.5s ease;">
                                <div class="news-card-header"
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <span class="news-category-badge"
                                        style="background: linear-gradient(135deg, #f093fb, #f5576c); color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">Technology</span>
                                    <span class="news-time" style="color: var(--text-muted); font-size: 0.875rem;">5h
                                        ago</span>
                                </div>
                                <div class="news-card-image" style="margin-bottom: 1rem;">
                                    <img src="https://images.unsplash.com/photo-1488590528505-98d2b5aba04b?w=400"
                                        alt="Tech News"
                                        style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px;">
                                </div>
                                <div class="news-card-content">
                                    <h4
                                        style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--heading);">
                                        Digital Learning Platforms Surge in Popularity</h4>
                                    <p
                                        style="color: var(--text); opacity: 0.8; font-size: 0.875rem; line-height: 1.6; margin-bottom: 1rem;">
                                        Ethiopian students embrace online education tools for enhanced learning
                                        experiences...</p>
                                    <div class="news-stats" style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                        <span class="news-stat"
                                            style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.875rem; color: var(--text-muted);">üí°
                                            Innovation</span>
                                        <span class="news-stat"
                                            style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.875rem; color: var(--text-muted);">üëÅÔ∏è
                                            890 views</span>
                                        <span class="news-stat"
                                            style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.875rem; color: var(--text-muted);">üí¨
                                            32 comments</span>
                                    </div>
                                </div>
                            </div>
                            <div class="news-card" data-news-index="2"
                                style="display: none; opacity: 0; transition: opacity 0.5s ease;">
                                <div class="news-card-header"
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <span class="news-category-badge"
                                        style="background: linear-gradient(135deg, #4facfe, #00f2fe); color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">Career</span>
                                    <span class="news-time" style="color: var(--text-muted); font-size: 0.875rem;">1d
                                        ago</span>
                                </div>
                                <div class="news-card-image" style="margin-bottom: 1rem;">
                                    <img src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=400"
                                        alt="Career News"
                                        style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px;">
                                </div>
                                <div class="news-card-content">
                                    <h4
                                        style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--heading);">
                                        Top Skills Every Tutor Should Master in 2025</h4>
                                    <p
                                        style="color: var(--text); opacity: 0.8; font-size: 0.875rem; line-height: 1.6; margin-bottom: 1rem;">
                                        Professional development insights for educators to stay competitive and
                                        effective...</p>
                                    <div class="news-stats" style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                        <span class="news-stat"
                                            style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.875rem; color: var(--text-muted);">üìö
                                            Featured</span>
                                        <span class="news-stat"
                                            style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.875rem; color: var(--text-muted);">üëÅÔ∏è
                                            2.1k views</span>
                                        <span class="news-stat"
                                            style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.875rem; color: var(--text-muted);">üí¨
                                            67 comments</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bookstore Widget -->
                <div class="sidebar-widget bookstore-widget card" onclick="openComingSoonModal('store')"
                    style="cursor: pointer; padding: 1.5rem; background: var(--card-bg); border-radius: 16px; transition: transform 0.3s ease, box-shadow 0.3s ease;"
                    onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 8px 16px rgba(0,0,0,0.1)'"
                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                    <div class="widget-header"
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0; color: var(--heading);">üìö Bookstore
                        </h3>
                        <span
                            style="background: var(--button-bg); color: white; padding: 0.5rem 0.75rem; border-radius: 8px; font-size: 0.75rem; font-weight: 600;">Coming
                            Soon</span>
                    </div>

                    <!-- Bookstore Content -->
                    <div class="bookstore-content">
                        <div class="bookstore-main" style="text-align: center; margin-bottom: 1.5rem;">
                            <div class="bookstore-icon" style="font-size: 4rem; margin-bottom: 0.5rem;">üìñ</div>
                            <div class="bookstore-title-animated"
                                style="position: relative; height: 2.5rem; overflow: hidden;">
                                <div class="bookstore-title"
                                    style="font-size: 1.5rem; font-weight: bold; margin-bottom: 0.5rem; color: var(--heading); position: absolute; width: 100%; opacity: 1; transition: opacity 0.6s ease, transform 0.6s ease;">
                                    Educational Books</div>
                            </div>
                            <div class="bookstore-subtitle" style="font-size: 1rem; color: var(--text);">Buy, Sell &
                                Rent Textbooks</div>
                        </div>
                        <div class="bookstore-features"
                            style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                            <div class="feature-item"
                                style="background: var(--highlight-bg); padding: 0.75rem; border-radius: 8px; text-align: center;">
                                <span style="display: block; font-size: 1.5rem; margin-bottom: 0.25rem;">üìó</span>
                                <span style="display: block; font-size: 0.875rem; color: var(--text);">New Books</span>
                            </div>
                            <div class="feature-item"
                                style="background: var(--highlight-bg); padding: 0.75rem; border-radius: 8px; text-align: center;">
                                <span style="display: block; font-size: 1.5rem; margin-bottom: 0.25rem;">üìò</span>
                                <span style="display: block; font-size: 0.875rem; color: var(--text);">Used Books</span>
                            </div>
                            <div class="feature-item"
                                style="background: var(--highlight-bg); padding: 0.75rem; border-radius: 8px; text-align: center;">
                                <span style="display: block; font-size: 1.5rem; margin-bottom: 0.25rem;">üí∞</span>
                                <span style="display: block; font-size: 0.875rem; color: var(--text);">Best
                                    Prices</span>
                            </div>
                            <div class="feature-item"
                                style="background: var(--highlight-bg); padding: 0.75rem; border-radius: 8px; text-align: center;">
                                <span style="display: block; font-size: 1.5rem; margin-bottom: 0.25rem;">üöö</span>
                                <span style="display: block; font-size: 0.875rem; color: var(--text);">Fast
                                    Delivery</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gamestore Widget -->
                <div class="sidebar-widget gamestore-widget card" onclick="openComingSoonModal('gamestore')"
                    style="cursor: pointer; padding: 1.5rem; background: var(--card-bg); border-radius: 16px; transition: transform 0.3s ease, box-shadow 0.3s ease;"
                    onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 8px 16px rgba(0,0,0,0.1)'"
                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                    <div class="widget-header"
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0; color: var(--heading);">üéÆ Gamestore
                        </h3>
                        <span
                            style="background: var(--button-bg); color: white; padding: 0.5rem 0.75rem; border-radius: 8px; font-size: 0.75rem; font-weight: 600;">Coming
                            Soon</span>
                    </div>
                    <div class="gamestore-content">
                        <div class="gamestore-main" style="text-align: center; margin-bottom: 1.5rem;">
                            <div class="gamestore-icon" style="font-size: 4rem; margin-bottom: 0.5rem;">üéÆ</div>
                            <div class="gamestore-title-animated"
                                style="position: relative; height: 2.5rem; overflow: hidden;">
                                <div class="gamestore-title"
                                    style="font-size: 1.5rem; font-weight: bold; margin-bottom: 0.5rem; color: var(--heading); position: absolute; width: 100%; opacity: 1; transition: opacity 0.6s ease, transform 0.6s ease;">
                                    Educational Games</div>
                            </div>
                            <div class="gamestore-subtitle" style="font-size: 1rem; color: var(--text);">Learn While
                                Playing</div>
                        </div>
                        <div class="gamestore-features"
                            style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                            <div class="feature-item"
                                style="background: var(--highlight-bg); padding: 0.75rem; border-radius: 8px; text-align: center;">
                                <span style="display: block; font-size: 1.5rem; margin-bottom: 0.25rem;">üßÆ</span>
                                <span style="display: block; font-size: 0.875rem; color: var(--text);">Puzzle
                                    Games</span>
                            </div>
                            <div class="feature-item"
                                style="background: var(--highlight-bg); padding: 0.75rem; border-radius: 8px; text-align: center;">
                                <span style="display: block; font-size: 1.5rem; margin-bottom: 0.25rem;">üéØ</span>
                                <span style="display: block; font-size: 0.875rem; color: var(--text);">Strategy
                                    Games</span>
                            </div>
                            <div class="feature-item"
                                style="background: var(--highlight-bg); padding: 0.75rem; border-radius: 8px; text-align: center;">
                                <span style="display: block; font-size: 1.5rem; margin-bottom: 0.25rem;">üèÜ</span>
                                <span style="display: block; font-size: 0.875rem; color: var(--text);">Top Rated</span>
                            </div>
                            <div class="feature-item"
                                style="background: var(--highlight-bg); padding: 0.75rem; border-radius: 8px; text-align: center;">
                                <span style="display: block; font-size: 1.5rem; margin-bottom: 0.25rem;">üéÅ</span>
                                <span style="display: block; font-size: 0.875rem; color: var(--text);">Free to
                                    Play</span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Coursework Loading Spinner -->
    <div id="courseworkLoadingSpinner" class="coursework-loading-spinner">
        <div class="coursework-spinner"></div>
    </div>

    <!-- Coursework Toast Notification -->
    <div id="courseworkToast" class="coursework-toast-notification"></div>

    <!-- ========== END QUIZ MODALS ========== -->

    <!-- Enhanced Footer -->
    <footer class="footer-section" id="footer" role="contentinfo">
        <div class="footer-wave" aria-hidden="true">
            <svg viewBox="0 0 1440 120" preserveAspectRatio="none">
                <defs>
                    <linearGradient id="wave-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:var(--footer-accent);stop-opacity:0" />
                        <stop offset="25%" style="stop-color:var(--footer-accent);stop-opacity:1" />
                        <stop offset="75%" style="stop-color:var(--footer-hover);stop-opacity:1" />
                        <stop offset="100%" style="stop-color:var(--footer-hover);stop-opacity:0" />
                    </linearGradient>
                </defs>
                <!-- Main wave fill with explicit class -->
                <path class="wave-fill"
                    d="M0,64L48,69.3C96,75,192,85,288,80C384,75,480,53,576,48C672,43,768,53,864,58.7C960,64,1056,64,1152,58.7C1248,53,1344,43,1392,37.3L1440,32L1440,120L1392,120C1344,120,1248,120,1152,120C1056,120,960,120,864,120C768,120,672,120,576,120C480,120,384,120,288,120C192,120,96,120,48,120L0,120Z">
                </path>
                <!-- Animated line following the wave curve -->
                <path class="wave-line"
                    d="M0,64L48,69.3C96,75,192,85,288,80C384,75,480,53,576,48C672,43,768,53,864,58.7C960,64,1056,64,1152,58.7C1248,53,1344,43,1392,37.3L1440,32">
                </path>
            </svg>
        </div>

        <div class="container">
            <div class="footer-content">
                <div class="footer-section-item">
                    <h3 class="footer-title">About Astegni</h3>
                    <p class="footer-description">Ethiopia's premier educational platform connecting students with
                        expert tutors and quality learning resources.</p>
                    <div class="footer-stats">
                        <div class="stat-item">
                            <span class="stat-number">10k+</span>
                            <span class="stat-label">Active Users</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">500+</span>
                            <span class="stat-label">Courses</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">95%</span>
                            <span class="stat-label">Success Rate</span>
                        </div>
                    </div>
                </div>

                <div class="footer-section-item">
                    <h3 class="footer-title">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#" class="footer-link">About Us</a></li>
                        <li><a href="#" class="footer-link">How It Works</a></li>
                        <li><a href="#" class="footer-link">Pricing</a></li>
                        <li><a href="#" class="footer-link">Success Stories</a></li>
                        <li><a href="#" class="footer-link">Blog</a></li>
                        <li><a href="#" class="footer-link">Careers</a></li>
                    </ul>
                </div>

                <div class="footer-section-item">
                    <h3 class="footer-title">Support</h3>
                    <ul class="footer-links">
                        <li><a href="#" class="footer-link">Help Center</a></li>
                        <li><a href="#" class="footer-link">Contact Us</a></li>
                        <li><a href="#" class="footer-link">FAQs</a></li>
                        <li><a href="#" class="footer-link">Terms of Service</a></li>
                        <li><a href="#" class="footer-link">Privacy Policy</a></li>
                        <li><a href="#" class="footer-link">Safety</a></li>
                    </ul>
                </div>

                <div class="footer-section-item">
                    <h3 class="footer-title">Connect With Us</h3>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook" class="social-link" target="_blank" rel="noopener noreferrer">
                            <svg class="w-6 h-6" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3V2z"></path>
                            </svg>
                        </a>
                        <a href="#" aria-label="Twitter" class="social-link" target="_blank" rel="noopener noreferrer">
                            <svg class="w-6 h-6" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z">
                                </path>
                            </svg>
                        </a>
                        <a href="#" aria-label="LinkedIn" class="social-link" target="_blank" rel="noopener noreferrer">
                            <svg class="w-6 h-6" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z">
                                </path>
                                <circle cx="4" cy="4" r="2"></circle>
                            </svg>
                        </a>
                        <a href="#" aria-label="Instagram" class="social-link" target="_blank"
                            rel="noopener noreferrer">
                            <svg class="w-6 h-6" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                                <path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"></path>
                                <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                            </svg>
                        </a>
                        <a href="https://www.youtube.com/@Astegni" aria-label="YouTube" class="social-link"
                            target="_blank" rel="noopener noreferrer">
                            <svg class="w-6 h-6" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M22.54 6.42a2.78 2.78 0 00-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 00-1.94 2A29 29 0 001 12a29 29 0 00.46 5.58A2.78 2.78 0 003.4 19.6c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 001.94-2A29 29 0 0023 12a29 29 0 00-.46-5.58zM9.75 15.02V8.98L15.5 12l-5.75 3.02z">
                                </path>
                            </svg>
                        </a>
                    </div>

                    <div class="newsletter-signup">
                        <h4>Subscribe to Newsletter</h4>
                        <form class="newsletter-form" id="newsletterForm">
                            <input type="email" placeholder="Your email address" class="newsletter-input"
                                id="emailInput" aria-label="Email address" required>
                            <button type="submit" class="newsletter-btn" id="submitBtn">Subscribe</button>
                            <div class="newsletter-feedback" id="feedback"></div>
                        </form>
                    </div>
                </div>
            </div>

            <div class="footer-bottom-content">
                <div class="footer-badges">
                    <div class="company-brand">
                        <span>From the deep of</span>
                        <span class="trademark-symbol">‚Ñ¢</span>
                        <span class="company-text">Eshtaol</span>
                    </div>
                    <a href="tel:+251935244245" class="phone-link">
                        <span class="phone-icon">üìû</span>
                        <span>+251-935-24-42-45</span>
                        <span>+251-997-40-98-66</span>
                    </a>
                </div>
                <div class="footer-badges">
                    <p class="copyright">¬© </p>
                    <p>2025 Astegni. All rights reserved.</p>
                </div>
                <div class="footer-badges">
                    <span class="badge glow" tabindex="0">üîí SSL Secured</span>
                    <span class="badge" tabindex="0">‚úì Verified Platform</span>
                    <span class="badge" tabindex="0">üèÜ Future Awards Winner</span>
                </div>
            </div>
            <!-- TODO: counting cards should count from users where role = 'parent', 'student', 'tutor', etc... register-modal, reviews section professional-reviews-card should be enhanced. -->
        </div>
    </footer>

    <!-- Scripts -->
    <script src="../js/root/default-avatar.js?v=20260118"></script>
    <script src="../js/root/app.js?v=20260118"></script>
    <script src="../js/root/nav.js?v=20260118"></script>
    <script src="../js/root/auth.js?v=20260124"></script>
    <script src="../js/root/google-oauth.js"></script>
    <script src="../js/root/storage-manager.js"></script>
    <script src="../js/common-modals/access-restricted-modal.js?v=20251229"></script>
    <script src="../js/root/profile-completion-guard.js?v=20251224"></script>
    <script src="../js/root/theme-toggle.js?v=20260118"></script>

    <!-- ============================================ -->
    <!-- PAGE STRUCTURE SCRIPTS - FULLY MODULARIZED  -->
    <!-- Import only what tutor profile needs         -->
    <!-- ============================================ -->

    <!-- Core State & Utilities (Required by most features) -->
    <script src="../js/page-structure/stateManager.js?v=20260118"></script>
    <script src="../js/page-structure/utilsManager.js?v=20260118"></script>

    <!-- Modal System -->
    <script src="../js/page-structure/modalManager.js?v=20260118"></script>
    <script src="../js/page-structure/modalActionsManager.js?v=20260118"></script>

    <!-- Profile & Schedule Functions (For edit profile, schedule modals) -->
    <script src="../js/page-structure/profileFunctionsManager.js?v=20260118"></script>

    <!-- Navigation -->
    <script src="../js/page-structure/navigationManager.js?v=20260204k"></script>

    <!-- Share Profile Manager (Must load early for onclick handlers) -->
    <script src="../js/common-modals/share-profile-manager.js?v=20260204k"></script>

    <!-- Content Actions (For content management) -->
    <script src="../js/page-structure/contentActionsManager.js?v=20260118"></script>

    <!-- Optional: Uncomment if needed -->
    <!-- <script src="../js/page-structure/contentFilterManager.js"></script> --> <!-- For filtering content -->
    <!-- <script src="../js/page-structure/adPackageFunctionsManager.js"></script> --> <!-- For ad packages -->
    <!-- <script src="../js/page-structure/aiInsightsManager.js"></script> --> <!-- For journalist AI features -->
    <!-- <script src="../js/page-structure/deliveryManager.js"></script> --> <!-- For delivery tracking -->

    <!-- Initialization (Auto-initializes all loaded managers) -->
    <script src="../js/page-structure/initializationManager.js?v=20260118"></script>

    <!-- Profile System -->
    <script src="../js/root/profile-system.js?v=20260124"></script>

    <!-- Common Modals -->
    <script src="../js/index/init-modals.js?v=20260118"></script>
    <script src="../js/common-modals/coming-soon-modal.js?v=20260205"></script>
    <script src="../js/common-modals/ad-modal.js?v=20260205-comingsoon"></script>
    <script src="../js/common-modals/ad-rotation-manager.js?v=20260118"></script>

    <!-- Stats Counter for Hero Section -->
    <script src="../js/find-tutors/stats-counter.js?v=20260118"></script>

    <!-- ============================================ -->
    <!-- TUTOR PROFILE MODULES (Modularized)         -->
    <!-- Load in strict order for proper initialization -->
    <!-- ============================================ -->

    <!-- 1. State Management (Must load first) -->
    <script src="../js/tutor-profile/state-manager.js?v=20260118"></script>

    <!-- 1.5 Resource Manager (Shared with student) -->
    <script src="../js/student-profile/resource-manager.js?v=20260118"></script>

    <!-- 2. API Service -->
    <script src="../js/tutor-profile/api-service.js?v=20251217"></script>

    <!-- 3. UI Manager -->
    <script src="../js/tutor-profile/ui-manager.js?v=20260118"></script>

    <!-- 4. Modal Manager -->
    <script src="../js/tutor-profile/modal-manager.js?v=20251217"></script>

    <!-- 5. Upload Handler -->
    <script src="../js/tutor-profile/upload-handler.js?v=20260118"></script>

    <!-- 6. Main Controller -->
    <script src="../js/tutor-profile/profile-controller.js?v=20260118"></script>
    <!-- Stories Loader -->
    <script src="../js/tutor-profile/stories-loader.js?v=20260210"></script>

    <!-- 6.25. Session Request Manager (MUST load before panel-manager.js) -->
    <script src="../js/tutor-profile/session-request-manager.js?v=20251230"></script>

    <!-- 6.26. Parenting Invitation Manager (for parenting invitations in requests panel) -->
    <script src="../js/tutor-profile/parenting-invitation-manager.js?v=20251230b"></script>

    <!-- 6.3. Protected API Wrapper (2FA protection for settings, packages, requests panels) -->
    <script src="../js/common-modals/protected-api-wrapper.js?v=20260118"></script>

    <!-- 6.5. Panel Manager (for sidebar panel switching) -->
    <script src="../js/tutor-profile/panel-manager.js?v=20260118"></script>

    <!-- 6.75. Modal Loader (MUST load before global-functions.js) -->
    <script src="../modals/tutor-profile/modal-loader.js?v=20260204g"></script>

    <!-- 6.8. Child Invitation Manager (MUST load before global-functions.js) -->
    <script src="../js/common-modals/child-invitation-manager.js?v=20260118"></script>

    <!-- 7. Global Functions (for HTML onclick handlers) -->
    <script src="../js/tutor-profile/global-functions.js?v=20260219c"></script>

    <!-- 7.5 Schedule Tab Manager - Already loaded in <head> for early availability -->

    <!-- 7.6 Sessions Panel Manager - Already loaded in <head> for early availability -->

    <!-- 8. Additional Features -->

    <!-- 9. NEW: Backend Integration Modules -->
    <script src="../js/tutor-profile/earnings-widget.js?v=20260118"></script>
    <script src="../js/tutor-profile/bookstore-widget.js?v=20260118"></script>
    <script src="../js/tutor-profile/gamestore-widget.js?v=20260118"></script>
    <script src="../js/tutor-profile/image-upload-handler.js?v=20260118"></script>
    <script src="../js/tutor-profile/profile-edit-handler.js?v=20260118"></script>
    <script src="../js/tutor-profile/package-manager-clean.js?v=20260118"></script>
    <script src="../js/tutor-profile/course-request-manager.js?v=20260118"></script>
    <script src="../js/common-modals/school-request-manager.js"></script>
    <script src="../js/tutor-profile/market-trend-functions.js?v=20260118"></script>
    <script src="../js/tutor-profile/reviews-panel-manager.js?v=20251122"></script>

    <!-- 10. Shared Utilities -->
    <script src="../js/shared/sidebar-toggle.js?v=20260118"></script>

    <!-- Folder Manager (for document folders) -->
    <script src="../js/shared/folder-manager.js?v=20260118"></script>

    <script src="../js/root/testimonials-widget.js?v=20260118"></script>
    <!-- Quill.js Rich Text Editor -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

    <!-- Quiz Management System -->
    <script src="../js/tutor-profile/coursework-manager.js?v=20260118"></script>

    <!-- Profile Extensions Manager (Certifications, Achievements, Experience) -->
    <script src="../js/tutor-profile/profile-extensions-manager.js?v=20260118"></script>

    <!-- Credential Manager (Role-Aware - Common Modal) -->
    <script src="../js/common-modals/credential-manager.js?v=20260130-roleaware"></script>

    <!-- Earnings & Investments Manager -->
    <script src="../js/tutor-profile/earnings-investments-manager.js?v=20260205"></script>

    <!-- Student-Specific Managers for Teaching Panel -->
    <!-- Note: StudentWhiteboardManager is now included in whiteboard-manager.js -->
    <!-- Note: StudentCourseworkManager is now included in coursework-manager.js -->

    <!-- Whiteboard Manager (for Digital Whiteboard feature) -->
    <script src="../js/tutor-profile/whiteboard-manager.js?v=20260205b"></script>

    <!-- 11. Initialize (MUST BE LAST) -->
    <!-- Events and Clubs Manager -->
    <script src="../js/tutor-profile/events-clubs-manager.js?v=20260118"></script>

    <!-- Community Panel Data Loader (NEW: Fetches and displays connections, events, clubs)
    <script src="../js/tutor-profile/community-panel-data-loader.js"></script>

    Community Panel Integration (NEW: Hooks into panel switching)
    <script src="../js/tutor-profile/community-panel-integration.js"></script> -->

    <!-- Community Manager (Database Integration - Class Definition) -->
    <script src="../js/common-modals/communityManager.js?v=20260118"></script>

    <!-- Tutor Community Panel Manager (NEW: Handles Community panel with database integration) -->
    <script src="../js/tutor-profile/community-panel-manager.js?v=20251122"></script>

    <!-- Events Panel Manager (NEW: Handles standalone Events panel) -->
    <script src="../js/tutor-profile/events-panel-manager.js?v=20260130"></script>

    <!-- Community Search & Filter Functions -->
    <script src="../js/tutor-profile/community-search-filter.js?v=20260118"></script>

    <!-- Community Panel Debug Console (DEVELOPMENT ONLY - Remove in production) -->
    <script src="../js/tutor-profile/community-panel-debug.js?v=20260118"></script>

    <script src="../js/common-modals/community-modal-manager.js?v=20260118"></script>

    <script src="../js/tutor-profile/init.js?v=20260118"></script>

    <!-- Settings Panel & Verify Personal Info Modal JavaScript -->
    <script src="../js/tutor-profile/settings-panel-personal-verification.js?v=20251218"></script>
    <!-- Appearance Manager (Theme, Font Size, Display Density, etc.) -->
    <script src="../js/common-modals/appearance-manager.js?v=20260128-fix"></script>
    <!-- Extended Settings Manager (2FA, Login Activity, Connected Accounts, etc.) -->
    <script src="../js/common-modals/settings-manager.js?v=20251225"></script>
    <!-- Two-Factor Authentication Manager -->
    <script src="../js/common-modals/tfa-manager.js?v=20251227"></script>
    <!-- Role Manager -->
    <script src="../js/common-modals/role-manager.js?v=20260126"></script>

    <!-- Edit Profile Modal JavaScript (Grade Levels, Languages, Locations, Courses) -->
    <script src="../js/tutor-profile/edit-profile-modal.js?v=20251218"></script>

    <!-- Hero Section Typewriter Animation -->
    <script src="../js/tutor-profile/hero-section.js"></script>

    <!-- Profile Header Data Loading JavaScript -->
    <script src="../js/tutor-profile/profile-data-loader.js"></script>

    <!-- Initialize Folder Manager and Parenting Invitations -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize folder manager for tutor profile
            if (typeof initializeFolderManager === 'function') {
                initializeFolderManager('tutor');
            }

            // AUTO-LOAD PARENTING INVITATIONS: Load parenting invitations automatically on page load
            // This ensures pending invitations are fetched even if user doesn't click the "Parenting" card
            console.log('[Tutor Profile Init] Auto-loading parenting invitations...');
            if (typeof ParentingInvitationManager !== 'undefined') {
                // Load received invitations (students inviting tutor as parent)
                ParentingInvitationManager.loadParentingInvitations();
                // Update badge counts
                ParentingInvitationManager.updateInvitationCount();
                console.log('[Tutor Profile Init] ‚úÖ Parenting invitations auto-load initiated');
            } else {
                console.warn('[Tutor Profile Init] ‚ö†Ô∏è ParentingInvitationManager not found - invitations will not auto-load');
            }
        });
    </script>

    <!-- Rating Display Update JavaScript (4-Factor Rating System) -->
    <script src="../js/tutor-profile/rating-display-update.js?v=20251218"></script>

    <!-- Payment Method Modal JavaScript -->
    <script src="../js/tutor-profile/payment-method-modal.js"></script>

    <!-- Subscription Modal JavaScript (Dynamic - fetches plans based on role) -->
    <script src="../js/common-modals/subscription-modal.js"></script>

    <!-- Leave Astegni Modal JavaScript -->
    <script src="../js/common-modals/leave-astegni-modal.js?v=20260127"></script>

    <!-- Review Astegni Modal JavaScript -->
    <script src="../js/common-modals/review-astegni-manager.js"></script>

    <!-- Logout Modal JavaScript -->
    <script src="../js/common-modals/logout-modal.js"></script>

    <!-- ==================== MODAL LOADER INTEGRATION ==================== -->
    <!-- Modal Container: All modals will be loaded here dynamically -->
    <div id="modal-container">
        <!-- Universal Upload Modal (inline for stories) -->
        <div class="upload-story-modal" id="storyUploadModal" style="display: none;">
            <div class="modal-content">
                <div class="modal-inner">
                    <div class="modal-header">
                        <h2 class="modal-title" id="uploadModalTitle">Upload File</h2>
                        <button class="modal-close" onclick="closeStoryUploadModal()">&times;</button>
                    </div>

                    <!-- Upload Type Selector -->
                    <div class="form-group" style="margin-bottom: 1.5rem;">
                        <label for="uploadType"
                            style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-primary);">
                            What are you uploading?
                        </label>
                        <select id="uploadType" class="form-input" onchange="handleUploadTypeChange()"
                            style="width: 100%; padding: 0.75rem; border-radius: 8px; border: 2px solid var(--border-color); background: var(--bg-primary); color: var(--text-primary); font-size: 1rem;">
                            <option value="story">üì± Story (Image/Video)</option>
                            <option value="cover">üñºÔ∏è Cover Image</option>
                            <option value="profile">üë§ Profile Picture</option>
                        </select>
                    </div>

                    <div class="upload-area" id="storyUploadArea"
                        onclick="document.getElementById('storyInput').click()">
                        <span class="upload-icon" id="uploadIcon">üì±</span>
                        <p class="upload-text">Click to upload or drag and drop</p>
                        <p class="upload-hint" id="uploadHint">Loading limits...</p>
                        <input type="file" id="storyInput" class="upload-input" accept="image/*,video/*"
                            onchange="handleStorySelect(event)">
                    </div>

                    <div class="preview-container" id="storyPreview" style="display: none;">
                        <img src="" alt="Story preview" class="preview-image" id="storyPreviewImage"
                            style="display: none;">
                        <video src="" class="preview-image" id="storyPreviewVideo" controls
                            style="display: none;"></video>
                        <div class="preview-info">
                            <div class="file-info">
                                <span>File Name:</span>
                                <span id="storyFileName">-</span>
                            </div>
                            <div class="file-info">
                                <span>File Size:</span>
                                <span id="storyFileSize">-</span>
                            </div>
                            <div class="file-info">
                                <span>Type:</span>
                                <span id="storyFileType">-</span>
                            </div>
                        </div>

                        <!-- Caption input -->
                        <div class="form-group" style="margin-top: 1rem;">
                            <label for="storyCaption">Caption (optional)</label>
                            <textarea id="storyCaption" class="form-input" placeholder="Add a caption to your story..."
                                rows="3" maxlength="200"></textarea>
                            <small style="color: var(--text-muted); font-size: 0.875rem;">
                                <span id="storyCaptionCount">0</span>/200 characters
                            </small>
                        </div>
                    </div>

                    <div class="upload-progress" id="storyProgress" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill" id="storyProgressFill"></div>
                        </div>
                        <p class="progress-text" id="storyProgressText">Uploading... 0%</p>
                    </div>

                    <div class="upload-spinner" id="storySpinner"></div>

                    <div class="upload-actions">
                        <button class="btn-upload secondary" onclick="resetUpload('story')">Change File</button>
                        <button class="btn-upload primary" id="uploadButton" onclick="uploadFile()">Upload</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Loader Script: Moved earlier in load order (before global-functions.js) -->
    <!-- See line 3879 for modal-loader.js script tag -->

    <!-- Modal Open Fix: Loads external modals on-demand (working version) -->
    <script src="../modals/tutor-profile/modal-open-fix-simple.js"></script>

    <!--
        LAZY LOADING ENABLED (Performance Mode)
        Modals will load automatically when first accessed.
        No manual preloading required - modal-loader.js handles this.

        Modal opening is automatically fixed - all show functions wrapped.
    -->
    <!-- ================================================================== -->

    <!-- Coming Soon Modal - Loaded dynamically from modals/common-modals/coming-soon-modal.html -->

    <!-- Toast Notification Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Chat Modal Container (loaded dynamically) -->
    <div id="chat-modal-container"></div>

    <!-- View Request Modal Container (loaded dynamically) -->
    <div id="view-request-modal-container"></div>

    <!-- Notes Modal Container (loaded dynamically) -->
    <div id="notes-modal-container"></div>

    <!-- Performance Metrics Modal Container (loaded dynamically) -->
    <div id="performance-metrics-modal-container"></div>

    <!-- Chat Modal JavaScript -->
    <script src="../js/common-modals/chat-modal.js?v=20260217b"></script>
    <!-- Standalone Chat Call Modal JavaScript -->
    <script src="../js/common-modals/chat-call-modal.js"></script>
    <script src="../js/common-modals/truevoice-manager.js"></script>
    <script src="../js/common-modals/view-request-modal.js"></script>

    <!-- Dynamic Modal Loaders -->
    <script>
        // Load chat-modal HTML dynamically
        (function loadChatModal() {
            fetch('../modals/common-modals/chat-modal.html')
                .then(response => response.text())
                .then(html => {
                    document.body.insertAdjacentHTML('beforeend', html);
                    console.log('‚úÖ Chat Modal HTML loaded for tutor-profile');
                    // Re-initialize chat modal after HTML is loaded
                    if (typeof ChatModalManager !== 'undefined') {
                        ChatModalManager.init();
                        console.log('‚úÖ ChatModalManager initialized for tutor-profile');
                    }
                })
                .catch(err => console.error('Failed to load chat-modal:', err));
        })();

        // Load standalone chat call modal HTML dynamically
        (function loadChatCallModal() {
            fetch('../modals/common-modals/chat-call-modal.html')
                .then(response => response.text())
                .then(html => {
                    document.body.insertAdjacentHTML('beforeend', html);
                    console.log('‚úÖ Standalone Chat Call Modal loaded for tutor-profile');

                    // Initialize chat WebSocket silently for incoming calls
                    // This allows receiving calls without opening chat modal first
                    setTimeout(() => {
                        if (typeof ChatModalManager !== 'undefined') {
                            console.log('[Call Init] Silently connecting chat WebSocket for calls...');

                            // Check if ChatModalManager has user loaded
                            if (ChatModalManager.state && ChatModalManager.state.currentUser) {
                                console.log('[Call Init] User already loaded, connecting WebSocket...');
                                ChatModalManager.connectWebSocket();
                            } else {
                                console.log('[Call Init] User not loaded yet, loading and connecting...');
                                // Load current user first, then connect
                                ChatModalManager.loadCurrentUser();
                                // Give it a moment to load, then connect
                                setTimeout(() => {
                                    ChatModalManager.connectWebSocket();
                                }, 500);
                            }

                            console.log('[Call Init] ‚úÖ Chat WebSocket initialization triggered');
                        } else {
                            console.log('[Call Init] ‚ùå ChatModalManager not found');
                        }
                    }, 3000); // Wait 3 seconds for auth to complete
                })
                .catch(err => console.error('Failed to load chat-call-modal:', err));
        })();

        // Load view-request-modal HTML dynamically
        (function loadViewRequestModal() {
            fetch('../modals/common-modals/view-request-modal.html')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('view-request-modal-container').innerHTML = html;
                    console.log('‚úÖ View Request Modal loaded for tutor-profile');
                })
                .catch(err => console.log('View request modal will load on demand:', err.message));
        })();

        // Load notes-modal HTML dynamically
        (function loadNotesModal() {
            fetch('../modals/common-modals/notes-modal.html')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('notes-modal-container').innerHTML = html;
                    console.log('‚úÖ Notes Modal loaded for tutor-profile');
                })
                .catch(err => console.log('Notes modal will load on demand:', err.message));
        })();

        // Load performance-metrics-modal HTML dynamically
        (function loadPerformanceMetricsModal() {
            fetch('../modals/common-modals/performance-metrics-modal.html')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('performance-metrics-modal-container').innerHTML = html;
                    console.log('‚úÖ Performance Metrics Modal loaded for tutor-profile');
                })
                .catch(err => console.log('Performance metrics modal will load on demand:', err.message));
        })();
    </script>

    <!-- Advanced Notes Manager -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="../js/common-modals/advanced-notes.js"></script>

    <!-- Deletion Countdown Banner (shows when user has pending role deletion) -->
    <script src="../js/common-modals/deletion-countdown-banner.js"></script>

    <!-- Ad Rotation Manager -->
    <script src="../js/common-modals/ad-rotation-manager.js"></script>

    <!-- Geolocation Utilities for GPS-based location detection -->
    <script src="../js/utils/geolocation-utils.js"></script>

    <!-- Currency Utilities for dynamic currency display -->
    <script src="../js/utils/currency-utils.js"></script>

    <!-- Helper Functions and Review Modal Loader -->
    <script>
        // Helper function to get current location value
        window.getLocations = function () {
            const locationInput = document.getElementById('editLocation');
            return locationInput ? [locationInput.value.trim()].filter(v => v) : [];
        };

        // Load review-astegni-modal HTML dynamically
        (function loadReviewAstegniModal() {
            fetch('../modals/common-modals/review-astegni-modal.html')
                .then(response => response.text())
                .then(html => {
                    let container = document.getElementById('modal-container');
                    if (!container) {
                        container = document.createElement('div');
                        container.id = 'modal-container';
                        document.body.appendChild(container);
                    }
                    container.insertAdjacentHTML('beforeend', html);
                    console.log('‚úÖ Review Astegni Modal loaded for tutor-profile');
                })
                .catch(error => console.error('Failed to load review-astegni-modal:', error));
        })();
    </script>

    <!-- Share Profile Manager - MOVED EARLIER (after navigationManager.js) to ensure onclick handlers work -->

    <!-- Referral Dashboard Manager -->
    <script src="../js/common-modals/referral-dashboard-manager.js"></script>

    <!-- Whiteboard Initialization -->
    <script>
        // Verify whiteboard manager is loaded (event listeners will be set up when modal opens)
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üé® Checking Whiteboard availability...');

            if (typeof whiteboardManager !== 'undefined' && whiteboardManager) {
                console.log('‚úÖ WhiteboardManager is ready');
            } else {
                console.error('‚ùå WhiteboardManager not found - check if whiteboard-manager.js is loaded');
            }
        });
    </script>

</body>

</html>