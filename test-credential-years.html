<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Credential Years Field</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-6">
        <h1 class="text-2xl font-bold mb-6">Test: Credential Years Field</h1>

        <div class="space-y-4">
            <!-- Document Type -->
            <div>
                <label class="block text-gray-700 font-semibold mb-2">Document Type *</label>
                <select id="doc-type" name="document_type" required
                    class="w-full p-3 border-2 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all"
                    onchange="handleCredentialTypeChange(this)">
                    <option value="">Select document type...</option>
                    <option value="academic">üéì Academic Certificate</option>
                    <option value="achievement">üèÜ Achievement</option>
                    <option value="experience">üíº Experience/Work History</option>
                </select>
            </div>

            <!-- Years of Experience (only shown for experience type) -->
            <div id="years-field" style="display: none;">
                <label class="block text-gray-700 font-semibold mb-2">Years of Experience *</label>
                <input type="number" id="doc-years" name="years" min="0" max="50"
                    class="w-full p-3 border-2 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all"
                    placeholder="e.g., 5">
                <p class="text-xs text-gray-500 mt-1">Enter the number of years of experience</p>
            </div>

            <!-- Test Output -->
            <div class="mt-8 p-4 bg-gray-50 rounded-lg">
                <h2 class="font-bold mb-2">Test Results:</h2>
                <div id="test-output" class="text-sm">
                    <p class="text-gray-500">Select a credential type to see the results...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        /**
         * Handle credential type change
         * Shows/hides the years input field when experience type is selected
         */
        function handleCredentialTypeChange(selectElement) {
            const yearsField = document.getElementById('years-field');
            const yearsInput = document.getElementById('doc-years');
            const testOutput = document.getElementById('test-output');

            if (!yearsField || !yearsInput) {
                console.warn('[CredentialManager] Years field elements not found');
                return;
            }

            const selectedType = selectElement.value;
            let testResults = [];

            if (selectedType === 'experience') {
                // Show years field for experience type
                yearsField.style.display = 'block';
                yearsInput.required = true;
                testResults.push('<p class="text-green-600">‚úì Years field shown</p>');
                testResults.push('<p class="text-green-600">‚úì Years field is required</p>');
                console.log('[CredentialManager] Years field shown (experience type selected)');
            } else if (selectedType) {
                // Hide years field for other types
                yearsField.style.display = 'none';
                yearsInput.required = false;
                yearsInput.value = ''; // Clear the value when hiding
                testResults.push('<p class="text-blue-600">‚úì Years field hidden</p>');
                testResults.push('<p class="text-blue-600">‚úì Years field is not required</p>');
                testResults.push('<p class="text-blue-600">‚úì Years value cleared</p>');
                console.log('[CredentialManager] Years field hidden (non-experience type selected)');
            }

            if (selectedType) {
                testResults.push(`<p class="text-gray-700 mt-2"><strong>Selected type:</strong> ${selectedType}</p>`);
                testResults.push(`<p class="text-gray-700"><strong>Years field display:</strong> ${yearsField.style.display}</p>`);
                testResults.push(`<p class="text-gray-700"><strong>Years required:</strong> ${yearsInput.required}</p>`);
                testResults.push(`<p class="text-gray-700"><strong>Years value:</strong> ${yearsInput.value || '(empty)'}</p>`);
            }

            testOutput.innerHTML = testResults.length > 0
                ? testResults.join('')
                : '<p class="text-gray-500">Select a credential type to see the results...</p>';
        }

        // Test on page load
        console.log('[Test] Credential Years field test page loaded');
    </script>
</body>
</html>
