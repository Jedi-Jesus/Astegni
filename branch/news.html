<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ASTEGNI News</title>
  <script src="https://cdn.tailwindcss.com"></script>
    <link href="../css/root_theme.css" rel="stylesheet" />
  <style>
    :root {
      --text: #1f2937;
      --heading: #111827;
      --modal-bg: #ffffff;
      --highlight: #f3f4f6;
      --button-hover: #e5e7eb;
      --nav-link-hover: #2563eb;
      --footer-bg: #1f2937;
      --footer-text: #ffffff;
    }

    [data-theme="dark"] {
      --text: #d1d5db;
      --heading: #f3f4f6;
      --modal-bg: #1f2937;
      --highlight: #374151;
      --button-hover: #4b5563;
      --nav-link-hover: #60a5fa;
      --footer-bg: #111827;
      --footer-text: #d1d5db;
    }

    body {
      font-family: 'Arial', sans-serif;
      color: var(--text);
      background-color: var(--modal-bg);
    }

    nav {
      background-color: var(--modal-bg);
    }

    .modal-content {
      background-color: var(--modal-bg);
      color: var(--text);
      animation: slideIn 0.3s ease-out;
    }

    .news-card {
      transition: transform 0.2s;
    }

    .news-card:hover {
      transform: translateY(-5px);
    }

    @keyframes slideIn {
      from {
        transform: translateY(-50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .typewriter {
      overflow: hidden;
      border-right: 0.15em solid var(--text);
      white-space: nowrap;
      animation: blinkCursor 0.7s step-end infinite;
    }

    @keyframes blinkCursor {
      50% {
        border-color: transparent;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="p-4 sticky top-0 z-10 shadow-sm">
    <div class="container mx-auto flex justify-between items-center">
      <a href="../index.html" class="text-2xl font-bold">ASTEGNI</a>
      <div class="flex-1 flex justify-center">
        <input type="text" id="nav-search" class="p-2 border rounded-lg text-[var(--text)] dark:bg-gray-700 w-96 md:w-96 sm:w-64" placeholder="Search news...">
      </div>
      <div class="flex items-center space-x-4">
        <div id="nav-links" class="hidden md:flex space-x-6 items-center"></div>
        <button id="menu-btn" class="md:hidden focus:outline-none">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
          </svg>
        </button>
      </div>
    </div>
    <div id="mobile-menu" class="hidden md:hidden bg-[var(--highlight)] mt-2 rounded-lg shadow"></div>
  </nav>

  <!-- News Dashboard -->
  <section class="py-16">
    <div class="container mx-auto px-4 flex flex-col lg:flex-row gap-8">
      <!-- Main Content (News List) -->
      <div class="lg:w-3/4">
        <!-- Rotating Ad Placeholder -->
        <div id="rotating-ad" class="mb-8 rounded-lg shadow-lg p-4 text-center bg-[var(--highlight)]">
          <img id="ad-image" src="https://via.placeholder.com/728x90" class="mx-auto mb-4 rounded" alt="Advertisement">
          <p class="text-[var(--text)]">Interested in advertising on ASTEGNI? Contact us at <a href="mailto:info@astegni.et" class="underline">info@astegni.et</a></p>
        </div>
        <!-- News Filter Buttons -->
        <div class="flex space-x-4 mb-6">
          <button id="all-news-btn" class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700">All News</button>
          <button id="latest-btn" class="px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700">Latest</button>
          <button id="history-btn" class="px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700">History</button>
          <button id="favorites-btn" class="px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700">Favorites</button>
          <button id="saved-btn" class="px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700">Saved</button>
        </div>
        <!-- News List -->
        <h2 class="text-3xl font-bold mb-6 text-[var(--heading)]">Latest News</h2>
        <div id="news-list" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>
      </div>
      <!-- Advertisement Sidebar -->
      <aside class="lg:w-1/4 hidden lg:block sticky top-20 self-start">
        <div class="ad-placeholder mb-4" style="width: 300px; height: 250px;">
          <img src="https://via.placeholder.com/300x250" alt="Advertisement" class="rounded">
        </div>
      </aside>
    </div>
  </section>

  <!-- News Detail Modal -->
  <div id="news-detail-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-4xl max-h-[80vh] overflow-y-auto">
      <div class="flex justify-between items-center mb-4">
        <h3 id="news-title" class="text-2xl font-bold text-[var(--heading)] typewriter"></h3>
        <button onclick="closeNewsDetailModal()" class="text-[var(--text)] hover:underline">Close</button>
      </div>
      <div class="flex flex-col md:flex-row gap-4 mb-4">
        <img id="news-image" src="" alt="News Image" class="w-full md:w-1/3 h-32 object-cover rounded-lg">
        <p id="news-content" class="text-[var(--text)] typewriter"></p>
      </div>
      <div class="flex space-x-4 mb-4">
        <button id="read-btn" class="flex items-center px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700">
          <svg id="read-icon" class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"></path>
          </svg>
          Read
        </button>
        <button id="stop-btn" class="flex items-center px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700">
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 10h6v4H9v-4z"></path>
          </svg>
          Stop
        </button>
        <button id="restart-btn" class="flex items-center px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700">
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
          </svg>
          Restart
        </button>
      </div>
      <div id="news-videos" class="mb-4">
        <h4 class="text-xl font-semibold mb-2 text-[var(--heading)]">Videos</h4>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
      </div>
      <p id="news-author" class="text-[var(--text)] mb-2"></p>
      <p id="news-date" class="text-[var(--text)] mb-4"></p>
      <h4 class="text-xl font-semibold mb-2 text-[var(--heading)]">Other News</h4>
      <div id="other-news" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
    </div>
  </div>

  <!-- Notes Modal -->
  <div id="notes-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Notes</h3>
      <p class="text-[var(--text)] mb-4">Notes functionality to be implemented.</p>
      <button onclick="closeNotesModal()" class="mt-4 text-[var(--text)] hover:underline">Close</button>
    </div>
  </div>

  <!-- Manage Finances Modal -->
  <div id="manage-finances-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Manage Finances</h3>
      <p class="text-[var(--text)] mb-4">Manage Finances functionality to be implemented.</p>
      <button onclick="closeManageFinancesModal()" class="mt-4 text-[var(--text)] hover:underline">Close</button>
    </div>
  </div>

  <!-- Comment & Rate Modal -->
  <div id="comment-rate-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Comment & Rate ASTEGNI</h3>
      <label class="block mb-2 text-[var(--text)]">Your Comment</label>
      <textarea id="comment-input" class="w-full p-2 border rounded-lg mb-4" rows="4" placeholder="Write your comment here"></textarea>
      <div id="submitted-comments" class="mb-4"></div>
      <label class="block mb-2 text-[var(--text)]">Platform Usability</label>
      <div class="flex mb-4">
        <input type="range" id="usability-rating" min="1" max="5" value="3" class="w-full">
        <span id="usability-value" class="ml-2 text-[var(--text)]">3</span>
      </div>
      <label class="block mb-2 text-[var(--text)]">Customer Service</label>
      <div class="flex mb-4">
        <input type="range" id="service-rating" min="1" max="5" value="3" class="w-full">
        <span id="service-value" class="ml-2 text-[var(--text)]">3</span>
      </div>
      <button onclick="submitCommentRate()" class="cta-button px-4 py-2 rounded-lg w-full bg-blue-600 text-white hover:bg-blue-700">Submit</button>
      <button onclick="closeCommentRateModal()" class="mt-4 text-[var(--text)] hover:underline">Cancel</button>
    </div>
  </div>

  <!-- Share Profile Modal -->
  <div id="share-profile-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Share ASTEGNI</h3>
      <input type="text" id="profile-link" class="w-full p-2 border rounded-lg mb-4" readonly>
      <div class="grid grid-cols-2 gap-4 mb-4">
        <a id="profile-share-facebook" href="#" target="_blank" class="cta-button px-4 py-2 rounded-lg text-center bg-blue-600 text-white hover:bg-blue-700">Facebook</a>
        <a id="profile-share-telegram" href="#" target="_blank" class="cta-button px-4 py-2 rounded-lg text-center bg-blue-500 text-white hover:bg-blue-600">Telegram</a>
        <button onclick="copyProfileLink()" class="cta-button px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700">Copy Link</button>
      </div>
      <button onclick="closeShareProfileModal()" class="mt-4 text-[var(--text)] hover:underline">Close</button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-[var(--footer-bg)] text-[var(--footer-text)] py-8">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <h4 class="text-lg font-semibold mb-4">About ASTEGNI</h4>
          <p>ASTEGNI is a platform connecting students with qualified tutors for personalized learning experiences.</p>
        </div>
        <div>
          <h4 class="text-lg font-semibold mb-4">Quick Links</h4>
          <ul>
            <li><a href="index.html" class="hover:underline">Home</a></li>
            <li><a href="reels.html" class="hover:underline">Reels</a></li>
            <li><a href="store.html" class="hover:underline">Store</a></li>
            <li><a href="find-a-job.html" class="hover:underline">Find a Job</a></li>
          </ul>
        </div>
        <div>
          <h4 class="text-lg font-semibold mb-4">Contact Us</h4>
          <p>Email: <a href="mailto:info@astegni.et" class="hover:underline">info@astegni.et</a></p>
          <p>Phone: +251-912-345-678</p>
        </div>
        <div>
          <h4 class="text-lg font-semibold mb-4">Follow Us</h4>
          <div class="flex gap-4">
            <a href="#" class="hover:text-[var(--nav-link-hover)]">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.5 7.09h-2.07c-.28 0-.5.22-.5.5v1.41h2.57l-.34 2.59h-2.23v6.41h-2.59v-6.41H9.5v-2.59h1.84V9.59c0-1.81 1.1-2.8 2.71-2.8h1.95v2.3z" />
              </svg>
            </a>
            <a href="#" class="hover:text-[var(--nav-link-hover)]">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2.5 16.5h-2v-7h2v7zm-1-7.9c-.7 0-1.2-.6-1.2-1.3s.5-1.3 1.2-1.3 1.2.6 1.2 1.3-.5 1.3-1.2 1.3zm9.5 7.9h-2v-4c0-.9-.3-1.5-1.1-1.5-.6 0-1 .4-1.1 1v4.5h-2v-7h2v1.1c.3-.5.9-.8 1.6-.8 1.2 0 2.1.7 2.1 2.2v4.5z" />
              </svg>
            </a>
            <a href="#" class="hover:text-[var(--nav-link-hover)]">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.708.87 3.216 2.188 4.099a4.904 4.904 0 01-2.228-.616v.062a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21-.005-.422-.015-.63A9.935 9.935 0 0024 4.59l-.047-.02z" />
              </svg>
            </a>
          </div>
        </div>
      </div>
      <div class="mt-8 text-center">
        <p>&copy; 2025 ASTEGNI. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script>
    let isLoggedIn = false; // Toggle to true for logged-in state
    let favoriteNews = {};
    let savedNews = {};
    let historyNews = [];
    let comments = [];
    let isSpeaking = false;
    let utterance = null;
    const adImages = [
      'https://via.placeholder.com/728x90?text=Ad+1',
      'https://via.placeholder.com/728x90?text=Ad+2',
      'https://via.placeholder.com/728x90?text=Ad+3'
    ];
    let currentAdIndex = 0;

    document.addEventListener('DOMContentLoaded', () => {
      const navLinks = document.getElementById('nav-links');
      const mobileMenu = document.getElementById('mobile-menu');

      // Navigation Links
      const loggedInNav = `
        <a href="news.html" class="hover:text-[var(--nav-link-hover)]">News</a>
        <a href="reels.html" class="hover:text-[var(--nav-link-hover)]">Reels</a>
        <a href="store.html" class="hover:text-[var(--nav-link-hover)]">Store</a>
        <a href="find-a-job.html" class="hover:text-[var(--nav-link-hover)]">Find a Job</a>
        <div class="relative">
          <button id="profile-dropdown-btn" class="flex items-center hover:text-[var(--nav-link-hover)]">
            Profile
            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div id="profile-dropdown" class="hidden absolute z-30 bg-[var(--modal-bg)] rounded-lg shadow-lg mt-2 w-48">
            <a href="view-profile.html" class="block px-4 py-2 hover:bg-[var(--button-hover)]">View Profile</a>
            <button onclick="openNotesModal()" class="block w-full text-left px-4 py-2 hover:bg-[var(--button-hover)]">Notes</button>
            <button onclick="openManageFinancesModal()" class="block w-full text-left px-4 py-2 hover:bg-[var(--button-hover)]">Manage Finances</button>
            <button onclick="openCommentRateModal()" class="block w-full text-left px-4 py-2 hover:bg-[var(--button-hover)]">Comment & Rate</button>
            <button onclick="openShareProfileModal()" class="block w-full text-left px-4 py-2 hover:bg-[var(--button-hover)]">Share Us</button>
          </div>
        </div>
        <a href="#" onclick="openNotificationModal()" class="relative hover:text-[var(--nav-link-hover)]">
          Notifications
          <span id="notification-dot" class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full hidden"></span>
        </a>
        <button id="theme-toggle" class="flex items-center">
          <span id="theme-icon" class="text-2xl">â˜€</span>
        </button>
      `;

      const loggedOutNav = `
        <a href="login.html" class="hover:text-[var(--nav-link-hover)]">Login</a>
        <a href="register.html" class="hover:text-[var(--nav-link-hover)]">Register</a>
        <button id="theme-toggle" class="flex items-center">
          <span id="theme-icon" class="text-2xl">â˜€</span>
        </button>
      `;

      const loggedInMobileNav = `
        <a href="news.html" class="block py-2 px-4 hover:bg-[var(--button-hover)]">News</a>
        <a href="reels.html" class="block py-2 px-4 hover:bg-[var(--button-hover)]">Reels</a>
        <a href="store.html" class="block py-2 px-4 hover:bg-[var(--button-hover)]">Store</a>
        <a href="find-a-job.html" class="block py-2 px-4 hover:bg-[var(--button-hover)]">Find a Job</a>
        <div class="relative">
          <button id="mobile-profile-dropdown-btn" class="flex items-center w-full py-2 px-4 hover:bg-[var(--button-hover)]">
            Profile
            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div id="mobile-profile-dropdown" class="hidden bg-[var(--modal-bg)] rounded-lg shadow-lg mt-2 w-full">
            <a href="view-profile.html" class="block px-4 py-2 hover:bg-[var(--button-hover)]">View Profile</a>
            <button onclick="openNotesModal()" class="block w-full text-left px-4 py-2 hover:bg-[var(--button-hover)]">Notes</button>
            <button onclick="openManageFinancesModal()" class="block w-full text-left px-4 py-2 hover:bg-[var(--button-hover)]">Manage Finances</button>
            <button onclick="openCommentRateModal()" class="block w-full text-left px-4 py-2 hover:bg-[var(--button-hover)]">Comment & Rate</button>
            <button onclick="openShareProfileModal()" class="block w-full text-left px-4 py-2 hover:bg-[var(--button-hover)]">Share Us</button>
          </div>
        </div>
        <button onclick="openNotificationModal()" class="block py-2 px-4 hover:bg-[var(--button-hover)] w-full text-left relative">
          Notifications
          <span id="mobile-notification-dot" class="absolute top-2 right-4 w-2 h-2 bg-red-500 rounded-full hidden"></span>
        </button>
      `;

      const loggedOutMobileNav = `
        <a href="login.html" class="block py-2 px-4 hover:bg-[var(--button-hover)]">Login</a>
        <a href="register.html" class="block py-2 px-4 hover:bg-[var(--button-hover)]">Register</a>
      `;

      navLinks.innerHTML = isLoggedIn ? loggedInNav : loggedOutNav;
      mobileMenu.innerHTML = isLoggedIn ? loggedInMobileNav : loggedOutMobileNav;

      // Theme Toggle
      const themeToggle = document.getElementById('theme-toggle');
      const themeIcon = document.getElementById('theme-icon');
      const currentTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', currentTheme);
      themeIcon.textContent = currentTheme === 'light' ? 'â˜€' : 'ðŸŒ™';

      themeToggle.addEventListener('click', () => {
        const newTheme = document.documentElement.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        themeIcon.textContent = newTheme === 'light' ? 'â˜€' : 'ðŸŒ™';
      });

      // Mobile Menu Toggle
      const menuBtn = document.getElementById('menu-btn');
      menuBtn.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
      });

      // Profile Dropdown Toggle
      const profileDropdownBtn = document.getElementById('profile-dropdown-btn');
      const profileDropdown = document.getElementById('profile-dropdown');
      const mobileProfileDropdownBtn = document.getElementById('mobile-profile-dropdown-btn');
      const mobileProfileDropdown = document.getElementById('mobile-profile-dropdown');

      if (isLoggedIn) {
        function toggleProfileDropdown() {
          profileDropdown.classList.toggle('hidden');
        }

        function toggleMobileProfileDropdown() {
          mobileProfileDropdown.classList.toggle('hidden');
        }

        profileDropdownBtn.addEventListener('click', toggleProfileDropdown);
        mobileProfileDropdownBtn.addEventListener('click', toggleMobileProfileDropdown);

        // Close dropdowns on outside click
        document.addEventListener('click', (event) => {
          if (!profileDropdownBtn.contains(event.target) && !profileDropdown.contains(event.target)) {
            profileDropdown.classList.add('hidden');
          }
          if (!mobileProfileDropdownBtn.contains(event.target) && !mobileProfileDropdown.contains(event.target)) {
            mobileProfileDropdown.classList.add('hidden');
          }
        });
      }

      // Mock News Data
      const newsData = [
        {
          id: 'news1',
          title: 'New Tutoring Program Launched',
          image: 'https://via.placeholder.com/320x180',
          date: '2025-07-25',
          author: 'Jane Smith',
          content: 'ASTEGNI has launched a new tutoring program to enhance student learning outcomes...',
          videos: [
            { id: 'video1', src: 'https://via.placeholder.com/320x180.mp4', desc: 'Program Overview' },
            { id: 'video2', src: 'https://via.placeholder.com/320x180.mp4', desc: 'Tutor Training' }
          ]
        },
        {
          id: 'news2',
          title: 'ASTEGNI Partners with Local Schools',
          image: 'https://via.placeholder.com/320x180',
          date: '2025-07-20',
          author: 'John Doe',
          content: 'A new partnership with local schools aims to provide free tutoring sessions...',
          videos: [
            { id: 'video3', src: 'https://via.placeholder.com/320x180.mp4', desc: 'Partnership Highlights' }
          ]
        },
        {
          id: 'news3',
          title: 'Online Learning Tools Updated',
          image: 'https://via.placeholder.com/320x180',
          date: '2025-07-15',
          author: 'Emily Johnson',
          content: 'ASTEGNI has updated its online learning tools to include interactive quizzes...',
          videos: []
        }
      ];

      // Populate News List
      const newsList = document.getElementById('news-list');
      function renderNewsList(data) {
        newsList.innerHTML = data.map(news => `
          <div class="news-card bg-[var(--highlight)] rounded-lg shadow-lg p-4 cursor-pointer" onclick="openNewsDetailModal('${news.id}')">
            <img src="${news.image}" alt="${news.title}" class="w-full h-48 object-cover rounded-lg mb-2">
            <div class="flex justify-between items-center mb-2">
              <h3 class="text-lg font-semibold text-[var(--heading)]">${news.title}</h3>
              <div class="flex space-x-2">
                <svg id="fav-${news.id}" class="w-6 h-6 cursor-pointer ${favoriteNews[news.id] ? 'fill-red-500' : 'fill-none'}" onclick="toggleFavorite('${news.id}', event)" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                </svg>
                <svg id="save-${news.id}" class="w-6 h-6 cursor-pointer ${savedNews[news.id] ? 'fill-yellow-500' : 'fill-none'}" onclick="toggleSave('${news.id}', event)" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
                </svg>
              </div>
            </div>
            <p class="text-[var(--text)] text-sm">By ${news.author}</p>
            <p class="text-[var(--text)] text-sm">${news.date}</p>
          </div>
        `).join('');
      }
      renderNewsList(newsData);

      // Filter Buttons Functionality
      const allNewsBtn = document.getElementById('all-news-btn');
      const latestBtn = document.getElementById('latest-btn');
      const historyBtn = document.getElementById('history-btn');
      const favoritesBtn = document.getElementById('favorites-btn');
      const savedBtn = document.getElementById('saved-btn');

      function setActiveButton(activeBtn) {
        [allNewsBtn, latestBtn, historyBtn, favoritesBtn, savedBtn].forEach(btn => {
          btn.classList.remove('bg-blue-600', 'hover:bg-blue-700');
          btn.classList.add('bg-gray-600', 'hover:bg-gray-700');
        });
        activeBtn.classList.remove('bg-gray-600', 'hover:bg-gray-700');
        activeBtn.classList.add('bg-blue-600', 'hover:bg-blue-700');
      }

      allNewsBtn.addEventListener('click', () => {
        setActiveButton(allNewsBtn);
        renderNewsList(newsData);
      });

      latestBtn.addEventListener('click', () => {
        setActiveButton(latestBtn);
        const today = new Date('2025-07-27');
        const sevenDaysAgo = new Date(today);
        sevenDaysAgo.setDate(today.getDate() - 7);
        const latestNews = newsData.filter(news => new Date(news.date) >= sevenDaysAgo);
        renderNewsList(latestNews);
      });

      historyBtn.addEventListener('click', () => {
        setActiveButton(historyBtn);
        renderNewsList(historyNews.length > 0 ? historyNews : []);
      });

      favoritesBtn.addEventListener('click', () => {
        setActiveButton(favoritesBtn);
        const favNews = newsData.filter(news => favoriteNews[news.id]);
        renderNewsList(favNews);
      });

      savedBtn.addEventListener('click', () => {
        setActiveButton(savedBtn);
        const saved = newsData.filter(news => savedNews[news.id]);
        renderNewsList(saved);
      });

      // Search Bar Functionality
      const navSearch = document.getElementById('nav-search');
      navSearch.addEventListener('input', (e) => {
        const searchTerm = e.target.value.toLowerCase();
        const newsCards = document.querySelectorAll('.news-card');
        newsCards.forEach(card => {
          const title = card.querySelector('h3').textContent.toLowerCase();
          card.style.display = title.includes(searchTerm) ? 'block' : 'none';
        });
      });

      // Ad Rotation
      const adImage = document.getElementById('ad-image');
      function rotateAd() {
        currentAdIndex = (currentAdIndex + 1) % adImages.length;
        adImage.src = adImages[currentAdIndex];
      }
      setInterval(rotateAd, 7000);

      // Typing Animation
      function typeWriter(element, text, speed, callback) {
        element.textContent = '';
        element.classList.add('typewriter');
        let i = 0;
        function type() {
          if (i < text.length) {
            element.textContent += text.charAt(i);
            i++;
            setTimeout(type, speed);
          } else {
            element.classList.remove('typewriter');
            if (callback) callback();
          }
        }
        type();
      }

      // Modal Functions
      window.openNewsDetailModal = function(newsId) {
        const news = newsData.find(n => n.id === newsId);
        if (!news) return;

        // Add to history
        if (!historyNews.find(n => n.id === newsId)) {
          historyNews.push(news);
        }

        const modal = document.getElementById('news-detail-modal');
        const titleElement = document.getElementById('news-title');
        const contentElement = document.getElementById('news-content');
        document.getElementById('news-image').src = news.image;
        document.getElementById('news-author').textContent = `By ${news.author}`;
        document.getElementById('news-date').textContent = news.date;

        // Typewriter animation for title, then content
        titleElement.textContent = '';
        contentElement.textContent = '';
        typeWriter(titleElement, news.title, 50, () => {
          typeWriter(contentElement, news.content, 30);
        });

        const videosContainer = document.getElementById('news-videos').querySelector('div');
        videosContainer.innerHTML = news.videos.length > 0
          ? news.videos.map(video => `
              <div>
                <video controls class="w-full rounded-lg" id="${video.id}">
                  <source src="${video.src}" type="video/mp4">
                  Your browser does not support the video tag.
                </video>
                <p class="text-[var(--text)] mt-2">${video.desc}</p>
              </div>
            `).join('')
          : '<p class="text-[var(--text)]">No videos available.</p>';

        const otherNewsContainer = document.getElementById('other-news');
        otherNewsContainer.innerHTML = newsData
          .filter(n => n.id !== newsId)
          .map(n => `
            <div class="news-card bg-[var(--highlight)] rounded-lg shadow-lg p-4 cursor-pointer" onclick="openNewsDetailModal('${n.id}')">
              <img src="${n.image}" alt="${n.title}" class="w-full h-32 object-cover rounded-lg mb-2">
              <h3 class="text-lg font-semibold text-[var(--heading)]">${n.title}</h3>
              <p class="text-[var(--text)] text-sm">By ${n.author}</p>
              <p class="text-[var(--text)] text-sm">${n.date}</p>
            </div>
          `).join('');

        // Read Aloud Setup (Future: Replace with Eleven Labs integration)
        const readBtn = document.getElementById('read-btn');
        const readIcon = document.getElementById('read-icon');
        const stopBtn = document.getElementById('stop-btn');
        const restartBtn = document.getElementById('restart-btn');

        if (utterance) {
          speechSynthesis.cancel();
          isSpeaking = false;
        }

        readBtn.onclick = () => {
          if (isSpeaking) {
            speechSynthesis.pause();
            isSpeaking = false;
            readBtn.innerHTML = `
              <svg id="read-icon" class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"></path>
              </svg>
              Read
            `;
          } else {
            if (!utterance) {
              utterance = new SpeechSynthesisUtterance(`${news.title}. ${news.content}`);
              utterance.lang = 'en-US';
              utterance.onend = () => {
                isSpeaking = false;
                readBtn.innerHTML = `
                  <svg id="read-icon" class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"></path>
                  </svg>
                  Read
                `;
                utterance = null;
              };
            }
            speechSynthesis.speak(utterance);
            isSpeaking = true;
            readBtn.innerHTML = `
              <svg id="read-icon" class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6"></path>
              </svg>
              Pause
            `;
          }
        };

        stopBtn.onclick = () => {
          speechSynthesis.cancel();
          isSpeaking = false;
          readBtn.innerHTML = `
            <svg id="read-icon" class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"></path>
            </svg>
            Read
          `;
          utterance = null;
        };

        restartBtn.onclick = () => {
          speechSynthesis.cancel();
          utterance = new SpeechSynthesisUtterance(`${news.title}. ${news.content}`);
          utterance.lang = 'en-US';
          utterance.onend = () => {
            isSpeaking = false;
            readBtn.innerHTML = `
              <svg id="read-icon" class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"></path>
              </svg>
              Read
            `;
            utterance = null;
          };
          speechSynthesis.speak(utterance);
          isSpeaking = true;
          readBtn.innerHTML = `
            <svg id="read-icon" class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6"></path>
            </svg>
            Pause
          `;
        };

        modal.classList.remove('hidden');
      };

      window.closeNewsDetailModal = function() {
        speechSynthesis.cancel();
        isSpeaking = false;
        utterance = null;
        document.getElementById('news-detail-modal').classList.add('hidden');
      };

      window.toggleFavorite = function(newsId, event) {
        event.stopPropagation();
        const favIcon = document.getElementById(`fav-${newsId}`);
        favoriteNews[newsId] = !favoriteNews[newsId];
        favIcon.classList.toggle('fill-red-500', favoriteNews[newsId]);
        favIcon.classList.toggle('fill-none', !favoriteNews[newsId]);
      };

      window.toggleSave = function(newsId, event) {
        event.stopPropagation();
        const saveIcon = document.getElementById(`save-${newsId}`);
        savedNews[newsId] = !savedNews[newsId];
        saveIcon.classList.toggle('fill-yellow-500', savedNews[newsId]);
        saveIcon.classList.toggle('fill-none', !savedNews[newsId]);
      };

      window.openNotesModal = function() {
        document.getElementById('notes-modal').classList.remove('hidden');
      };

      window.closeNotesModal = function() {
        document.getElementById('notes-modal').classList.add('hidden');
      };

      window.openManageFinancesModal = function() {
        document.getElementById('manage-finances-modal').classList.remove('hidden');
      };

      window.closeManageFinancesModal = function() {
        document.getElementById('manage-finances-modal').classList.add('hidden');
      };

      window.openCommentRateModal = function() {
        const modal = document.getElementById('comment-rate-modal');
        modal.classList.remove('hidden');
        document.getElementById('usability-rating').addEventListener('input', () => {
          document.getElementById('usability-value').textContent = document.getElementById('usability-rating').value;
        });
        document.getElementById('service-rating').addEventListener('input', () => {
          document.getElementById('service-value').textContent = document.getElementById('service-rating').value;
        });
      };

      window.closeCommentRateModal = function() {
        document.getElementById('comment-rate-modal').classList.add('hidden');
      };

      window.submitCommentRate = function() {
        const comment = document.getElementById('comment-input').value;
        const usability = document.getElementById('usability-rating').value;
        const service = document.getElementById('service-rating').value;
        if (comment.trim()) {
          comments.push(comment);
          document.getElementById('submitted-comments').innerHTML = comments.map(c => `<p class="text-[var(--text)]">${c}</p>`).join('');
          document.getElementById('comment-input').value = '';
        }
        alert(`Submitted: Comment - ${comment || 'No comment'}, Usability ${usability}/5, Service ${service}/5`);
        closeCommentRateModal();
      };

      window.openShareProfileModal = function() {
        const modal = document.getElementById('share-profile-modal');
        const profileLink = document.getElementById('profile-link');
        profileLink.value = window.location.href;
        document.getElementById('profile-share-facebook').href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`;
        document.getElementById('profile-share-telegram').href = `https://t.me/share/url?url=${encodeURIComponent(window.location.href)}`;
        modal.classList.remove('hidden');
      };

      window.closeShareProfileModal = function() {
        document.getElementById('share-profile-modal').classList.add('hidden');
      };

      window.copyProfileLink = function() {
        const profileLink = document.getElementById('profile-link');
        profileLink.select();
        document.execCommand('copy');
        alert('Link copied to clipboard!');
      };

      window.openNotificationModal = function() {
        alert('Notifications modal to be implemented.');
      };
    });
  </script>
</body>
</html>