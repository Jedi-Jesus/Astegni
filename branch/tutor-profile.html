<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ASTEGNI - Tutor Profile</title>
  <link href="../css/output.css" rel="stylesheet">
  <link href="../css/root_theme.css" rel="stylesheet"/>
  <script defer src="../js/xlsx.full.min.js"></script>
  <script src="../js/app.js" defer></script>
  <script defer src="../js/chart.min.js"></script>
  <script defer src="../js/tutor-profile.js"></script>
  <style>
    body {
      background-color: var(--background);
      color: var(--text);
      font-family: sans-serif;
    }
    nav { background-color: var(--highlight); }
    nav a { color: var(--nav-link); }
    nav a:hover { color: var(--nav-link-hover); }
    button.cta-button { background-color: var(--button-bg); color: var(--button-text); }
    button.cta-button:hover { background-color: var(--button-hover); }
    button.cta-button-red { background-color: #dc2626; color: #ffffff; }
    button.cta-button-red:hover { background-color: #b91c1c; }
    footer { background-color: var(--footer-bg); color: var(--footer-text); }
    .modal-content { background-color: var(--modal-bg); color: var(--modal-text); }
    .progress-circle:hover .tooltip { display: block; }
    .tooltip {
      display: none;
      position: absolute;
      z-index: 10;
      background-color: var(--modal-bg);
      color: var(--modal-text);
      padding: 0.5rem;
      border-radius: 0.25rem;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }
    canvas { border: 1px solid #e5e7eb; border-radius: 8px; }
    video.preview { max-height: 100px; }
    .ad-placeholder {
      background-color: var(--background);
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #888;
      font-weight: bold;
      margin-bottom: 1rem;
      text-align: center;
    }
    #cover-photo {
      height: 150px;
      background-size: cover;
      background-position: center;
      position: relative;
      border-radius: 8px;
    }
    #profile-picture {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      position: absolute;
      bottom: -40px;
      left: 20px;
      border: 4px solid var(--background);
      object-fit: cover;
    }
    #profile-picture-container {
      position: relative;
      display: inline-block;
    }
    #school-suggestions {
      position: absolute;
      z-index: 20;
      background-color: var(--modal-bg);
      border: 1px solid #e5e7eb;
      border-radius: 4px;
      max-height: 200px;
      overflow-y: auto;
      width: 100%;
      display: none;
    }
    #school-suggestions div {
      padding: 8px;
      cursor: pointer;
    }
    #school-suggestions div:hover {
      background-color: var(--button-hover);
      color: var(--button-text);
    }
    .edit-icon {
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      margin-left: 8px;
    }
    .edit-field-hidden {
      display: none;
    }
  </style>
</head>
<body>
  <!-- Navigation (unchanged) -->
  <nav class="p-4 sticky top-0 z-10 shadow-sm">
    <div class="container mx-auto flex justify-between items-center">
      <a href="../index.html" class="text-2xl font-bold">ASTEGNI</a>
      <div class="hidden md:flex space-x-6 items-center" id="desktop-nav">
        <a href="../index.html" class="hover:text-[var(--nav-link-hover)]">Home</a>
        <a href="find-tutors.html" class="hover:text-[var(--nav-link-hover)]">Find Students</a>
        <button id="notification-bell" class="relative focus:outline-none" onclick="openNotificationModal()">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 00-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 01-6 0v-1m6 0H9"></path>
          </svg>
          <span id="notification-dot" class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full hidden"></span>
        </button>
        <button id="theme-toggle" class="cta-button px-4 py-2 rounded-lg">Toggle Theme</button>
      </div>
      <button id="menu-btn" class="md:hidden focus:outline-none">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
        </svg>
      </button>
    </div>
    <div id="mobile-menu" class="hidden md:hidden bg-[var(--highlight)] mt-2 rounded-lg shadow">
      <a href="index.html" class="block py-2 px-4 hover:bg-[var(--button-hover)]">Home</a>
      <a href="find-tutors.html" class="block py-2 px-4 hover:bg-[var(--button-hover)]">Find Students</a>
      <button id="mobile-notification-bell" class="block py-2 px-4 hover:bg-[var(--button-hover)] w-full text-left relative" onclick="openNotificationModal()">
        Notifications
        <span id="mobile-notification-dot" class="absolute top-2 right-4 w-2 h-2 bg-red-500 rounded-full hidden"></span>
      </button>
      <button id="mobile-theme-toggle" class="cta-button block py-2 px-4 w-full text-left">Toggle Theme</button>
    </div>
  </nav>

  <!-- Tutor Profile Section -->
  <section class="py-16">
    <div class="container mx-auto px-4 flex flex-col lg:flex-row gap-8">
      <div class="lg:w-3/4">
        <div id="cover-photo" class="mb-8 relative" style="background-image: url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=150&q=80');">
          <div id="profile-picture-container">
            <img src="pictures/profile_picture.png" id="profile-picture" alt="Tutor Profile Picture">
            <button onclick="openEditProfilePictureModal()" class="edit-icon absolute bottom-0 right-0">
              <svg class="w-5 h-5" fill="none" stroke="var(--text)" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
              </svg>
            </button>
          </div>
          <button onclick="openEditCoverPictureModal()" class="edit-icon absolute top-2 right-2">
            <svg class="w-5 h-5" fill="none" stroke="var(--text)" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
            </svg>
          </button>
        </div>
        <div class="p-6 bg-[var(--modal-bg)] rounded-lg shadow-lg">
          <div class="flex flex-col md:flex-row gap-4 mb-4">
            <div class="profile-details w-full md:w-2/3">
              <h2 id="tutor-name" class="text-2xl font-bold inline-flex items-center">
                Amanuel Tesfaye
                <span class="ml-2 w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center" title="Verified Tutor">
                  <svg class="w-4 h-4" fill="white" viewBox="0 0 20 20">
                    <path d="M16.707 5.293a1 1 0 00-1.414 0L8 12.586l-3.293-3.293a1 1 0 00-1.414 1.414l4 4a1 1 0 001.414 0l8-8a1 1 0 000-1.414z"/>
                  </svg>
                </span>
              </h2>
              <p id="verification-status" class="text-sm italic mb-2"></p>
              <div class="flex flex-col md:flex-row gap-6 mb-4">
                <!-- Rating Circle and Stars -->
                <div class="w-full md:w-1/4">
                  <div class="relative w-16 h-16 progress-circle">
                    <svg class="w-full h-full" viewBox="0 0 100 100">
                      <circle cx="50" cy="50" r="45" stroke="#e5e7eb" stroke-width="8" fill="none"/>
                      <circle id="rating-arc" cx="50" cy="50" r="45" stroke="#EF4444" stroke-width="8" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <div class="absolute inset-0 flex items-center justify-center font-bold text-sm text-[var(--text)]" id="rating-label">N/A</div>
                  </div>
                  <span id="tutor-rating-stars" class="text-yellow-500 mt-1">No rating</span>
                    <p class="text-[var(--text)]"><span id="follower-number">0</span> Followers</p>
                    <p id="tutor-gender" class="text-[var(--text)]">Male</p>

                </div>
                <!-- Tutor Details -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 w-full md:w-3/4">
                  <div class="md:col-span-1">
                    <p id="tutor-phone" class="text-[var(--text)]">Phone: Not set</p>
                    <p id="tutor-email" class="text-[var(--text)]">Email: Not set</p>
                    <p id="tutor-address" class="text-[var(--text)]">Address: Not set</p>
                    <p id="teachesAt" class="text-[var(--text)]">Teaches at: Not set</p>
                  </div>
                  <div class="md:col-span-1">
                    <p id="courses" class="text-[var(--text)]">Courses: <span id="course-list">Not set</span></p>
                  </div>
                  <div class="md:col-span-1">
                    <p id="payment-method" class="text-[var(--text)]">Payment Method: Not set</p>
                    <p id="fee" class="text-[var(--text)]">Fee: Not set</p>
                  </div>
                </div>
              </div>
              <div class="relative mb-4">
                <h4 class="text-2xl font-bold text-[var(--heading)] inline-flex items-center">
                  About me
                  <button onclick="toggleEditField('about-me')" class="edit-icon">
                    <svg class="w-5 h-5" fill="none" stroke="var(--text)" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
                    </svg>
                  </button>
                </h4>
                <p id="tutor-about-me" class="text-[var(--text)]">Hi, I'm Amanuel, a passionate tutor with 5 years of experience in teaching Math and Physics. I focus on making complex concepts simple and engaging for students.</p>
                <textarea id="edit-about-me" class="edit-field-hidden w-full p-2 border rounded-lg mt-2" rows="4"></textarea>
                <div class="edit-field-hidden flex gap-2 mt-2" id="about-me-buttons">
                  <button onclick="saveAboutMe()" class="cta-button px-4 py-2 rounded-lg">Save</button>
                  <button onclick="toggleEditField('about-me')" class="cta-button px-4 py-2 rounded-lg">Cancel</button>
                </div>
              </div>
              <div class="relative mb-4">
                <h4 class="text-2xl font-bold text-[var(--heading)] inline-flex items-center">
                  Certifications
                  <button onclick="toggleEditField('certifications')" class="edit-icon">
                    <svg class="w-5 h-5" fill="none" stroke="var(--text)" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
                    </svg>
                  </button>
                </h4>
                <div id="tutor-certifications" class="text-[var(--text)]"></div>
                <div id="edit-certifications" class="edit-field-hidden mt-2">
                  <input type="text" id="edit-certification-title" class="w-full p-2 border rounded-lg mb-2" placeholder="Certification Title (e.g., BSc in Physics)">
                  <input type="text" id="edit-certification-school" class="w-full p-2 border rounded-lg mb-2" placeholder="School (e.g., Addis Ababa University)">
                  <input type="text" id="edit-certification-address" class="w-full p-2 border rounded-lg mb-2" placeholder="Address (e.g., Addis Ababa, Ethiopia)">
                  <input type="file" id="edit-certification-file" accept="image/*,application/pdf" class="w-full p-2 border rounded-lg mb-2">
                  <p id="certification-file-error" class="text-red-500 text-sm mb-2 hidden">Invalid file (max 5MB, JPEG/PNG/GIF/PDF).</p>
                  <div id="certification-file-preview" class="mb-4"></div>
                </div>
                <div class="edit-field-hidden flex gap-2 mt-2" id="certifications-buttons">
                  <button onclick="saveCertifications()" class="cta-button px-4 py-2 rounded-lg">Save</button>
                  <button onclick="toggleEditField('certifications')" class="cta-button px-4 py-2 rounded-lg">Cancel</button>
                </div>
              </div>
              <div class="relative mb-4">
                <h3 class="text-xl font-semibold text-[var(--heading)] inline-flex items-center">
                  Connect with me through:
                  <button onclick="toggleEditField('socials')" class="edit-icon">
                    <svg class="w-5 h-5" fill="none" stroke="var(--text)" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
                    </svg>
                  </button>
                </h3>
                <div id="edit-socials" class="edit-field-hidden mt-2">
                  <input type="text" id="edit-social-facebook" class="w-full p-2 border rounded-lg mb-2" placeholder="https://facebook.com/yourprofile">
                  <input type="text" id="edit-social-twitter" class="w-full p-2 border rounded-lg mb-2" placeholder="https://x.com/yourprofile">
                  <input type="text" id="edit-social-linkedin" class="w-full p-2 border rounded-lg mb-2" placeholder="https://linkedin.com/in/yourprofile">
                  <div class="flex gap-2 mt-2">
                    <button onclick="saveSocials()" class="cta-button px-4 py-2 rounded-lg">Save</button>
                    <button onclick="toggleEditField('socials')" class="cta-button px-4 py-2 rounded-lg">Cancel</button>
                  </div>
                </div>
                <div id="view-profile-socials" class="flex space-x-4">
                  <a id="social-facebook" href="#" target="_blank" class="hover:text-[var(--nav-link-hover)]">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.5 7.09h-2.07c-.28 0-.5.22-.5.5v1.41h2.57l-.34 2.59h-2.23v6.41h-2.59v-6.41H9.5v-2.59h1.84V9.59c0-1.81 1.1-2.8 2.71-2.8h1.95v2.3z"/></svg>
                  </a>
                  <a id="social-linkedin" href="#" target="_blank" class="hover:text-[var(--nav-link-hover)]">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2.5 16.5h-2v-7h2v7zm-1-7.9c-.7 0-1.2-.6-1.2-1.3s.5-1.3 1.2-1.3 1.2.6 1.2 1.3-.5 1.3-1.2 1.3zm9.5 7.9h-2v-4c0-.9-.3-1.5-1.1-1.5-.6 0-1 .4-1.1 1v4.5h-2v-7h2v1.1c.3-.5.9-.8 1.6-.8 1.2 0 2.1.7 2.1 2.2v4.5z"/></svg>
                  </a>
                  <a id="social-twitter" href="#" target="_blank" class="hover:text-[var(--nav-link-hover)]">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                  </a>
                </div>
              </div>
            </div>
          </div>
          
          <div class="flex flex-wrap gap-2 mb-6">
            <button onclick="openEditProfileModal()" class="cta-button px-4 py-2 rounded-lg flex items-center">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
              </svg>
              Edit Profile
            </button>
            <button onclick="openChatModal()" class="cta-button px-4 py-2 rounded-lg">Chat</button>
            <button onclick="openStudentsModal()" class="cta-button px-4 py-2 rounded-lg">My Students</button>
            <button onclick="openCommentModal()" class="cta-button px-4 py-2 rounded-lg">View Comments</button>
            <button onclick="openReferralModal()" class="cta-button px-4 py-2 rounded-lg">Share Referral</button>
          </div>
          
          <div id="sponsorship-placeholder-2" class="rounded-lg shadow-lg p-4 text-center bg-[var(--highlight)]">
            <h3 class="text-xl font-semibold mb-2" style="color: var(--heading)">Sponsor Our Platform</h3>
            <img src="https://via.placeholder.com/728x90" class="mx-auto mb-4 rounded" alt="Sponsorship Placeholder">
            <p class="text-[var(--text)]">Interested in sponsoring ASTEGNI? Contact us at <a href="mailto:info@astegni.et" class="underline">info@astegni.et</a> Sunspear!</p>
          </div>
          
          <div class="mt-8">
            <div class="flex justify-between items-center mb-4">
              <h3 class="text-xl font-semibold text-[var(--heading)]">Introduction Video</h3>
              <button onclick="openUploadVideoModal()" class="cta-button px-4 py-2 rounded-lg">Upload Video</button>
            </div>
            <video controls class="w-full rounded-lg" id="intro-video">
              <source src="https://via.placeholder.com/640x360.mp4" type="video/mp4">
              Your browser does not support the video tag.
            </video>
            <p id="intro-video-desc" class="text-[var(--text)] mt-2">Introduction to my teaching style.</p>
            <div class="flex gap-2 mt-2">
              <button class="px-2 py-1 rounded hover:bg-[var(--button-hover)]">üëç Like</button>
              <button class="px-2 py-1 rounded hover:bg-[var(--button-hover)]">üëé Dislike</button>
              <button onclick="openVideoCommentModal('intro')" class="px-2 py-1 rounded hover:bg-[var(--button-hover)]">üí¨ Comment</button>
              <button onclick="openShareModal('intro')" class="px-2 py-1 rounded hover:bg-[var(--button-hover)]">‚Üó Share</button>
            </div>
            <div id="intro-comments" class="text-[var(--text)] mt-2">
              <p>No comments yet.</p>
            </div>
            <button onclick="openVideoDescModal('intro')" class="cta-button px-4 py-2 rounded-lg mt-4">Video Description</button>
            <h4 class="text-lg font-semibold mt-8 mb-4 text-[var(--heading)]">Short Clips</h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <video controls class="w-full rounded-lg" id="clip-1">
                  <source src="https://via.placeholder.com/320x180.mp4" type="video/mp4">
                  Your browser does not support the video tag.
                </video>
                <p id="clip-1-desc" class="text-[var(--text)] mt-2">Quick Math tip.</p>
                <div class="flex gap-2 mt-2">
                  <button class="px-2 py-1 rounded hover:bg-[var(--button-hover)]">üëç Like</button>
                  <button class="px-2 py-1 rounded hover:bg-[var(--button-hover)]">üëé Dislike</button>
                  <button onclick="openVideoCommentModal('clip1')" class="px-2 py-1 rounded hover:bg-[var(--button-hover)]">üí¨ Comment</button>
                  <button onclick="openShareModal('clip1')" class="px-2 py-1 rounded hover:bg-[var(--button-hover)]">‚Üó Share</button>
                </div>
                <div id="clip1-comments" class="text-[var(--text)] mt-2">
                  <p>No comments yet.</p>
                </div>
                <button onclick="openVideoDescModal('clip1')" class="cta-button px-4 py-2 rounded-lg mt-4">Video Description</button>
              </div>
              <div>
                <video controls class="w-full rounded-lg" id="clip-2">
                  <source src="https://via.placeholder.com/320x180.mp4" type="video/mp4">
                  Your browser does not support the video tag.
                </video>
                <p id="clip-2-desc" class="text-[var(--text)] mt-2">Physics concept explained.</p>
                <div class="flex gap-2 mt-2">
                  <button class="px-2 py-1 rounded hover:bg-[var(--button-hover)]">üëç Like</button>
                  <button class="px-2 py-1 rounded hover:bg-[var(--button-hover)]">üëé Dislike</button>
                  <button onclick="openVideoCommentModal('clip2')" class="px-2 py-1 rounded hover:bg-[var(--button-hover)]">üí¨ Comment</button>
                  <button onclick="openShareModal('clip2')" class="px-2 py-1 rounded hover:bg-[var(--button-hover)]">‚Üó Share</button>
                </div>
                <div id="clip2-comments" class="text-[var(--text)] mt-2">
                  <p>No comments yet.</p>
                </div>
                <button onclick="openVideoDescModal('clip2')" class="cta-button px-4 py-2 rounded-lg mt-4">Video Description</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <aside class="lg:w-1/4 hidden lg:block sticky top-20 self-start">
        <div class="ad-placeholder" style="width: 300px; height: 250px;">Advertisement (300x250)</div>
        <div class="ad-placeholder" style="width: 300px; height: 250px;">Advertisement (300x250)</div>
        <div class="ad-placeholder" style="width: 300px; height: 250px;">Advertisement (300x250)</div>
      </aside>
    </div>
  </section>

  <!-- Modals -->
  <!-- Edit Profile Modal -->
  <div id="edit-profile-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Edit Profile</h3>
      <label class="block mb-2 text-[var(--text)]">Name</label>
      <input type="text" id="profile-name" class="w-full p-2 border rounded-lg mb-4" value="Amanuel Tesfaye">
      <label class="block mb-2 text-[var(--text)]">Phone Number</label>
      <input type="tel" id="profile-phone" class="w-full p-2 border rounded-lg mb-4" placeholder="+251912345678">
      <p id="phone-error" class="text-red-500 text-sm mb-2 hidden">Invalid phone number (e.g., +251912345678).</p>
      <label class="block mb-2 text-[var(--text)]">Email Address</label>
      <input type="email" id="profile-email" class="w-full p-2 border rounded-lg mb-4" placeholder="example@astegni.et">
      <p id="email-error" class="text-red-500 text-sm mb-2 hidden">Invalid email address.</p>
      <label class="block mb-2 text-[var(--text)]">Location</label>
      <div class="flex gap-2 mb-4">
        <input type="text" id="profile-location" class="w-full p-2 border rounded-lg" placeholder="Enter your location" readonly>
        <button id="use-my-location" onclick="getLocation()" class="cta-button px-4 py-2 rounded-lg">Use My Location</button>
      </div>
      <p id="location-error" class="text-red-500 text-sm mb-2 hidden">Unable to get location.</p>
      <label class="block mb-2 text-[var(--text)]">School</label>
      <div class="relative mb-4">
        <input type="text" id="profile-school" class="w-full p-2 border rounded-lg" placeholder="Search for a school...">
        <div id="school-suggestions" class="absolute"></div>
        <button id="request-school" class="cta-button px-4 py-2 rounded-lg mt-2 hidden" onclick="requestSchoolListing()">Request School Listing</button>
      </div>
      <p id="school-error" class="text-red-500 text-sm mb-2 hidden">Please select a valid school from the list or request a new one.</p>
      <label class="block mb-2 text-[var(--text)]">ID Document (Passport, Driver‚Äôs License, FIDA, etc.)</label>
      <input type="file" id="id-input" accept="image/*,application/pdf" class="w-full p-2 border rounded-lg mb-2">
      <p id="id-error" class="text-red-500 text-sm mb-2 hidden">Invalid file (max 5MB, JPEG/PNG/GIF/PDF).</p>
      <div id="id-preview" class="mb-4"></div>
      <label class="block mb-2 text-[var(--text)]">Face Scan (Selfie via Webcam)</label>
      <button id="face-scan-btn" onclick="captureSelfie()" class="cta-button px-4 py-2 rounded-lg mb-2">Capture Selfie</button>
      <p id="face-scan-status" class="text-[var(--text)] mb-2">No selfie captured.</p>
      <label class="block mb-2 text-[var(--text)]">Payment Method</label>
      <select id="payment-method" class="w-full p-2 border rounded-lg mb-4">
        <option value="" disabled selected>Select a payment method</option>
        <option value="cbe">Commercial Bank of Ethiopia</option>
        <option value="awash">Awash Bank</option>
        <option value="dashen">Dashen Bank</option>
        <option value="telebirr">Telebirr</option>
      </select>
      <p id="payment-method-error" class="text-red-500 text-sm mb-2 hidden">Please select a payment method.</p>
      <label class="block mb-2 text-[var(--text)]">Payment Account Number</label>
      <input type="text" id="payment-account" class="w-full p-2 border rounded-lg mb-4" placeholder="Enter account number">
      <p id="payment-account-error" class="text-red-500 text-sm mb-2 hidden">Invalid account number.</p>
      <label class="block mb-2 text-[var(--text)]">Courses (comma-separated, e.g., Algebra:hourly:350)</label>
      <div class="mb-4">
        <select id="fee-type" class="w-full p-2 border rounded-lg mb-2">
          <option value="hourly">Hourly Fee</option>
          <option value="monthly">Monthly Fee</option>
        </select>
        <input type="text" id="profile-courses" class="w-full p-2 border rounded-lg" value="Algebra:hourly:350,Geometry:hourly:350,Physics 101:hourly:400">
      </div>
      <label class="block mb-2 text-[var(--text)]">Certification Documents</label>
      <input type="file" id="certification-documents-input" accept="image/*,application/pdf" multiple class="w-full p-2 border rounded-lg mb-2">
      <p id="certification-documents-error" class="text-red-500 text-sm mb-2 hidden">Invalid file(s) (max 5MB, JPEG/PNG/GIF/PDF).</p>
      <div id="certification-documents-preview" class="grid grid-cols-2 gap-4 mb-4"></div>
      <div class="flex gap-2 mb-4">
        <button onclick="submitProfileEdit()" class="cta-button px-4 py-2 rounded-lg flex-1">Save Changes</button>
        <button onclick="sendForVerification()" class="cta-button px-4 py-2 rounded-lg flex-1">Send for Verification</button>
      </div>
      <button onclick="closeEditProfileModal()" class="mt-4 text-[var(--text)] hover:underline w-full text-center">Cancel</button>
    </div>
  </div>

  <!-- Profile Picture Edit Modal -->
  <div id="edit-profile-picture-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Edit Profile Picture</h3>
      <input type="file" id="profile-picture-input" accept="image/*" class="w-full p-2 border rounded-lg mb-2">
      <p id="profile-picture-error" class="text-red-500 text-sm mb-2 hidden">Invalid image file (max 5MB, JPEG/PNG/GIF).</p>
      <canvas id="profile-picture-preview" width="128" height="128" class="mb-4"></canvas>
      <div class="flex gap-2">
        <button onclick="saveProfilePicture()" class="cta-button px-4 py-2 rounded-lg flex-1">Save</button>
        <button onclick="closeEditProfilePictureModal()" class="cta-button px-4 py-2 rounded-lg flex-1">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Cover Picture Edit Modal -->
  <div id="edit-cover-picture-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Edit Cover Picture</h3>
      <input type="file" id="cover-picture-input" accept="image/*" class="w-full p-2 border rounded-lg mb-2">
      <p id="cover-picture-error" class="text-red-500 text-sm mb-2 hidden">Invalid image file (max 5MB, JPEG/PNG/GIF).</p>
      <canvas id="cover-picture-preview" width="300" height="100" class="mb-4"></canvas>
      <div class="flex gap-2">
        <button onclick="saveCoverPicture()" class="cta-button px-4 py-2 rounded-lg flex-1">Save</button>
        <button onclick="closeEditCoverPictureModal()" class="cta-button px-4 py-2 rounded-lg flex-1">Cancel</button>
      </div>
    </div>
  </div>

  <!-- School Request Modal (unchanged) -->
  <div id="school-request-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Request School Listing</h3>
      <label class="block mb-2 text-[var(--text)]">School Name</label>
      <input type="text" id="request-school-name" class="w-full p-2 border rounded-lg mb-4" placeholder="Enter school name">
      <p id="request-school-error" class="text-red-500 text-sm mb-2 hidden">Please enter a valid school name.</p>
      <label class="block mb-2 text-[var(--text)]">Contact Email</label>
      <input type="email" id="request-school-email" class="w-full p-2 border rounded-lg mb-4" placeholder="Enter contact email">
      <p id="request-school-email-error" class="text-red-500 text-sm mb-2 hidden">Invalid email address.</p>
      <button onclick="submitSchoolRequest()" class="cta-button px-4 py-2 rounded-lg w-full">Submit Request</button>
      <button onclick="closeSchoolRequestModal()" class="mt-4 text-[var(--text)] hover:underline w-full text-center">Cancel</button>
    </div>
  </div>

  <!-- Student Details Modal -->
  <div id="student-details-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-lg max-h-[80vh] overflow-y-auto" style="background-color: var(--modal-bg); color: var(--modal-text); border: 1px solid var(--modal-text)">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-2xl font-bold text-[var(--heading)]">Student Details</h3>
        <button onclick="backToStudentsModal()" class="edit-icon">
          <svg class="w-6 h-6" fill="none" stroke="var(--text)" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
        </button>
      </div>
      <p id="student-detail-name" class="text-[var(--text)] mb-2"></p>
      <p id="student-detail-phone" class="text-[var(--text)] mb-2"></p>
      <p id="student-detail-email" class="text-[var(--text)] mb-2"></p>
      <p id="student-detail-subjects" class="text-[var(--text)] mb-2"></p>
      <p id="student-detail-session" class="text-[var(--text)] mb-4"></p>
      <h4 class="text-lg font-semibold mb-2 text-[var(--heading)]">Overall Progress</h4>
      <div class="relative w-24 h-24 progress-circle mb-4">
        <svg class="w-full h-full" viewBox="0 0 100 100">
          <circle cx="50" cy="50" r="45" stroke="#e5e7eb" stroke-width="8" fill="none"/>
          <circle id="detail-progress-arc" cx="50" cy="50" r="45" stroke="#3B82F6" stroke-width="8" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="283" stroke-dashoffset="0"/>
        </svg>
        <div class="absolute inset-0 flex items-center justify-center font-bold text-lg text-[var(--text)]" id="detail-progress-label">0%</div>
      </div>
      <h4 class="text-lg font-semibold mb-2 text-[var(--heading)]">Detailed Progress</h4>
      <div class="mb-4">
        <div class="mb-2">
          <span>Math: <span id="detail-subj-math">0%</span></span>
          <div class="bg-gray-200 h-2 rounded">
            <div id="detail-bar-math" class="bg-blue-600 h-2 rounded" style="width:0%"></div>
          </div>
        </div>
        <div class="mb-2">
          <span>Physics: <span id="detail-subj-physics">0%</span></span>
          <div class="bg-gray-200 h-2 rounded">
            <div id="detail-bar-physics" class="bg-green-600 h-2 rounded" style="width:0%"></div>
          </div>
        </div>
      </div>
      <h4 class="text-lg font-semibold mb-2 text-[var(--heading)]">Session History</h4>
      <table id="student-session-history" class="w-full text-left mb-4">
        <thead>
          <tr class="bg-gray-200">
            <th class="p-2">Date</th>
            <th class="p-2">Time</th>
            <th class="p-2">Subjects</th>
            <th class="p-2">Cost</th>
            <th class="p-2">Status</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <div class="flex gap-2">
        <button onclick="openParentProfileModal(document.getElementById('student-details-modal').dataset.studentId)" class="cta-button px-4 py-2 rounded-lg flex-1">Connect with Parent</button>
        <button onclick="openChatModal(document.getElementById('student-details-modal').dataset.studentId)" class="cta-button px-4 py-2 rounded-lg flex-1">Chat</button>
        <button onclick="addStudentComment(document.getElementById('student-details-modal').dataset.studentId)" class="cta-button px-4 py-2 rounded-lg flex-1 flex items-center justify-center">
          <span id="comment-button-text">Comment on Student</span>
        </button>
        <button onclick="openVideoCallModal(document.getElementById('student-details-modal').dataset.studentId)" class="cta-button-red px-4 py-2 rounded-lg flex-1 flex items-center justify-center">
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14m0-4v4m0-4H5a2 2 0 00-2 2v4a2 2 0 002 2h10a2 2 0 002-2v-4"></path>
          </svg>
          Video Call
        </button>
      </div>
      <button onclick="closeStudentDetailsModal()" class="mt-4 text-[var(--text)] hover:underline w-full text-center">Close</button>
    </div>
  </div>

  <!-- Comment Student Modal -->
  <div id="commentStudent" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-lg" style="background-color: var(--modal-bg); color: var(--modal-text); border: 1px solid var(--modal-text)">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Add Comment</h3>
      <textarea id="comment-input" class="w-full p-2 mb-4 border rounded" style="background-color: var(--modal-bg); color: var(--modal-text); border-color: var(--modal-text)" placeholder="Enter your comment about the student"></textarea>
      <div class="flex gap-2">
        <button onclick="submitStudentComment(document.getElementById('student-details-modal').dataset.studentId, document.getElementById('comment-input').value)" class="cta-button px-4 py-2 rounded-lg flex-1">Submit Comment</button>
        <button onclick="closeStudentCommentModal()" class="cta-button px-4 py-2 rounded-lg flex-1">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Parent Profile Modal (unchanged) -->
  <div id="parent-profile-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Parent Profile</h3>
      <div class="flex items-center mb-4">
        <img id="parent-profile-picture" src="https://via.placeholder.com/64" alt="Parent Profile Picture" class="w-16 h-16 rounded-full mr-4">
        <div>
          <p id="parent-name" class="text-lg font-semibold text-[var(--text)]">Not set</p>
          <p id="parent-email" class="text-[var(--text)]">Email: Not set</p>
          <p id="parent-phone" class="text-[var(--text)]">Phone: Not set</p>
        </div>
      </div>
      <div class="flex gap-2 mb-4">
        <button onclick="openVideoCallModal(document.getElementById('parent-profile-modal').dataset.studentId)" class="cta-button px-4 py-2 rounded-lg flex-1 flex items-center justify-center">
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10.5l6-6m0 0H9m12 0v12m-6 6l-6-6m6 0H3"></path>
          </svg>
          Video Call
        </button>
        <button onclick="openChatModal(document.getElementById('parent-profile-modal').dataset.studentId, 'parent')" class="cta-button px-4 py-2 rounded-lg flex-1">Chat</button>
        <button onclick="openStudentAnalysisModal(document.getElementById('parent-profile-modal').dataset.studentId)" class="cta-button px-4 py-2 rounded-lg flex-1">Report Analysis</button>
      </div>
      <button onclick="closeParentProfileModal()" class="mt-4 text-[var(--text)] hover:underline w-full text-center">Close</button>
    </div>
  </div>

  <!-- Student Analysis Modal (unchanged) -->
  <div id="student-analysis-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Student Analysis Report</h3>
      <p id="student-analysis-name" class="text-[var(--text)] mb-2"></p>
      <h4 class="text-lg font-semibold mb-2 text-[var(--heading)]">Performance Summary</h4>
      <div class="mb-4">
        <div class="mb-2">
          <span>Math: <span id="analysis-subj-math">0%</span></span>
          <div class="bg-gray-200 h-2 rounded">
            <div id="analysis-bar-math" class="bg-blue-600 h-2 rounded" style="width:0%"></div>
          </div>
        </div>
        <div class="mb-2">
          <span>Physics: <span id="analysis-subj-physics">0%</span></span>
          <div class="bg-gray-200 h-2 rounded">
            <div id="analysis-bar-physics" class="bg-green-600 h-2 rounded" style="width:0%"></div>
          </div>
        </div>
      </div>
      <button onclick="closeStudentAnalysisModal()" class="mt-4 text-[var(--text)] hover:underline w-full text-center">Close</button>
    </div>
  </div>

  <!-- Upload Video Modal (unchanged) -->
  <div id="upload-video-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Upload Video</h3>
      <label class="block mb-2 text-[var(--text)]">Select Video</label>
      <select id="video-select" class="w-full p-2 border rounded-lg mb-4">
        <option value="intro">Introduction Video</option>
        <option value="clip1">Short Clip 1</option>
        <option value="clip2">Short Clip 2</option>
      </select>
      <label class="block mb-2 text-[var(--text)]">Video File</label>
      <input type="file" id="upload-video-input" accept="video/mp4" class="w-full p-2 border rounded-lg mb-2">
      <p id="upload-video-error" class="text-red-500 text-sm mb-2 hidden">Invalid video file (max 10MB, MP4).</p>
      <video id="upload-video-preview" controls class="w-full rounded-lg mb-2 preview"></video>
      <label class="block mb-2 text-[var(--text)]">Video Description</label>
      <textarea id="upload-video-desc-input" class="w-full p-2 border rounded-lg mb-4" rows="3"></textarea>
      <button onclick="submitVideoUpload()" class="cta-button px-4 py-2 rounded-lg w-full">Save Changes</button>
      <button onclick="closeUploadVideoModal()" class="mt-4 text-[var(--text)] hover:underline">Cancel</button>
    </div>
  </div>

  <!-- Video Description Modal (unchanged) -->
  <div id="video-desc-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Edit Video Description</h3>
      <label class="block mb-2 text-[var(--text)]">Description</label>
      <textarea id="video-desc-input" class="w-full p-2 border rounded-lg mb-4" rows="4"></textarea>
      <button onclick="submitVideoDesc()" class="cta-button px-4 py-2 rounded-lg w-full">Save</button>
      <button onclick="closeVideoDescModal()" class="mt-4 text-[var(--text)] hover:underline">Cancel</button>
    </div>
  </div>

  <!-- Comment Modal (unchanged) -->
  <div id="comment-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
    <div class="modal-content p-6 rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Student Comments</h3>
      <div id="comments-list" class="text-[var(--text)]"></div>
      <button onclick="closeCommentModal()" class="mt-4 text-[var(--text)] hover:underline">Close</button>
    </div>
  </div>

  <!-- Share Modal (unchanged) -->
  <div id="share-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Share Video</h3>
      <input type="hidden" id="share-url" value="">
      <div class="grid grid-cols-2 gap-4 mb-4">
        <a id="share-facebook" href="#" target="_blank" class="cta-button px-4 py-2 rounded-lg text-center">Facebook</a>
        <a id="share-instagram" href="#" target="_blank" class="bg-pink-600 text-white px-4 py-2 rounded-lg hover:bg-pink-700 text-center">Instagram</a>
        <a id="share-youtube" href="#" target="_blank" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 text-center">YouTube</a>
        <a id="share-tiktok" href="#" target="_blank" class="bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 text-center">TikTok</a>
        <a id="share-telegram" href="#" target="_blank" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 text-center">Telegram</a>
        <button onclick="copyLink()" class="cta-button px-4 py-2 rounded-lg">Copy Link</button>
      </div>
      <button onclick="closeShareModal()" class="mt-4 text-[var(--text)] hover:underline">Close</button>
    </div>
  </div>

  <!-- Referral Modal (unchanged) -->
  <div id="referral-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Share Your Referral Link</h3>
      <p class="text-[var(--text)] mb-4">Share your unique referral link to earn a 5% affiliate fee on registrations!</p>
      <p id="referral-code" class="text-[var(--text)] mb-2">Your Referral Code: <span id="referral-code-value">Not generated</span></p>
      <input type="text" id="referral-link" class="w-full p-2 border rounded-lg mb-4" readonly>
      <div class="grid grid-cols-2 gap-4 mb-4">
        <a id="referral-share-facebook" href="#" target="_blank" class="cta-button px-4 py-2 rounded-lg text-center">Facebook</a>
        <a id="referral-share-telegram" href="#" target="_blank" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 text-center">Telegram</a>
        <button onclick="copyReferralLink()" class="cta-button px-4 py-2 rounded-lg">Copy Link</button>
      </div>
      <button onclick="closeReferralModal()" class="mt-4 text-[var(--text)] hover:underline">Close</button>
    </div>
  </div>

  <!-- Students Modal -->
  <div id="students-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-4xl max-h-[80vh] overflow-y-auto relative">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">My Students</h3>
      <input type="text" id="student-search" class="w-1/2 p-2 border rounded-lg mb-4" placeholder="Search students by name...">
      <div class="absolute top-6 right-6 w-24 h-24 progress-circle">
        <svg class="w-full h-full" viewBox="0 0 100 100">
          <circle cx="50" cy="50" r="45" stroke="#e5e7eb" stroke-width="8" fill="none"/>
          <circle id="overall-progress-arc" cx="50" cy="50" r="45" stroke="#3B82F6" stroke-width="8" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="283" stroke-dashoffset="0"/>
        </svg>
        <div class="absolute inset-0 flex items-center justify-center font-bold text-lg text-[var(--text)]" id="overall-progress-label">0%</div>
        <div class="tooltip hidden top-full mt-2 w-48 bg-[var(--modal-bg)] p-3 rounded shadow-lg text-sm text-[var(--text)]">
          <div id="overall-student-progress"></div>
        </div>
      </div>
      <button onclick="openSessionSheetModal()" class="cta-button px-4 py-2 rounded-lg mb-4">View Session Sheet</button>
      <table class="w-full text-left">
        <thead>
          <tr class="bg-gray-200">
            <th class="p-2">Student Name</th>
            <th class="p-2">Subjects</th>
            <th class="p-2">Next Session</th>
            <th class="p-2">Progress</th>
            <th class="p-2">Details</th>
          </tr>
        </thead>
        <tbody id="student-table">
          <tr>
            <td class="p-2">Abebe Kebede</td>
            <td class="p-2">Math, Physics</td>
            <td class="p-2">May 20, 2025, 2:00 PM</td>
            <td class="p-2">
              <div class="relative inline-block progress-circle">
                <svg class="w-12 h-12" viewBox="0 0 100 100">
                  <circle cx="50" cy="50" r="45" stroke="#e5e7eb" stroke-width="8" fill="none"/>
                  <circle class="student-progress-arc" cx="50" cy="50" r="45" stroke="#3B82F6" stroke-width="8" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="283" stroke-dashoffset="141.5"/>
                </svg>
                <div class="absolute inset-0 flex items-center justify-center font-bold text-sm text-[var(--text)]">50%</div>
                <div class="tooltip hidden top-full mt-2 w-48 bg-[var(--modal-bg)] p-3 rounded shadow-lg text-sm text-[var(--text)]">
                  <div class="mb-1">Math: <span>60%</span></div>
                  <div class="bg-gray-200 h-2 rounded mb-2">
                    <div class="bg-blue-600 h-2 rounded" style="width:60%"></div>
                  </div>
4590                  <div class="mb-1">Physics: <span>40%</span></div>
                  <div class="bg-gray-200 h-2 rounded">
                    <div class="bg-green-600 h-2 rounded" style="width:40%"></div>
                  </div>
                </div>
              </div>
            </td>
            <td class="p-2">
              <button onclick="openStudentDetailsModal(1)" class="cta-button px-2 py-1 rounded">View</button>
            </td>
          </tr>
        </tbody>
      </table>
      <button onclick="closeStudentsModal()" class="mt-4 text-[var(--text)] hover:underline">Close</button>
    </div>
  </div>

  <!-- Session Sheet Modal (unchanged) -->
  <div id="session-sheet-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-4xl max-h-[80vh] overflow-y-auto">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Session Sheet</h3>
      <table class="w-full text-left">
        <thead>
          <tr class="bg-gray-200">
            <th class="p-2">Date</th>
            <th class="p-2">Time</th>
            <th class="p-2">Duration</th>
            <th class="p-2">Student</th>
            <th class="p-2">Subjects</th>
            <th class="p-2">Cost</th>
            <th class="p-2">Status</th>
            <th class="p-2">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="p-2">May 20, 2025</td>
            <td class="p-2">2:00 PM</td>
            <td class="p-2">80 min</td>
            <td class="p-2">Abebe Kebede</td>
            <td class="p-2">Math, Physics</td>
            <td class="p-2">1000 birr</td>
            <td class="p-2" id="session-1-status">Scheduled</td>
            <td class="p-2">
              <button id="session-1-confirm" onclick="confirmAttendance(1, 'tutor')" class="cta-button px-2 py-1 rounded">Confirm Attendance</button>
              <button id="session-1-wait" onclick="confirmWaiting(1, 'tutor')" class="bg-yellow-600 text-white px-2 py-1 rounded hover:bg-yellow-700 hidden">Confirm Waiting</button>
              <button id="session-1-makeup" onclick="proposeMakeup(1)" class="cta-button px-2 py-1 rounded hidden">Propose Makeup</button>
              <button id="session-1-subjects" onclick="openSubjectsModal(1)" class="cta-button px-2 py-1 rounded">Edit Subjects</button>
            </td>
          </tr>
        </tbody>
      </table>
      <button onclick="closeSessionSheetModal()" class="mt-4 text-[var(--text)] hover:underline">Close</button>
    </div>
  </div>

  <!-- Subjects Modal (unchanged) -->
  <div id="subjects-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Edit Session Subjects</h3>
      <label class="block mb-2 text-[var(--text)]">Select Subjects</label>
      <div class="mb-4">
        <label class="block"><input type="checkbox" id="subject-Math" value="Math"> Math</label>
        <label class="block"><input type="checkbox" id="subject-Physics" value="Physics"> Physics</label>
      </div>
      <button onclick="submitSubjects()" class="cta-button px-4 py-2 rounded-lg w-full">Save</button>
      <button onclick="closeSubjectsModal()" class="mt-4 text-[var(--text)] hover:underline">Cancel</button>
    </div>
  </div>

  <!-- Makeup Modal (unchanged) -->
  <div id="makeup-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Propose Makeup Session</h3>
      <label class="block mb-2 text-[var(--text)]">Date</label>
      <input type="date" id="makeup-date" class="w-full p-2 border rounded-lg mb-4">
      <label class="block mb-2 text-[var(--text)]">Time</label>
      <input type="time" id="makeup-time" step="300" class="w-full p-2 border rounded-lg mb-4">
      <button onclick="submitMakeup()" class="cta-button px-4 py-2 rounded-lg w-full">Propose</button>
      <button onclick="closeMakeupModal()" class="mt-4 text-[var(--text)] hover:underline">Cancel</button>
    </div>
  </div>

  <!-- Notification Modal (unchanged) -->
  <div id="notification-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Notifications</h3>
      <div id="notification-content" class="text-[var(--text)]">You have no notifications.</div>
      <button onclick="closeNotificationModal()" class="mt-4 text-[var(--text)] hover:underline">Close</button>
    </div>
  </div>

  <!-- Chat Modal (unchanged) -->
  <div id="chat-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto flex flex-col">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]" id="chat-student-name">Chat</h3>
      <div id="chat-messages" class="flex-1 overflow-y-auto mb-4 p-4 bg-gray-100 rounded-lg"></div>
      <div class="flex gap-2">
        <input type="text" id="chat-input" class="flex-1 p-2 border rounded-lg" placeholder="Type your message...">
        <button onclick="sendMessage()" class="cta-button px-4 py-2 rounded-lg">Send</button>
      </div>
      <button onclick="closeChatModal()" class="mt-4 text-[var(--text)] hover:underline">Close</button>
    </div>
  </div>

  <!-- Video Call Modal (unchanged) -->
  <div id="video-call-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
    <div class="modal-content p-6 rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto">
      <h3 class="text-2xl font-bold mb-4 text-[var(--heading)]">Video Call</h3>
      <p class="text-[var(--text)]">Video call functionality to be implemented.</p>
      <button onclick="closeVideoCallModal()" class="mt-4 text-[var(--text)] hover:underline">Close</button>
    </div>
  </div>

  <!-- Footer (unchanged) -->
  <footer class="py-8">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div>
          <h3 class="text-xl font-semibold mb-4 text-[var(--footer-text)]">ASTEGNI</h3>
          <p class="text-[var(--footer-text)]">Connecting tutors and students for quality education in Ethiopia.</p>
        </div>
        <div>
          <h3 class="text-xl font-semibold mb-4 text-[var(--footer-text)]">Quick Links</h3>
          <ul>
            <li><a href="../index.html" class="text-[var(--footer-text)] hover:underline">Home</a></li>
            <li><a href="find-tutors.html" class="text-[var(--footer-text)] hover:underline">Find Students</a></li>
            <li><a href="about.html" class="text-[var(--footer-text)] hover:underline">About Us</a></li>
            <li><a href="contact.html" class="text-[var(--footer-text)] hover:underline">Contact</a></li>
          </ul>
        </div>
        <div>
          <h3 class="text-xl font-semibold mb-4 text-[var(--footer-text)]">Contact Us</h3>
          <p class="text-[var(--footer-text)]">Email: <a href="mailto:info@astegni.et" class="hover:underline">info@astegni.et</a></p>
          <p class="text-[var(--footer-text)]">Phone: +251-912-345-678</p>
          <div class="flex space-x-4 mt-4">
            <a href="https://facebook.com/astegni" target="_blank" class="text-[var(--footer-text)] hover:text-[var(--nav-link-hover)]">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.5 7.09h-2.07c-.28 0-.5.22-.5.5v1.41h2.57l-.34 2.59h-2.23v6.41h-2.59v-6.41H9.5v-2.59h1.84V9.59c0-1.81 1.1-2.8 2.71-2.8h1.95v2.3z"/></svg>
            </a>
            <a href="https://x.com/astegni" target="_blank" class="text-[var(--footer-text)] hover:text-[var(--nav-link-hover)]">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
            </a>
            <a href="https://linkedin.com/company/astegni" target="_blank" class="text-[var(--footer-text)] hover:text-[var(--nav-link-hover)]">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2.5 16.5h-2v-7h2v7zm-1-7.9c-.7 0-1.2-.6-1.2-1.3s.5-1.3 1.2-1.3 1.2.6 1.2 1.3-.5 1.3-1.2 1.3zm9.5 7.9h-2v-4c0-.9-.3-1.5-1.1-1.5-.6 0-1 .4-1.1 1v4.5h-2v-7h2v1.1c.3-.5.9-.8 1.6-.8 1.2 0 2.1.7 2.1 2.2v4.5z"/></svg>
            </a>
          </div>
        </div>
      </div>
      <div class="mt-8 text-center text-[var(--footer-text)]">
        <p>&copy; 2025 ASTEGNI. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script>
    // Sample tutor data
    let tutor = {
      name: "Amanuel Tesfaye",
      gender: "Male",
      address: "Not set",
      school: "Not set",
      courses: [
        { name: "Algebra", feeType: "hourly", fee: 350 },
        { name: "Geometry", feeType: "hourly", fee: 350 },
        { name: "Physics 101", feeType: "hourly", fee: 400 }
      ],
      paymentMethod: "Not set",
      aboutMe: "Hi, I'm Amanuel, a passionate tutor with 5 years of experience in teaching Math and Physics. I focus on making complex concepts simple and engaging for students.",
      certifications: [],
      socials: { facebook: "#", twitter: "#", linkedin: "#" },
      profilePicture: "pictures/profile_picture.png",
      coverPicture: "https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=150&q=80",
      rating: null
    };

    // Sample student data
    let students = {
      1: {
        name: "Abebe Kebede",
        phone: "+251912345678",
        email: "abebe.kebede@example.com",
        subjects: ["Math", "Physics"],
        nextSession: "May 20, 2025, 2:00 PM",
        progress: { overall: 50, math: 60, physics: 40 },
        sessionHistory: [
          { date: "May 20, 2025", time: "2:00 PM", subjects: ["Math", "Physics"], cost: 1000, status: "Scheduled" }
        ]
      }
    };

    // Theme toggle
    document.getElementById('theme-toggle')?.addEventListener('click', () => {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      html.setAttribute('data-theme', currentTheme === 'light' ? 'dark' : 'light');
    });

    document.getElementById('mobile-theme-toggle')?.addEventListener('click', () => {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      html.setAttribute('data-theme', currentTheme === 'light' ? 'dark' : 'light');
    });

    // Mobile menu toggle
    document.getElementById('menu-btn')?.addEventListener('click', () => {
      const mobileMenu = document.getElementById('mobile-menu');
      mobileMenu.classList.toggle('hidden');
    });

    // Initialize profile data
    function initializeProfile() {
      document.getElementById('tutor-name').textContent = tutor.name;
      document.getElementById('tutor-gender').textContent = `Gender: ${tutor.gender}`;
      document.getElementById('tutor-address').textContent = `Address: ${tutor.address}`;
      document.getElementById('tutor-school').textContent = `School: ${tutor.school}`;
      document.getElementById('courses').textContent = `Courses: ${tutor.courses.map(c => `${c.name} (${c.feeType}: ${c.fee} birr)`).join(", ")}`;
      document.getElementById('payment-method').textContent = `Payment Method: ${tutor.paymentMethod}`;
      document.getElementById('tutor-about-me').textContent = tutor.aboutMe;
      document.getElementById('edit-about-me').value = tutor.aboutMe;
      updateCertificationsDisplay();
      updateSocialsDisplay();
      document.getElementById('profile-picture').src = tutor.profilePicture;
      document.getElementById('cover-photo').style.backgroundImage = `url(${tutor.coverPicture})`;
      updateRating(tutor.rating);
    }

    // Update certifications display
    function updateCertificationsDisplay() {
      const certDiv = document.getElementById('tutor-certifications');
      certDiv.innerHTML = tutor.certifications.length > 0
        ? tutor.certifications.map(cert => `
            <div class="mb-2">
              <p><strong>${cert.title}</strong> from ${cert.school}, ${cert.address}</p>
              ${cert.file ? `<a href="${cert.file}" target="_blank" class="text-blue-500 hover:underline">View Certificate</a>` : ''}
            </div>
          `).join('')
        : 'No certifications added.';
    }

    // Update socials display
    function updateSocialsDisplay() {
      const socialLinks = [
        { id: 'social-facebook', key: 'facebook' },
        { id: 'social-twitter', key: 'twitter' },
        { id: 'social-linkedin', key: 'linkedin' }
      ];
      socialLinks.forEach(link => {
        const element = document.getElementById(link.id);
        if (tutor.socials[link.key] && tutor.socials[link.key] !== '#') {
          element.href = tutor.socials[link.key];
          element.style.display = 'inline-flex';
        } else {
          element.style.display = 'none';
        }
      });
    }

    // Toggle edit fields
    function toggleEditField(field) {
      console.log(`Toggling edit field: ${field}`);
      const viewElement = document.getElementById(`tutor-${field}`);
      const editElement = document.getElementById(`edit-${field}`);
      const buttonsElement = document.getElementById(`${field}-buttons`);
      if (!viewElement || !editElement || !buttonsElement) {
        console.error(`Element not found for field: ${field}`);
        return;
      }
      viewElement.classList.toggle('edit-field-hidden');
      editElement.classList.toggle('edit-field-hidden');
      buttonsElement.classList.toggle('edit-field-hidden');
    }

    // Save About Me
    function saveAboutMe() {
      const aboutMeInput = document.getElementById('edit-about-me');
      if (aboutMeInput.value.trim()) {
        tutor.aboutMe = aboutMeInput.value.trim();
        document.getElementById('tutor-about-me').textContent = tutor.aboutMe;
        toggleEditField('about-me');
      } else {
        alert('Please enter a valid description.');
      }
    }

    // Save Certifications
    function saveCertifications() {
      const title = document.getElementById('edit-certification-title').value.trim();
      const school = document.getElementById('edit-certification-school').value.trim();
      const address = document.getElementById('edit-certification-address').value.trim();
      const fileInput = document.getElementById('edit-certification-file');
      const file = fileInput.files[0];
      let fileUrl = '';

      if (!title || !school || !address) {
        alert('Please fill in all certification fields.');
        return;
      }

      if (file) {
        if (file.size > 5 * 1024 * 1024) {
          document.getElementById('certification-file-error').classList.remove('hidden');
          return;
        }
        const validTypes = ['image/jpeg', 'image/png', 'image/gif', 'application/pdf'];
        if (!validTypes.includes(file.type)) {
          document.getElementById('certification-file-error').classList.remove('hidden');
          return;
        }
        fileUrl = URL.createObjectURL(file);
      }

      tutor.certifications.push({ title, school, address, file: fileUrl });
      updateCertificationsDisplay();
      document.getElementById('edit-certification-title').value = '';
      document.getElementById('edit-certification-school').value = '';
      document.getElementById('edit-certification-address').value = '';
      fileInput.value = '';
      document.getElementById('certification-file-preview').innerHTML = '';
      document.getElementById('certification-file-error').classList.add('hidden');
      toggleEditField('certifications');
    }

    // Save Socials
    function saveSocials() {
      const facebook = document.getElementById('edit-social-facebook').value.trim();
      const twitter = document.getElementById('edit-social-twitter').value.trim();
      const linkedin = document.getElementById('edit-social-linkedin').value.trim();

      const urlRegex = /^(https?:\/\/)?([\w-]+\.)+[\w-]+(\/[\w- ./?%&=]*)?$/;
      if ((facebook && !urlRegex.test(facebook)) || (twitter && !urlRegex.test(twitter)) || (linkedin && !urlRegex.test(linkedin))) {
        alert('Please enter valid URLs for social media links.');
        return;
      }

      tutor.socials = {
        facebook: facebook || '#',
        twitter: twitter || '#',
        linkedin: linkedin || '#'
      };
      updateSocialsDisplay();
      toggleEditField('socials');
    }

    // Update rating
    function updateRating(rating) {
      const ratingArc = document.getElementById('rating-arc');
      const ratingLabel = document.getElementById('rating-label');
      const ratingStars = document.getElementById('tutor-rating-stars');
      if (rating) {
        const percentage = (rating / 5) * 100;
        const dashoffset = 283 - (283 * percentage) / 100;
        ratingArc.style.strokeDashoffset = dashoffset;
        ratingLabel.textContent = `${Math.round(percentage)}%`;
        ratingStars.innerHTML = '‚òÖ'.repeat(Math.round(rating)) + '‚òÜ'.repeat(5 - Math.round(rating));
      } else {
        ratingArc.style.strokeDashoffset = 283;
        ratingLabel.textContent = 'N/A';
        ratingStars.textContent = 'No rating';
      }
    }

    // Modal functions
    function openEditProfileModal() {
      document.getElementById('edit-profile-modal').classList.remove('hidden');
    }

    function closeEditProfileModal() {
      document.getElementById('edit-profile-modal').classList.add('hidden');
    }

    function openEditProfilePictureModal() {
      document.getElementById('edit-profile-picture-modal').classList.remove('hidden');
    }

    function closeEditProfilePictureModal() {
      document.getElementById('edit-profile-picture-modal').classList.add('hidden');
    }

    function openEditCoverPictureModal() {
      document.getElementById('edit-cover-picture-modal').classList.remove('hidden');
    }

    function closeEditCoverPictureModal() {
      document.getElementById('edit-cover-picture-modal').classList.add('hidden');
    }

    function openStudentsModal() {
      document.getElementById('students-modal').classList.remove('hidden');
      updateStudentsTable();
    }

    function closeStudentsModal() {
      document.getElementById('students-modal').classList.add('hidden');
    }

    function openStudentDetailsModal(studentId) {
      const student = students[studentId];
      if (!student) return;
      const modal = document.getElementById('student-details-modal');
      modal.dataset.studentId = studentId;
      document.getElementById('student-detail-name').textContent = `Name: ${student.name}`;
      document.getElementById('student-detail-phone').textContent = `Phone: ${student.phone}`;
      document.getElementById('student-detail-email').textContent = `Email: ${student.email}`;
      document.getElementById('student-detail-subjects').textContent = `Subjects: ${student.subjects.join(", ")}`;
      document.getElementById('student-detail-session').textContent = `Next Session: ${student.nextSession}`;
      const progressArc = document.getElementById('detail-progress-arc');
      const progressLabel = document.getElementById('detail-progress-label');
      progressArc.style.strokeDashoffset = 283 - (283 * student.progress.overall) / 100;
      progressLabel.textContent = `${student.progress.overall}%`;
      document.getElementById('detail-subj-math').textContent = `${student.progress.math}%`;
      document.getElementById('detail-bar-math').style.width = `${student.progress.math}%`;
      document.getElementById('detail-subj-physics').textContent = `${student.progress.physics}%`;
      document.getElementById('detail-bar-physics').style.width = `${student.progress.physics}%`;
      const historyTable = document.getElementById('student-session-history').querySelector('tbody');
      historyTable.innerHTML = student.sessionHistory.map(session => `
        <tr>
          <td class="p-2">${session.date}</td>
          <td class="p-2">${session.time}</td>
          <td class="p-2">${session.subjects.join(", ")}</td>
          <td class="p-2">${session.cost} birr</td>
          <td class="p-2">${session.status}</td>
        </tr>
      `).join('');
      modal.classList.remove('hidden');
    }

    function closeStudentDetailsModal() {
      document.getElementById('student-details-modal').classList.add('hidden');
    }

    function backToStudentsModal() {
      closeStudentDetailsModal();
      openStudentsModal();
    }

    function openCommentModal() {
      document.getElementById('comment-modal').classList.remove('hidden');
    }

    function closeCommentModal() {
      document.getElementById('comment-modal').classList.add('hidden');
    }

    function openReferralModal() {
      document.getElementById('referral-modal').classList.remove('hidden');
    }

    function closeReferralModal() {
      document.getElementById('referral-modal').classList.add('hidden');
    }

    function openChatModal(studentId, type = 'student') {
      document.getElementById('chat-modal').classList.remove('hidden');
    }

    function closeChatModal() {
      document.getElementById('chat-modal').classList.add('hidden');
    }

    function openVideoCallModal(studentId) {
      document.getElementById('video-call-modal').classList.remove('hidden');
    }

    function closeVideoCallModal() {
      document.getElementById('video-call-modal').classList.add('hidden');
    }

    function openParentProfileModal(studentId) {
      document.getElementById('parent-profile-modal').classList.remove('hidden');
    }

    function closeParentProfileModal() {
      document.getElementById('parent-profile-modal').classList.add('hidden');
    }

    function openStudentAnalysisModal(studentId) {
      document.getElementById('student-analysis-modal').classList.remove('hidden');
    }

    function closeStudentAnalysisModal() {
      document.getElementById('student-analysis-modal').classList.add('hidden');
    }

    function openSessionSheetModal() {
      document.getElementById('session-sheet-modal').classList.remove('hidden');
    }

    function closeSessionSheetModal() {
      document.getElementById('session-sheet-modal').classList.add('hidden');
    }

    function openSubjectsModal(sessionId) {
      document.getElementById('subjects-modal').classList.remove('hidden');
    }

    function closeSubjectsModal() {
      document.getElementById('subjects-modal').classList.add('hidden');
    }

    function openMakeupModal() {
      document.getElementById('makeup-modal').classList.remove('hidden');
    }

    function closeMakeupModal() {
      document.getElementById('makeup-modal').classList.add('hidden');
    }

    function openNotificationModal() {
      document.getElementById('notification-modal').classList.remove('hidden');
    }

    function closeNotificationModal() {
      document.getElementById('notification-modal').classList.add('hidden');
    }

    function openUploadVideoModal() {
      document.getElementById('upload-video-modal').classList.remove('hidden');
    }

    function closeUploadVideoModal() {
      document.getElementById('upload-video-modal').classList.add('hidden');
    }

    function openVideoDescModal(videoId) {
      document.getElementById('video-desc-modal').classList.remove('hidden');
    }

    function closeVideoDescModal() {
      document.getElementById('video-desc-modal').classList.add('hidden');
    }

    function openShareModal(videoId) {
      document.getElementById('share-modal').classList.remove('hidden');
    }

    function closeShareModal() {
      document.getElementById('share-modal').classList.add('hidden');
    }

    function openVideoCommentModal(videoId) {
      document.getElementById('comment-modal').classList.remove('hidden');
    }

    // Update students table
    function updateStudentsTable() {
      const tableBody = document.getElementById('student-table');
      tableBody.innerHTML = Object.keys(students).map(id => `
        <tr>
          <td class="p-2">${students[id].name}</td>
          <td class="p-2">${students[id].subjects.join(", ")}</td>
          <td class="p-2">${students[id].nextSession}</td>
          <td class="p-2">
            <div class="relative inline-block progress-circle">
              <svg class="w-12 h-12" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="45" stroke="#e5e7eb" stroke-width="8" fill="none"/>
                <circle class="student-progress-arc" cx="50" cy="50" r="45" stroke="#3B82F6" stroke-width="8" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="283" stroke-dashoffset="${283 - (283 * students[id].progress.overall) / 100}"/>
              </svg>
              <div class="absolute inset-0 flex items-center justify-center font-bold text-sm text-[var(--text)]">${students[id].progress.overall}%</div>
              <div class="tooltip hidden top-full mt-2 w-48 bg-[var(--modal-bg)] p-3 rounded shadow-lg text-sm text-[var(--text)]">
                <div class="mb-1">Math: <span>${students[id].progress.math}%</span></div>
                <div class="bg-gray-200 h-2 rounded mb-2">
                  <div class="bg-blue-600 h-2 rounded" style="width:${students[id].progress.math}%"></div>
                </div>
                <div class="mb-1">Physics: <span>${students[id].progress.physics}%</span></div>
                <div class="bg-gray-200 h-2 rounded">
                  <div class="bg-green-600 h-2 rounded" style="width:${students[id].progress.physics}%"></div>
                </div>
              </div>
            </div>
          </td>
          <td class="p-2">
            <button onclick="openStudentDetailsModal(${id})" class="cta-button px-2 py-1 rounded">View</button>
          </td>
        </tr>
      `).join('');
    }

    // Initialize on load
    window.onload = () => {
      initializeProfile();
      updateStudentsTable();
    };
  </script>
</body>
</html>