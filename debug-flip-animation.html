<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Counter Flip Animation Debug Tool</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            padding: 20px;
            background: #1e1e1e;
            color: #d4d4d4;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: #4fc3f7;
            border-bottom: 2px solid #4fc3f7;
            padding-bottom: 10px;
        }
        h2 {
            color: #81c784;
            margin-top: 30px;
        }
        .section {
            background: #252526;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #4fc3f7;
        }
        .error {
            color: #f44336;
            background: #3a1f1f;
            padding: 10px;
            border-left: 4px solid #f44336;
            margin: 10px 0;
        }
        .success {
            color: #4caf50;
            background: #1f3a1f;
            padding: 10px;
            border-left: 4px solid #4caf50;
            margin: 10px 0;
        }
        .warning {
            color: #ff9800;
            background: #3a2f1f;
            padding: 10px;
            border-left: 4px solid #ff9800;
            margin: 10px 0;
        }
        .code {
            background: #1e1e1e;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            margin: 10px 0;
        }
        button {
            background: #4fc3f7;
            color: #1e1e1e;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 10px 5px 10px 0;
        }
        button:hover {
            background: #29b6f6;
        }
        #results {
            margin-top: 20px;
        }
        pre {
            background: #1e1e1e;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .prop {
            margin: 5px 0;
            padding: 5px;
            background: #2d2d30;
            border-radius: 3px;
        }
        .prop-name {
            color: #9cdcfe;
            font-weight: bold;
        }
        .prop-value {
            color: #ce9178;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Counter Flip Animation Debug Tool</h1>

        <div class="section">
            <h2>Instructions</h2>
            <p>This tool will help diagnose why the counter flip animations aren't working on astegni.com</p>
            <ol>
                <li>Open <strong>astegni.com</strong> in a new tab</li>
                <li>Press <strong>F12</strong> to open Developer Tools</li>
                <li>Go to the <strong>Console</strong> tab</li>
                <li>Copy and paste the debug script below into the console</li>
                <li>Press <strong>Enter</strong> to run it</li>
                <li>Review the output to identify the issue</li>
            </ol>
        </div>

        <div class="section">
            <h2>Debug Script</h2>
            <p>Copy this entire script and paste it into the browser console on astegni.com:</p>
            <div class="code">
                <pre id="debugScript">console.clear();
console.log('%cüîç COUNTER FLIP ANIMATION DEBUGGER', 'background: #4fc3f7; color: #000; padding: 10px; font-size: 16px; font-weight: bold;');
console.log('=' .repeat(80));

// Test 1: Check if counter flip cards exist
console.log('\n%c[TEST 1] Checking Counter Flip Card Elements', 'color: #81c784; font-weight: bold; font-size: 14px;');
const flipCards = document.querySelectorAll('.counter-flip-card');
console.log(`Found ${flipCards.length} counter-flip-card elements`);

if (flipCards.length === 0) {
    console.error('%c‚ùå ERROR: No .counter-flip-card elements found!', 'color: #f44336; font-weight: bold;');
    console.log('Expected 3 cards. Check if the HTML structure is correct.');
} else {
    console.log('%c‚úÖ SUCCESS: Counter flip cards found', 'color: #4caf50; font-weight: bold;');
    flipCards.forEach((card, index) => {
        console.log(`  Card ${index + 1}:`, card);
    });
}

// Test 2: Check if CSS file is loaded
console.log('\n%c[TEST 2] Checking CSS Files', 'color: #81c784; font-weight: bold; font-size: 14px;');
const cssLinks = Array.from(document.querySelectorAll('link[rel="stylesheet"]'));
const heroCSS = cssLinks.find(link => link.href.includes('hero-section.css'));

if (heroCSS) {
    console.log('%c‚úÖ hero-section.css is loaded:', 'color: #4caf50; font-weight: bold;');
    console.log('  URL:', heroCSS.href);
} else {
    console.error('%c‚ùå ERROR: hero-section.css not found!', 'color: #f44336; font-weight: bold;');
}

console.log('\nAll CSS files loaded:');
cssLinks.forEach(link => {
    console.log(`  - ${link.href}`);
});

// Test 3: Check computed styles on flip cards
console.log('\n%c[TEST 3] Checking Computed Styles', 'color: #81c784; font-weight: bold; font-size: 14px;');
if (flipCards.length > 0) {
    flipCards.forEach((card, index) => {
        const inner = card.querySelector('.counter-flip-inner');
        if (inner) {
            const styles = window.getComputedStyle(inner);
            console.log(`\n  Card ${index + 1} (.counter-flip-inner) styles:`);
            console.log(`    animation: ${styles.animation}`);
            console.log(`    animation-name: ${styles.animationName}`);
            console.log(`    animation-duration: ${styles.animationDuration}`);
            console.log(`    animation-delay: ${styles.animationDelay}`);
            console.log(`    animation-iteration-count: ${styles.animationIterationCount}`);
            console.log(`    transform: ${styles.transform}`);
            console.log(`    transform-style: ${styles.transformStyle}`);
            console.log(`    perspective: ${window.getComputedStyle(card).perspective}`);

            if (styles.animationName === 'none') {
                console.error(`    %c‚ùå No animation applied to card ${index + 1}!`, 'color: #f44336; font-weight: bold;');
            } else {
                console.log(`    %c‚úÖ Animation detected: ${styles.animationName}`, 'color: #4caf50; font-weight: bold;');
            }
        } else {
            console.error(`  %c‚ùå Card ${index + 1} missing .counter-flip-inner!`, 'color: #f44336; font-weight: bold;');
        }
    });
}

// Test 4: Check if autoFlipCounter keyframes exist
console.log('\n%c[TEST 4] Checking CSS Animation Keyframes', 'color: #81c784; font-weight: bold; font-size: 14px;');
try {
    const sheets = Array.from(document.styleSheets);
    let foundKeyframes = false;

    for (const sheet of sheets) {
        try {
            const rules = Array.from(sheet.cssRules || []);
            const keyframeRule = rules.find(rule =>
                rule.type === CSSRule.KEYFRAMES_RULE && rule.name === 'autoFlipCounter'
            );

            if (keyframeRule) {
                foundKeyframes = true;
                console.log('%c‚úÖ Found @keyframes autoFlipCounter', 'color: #4caf50; font-weight: bold;');
                console.log('  Defined in:', sheet.href || 'inline styles');
                console.log('  Keyframe rule:', keyframeRule.cssText.substring(0, 200) + '...');
                break;
            }
        } catch (e) {
            // Cross-origin stylesheets - skip
        }
    }

    if (!foundKeyframes) {
        console.error('%c‚ùå ERROR: @keyframes autoFlipCounter not found!', 'color: #f44336; font-weight: bold;');
        console.log('This means the CSS animation definition is missing.');
    }
} catch (error) {
    console.warn('%c‚ö†Ô∏è Could not check keyframes (cross-origin restrictions)', 'color: #ff9800; font-weight: bold;');
    console.log('Error:', error.message);
}

// Test 5: Check for CSS conflicts
console.log('\n%c[TEST 5] Checking for CSS Conflicts', 'color: #81c784; font-weight: bold; font-size: 14px;');
if (flipCards.length > 0) {
    const firstCard = flipCards[0];
    const inner = firstCard.querySelector('.counter-flip-inner');

    if (inner) {
        const styles = window.getComputedStyle(inner);

        // Check for common issues
        const issues = [];

        if (styles.display === 'none' || styles.visibility === 'hidden') {
            issues.push('Element is hidden (display: none or visibility: hidden)');
        }

        if (styles.transformStyle !== 'preserve-3d') {
            issues.push(`transform-style is "${styles.transformStyle}" (should be "preserve-3d")`);
        }

        if (parseFloat(styles.width) === 0 || parseFloat(styles.height) === 0) {
            issues.push('Element has zero width or height');
        }

        if (issues.length > 0) {
            console.warn('%c‚ö†Ô∏è Potential issues found:', 'color: #ff9800; font-weight: bold;');
            issues.forEach(issue => console.log(`  - ${issue}`));
        } else {
            console.log('%c‚úÖ No obvious CSS conflicts detected', 'color: #4caf50; font-weight: bold;');
        }
    }
}

// Test 6: Check backface-visibility
console.log('\n%c[TEST 6] Checking Flip Card Face Visibility', 'color: #81c784; font-weight: bold; font-size: 14px;');
if (flipCards.length > 0) {
    const firstCard = flipCards[0];
    const front = firstCard.querySelector('.counter-flip-front');
    const back = firstCard.querySelector('.counter-flip-back');

    if (front && back) {
        const frontStyles = window.getComputedStyle(front);
        const backStyles = window.getComputedStyle(back);

        console.log('  Front face:');
        console.log(`    backface-visibility: ${frontStyles.backfaceVisibility}`);
        console.log(`    transform: ${frontStyles.transform}`);

        console.log('  Back face:');
        console.log(`    backface-visibility: ${backStyles.backfaceVisibility}`);
        console.log(`    transform: ${backStyles.transform}`);

        if (frontStyles.backfaceVisibility !== 'hidden' || backStyles.backfaceVisibility !== 'hidden') {
            console.warn('%c‚ö†Ô∏è backface-visibility should be "hidden" for both faces', 'color: #ff9800; font-weight: bold;');
        } else {
            console.log('%c‚úÖ backface-visibility correctly set', 'color: #4caf50; font-weight: bold;');
        }
    } else {
        console.error('%c‚ùå Front or back face elements not found', 'color: #f44336; font-weight: bold;');
    }
}

// Test 7: Force animation (manual test)
console.log('\n%c[TEST 7] Manual Animation Test', 'color: #81c784; font-weight: bold; font-size: 14px;');
console.log('Run this command to manually trigger a flip on the first card:');
console.log('%cdocument.querySelector(".counter-flip-inner").style.transform = "rotateY(180deg)";', 'background: #2d2d30; padding: 5px; color: #ce9178;');

// Summary
console.log('\n' + '='.repeat(80));
console.log('%cüìä DIAGNOSIS SUMMARY', 'background: #4fc3f7; color: #000; padding: 10px; font-size: 16px; font-weight: bold;');

const summary = {
    'Cards Found': flipCards.length === 3 ? '‚úÖ YES' : '‚ùå NO',
    'CSS Loaded': heroCSS ? '‚úÖ YES' : '‚ùå NO',
    'Animation Applied': flipCards.length > 0 && window.getComputedStyle(flipCards[0].querySelector('.counter-flip-inner')).animationName !== 'none' ? '‚úÖ YES' : '‚ùå NO'
};

Object.entries(summary).forEach(([key, value]) => {
    const color = value.includes('‚úÖ') ? '#4caf50' : '#f44336';
    console.log(`%c${key}: ${value}`, `color: ${color}; font-weight: bold;`);
});

console.log('\n%cNext Steps:', 'color: #4fc3f7; font-weight: bold; font-size: 14px;');
if (flipCards.length === 0) {
    console.log('1. Check that the HTML structure includes <div class="counter-flip-card"> elements');
} else if (!heroCSS) {
    console.log('1. Ensure css/index/hero-section.css is properly loaded');
} else if (flipCards.length > 0 && window.getComputedStyle(flipCards[0].querySelector('.counter-flip-inner')).animationName === 'none') {
    console.log('1. The CSS animation is not being applied. Check:');
    console.log('   - Is the @keyframes autoFlipCounter defined in hero-section.css?');
    console.log('   - Are there CSS specificity conflicts?');
    console.log('   - Is there a CSP blocking inline styles?');
} else {
    console.log('1. Animation should be working. Wait 12 seconds to see the flip.');
    console.log('2. If still not working, check browser support for CSS 3D transforms.');
}

console.log('\n' + '='.repeat(80));</pre>
                <button onclick="copyDebugScript()">üìã Copy Script</button>
            </div>
        </div>

        <div class="section">
            <h2>Quick Manual Test</h2>
            <p>After running the debug script, try this manual test in the console:</p>
            <div class="code">
                <pre>// Manually trigger flip on first card
document.querySelector('.counter-flip-inner').style.transform = 'rotateY(180deg)';

// Reset after 3 seconds
setTimeout(() => {
    document.querySelector('.counter-flip-inner').style.transform = 'rotateY(0deg)';
}, 3000);</pre>
            </div>
            <p>If this manual test works, the issue is with the CSS animation. If it doesn't work, the issue is with the 3D transform setup.</p>
        </div>

        <div class="section">
            <h2>Common Issues & Solutions</h2>

            <div class="warning">
                <strong>Issue 1: Animation name is "none"</strong><br>
                Solution: CSS animation rules aren't being applied. Check if hero-section.css is loaded and contains the animation.
            </div>

            <div class="warning">
                <strong>Issue 2: Cards don't exist in DOM</strong><br>
                Solution: HTML structure is wrong or JavaScript is removing elements. Verify counter-flip-card divs exist.
            </div>

            <div class="warning">
                <strong>Issue 3: transform-style is not "preserve-3d"</strong><br>
                Solution: 3D transforms won't work. This CSS property is essential for card flipping.
            </div>

            <div class="warning">
                <strong>Issue 4: @keyframes not found</strong><br>
                Solution: The animation definition is missing from CSS. Ensure hero-section.css is deployed correctly.
            </div>
        </div>

        <div class="section">
            <h2>Alternative: Test Locally</h2>
            <p>You can also test the animation on your local server (localhost:8081):</p>
            <ol>
                <li>Open http://localhost:8081 in your browser</li>
                <li>Run the same debug script in the console</li>
                <li>Compare results between local and production</li>
            </ol>
        </div>
    </div>

    <script>
        function copyDebugScript() {
            const script = document.getElementById('debugScript').textContent;
            navigator.clipboard.writeText(script).then(() => {
                alert('‚úÖ Debug script copied to clipboard!\n\nNow:\n1. Open astegni.com\n2. Press F12\n3. Go to Console tab\n4. Paste and press Enter');
            }).catch(err => {
                alert('‚ùå Failed to copy. Please manually select and copy the script.');
            });
        }
    </script>
</body>
</html>
