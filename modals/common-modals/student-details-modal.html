<!--
  Modal: studentDetailsModal
  Extracted from: tutor-profile.html
  Purpose: [Auto-extracted modal component]
-->

<div class="student-details-modal" id="studentDetailsModal" style="display: none;">
        <div class="modal-wrapper">
            <!-- Sidebar -->
            <div class="modal-sidebar" id="studentModalSidebar">
                <div class="sidebar-menu-item sidebar-toggle-item" onclick="toggleStudentModalSidebar()">
                    <span class="menu-item-icon">‚ò∞</span>
                    <span class="menu-item-text">Student Menu</span>
                </div>
                <div class="sidebar-menu-item" onclick="switchSection('packages')">
                    <span class="menu-item-icon">üì¶</span>
                    <span class="menu-item-text">Packages</span>
                </div>
                <div class="sidebar-menu-item" onclick="switchSection('sessions')">
                    <span class="menu-item-icon">üóìÔ∏è</span>
                    <span class="menu-item-text">Sessions</span>
                </div>
                <div class="sidebar-menu-item" onclick="switchSection('digital-whiteboard')">
                    <span class="menu-item-icon">üé®</span>
                    <span class="menu-item-text">Digital Whiteboard</span>
                </div>
                <div class="sidebar-menu-item" onclick="switchSection('coursework')">
                    <span class="menu-item-icon">üìù</span>
                    <span class="menu-item-text">Coursework</span>
                </div>
                <div class="sidebar-menu-item" onclick="switchSection('learning-resources')">
                    <span class="menu-item-icon">üìö</span>
                    <span class="menu-item-text">Learning Resources</span>
                </div>
                <div class="sidebar-menu-item active" onclick="switchSection('progress-analytics')">
                    <span class="menu-item-icon">üìä</span>
                    <span class="menu-item-text">Progress & Analytics</span>
                </div>
                <div class="sidebar-menu-item" onclick="switchSection('requests')">
                    <span class="menu-item-icon">üì®</span>
                    <span class="menu-item-text">Requests</span>
                </div>
                <div class="sidebar-menu-item" onclick="switchSection('parent')" id="parent-menu-item">
                    <span class="menu-item-icon">üë®‚Äçüë©‚Äçüëß</span>
                    <span class="menu-item-text">Parent Information</span>
                </div>
                <div class="sidebar-menu-item" onclick="switchSection('tutor')" id="tutor-menu-item">
                    <span class="menu-item-icon">üë®‚Äçüè´</span>
                    <span class="menu-item-text">Tutor Information</span>
                </div>
                <div class="sidebar-menu-item" onclick="switchSection('tuition-payments')">
                    <span class="menu-item-icon">üí∞</span>
                    <span class="menu-item-text">Tuition & Payments</span>
                </div>
                <div class="sidebar-menu-item" onclick="switchSection('rating-and-review')">
                    <span class="menu-item-icon">‚≠ê</span>
                    <span class="menu-item-text">Reviews & Ratings</span>
                </div>
            </div>

            <!-- Main Content Area (Scrollable) -->
            <div class="modal-main-content">
                <!-- Fixed Header with Profile Picture -->
                <div class="modal-header" style="display: flex; align-items: center; gap: 1rem; padding: 0.75rem 1rem; margin-bottom: 0;">
                    <img id="studentProfilePicture" src="/uploads/system_images/system_profile_pictures/boy-user-image.jpg" alt="Student" style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover; border: 3px solid var(--primary-color);">
                    <div style="flex: 1;">
                        <h2 id="studentName" style="margin: 0 0 0.25rem 0;">Abebe Kebede</h2>
                        <p id="studentSubtitle" style="margin: 0; color: var(--text-secondary);">Grade 12 ‚Ä¢ Science Stream</p>
                        <div id="studentContactInfo" style="display: flex; gap: 1rem; margin-top: 0.5rem; flex-wrap: wrap;">
                            <span id="studentEmail" style="font-size: 0.75rem; color: var(--text-muted); display: none;"><i class="fas fa-envelope"></i> </span>
                            <span id="studentPhone" style="font-size: 0.75rem; color: var(--text-muted); display: none;"><i class="fas fa-phone"></i> </span>
                            <span id="studentLocation" style="font-size: 0.75rem; color: var(--text-muted); display: none;"><i class="fas fa-map-marker-alt"></i> </span>
                        </div>
                    </div>
                    <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 0.5rem;">
                        <span id="studentEnrollmentStatus" class="badge" style="background: #10B981; color: white; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600;">Active</span>
                        <span id="studentEnrolledDate" style="font-size: 0.75rem; color: var(--text-muted);"></span>
                    </div>
                    <button class="modal-close" onclick="closeStudentDetailsModal()">‚úï</button>
                </div>

                <!-- Scrollable Sections Container -->
                <div class="sections-container">
                    <!-- Progress & Analytics Section (Merged) -->
                <div class="content-section active" id="progress-analytics">
                    <h3>Progress & Analytics</h3>

                    <!-- Two Clickable Stat Cards -->
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem; margin-bottom: 2rem;">

                        <!-- Attendance Rate Card (Clickable) -->
                        <div class="analytics-card" onclick="toggleAttendanceDetails()" style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 12px; cursor: pointer; transition: all 0.3s; border: 2px solid transparent;" onmouseover="this.style.borderColor='#10B981'; this.style.transform='translateY(-2px)'" onmouseout="this.style.borderColor='transparent'; this.style.transform='translateY(0)'">
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem;">
                                <div style="display: flex; align-items: center; gap: 0.75rem;">
                                    <div style="background: rgba(16, 185, 129, 0.1); width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                                        üìÖ
                                    </div>
                                    <div>
                                        <div style="font-size: 0.875rem; color: var(--text-secondary);">Attendance Rate</div>
                                        <div style="font-size: 2rem; font-weight: 700; color: #10B981;" id="stat-attendance">0%</div>
                                    </div>
                                </div>
                                <i class="fas fa-chevron-down" id="attendance-chevron" style="color: var(--text-muted); transition: transform 0.3s;"></i>
                            </div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Click to view attendance details & missed sessions</div>
                        </div>

                        <!-- Improvement Card (Clickable) -->
                        <div class="analytics-card" onclick="toggleImprovementDetails()" style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 12px; cursor: pointer; transition: all 0.3s; border: 2px solid transparent;" onmouseover="this.style.borderColor='#F59E0B'; this.style.transform='translateY(-2px)'" onmouseout="this.style.borderColor='transparent'; this.style.transform='translateY(0)'">
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem;">
                                <div style="display: flex; align-items: center; gap: 0.75rem;">
                                    <div style="background: rgba(245, 158, 11, 0.1); width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                                        üìà
                                    </div>
                                    <div>
                                        <div style="font-size: 0.875rem; color: var(--text-secondary);">Improvement</div>
                                        <div style="font-size: 2rem; font-weight: 700; color: #F59E0B;" id="stat-improvement">0%</div>
                                    </div>
                                </div>
                                <i class="fas fa-chevron-down" id="improvement-chevron" style="color: var(--text-muted); transition: transform 0.3s;"></i>
                            </div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Click to view performance trends & subject comparison</div>
                        </div>
                    </div>

                    <!-- Attendance Details Panel (Hidden by default) -->
                    <div id="attendance-details-panel" style="display: none; background: var(--card-bg); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem; border: 1px solid rgba(16, 185, 129, 0.2); animation: slideDown 0.3s ease;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                            <h4 style="margin: 0; display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: #10B981;">üìÖ</span> Attendance Details
                            </h4>
                            <button onclick="toggleAttendanceDetails(); event.stopPropagation();" style="background: none; border: none; cursor: pointer; color: var(--text-muted); font-size: 1.25rem;">‚úï</button>
                        </div>

                        <!-- Attendance Stats Row -->
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                            <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: #10B981;" id="attended-sessions">0</div>
                                <div style="font-size: 0.75rem; color: var(--text-secondary);">Attended</div>
                            </div>
                            <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: #EF4444;" id="missed-sessions">0</div>
                                <div style="font-size: 0.75rem; color: var(--text-secondary);">Missed</div>
                            </div>
                            <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--text-primary);" id="total-scheduled-sessions">0</div>
                                <div style="font-size: 0.75rem; color: var(--text-secondary);">Total Scheduled</div>
                            </div>
                        </div>

                        <!-- Missed Sessions List -->
                        <div>
                            <h5 style="margin: 0 0 1rem 0; font-size: 0.875rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.5px;">Missed Sessions</h5>
                            <div id="missed-sessions-list" style="display: flex; flex-direction: column; gap: 0.75rem; max-height: 250px; overflow-y: auto;">
                                <!-- Will be populated dynamically -->
                                <div style="text-align: center; padding: 2rem; color: var(--text-muted);">
                                    <i class="fas fa-check-circle" style="font-size: 2rem; color: #10B981; margin-bottom: 0.5rem;"></i>
                                    <p style="margin: 0;">No missed sessions! Great attendance!</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Improvement Details Panel (Hidden by default) -->
                    <div id="improvement-details-panel" style="display: none; background: var(--card-bg); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem; border: 1px solid rgba(245, 158, 11, 0.2); animation: slideDown 0.3s ease;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                            <h4 style="margin: 0; display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: #F59E0B;">üìà</span> Improvement Details
                            </h4>
                            <button onclick="toggleImprovementDetails(); event.stopPropagation();" style="background: none; border: none; cursor: pointer; color: var(--text-muted); font-size: 1.25rem;">‚úï</button>
                        </div>

                        <!-- Improvement Stats Row -->
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                            <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: #F59E0B;" id="improvement-rate">+0%</div>
                                <div style="font-size: 0.75rem; color: var(--text-secondary);">Improvement Rate</div>
                            </div>
                            <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary-color);" id="current-avg-grade">-</div>
                                <div style="font-size: 0.75rem; color: var(--text-secondary);">Current Avg</div>
                            </div>
                            <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--text-muted);" id="previous-avg-grade">-</div>
                                <div style="font-size: 0.75rem; color: var(--text-secondary);">Previous Avg</div>
                            </div>
                        </div>

                        <!-- Performance Trend Chart -->
                        <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                            <h5 style="margin: 0 0 1rem 0; font-size: 0.95rem; font-weight: 600;">Performance Trend</h5>
                            <canvas id="performanceTrendChart" style="width: 100%; height: 200px;"></canvas>
                        </div>

                        <!-- Subject Comparison Chart -->
                        <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 8px;">
                            <h5 style="margin: 0 0 1rem 0; font-size: 0.95rem; font-weight: 600;">Subject Comparison</h5>
                            <canvas id="subjectComparisonChart" style="width: 100%; height: 200px;"></canvas>
                        </div>
                    </div>

                    <!-- Coming Soon: Additional Features -->
                    <div style="text-align: center; padding: 2rem; background: var(--bg-secondary); border-radius: 12px;">
                        <div style="font-size: 2.5rem; margin-bottom: 0.75rem;">üìä</div>
                        <h4 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--text-primary);">More Analytics Coming Soon</h4>
                        <p style="color: var(--text-secondary); max-width: 400px; margin: 0 auto; font-size: 0.875rem;">Detailed reports, export options, and parent sharing features are under development.</p>
                    </div>
                </div>

                <!-- Packages Section (NEW) -->
                <div class="content-section" id="packages">
                    <h3>Student Packages</h3>
                    <div id="student-packages-list" style="display: flex; flex-direction: column; gap: 1rem;">
                        <!-- Will be loaded dynamically -->
                        <div class="text-center py-8 text-gray-500">
                            <i class="fas fa-spinner fa-spin text-3xl mb-3"></i>
                            <p>Loading packages...</p>
                        </div>
                    </div>
                </div>

                <!-- Coursework Section -->
                <div class="content-section" id="coursework">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <div>
                            <h3 style="margin: 0;">Coursework</h3>
                            <p style="color: var(--text-secondary); margin-top: 0.25rem;">Manage assignments, quizzes, projects, and exams for this student</p>
                        </div>
                        <button class="btn-primary" onclick="closeStudentDetailsModal(); openCourseworkMaker();" style="display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-external-link-alt"></i> Coursework
                        </button>
                    </div>

                    <!-- Coursework Stats -->
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 2rem;">
                        <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.75rem; font-weight: 700; color: var(--primary-color);" id="coursework-stat-total">0</div>
                            <div style="font-size: 0.875rem; color: var(--text-secondary);">Total</div>
                        </div>
                        <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.75rem; font-weight: 700; color: #F59E0B;" id="coursework-stat-pending">0</div>
                            <div style="font-size: 0.875rem; color: var(--text-secondary);">Pending</div>
                        </div>
                        <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.75rem; font-weight: 700; color: #10B981;" id="coursework-stat-completed">0</div>
                            <div style="font-size: 0.875rem; color: var(--text-secondary);">Completed</div>
                        </div>
                        <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.75rem; font-weight: 700; color: #8B5CF6;" id="coursework-stat-avg">-</div>
                            <div style="font-size: 0.875rem; color: var(--text-secondary);">Avg Score</div>
                        </div>
                    </div>

                    <!-- Coursework Tabs -->
                    <div style="margin-bottom: 2rem; border-bottom: 2px solid rgba(var(--border-rgb), 0.1);">
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="coursework-tab active" data-filter="all" onclick="filterStudentCoursework('all')" style="padding: 0.75rem 1.5rem; border: none; background: none; font-weight: 600; color: var(--text); cursor: pointer; position: relative; transition: all 0.3s; border-bottom: 3px solid var(--button-bg);">
                                <i class="fas fa-list"></i> All
                            </button>
                            <button class="coursework-tab" data-filter="pending" onclick="filterStudentCoursework('pending')" style="padding: 0.75rem 1.5rem; border: none; background: none; font-weight: 600; color: var(--text-muted); cursor: pointer; position: relative; transition: all 0.3s; border-bottom: 3px solid transparent;">
                                <i class="fas fa-clock"></i> Pending
                            </button>
                            <button class="coursework-tab" data-filter="submitted" onclick="filterStudentCoursework('submitted')" style="padding: 0.75rem 1.5rem; border: none; background: none; font-weight: 600; color: var(--text-muted); cursor: pointer; position: relative; transition: all 0.3s; border-bottom: 3px solid transparent;">
                                <i class="fas fa-paper-plane"></i> Submitted
                            </button>
                            <button class="coursework-tab" data-filter="graded" onclick="filterStudentCoursework('graded')" style="padding: 0.75rem 1.5rem; border: none; background: none; font-weight: 600; color: var(--text-muted); cursor: pointer; position: relative; transition: all 0.3s; border-bottom: 3px solid transparent;">
                                <i class="fas fa-check-circle"></i> Graded
                            </button>
                        </div>
                    </div>

                    <!-- Coursework Grid - Loaded dynamically from database -->
                    <div id="student-coursework-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
                        <!-- Coursework cards will be loaded dynamically via loadStudentCoursework() -->
                    </div>
                </div>

                <!-- Tuition & Payments Section -->
                <div class="content-section" id="tuition-payments">
                    <div style="margin-bottom: 2rem;">
                        <h2 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--heading);">
                            <span style="display: inline-flex; align-items: center; gap: 0.75rem;">
                                <span>üí∞</span> Tuition & Payments
                            </span>
                        </h2>
                        <p style="color: var(--text-secondary);">Track student's payment history and manage billing</p>
                    </div>

                    <!-- Payment Overview Cards -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                        <!-- Monthly Tuition Card -->
                        <div style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); border-radius: 16px; padding: 1.5rem; color: white; box-shadow: 0 4px 16px rgba(34, 197, 94, 0.3);">
                            <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                                <div style="background: rgba(255,255,255,0.2); width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                                    üí∞
                                </div>
                                <div>
                                    <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.25rem;">Monthly Tuition</div>
                                    <div style="font-size: 2rem; font-weight: 700; line-height: 1;">ETB 0</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; justify-content: space-between; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.2);">
                                <span style="font-size: 0.875rem; opacity: 0.9;">No tuition set</span>
                                <div style="background: rgba(255,255,255,0.9); color: #16a34a; font-size: 0.75rem; padding: 4px 12px; border-radius: 12px; font-weight: 600;">N/A</div>
                            </div>
                        </div>

                        <!-- Outstanding Balance Card -->
                        <div class="card" style="padding: 1.5rem; border: none;">
                            <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                                <div style="background: rgba(34, 197, 94, 0.1); width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: #22c55e;">
                                    üí≥
                                </div>
                                <div>
                                    <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 0.25rem;">Outstanding Balance</div>
                                    <div style="font-size: 2rem; font-weight: 700; line-height: 1; color: var(--heading);">ETB 0</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; justify-content: space-between; padding-top: 1rem; border-top: 1px solid rgba(var(--border-rgb), 0.1);">
                                <span style="font-size: 0.875rem; color: var(--text-secondary);">No balance</span>
                                <div style="background: #22c55e; color: white; font-size: 0.75rem; padding: 4px 12px; border-radius: 12px; font-weight: 600;">Clear</div>
                            </div>
                        </div>

                        <!-- Next Payment Card -->
                        <div class="card" style="padding: 1.5rem; border: none;">
                            <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                                <div style="background: rgba(59, 130, 246, 0.1); width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: #3b82f6;">
                                    üìÖ
                                </div>
                                <div>
                                    <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 0.25rem;">Next Payment Due</div>
                                    <div style="font-size: 1.25rem; font-weight: 700; line-height: 1; color: var(--heading);">N/A</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; justify-content: space-between; padding-top: 1rem; border-top: 1px solid rgba(var(--border-rgb), 0.1);">
                                <span style="font-size: 0.875rem; color: var(--text-secondary);">No upcoming payments</span>
                                <div style="background: #3b82f6; color: white; font-size: 0.75rem; padding: 4px 12px; border-radius: 12px; font-weight: 600;">N/A</div>
                            </div>
                        </div>
                    </div>

                    <!-- Payment History -->
                    <div>
                        <h3 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem; color: var(--heading);">Payment History</h3>

                        <!-- Coming Soon State -->
                        <div class="card" style="padding: 3rem 2rem; text-align: center;">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">üí≥</div>
                            <h4 style="font-size: 1.25rem; font-weight: 700; color: var(--heading); margin-bottom: 0.5rem;">Coming Soon</h4>
                            <p style="color: var(--text-secondary); max-width: 400px; margin: 0 auto;">
                                Payment tracking and history features are under development. You'll soon be able to manage tuition payments, view transaction history, and download receipts.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Parent Information Section -->
                <div class="content-section" id="parent">
                    <h3 style="margin-bottom: 2rem;">Parent/Guardian Information</h3>

                    <!-- Parent Contact Cards Container (dynamically populated) -->
                    <div id="parent-cards-container" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                        <!-- Loading State -->
                        <div id="parent-loading" style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
                            <i class="fas fa-spinner fa-spin" style="font-size: 2rem; color: var(--text-muted); margin-bottom: 1rem;"></i>
                            <p style="color: var(--text-secondary);">Loading parent information...</p>
                        </div>
                    </div>

                    <!-- No Parents State (hidden by default) -->
                    <div id="no-parents-state" style="display: none; text-align: center; padding: 4rem 2rem; background: var(--bg-secondary); border-radius: 12px; margin-bottom: 2rem;">
                        <div style="font-size: 4rem; margin-bottom: 1rem;">üë®‚Äçüë©‚Äçüëß</div>
                        <h4 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--text-primary);">No Parent Information</h4>
                        <p style="color: var(--text-secondary); max-width: 400px; margin: 0 auto;">This student doesn't have any linked parent or guardian accounts yet.</p>
                    </div>

                    <!-- Communication Log -->
                    <div id="communication-log-section">
                        <h4 style="margin-bottom: 1rem;">Communication History</h4>
                        <div style="text-align: center; padding: 3rem; background: var(--bg-secondary); border-radius: 12px;">
                            <div style="font-size: 2.5rem; margin-bottom: 0.75rem;">üí¨</div>
                            <h4 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--text-primary);">Coming Soon</h4>
                            <p style="color: var(--text-secondary); max-width: 400px; margin: 0 auto; font-size: 0.875rem;">Communication history with parents will be tracked here once the messaging feature is fully implemented.</p>
                        </div>
                    </div>
                </div>

                <!-- Tutor Information Section -->
                <div class="content-section" id="tutor">
                    <h3 style="margin-bottom: 2rem;">Tutor Information</h3>

                    <!-- Tutor Cards Container (dynamically populated) -->
                    <div id="tutor-cards-container" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                        <!-- Loading State -->
                        <div id="tutor-loading" style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
                            <i class="fas fa-spinner fa-spin" style="font-size: 2rem; color: var(--text-muted); margin-bottom: 1rem;"></i>
                            <p style="color: var(--text-secondary);">Loading tutor information...</p>
                        </div>
                    </div>

                    <!-- No Tutors State (hidden by default) -->
                    <div id="no-tutors-state" style="display: none; text-align: center; padding: 4rem 2rem; background: var(--bg-secondary); border-radius: 12px; margin-bottom: 2rem;">
                        <div style="font-size: 4rem; margin-bottom: 1rem;">üë®‚Äçüè´</div>
                        <h4 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--text-primary);">No Tutor Information</h4>
                        <p style="color: var(--text-secondary); max-width: 400px; margin: 0 auto;">This student is not enrolled with any tutors yet.</p>
                    </div>

                    <!-- Tutor Communication Log -->
                    <div id="tutor-communication-log-section">
                        <h4 style="margin-bottom: 1rem;">Tutor Communication History</h4>
                        <div style="text-align: center; padding: 3rem; background: var(--bg-secondary); border-radius: 12px;">
                            <div style="font-size: 2.5rem; margin-bottom: 0.75rem;">üí¨</div>
                            <h4 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--text-primary);">Coming Soon</h4>
                            <p style="color: var(--text-secondary); max-width: 400px; margin: 0 auto; font-size: 0.875rem;">Communication history with tutors will be tracked here once the messaging feature is fully implemented.</p>
                        </div>
                    </div>
                </div>

                <!-- Sessions Section -->
                <div class="content-section" id="sessions">
                    <div style="margin-bottom: 2rem;">
                        <h2 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--heading);">Sessions</h2>
                        <p style="color: var(--text-secondary);">View and manage tutoring sessions with this student</p>
                    </div>

                    <!-- Session Stats -->
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 2rem;">
                        <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 12px; text-align: center;">
                            <div id="student-total-sessions" style="font-size: 1.75rem; font-weight: 700; color: var(--primary-color);">0</div>
                            <div style="font-size: 0.875rem; color: var(--text-secondary);">Total Sessions</div>
                        </div>
                        <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 12px; text-align: center;">
                            <div id="student-completed-sessions" style="font-size: 1.75rem; font-weight: 700; color: #10B981;">0</div>
                            <div style="font-size: 0.875rem; color: var(--text-secondary);">Completed</div>
                        </div>
                        <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 12px; text-align: center;">
                            <div id="student-scheduled-sessions" style="font-size: 1.75rem; font-weight: 700; color: #3B82F6;">0</div>
                            <div style="font-size: 0.875rem; color: var(--text-secondary);">Scheduled</div>
                        </div>
                        <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 12px; text-align: center;">
                            <div id="student-session-hours" style="font-size: 1.75rem; font-weight: 700; color: #F59E0B;">0h</div>
                            <div style="font-size: 0.875rem; color: var(--text-secondary);">Total Hours</div>
                        </div>
                    </div>

                    <!-- Session Filters -->
                    <div style="display: flex; gap: 0.5rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                        <button class="session-filter-btn active" onclick="filterStudentSessions('all')" style="padding: 0.5rem 1rem; border-radius: 9999px; background: var(--primary-color); color: white; border: none; cursor: pointer; font-weight: 600;">
                            All Sessions
                        </button>
                        <button class="session-filter-btn" onclick="filterStudentSessions('scheduled')" style="padding: 0.5rem 1rem; border-radius: 9999px; background: var(--bg-secondary); color: var(--text-primary); border: none; cursor: pointer;">
                            Scheduled
                        </button>
                        <button class="session-filter-btn" onclick="filterStudentSessions('in-progress')" style="padding: 0.5rem 1rem; border-radius: 9999px; background: var(--bg-secondary); color: var(--text-primary); border: none; cursor: pointer;">
                            In Progress
                        </button>
                        <button class="session-filter-btn" onclick="filterStudentSessions('completed')" style="padding: 0.5rem 1rem; border-radius: 9999px; background: var(--bg-secondary); color: var(--text-primary); border: none; cursor: pointer;">
                            Completed
                        </button>
                        <button class="session-filter-btn" onclick="filterStudentSessions('cancelled')" style="padding: 0.5rem 1rem; border-radius: 9999px; background: var(--bg-secondary); color: var(--text-primary); border: none; cursor: pointer;">
                            Cancelled
                        </button>
                    </div>

                    <!-- Sessions Grid - Loaded dynamically from sessions table -->
                    <div id="student-sessions-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
                        <!-- Sessions will be loaded dynamically via loadStudentSessions() -->
                    </div>
                </div>

                <!-- Learning Resources Section -->
                <div class="content-section" id="learning-resources">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <div>
                            <h3 style="margin: 0;">Resource Library</h3>
                            <p style="color: var(--text-secondary); margin-top: 0.25rem;">Resources shared with this student</p>
                        </div>
                    </div>

                    <!-- Resource Stats -->
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                        <div class="card" style="padding: 1rem;">
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                                <div>
                                    <p style="font-size: 0.875rem; color: var(--text-secondary);">Total Files</p>
                                    <p style="font-size: 1.5rem; font-weight: 700;">0</p>
                                </div>
                                <div style="font-size: 2rem;">üìÅ</div>
                            </div>
                        </div>
                        <div class="card" style="padding: 1rem;">
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                                <div>
                                    <p style="font-size: 0.875rem; color: var(--text-secondary);">Documents</p>
                                    <p style="font-size: 1.5rem; font-weight: 700;">0</p>
                                </div>
                                <div style="font-size: 2rem;">üìÑ</div>
                            </div>
                        </div>
                        <div class="card" style="padding: 1rem;">
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                                <div>
                                    <p style="font-size: 0.875rem; color: var(--text-secondary);">Videos</p>
                                    <p style="font-size: 1.5rem; font-weight: 700;">0</p>
                                </div>
                                <div style="font-size: 2rem;">üé•</div>
                            </div>
                        </div>
                    </div>

                    <!-- Coming Soon Message -->
                    <div style="text-align: center; padding: 4rem 2rem; background: var(--bg-secondary); border-radius: 12px;">
                        <div style="font-size: 4rem; margin-bottom: 1rem;">üìö</div>
                        <h4 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--text-primary);">Coming Soon</h4>
                        <p style="color: var(--text-secondary); max-width: 400px; margin: 0 auto;">Share documents, videos, and other learning materials with your students. This feature is under development.</p>
                    </div>
                </div>

                <!-- Digital Whiteboard Section -->
                <div class="content-section" id="digital-whiteboard">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <div>
                            <h3 style="margin: 0;">Digital Whiteboard</h3>
                            <p style="color: var(--text-secondary); margin-top: 0.25rem;">View whiteboard sessions with this student</p>
                        </div>
                        <button class="btn-primary" onclick="openWhiteboardForCurrentStudent();" style="display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-chalkboard"></i> Digital Whiteboard
                        </button>
                    </div>

                    <!-- Whiteboard Stats -->
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 2rem;">
                        <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.75rem; font-weight: 700; color: var(--primary-color);" id="whiteboard-stat-total">0</div>
                            <div style="font-size: 0.875rem; color: var(--text-secondary);">Total Sessions</div>
                        </div>
                        <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.75rem; font-weight: 700; color: #10B981;" id="whiteboard-stat-completed">0</div>
                            <div style="font-size: 0.875rem; color: var(--text-secondary);">Completed</div>
                        </div>
                        <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.75rem; font-weight: 700; color: #F59E0B;" id="whiteboard-stat-scheduled">0</div>
                            <div style="font-size: 0.875rem; color: var(--text-secondary);">Scheduled</div>
                        </div>
                        <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.75rem; font-weight: 700; color: #8B5CF6;" id="whiteboard-stat-duration">0h</div>
                            <div style="font-size: 0.875rem; color: var(--text-secondary);">Total Duration</div>
                        </div>
                    </div>

                    <!-- Session Filter Tabs -->
                    <div style="margin-bottom: 2rem; border-bottom: 2px solid rgba(var(--border-rgb), 0.1);">
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="whiteboard-tab active" data-filter="all" onclick="filterStudentWhiteboardSessions('all')" style="padding: 0.75rem 1.5rem; border: none; background: none; font-weight: 600; color: var(--text); cursor: pointer; position: relative; transition: all 0.3s; border-bottom: 3px solid var(--button-bg);">
                                <i class="fas fa-list"></i> All
                            </button>
                            <button class="whiteboard-tab" data-filter="scheduled" onclick="filterStudentWhiteboardSessions('scheduled')" style="padding: 0.75rem 1.5rem; border: none; background: none; font-weight: 600; color: var(--text-muted); cursor: pointer; position: relative; transition: all 0.3s; border-bottom: 3px solid transparent;">
                                <i class="fas fa-calendar"></i> Scheduled
                            </button>
                            <button class="whiteboard-tab" data-filter="in-progress" onclick="filterStudentWhiteboardSessions('in-progress')" style="padding: 0.75rem 1.5rem; border: none; background: none; font-weight: 600; color: var(--text-muted); cursor: pointer; position: relative; transition: all 0.3s; border-bottom: 3px solid transparent;">
                                <i class="fas fa-play-circle"></i> In Progress
                            </button>
                            <button class="whiteboard-tab" data-filter="completed" onclick="filterStudentWhiteboardSessions('completed')" style="padding: 0.75rem 1.5rem; border: none; background: none; font-weight: 600; color: var(--text-muted); cursor: pointer; position: relative; transition: all 0.3s; border-bottom: 3px solid transparent;">
                                <i class="fas fa-check-circle"></i> Completed
                            </button>
                        </div>
                    </div>

                    <!-- Sessions Grid -->
                    <div id="student-whiteboard-sessions" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
                        <!-- Sessions will be loaded dynamically -->
                        <div class="text-center py-8 text-gray-500">
                            <i class="fas fa-spinner fa-spin text-3xl mb-3"></i>
                            <p>Loading whiteboard sessions...</p>
                        </div>
                    </div>
                </div>

                <!-- Requests Section -->
                <div class="content-section" id="requests">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <div>
                            <h3 style="margin: 0;">Requests</h3>
                            <p style="color: var(--text-secondary); margin-top: 0.25rem;">Send and manage requests with this student</p>
                        </div>
                        <button class="btn-primary" disabled style="display: flex; align-items: center; gap: 0.5rem; opacity: 0.5; cursor: not-allowed;">
                            <i class="fas fa-plus"></i> New Request
                        </button>
                    </div>

                    <!-- Request Direction Tabs -->
                    <div style="margin-bottom: 1.5rem; border-bottom: 2px solid rgba(var(--border-rgb), 0.1); opacity: 0.5;">
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="request-tab active" disabled style="padding: 0.75rem 1.5rem; border: none; background: none; font-weight: 600; color: var(--text); cursor: not-allowed; position: relative; transition: all 0.3s; border-bottom: 3px solid var(--button-bg);">
                                <i class="fas fa-list"></i> All
                            </button>
                            <button class="request-tab" disabled style="padding: 0.75rem 1.5rem; border: none; background: none; font-weight: 600; color: var(--text-muted); cursor: not-allowed; position: relative; transition: all 0.3s; border-bottom: 3px solid transparent;">
                                <i class="fas fa-paper-plane"></i> Sent
                            </button>
                            <button class="request-tab" disabled style="padding: 0.75rem 1.5rem; border: none; background: none; font-weight: 600; color: var(--text-muted); cursor: not-allowed; position: relative; transition: all 0.3s; border-bottom: 3px solid transparent;">
                                <i class="fas fa-inbox"></i> Received
                            </button>
                            <button class="request-tab" disabled style="padding: 0.75rem 1.5rem; border: none; background: none; font-weight: 600; color: var(--text-muted); cursor: not-allowed; position: relative; transition: all 0.3s; border-bottom: 3px solid transparent;">
                                <i class="fas fa-clock"></i> Pending
                            </button>
                        </div>
                    </div>

                    <!-- Request Type Filters -->
                    <div style="margin-bottom: 1.5rem; display: flex; gap: 0.5rem; flex-wrap: wrap; opacity: 0.5;">
                        <button class="request-type-btn active" disabled style="padding: 0.5rem 1rem; border: 1px solid var(--border-color); background: var(--button-bg); color: white; border-radius: 9999px; font-size: 0.875rem; cursor: not-allowed; transition: all 0.3s;">
                            All Types
                        </button>
                        <button class="request-type-btn" disabled style="padding: 0.5rem 1rem; border: 1px solid var(--border-color); background: var(--bg-secondary); color: var(--text); border-radius: 9999px; font-size: 0.875rem; cursor: not-allowed; transition: all 0.3s;">
                            Makeup Session
                        </button>
                        <button class="request-type-btn" disabled style="padding: 0.5rem 1rem; border: 1px solid var(--border-color); background: var(--bg-secondary); color: var(--text); border-radius: 9999px; font-size: 0.875rem; cursor: not-allowed; transition: all 0.3s;">
                            Reschedule
                        </button>
                        <button class="request-type-btn" disabled style="padding: 0.5rem 1rem; border: 1px solid var(--border-color); background: var(--bg-secondary); color: var(--text); border-radius: 9999px; font-size: 0.875rem; cursor: not-allowed; transition: all 0.3s;">
                            Extra Session
                        </button>
                        <button class="request-type-btn" disabled style="padding: 0.5rem 1rem; border: 1px solid var(--border-color); background: var(--bg-secondary); color: var(--text); border-radius: 9999px; font-size: 0.875rem; cursor: not-allowed; transition: all 0.3s;">
                            Leave Request
                        </button>
                        <button class="request-type-btn" disabled style="padding: 0.5rem 1rem; border: 1px solid var(--border-color); background: var(--bg-secondary); color: var(--text); border-radius: 9999px; font-size: 0.875rem; cursor: not-allowed; transition: all 0.3s;">
                            Other
                        </button>
                    </div>

                    <!-- Coming Soon Message -->
                    <div style="text-align: center; padding: 4rem 2rem; background: var(--bg-secondary); border-radius: 12px;">
                        <div style="font-size: 4rem; margin-bottom: 1rem;">üì®</div>
                        <h4 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--text-primary);">Coming Soon</h4>
                        <p style="color: var(--text-secondary); max-width: 400px; margin: 0 auto;">Send and receive requests like makeup sessions, reschedules, leave requests, and more. This feature is under development.</p>
                    </div>
                </div>

                <!-- Reviews & Ratings Section -->
                <div class="content-section" id="rating-and-review">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                        <div>
                            <h2 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--heading);">
                                <span style="display: inline-flex; align-items: center; gap: 0.75rem;">
                                    <span>‚≠ê</span> Student Reviews
                                </span>
                            </h2>
                            <p style="color: var(--text-secondary);">Rate and review this student's performance</p>
                        </div>
                        <button id="review-student-btn" class="btn-cta" style="background: var(--button-bg); color: var(--button-text); padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 0.5rem; transition: all 0.3s;" onclick="openReviewStudentModal()">
                            <i class="fas fa-star"></i> Review Student
                        </button>
                    </div>

                    <!-- Rating Overview Card -->
                    <section style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 16px; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 4px 16px rgba(245,158,11,0.3); color: white;">
                        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 2rem;">
                            <div style="flex: 1; min-width: 200px;">
                                <div style="font-size: 0.95rem; font-weight: 600; margin-bottom: 0.5rem; opacity: 0.95;">Student's Rating</div>
                                <div style="display: flex; align-items: baseline; gap: 0.75rem; margin-bottom: 0.75rem;">
                                    <div id="student-overall-rating" style="font-size: 3.5rem; font-weight: 700; line-height: 1;">0.0</div>
                                    <div style="font-size: 1.25rem; opacity: 0.9;">/ 5.0</div>
                                </div>
                                <div id="student-rating-stars" style="color: rgba(255,255,255,0.95); font-size: 1rem; margin-bottom: 1rem;">
                                    ‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ
                                </div>
                                <div id="student-review-count" style="font-size: 0.95rem; opacity: 0.9;">Based on 0 reviews</div>
                            </div>

                            <div style="flex: 2; min-width: 300px;">
                                <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                                    <!-- Subject Understanding -->
                                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                                        <span style="font-size: 0.875rem; width: 180px;">Subject Understanding</span>
                                        <div style="flex: 1; height: 8px; background: rgba(255,255,255,0.2); border-radius: 4px; overflow: hidden;">
                                            <div id="bar-subject-understanding" style="height: 100%; width: 0%; background: white; border-radius: 4px; transition: width 0.3s;"></div>
                                        </div>
                                        <span id="val-subject-understanding" style="font-size: 0.875rem; width: 40px; text-align: right; font-weight: 600;">0.0</span>
                                    </div>
                                    <!-- Participation -->
                                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                                        <span style="font-size: 0.875rem; width: 180px;">Participation</span>
                                        <div style="flex: 1; height: 8px; background: rgba(255,255,255,0.2); border-radius: 4px; overflow: hidden;">
                                            <div id="bar-participation" style="height: 100%; width: 0%; background: white; border-radius: 4px; transition: width 0.3s;"></div>
                                        </div>
                                        <span id="val-participation" style="font-size: 0.875rem; width: 40px; text-align: right; font-weight: 600;">0.0</span>
                                    </div>
                                    <!-- Discipline -->
                                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                                        <span style="font-size: 0.875rem; width: 180px;">Discipline</span>
                                        <div style="flex: 1; height: 8px; background: rgba(255,255,255,0.2); border-radius: 4px; overflow: hidden;">
                                            <div id="bar-discipline" style="height: 100%; width: 0%; background: white; border-radius: 4px; transition: width 0.3s;"></div>
                                        </div>
                                        <span id="val-discipline" style="font-size: 0.875rem; width: 40px; text-align: right; font-weight: 600;">0.0</span>
                                    </div>
                                    <!-- Punctuality -->
                                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                                        <span style="font-size: 0.875rem; width: 180px;">Punctuality</span>
                                        <div style="flex: 1; height: 8px; background: rgba(255,255,255,0.2); border-radius: 4px; overflow: hidden;">
                                            <div id="bar-punctuality" style="height: 100%; width: 0%; background: white; border-radius: 4px; transition: width 0.3s;"></div>
                                        </div>
                                        <span id="val-punctuality" style="font-size: 0.875rem; width: 40px; text-align: right; font-weight: 600;">0.0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Review Cards Container -->
                    <div id="student-reviews-container" style="display: flex; flex-direction: column; gap: 1.5rem;">
                        <!-- Reviews will be loaded dynamically -->
                        <div style="text-align: center; padding: 3rem; background: var(--bg-secondary); border-radius: 12px;">
                            <i class="fas fa-spinner fa-spin" style="font-size: 2rem; color: var(--text-muted); margin-bottom: 1rem;"></i>
                            <p style="color: var(--text-secondary);">Loading reviews...</p>
                        </div>
                    </div>
                </div>

                </div> <!-- /.sections-container -->
            </div> <!-- /.modal-main-content -->
        </div> <!-- /.modal-wrapper -->
    </div> <!-- /.student-details-modal -->

    <!-- Review Student Modal -->
    <div class="modal fade" id="reviewStudentModal" style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
        <div class="modal-dialog" style="max-width: 500px; width: 90%; margin: auto; background: var(--card-bg); border-radius: 16px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); max-height: 90vh; overflow: hidden; display: flex; flex-direction: column;">

            <!-- Minimal Header -->
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem 1.5rem; border-bottom: 1px solid rgba(var(--border-rgb), 0.1);">
                <h3 style="margin: 0; font-size: 1.125rem; font-weight: 600; color: var(--heading);">Rate Student</h3>
                <button onclick="closeReviewStudentModal()" style="background: none; border: none; color: var(--text-muted); width: 32px; height: 32px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.25rem; transition: all 0.2s;" onmouseover="this.style.background='var(--bg-secondary)'" onmouseout="this.style.background='none'">
                    √ó
                </button>
            </div>

            <!-- Modal Body -->
            <div style="padding: 1.5rem; overflow-y: auto;">
                <!-- Rating Sliders -->

                    <!-- Subject Understanding Slider -->
                    <div style="margin-bottom: 2rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                            <label style="font-weight: 600; color: var(--text); font-size: 0.95rem;">Subject Understanding</label>
                            <span id="subject-understanding-value" style="background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-weight: 700; min-width: 45px; text-align: center;">3.0</span>
                        </div>
                        <input type="range" id="subject-understanding-slider" min="1" max="5" step="0.5" value="3" style="width: 100%; height: 8px; border-radius: 5px; background: linear-gradient(90deg, #ef4444 0%, #f59e0b 25%, #fbbf24 50%, #a3e635 75%, #22c55e 100%); outline: none; -webkit-appearance: none; cursor: pointer;" oninput="updateSliderValue('subject-understanding', this.value)">
                        <div style="display: flex; justify-content: space-between; margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-muted);">
                            <span>1 - Poor</span>
                            <span>2</span>
                            <span>3</span>
                            <span>4</span>
                            <span>5 - Excellent</span>
                        </div>
                    </div>

                    <!-- Participation Slider -->
                    <div style="margin-bottom: 2rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                            <label style="font-weight: 600; color: var(--text); font-size: 0.95rem;">Participation & Engagement</label>
                            <span id="participation-value" style="background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-weight: 700; min-width: 45px; text-align: center;">3.0</span>
                        </div>
                        <input type="range" id="participation-slider" min="1" max="5" step="0.5" value="3" style="width: 100%; height: 8px; border-radius: 5px; background: linear-gradient(90deg, #ef4444 0%, #f59e0b 25%, #fbbf24 50%, #a3e635 75%, #22c55e 100%); outline: none; -webkit-appearance: none; cursor: pointer;" oninput="updateSliderValue('participation', this.value)">
                        <div style="display: flex; justify-content: space-between; margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-muted);">
                            <span>1 - Poor</span>
                            <span>2</span>
                            <span>3</span>
                            <span>4</span>
                            <span>5 - Excellent</span>
                        </div>
                    </div>

                    <!-- Discipline Slider -->
                    <div style="margin-bottom: 2rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                            <label style="font-weight: 600; color: var(--text); font-size: 0.95rem;">Discipline & Behavior</label>
                            <span id="discipline-value" style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-weight: 700; min-width: 45px; text-align: center;">3.0</span>
                        </div>
                        <input type="range" id="discipline-slider" min="1" max="5" step="0.5" value="3" style="width: 100%; height: 8px; border-radius: 5px; background: linear-gradient(90deg, #ef4444 0%, #f59e0b 25%, #fbbf24 50%, #a3e635 75%, #22c55e 100%); outline: none; -webkit-appearance: none; cursor: pointer;" oninput="updateSliderValue('discipline', this.value)">
                        <div style="display: flex; justify-content: space-between; margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-muted);">
                            <span>1 - Poor</span>
                            <span>2</span>
                            <span>3</span>
                            <span>4</span>
                            <span>5 - Excellent</span>
                        </div>
                    </div>

                    <!-- Punctuality Slider -->
                    <div style="margin-bottom: 2rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                            <label style="font-weight: 600; color: var(--text); font-size: 0.95rem;">Punctuality & Attendance</label>
                            <span id="punctuality-value" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-weight: 700; min-width: 45px; text-align: center;">3.0</span>
                        </div>
                        <input type="range" id="punctuality-slider" min="1" max="5" step="0.5" value="3" style="width: 100%; height: 8px; border-radius: 5px; background: linear-gradient(90deg, #ef4444 0%, #f59e0b 25%, #fbbf24 50%, #a3e635 75%, #22c55e 100%); outline: none; -webkit-appearance: none; cursor: pointer;" oninput="updateSliderValue('punctuality', this.value)">
                        <div style="display: flex; justify-content: space-between; margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-muted);">
                            <span>1 - Poor</span>
                            <span>2</span>
                            <span>3</span>
                            <span>4</span>
                            <span>5 - Excellent</span>
                        </div>
                    </div>

                <!-- Review Title -->
                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: var(--heading); font-size: 0.95rem;">Review Title</label>
                    <input type="text" id="review-title-input" placeholder="Summarize your review in one sentence" style="width: 100%; padding: 0.75rem; border: 2px solid rgba(var(--border-rgb), 0.2); border-radius: 8px; background: var(--card-bg); color: var(--text); font-size: 0.95rem; transition: all 0.3s;" onfocus="this.style.borderColor='#3b82f6'" onblur="this.style.borderColor='rgba(var(--border-rgb), 0.2)'">
                </div>

                <!-- Review Text -->
                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: var(--heading); font-size: 0.95rem;">Your Review</label>
                    <textarea id="review-text-input" rows="5" placeholder="Share your experience with this student..." style="width: 100%; padding: 0.75rem; border: 2px solid rgba(var(--border-rgb), 0.2); border-radius: 8px; background: var(--card-bg); color: var(--text); font-size: 0.95rem; resize: vertical; transition: all 0.3s;" onfocus="this.style.borderColor='#3b82f6'" onblur="this.style.borderColor='rgba(var(--border-rgb), 0.2)'"></textarea>
                </div>

                <!-- Submit Button -->
                <button onclick="submitStudentReview()" style="width: 100%; background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; padding: 1rem; border: none; border-radius: 12px; font-weight: 700; font-size: 1rem; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 0.5rem;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 20px rgba(59,130,246,0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                    <i class="fas fa-paper-plane"></i> Submit Review
                </button>
            </div>
        </div>
    </div>

    <!-- Delete Review Confirmation Modal -->
    <div id="deleteReviewConfirmationModal" style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 10001; align-items: center; justify-content: center;">
        <div style="max-width: 400px; width: 90%; margin: auto; background: var(--card-bg); border-radius: 16px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); overflow: hidden;">
            <!-- Header -->
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem 1.5rem; border-bottom: 1px solid rgba(var(--border-rgb), 0.1);">
                <h3 style="margin: 0; font-size: 1.125rem; font-weight: 600; color: var(--heading);">Delete Review</h3>
                <button onclick="closeDeleteReviewModal()" style="background: none; border: none; color: var(--text-muted); width: 32px; height: 32px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.25rem; transition: all 0.2s;" onmouseover="this.style.background='var(--bg-secondary)'" onmouseout="this.style.background='none'">√ó</button>
            </div>
            <!-- Body -->
            <div style="padding: 1.5rem; text-align: center;">
                <div style="width: 64px; height: 64px; background: rgba(239, 68, 68, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                    <i class="fas fa-trash-alt" style="font-size: 1.5rem; color: #ef4444;"></i>
                </div>
                <p style="color: var(--text); margin: 0 0 0.5rem; font-size: 1rem;">Are you sure you want to delete this review?</p>
                <p style="color: var(--text-muted); margin: 0; font-size: 0.875rem;">This action cannot be undone.</p>
            </div>
            <!-- Footer -->
            <div style="padding: 1rem 1.5rem; display: flex; gap: 0.75rem; border-top: 1px solid rgba(var(--border-rgb), 0.1);">
                <button onclick="closeDeleteReviewModal()" style="flex: 1; padding: 0.75rem; border: 1px solid rgba(var(--border-rgb), 0.2); border-radius: 8px; background: var(--card-bg); color: var(--text); font-weight: 600; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='var(--bg-secondary)'" onmouseout="this.style.background='var(--card-bg)'">Cancel</button>
                <button onclick="confirmDeleteReview()" style="flex: 1; padding: 0.75rem; border: none; border-radius: 8px; background: #ef4444; color: white; font-weight: 600; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#dc2626'" onmouseout="this.style.background='#ef4444'">Delete</button>
            </div>
        </div>
    </div>
