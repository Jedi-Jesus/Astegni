<!-- Chat Call Modal - Standalone version for incoming calls anywhere -->
<div id="standaloneChatCallModal" class="call-modal">
    <div class="call-modal-content">
        <!-- Incoming Call Screen -->
        <div class="incoming-call-screen" id="standaloneIncomingCallScreen" style="display: none;">
            <div class="incoming-call-avatar">
                <img src="" alt="" id="standaloneIncomingCallAvatar">
                <div class="call-pulse-ring"></div>
                <div class="call-pulse-ring delay-1"></div>
            </div>
            <h2 id="standaloneIncomingCallerName">Incoming Call</h2>
            <p class="incoming-call-type" id="standaloneIncomingCallType">Voice Call</p>
            <p class="incoming-call-status">Ringing...</p>
            <div class="incoming-call-actions">
                <button class="call-action-btn decline-btn" onclick="StandaloneChatCallManager.declineIncomingCall()" title="Decline">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                    </svg>
                </button>
                <button class="call-action-btn accept-btn" onclick="StandaloneChatCallManager.acceptIncomingCall()" title="Accept">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Active Call Screen -->
        <div class="active-call-screen" id="standaloneActiveCallScreen">
            <div class="call-header">
                <div class="call-user-info">
                    <img src="" alt="" id="chatCallUserAvatar">
                    <div>
                        <h2 id="chatCallUserName">User Name</h2>
                        <p id="chatCallUserRole">Role</p>
                        <p class="call-status" id="chatCallStatus">Connecting...</p>
                    </div>
                </div>
                <div class="call-header-controls">
                    <button class="call-close-btn" onclick="StandaloneChatCallManager.endChatCall()" title="Close">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 6L6 18M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="call-timer" id="chatCallTimer">00:00</div>

            <div class="call-video" id="chatCallVideo">
                <!-- Single participant view (1-on-1 call) -->
                <video id="chatRemoteVideo" autoplay playsinline class="main-video"></video>
                <video id="chatLocalVideo" autoplay muted playsinline class="pip-video"></video>

                <!-- Multi-participant grid (group call) -->
                <div class="call-participants-grid" id="chatParticipantsGrid" style="display: none;">
                    <!-- Participant videos will be added here dynamically -->
                </div>

                <div class="voice-call-animation" id="chatVoiceCallAnimation">
                    <div class="voice-wave">
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>

                <!-- Participant list overlay -->
                <div class="call-participants-list" id="chatParticipantsList">
                    <div class="participants-header">
                        <span>Participants (<span id="chatParticipantsCount">1</span>)</span>
                    </div>
                    <div class="participants-items" id="chatParticipantsItems">
                        <!-- Participants will be listed here -->
                    </div>
                </div>
            </div>

            <div class="call-controls" id="chatCallControls">
                <button id="chatSwitchVideoModeBtn" onclick="StandaloneChatCallManager.toggleChatCallVideo()" title="Toggle Video">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="23 7 16 12 23 17 23 7"></polygon>
                        <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                    </svg>
                </button>
                <button id="chatSwitchCallModeBtn" onclick="StandaloneChatCallManager.switchCallMode()" title="Switch to Video">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 3a2.83 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
                    </svg>
                </button>
                <button id="chatMuteBtn" onclick="StandaloneChatCallManager.toggleChatMute()" title="Toggle Mute">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                        <line x1="23" y1="9" x2="17" y2="15"></line>
                        <line x1="17" y1="9" x2="23" y2="15"></line>
                    </svg>
                </button>
                <button id="chatAddParticipantBtn" onclick="StandaloneChatCallManager.addParticipantToCall()" title="Add Participant">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="8.5" cy="7" r="4"></circle>
                        <line x1="20" y1="8" x2="20" y2="14"></line>
                        <line x1="23" y1="11" x2="17" y2="11"></line>
                    </svg>
                </button>
                <button id="chatEndCallBtn" onclick="StandaloneChatCallManager.endChatCall()" title="End Call" class="end-call">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>
</div>
