<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Find Tutors Functions</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-8">
        <h1 class="text-2xl font-bold mb-4">Function Tests</h1>

        <div class="bg-white p-4 rounded shadow mb-4">
            <h2 class="text-lg font-semibold mb-2">API Test Results:</h2>
            <div id="apiResults" class="text-sm">Testing...</div>
        </div>

        <div class="bg-white p-4 rounded shadow mb-4">
            <h2 class="text-lg font-semibold mb-2">Search Test Results:</h2>
            <div id="searchResults" class="text-sm">Testing...</div>
        </div>

        <div class="bg-white p-4 rounded shadow mb-4">
            <h2 class="text-lg font-semibold mb-2">Filter Test Results:</h2>
            <div id="filterResults" class="text-sm">Testing...</div>
        </div>
    </div>

    <!-- Load required modules -->
    <script>
        // Mock missing components that aren't essential for testing
        const SidebarManager = { init: () => console.log('SidebarManager mock loaded') };
        const StatsCounter = { init: () => console.log('StatsCounter mock loaded') };
    </script>

    <script src="js/find-tutors/api-config-&-util.js?v202602252204"></script>
    <script src="js/find-tutors/tutor-card-creator.js?v202602252204"></script>
    <script src="js/find-tutors/pagination-manager.js?v202602252204"></script>
    <script src="js/find-tutors/UI-management-new.js?v202602252204"></script>
    <script src="js/find-tutors/main-controller.js?v202602252204"></script>

    <script>
        async function runTests() {
            const apiResults = document.getElementById('apiResults');
            const searchResults = document.getElementById('searchResults');
            const filterResults = document.getElementById('filterResults');

            // Test 1: Direct API call
            try {
                console.log('üß™ Testing API call...');
                const response = await FindTutorsAPI.getTutors({ search: 'math' });
                apiResults.innerHTML = `
                    ‚úÖ <strong>API Call Success</strong><br>
                    Found ${response.tutors?.length || 0} tutors<br>
                    Total: ${response.total || 0}<br>
                    <details>
                        <summary>Sample Data</summary>
                        <pre class="text-xs mt-2 bg-gray-100 p-2 rounded">${JSON.stringify(response, null, 2)}</pre>
                    </details>
                `;
            } catch (error) {
                apiResults.innerHTML = `‚ùå <strong>API Error:</strong> ${error.message}`;
            }

            // Test 2: Search functionality
            try {
                console.log('üß™ Testing search functionality...');

                // Mock basic elements for search
                const mockSearchBar = document.createElement('input');
                mockSearchBar.value = 'mathematics';

                // Test search event
                const searchEvent = { target: mockSearchBar };

                // Initialize state if not already done
                if (typeof FindTutorsState !== 'undefined') {
                    FindTutorsState.updateFilter('search', 'mathematics');
                    const searchParams = { ...FindTutorsState.filters, page: 1, limit: 6 };
                    const searchResponse = await FindTutorsAPI.getTutors(searchParams);

                    searchResults.innerHTML = `
                        ‚úÖ <strong>Search Test Success</strong><br>
                        Search term: "mathematics"<br>
                        Found ${searchResponse.tutors?.length || 0} tutors<br>
                        Filter state: ${JSON.stringify(FindTutorsState.filters.search)}
                    `;
                } else {
                    searchResults.innerHTML = '‚ùå FindTutorsState not available';
                }
            } catch (error) {
                searchResults.innerHTML = `‚ùå <strong>Search Error:</strong> ${error.message}`;
            }

            // Test 3: Filter functionality
            try {
                console.log('üß™ Testing filter functionality...');

                if (typeof FindTutorsState !== 'undefined') {
                    // Test multiple filters
                    FindTutorsState.updateFilter('gender', 'Female');
                    FindTutorsState.updateFilter('minPrice', '200');
                    FindTutorsState.updateFilter('minRating', '4.5');

                    const filterParams = { ...FindTutorsState.filters, page: 1, limit: 6 };
                    const filterResponse = await FindTutorsAPI.getTutors(filterParams);

                    filterResults.innerHTML = `
                        ‚úÖ <strong>Filter Test Success</strong><br>
                        Applied filters: Gender=Female, MinPrice=200, MinRating=4.5<br>
                        Found ${filterResponse.tutors?.length || 0} tutors<br>
                        <details>
                            <summary>Filter Results</summary>
                            <pre class="text-xs mt-2 bg-gray-100 p-2 rounded">${JSON.stringify(filterResponse.tutors, null, 2)}</pre>
                        </details>
                    `;
                } else {
                    filterResults.innerHTML = '‚ùå FindTutorsState not available';
                }
            } catch (error) {
                filterResults.innerHTML = `‚ùå <strong>Filter Error:</strong> ${error.message}`;
            }
        }

        // Run tests when page loads
        window.addEventListener('DOMContentLoaded', () => {
            setTimeout(runTests, 500); // Give modules time to load
        });
    </script>
</body>
</html>